var RedAgate=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=99)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BarcodeBase=e.barcodeBasePropsDefault=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(13)),i=r(8),s=r(3);const o=e.barcodeBasePropsDefault=Object.assign({},s.shapePropsDefault,{fillColor:"black",font:"normal 3.5px 'OCRB'",rotation:0,height:6.35,quietWidth:2.54,quietHeight:.66,unit:"mm",drawText:!0,useRawDataAsText:!1,textHeight:3.55});e.BarcodeBase=class extends s.Shape{constructor(t,e){super(Object.assign({},o,t)),this.charactersMap=e}toImgTag(){return(0,s.toImgTag)(this)}toElementStyle(){return(0,s.toElementStyle)(this)}toDataUrl(){return(0,s.toDataUrl)(this)}toSvg(){return(0,s.toSvg)(this)}toRendered(){return n.renderAsHtml_noDefer(this)}render(t,e){let r=this.getContext(t,s.CONTEXT_SVG_CANVAS);const n=Boolean(r);n||(r=new i.SvgCanvas,this.setContext(t,s.CONTEXT_SVG_CANVAS,r),super.beforeRender(t));let o=this.props.data||"",a=this.props.text;const h=o;let l,c,u,p;({data:o,heightData:l,labelText:c,startChar:u,stopChar:p}=this.encodeData(o));const d=this.calcCheckDigit(o),{tw:f,th:g}=this.calcSymbolSize(o,u,p,d);o=`${u}${o}${d}${p}`,void 0!==c?a=c:(void 0!==a&&null!==a||(a=this.props.text),void 0!==a&&null!==a||(a=h));let m=void 0===this.props.rotation||null===this.props.rotation?0:Math.floor(this.props.rotation/90)%4;switch(m<0&&(m+=4),m){case 1:r.rotate(1.5*Math.PI),r.translate(-f,0);break;case 2:r.rotate(Math.PI),r.translate(-f,-g);break;case 3:r.rotate(.5*Math.PI),r.translate(0,-g)}if(this.props.drawText&&r.beginGroup(),this.isHeightModulated?this.renderHeightModulatedBarData(r,f,g,o,l,a):this.renderBarData(r,f,g,o,l,a),this.renderAdditional(r,f,g,o,a),this.props.drawText&&(r.endGroup(),r.beginGroup()),this.props.drawText&&(this.props.font&&(r.font=this.props.font),this.renderText(r,f,g,o,a)),this.props.drawText&&r.endGroup(),n)return"";{super.afterRender(t),this.unsetContext(t,s.CONTEXT_SVG_CANVAS);const e=f+(this.props.x||0),n=g+(this.props.y||0);return(0,s.renderSvgCanvas)(this.props,r,e,n)}}calcSymbolSize(t,e,r,n){return{tw:0,th:0}}calcCheckDigit(t){return""}encodeData(t){return{data:t,startChar:"",stopChar:""}}getBarSpaceWidth(){return[]}getBarSpaceHeight(){return[[{offset:0,height:this.props.height}]]}getRenderStartCoodinate(t,e){const r=this.props;return{rx:r.quietWidth,ry:r.quietHeight}}get isHeightModulated(){return!1}renderBarData(t,e,r,n,i,s){const o=this.getBarSpaceWidth(),a=this.getBarSpaceHeight();let{rx:h,ry:l}=this.getRenderStartCoodinate(n,s);for(let e=0;e<n.length;e++){const r=this.charactersMap.get(n[e]);if(!r)throw new Error("BarcodeBase#renderBarData: character is out of range.");const s=r.pattern;let c=!0,u=0;for(let r=0;r<s.length;r++){const n=s[r];switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const r=o[Number.parseInt(n)];if(c){const n=void 0===i?a[0]:a[Number.parseInt(i[e])];for(const e of n)t.rect(h+u,l+e.offset,r,e.height)}u+=r,c=!c}break;case"+":c=!0;break;case"-":c=!1}}h+=u}t.fill()}renderHeightModulatedBarData(t,e,r,n,i,s){const o=this.getBarSpaceWidth()[1],a=this.getBarSpaceHeight();let{rx:h,ry:l}=this.getRenderStartCoodinate(n,s);for(let e=0;e<n.length;e++){const r=this.charactersMap.get(n[e]).pattern;let i=0;for(let e=0;e<r.length;e++){const n=r[e];switch(n){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const e=a[Number.parseInt(n)];for(const r of e)t.rect(h+i,l+r.offset,o,r.height)}case"0":i+=2*o}}h+=i}t.fill()}renderAdditional(t,e,r,n,i){}renderText(t,e,r,n,i){const s=this.props;t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s.useRawDataAsText?n:i,e/2,r-s.quietHeight)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Fragment=e.RedAgatePhantomComponent=e.RedAgateComponent=void 0,e.createElement=function(t,e,...r){if(e=h(e||{},r),"function"==typeof t)return{type:t,props:e,nodeId:null,children:r,component:t.prototype&&t.prototype.earlyConstruct&&t.prototype.transform?new t(e):null};if("string"==typeof t)return{type:t,props:e,nodeId:null,children:r,component:null};throw new Error("createElement receives invalid parameter type.")},e.cloneElement=function(t){let e=Object.assign({},t.props||{});delete e.__nodeId;const r=Array.isArray(t.children)?t.children.slice(0):t.children;return e=h(e,r),{type:t.type,props:e,nodeId:null,children:r,component:null}},e.createElementFromComponentInstance=function(t){return{type:t.constructor,props:t.props,nodeId:null,children:Array.isArray(t.props.children)?t.props.children:[],component:t}},e.transform=l,e.elementStyleRenderer=c,e.htmlAttributesRenderer=u,e.htmlRenderer=p,e.renderAsHtml=d,e.renderAsHtml_noDefer=function(t){const e=new Map;return p(l(t,{counter:0}),e)},e.render=function(t,e,r){d(t).then(t=>{e.innerHTML=t,r&&r(t,null)}).catch(t=>{r&&r(null,t)})},e.renderOnAwsLambda=function(t,e){d(t).then(t=>{e(null,t)}).catch(t=>{e(t,null)})},e.renderOnExpress=function(t,e,r,n){d(t).then(t=>{n&&n.forEach(t=>r.set(t[0],"string"==typeof t[1]?t[1]:void 0)),r.send(t)}).catch(t=>{console.error(JSON.stringify(t)),r.status(500).send("")})};var n=r(21);const i=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);class s{constructor(t={}){this.props=t,this.savedContexts=new Map}defer(){return Promise.resolve()}setContext(t,e,r){if(this.savedContexts.has(e))throw new Error(`RedAgateComponent#setContext: the key '${e}' has already set by myself.`);t.has(e)&&t.set(e,t.get(e)),t.set(e,r)}unsetContext(t,e){t.delete(e),this.savedContexts.has(e)&&(t.set(e,this.savedContexts.get(e)),this.savedContexts.delete(e))}getContext(t,e){return t.get(e)}}e.RedAgateComponent=s;class o extends s{transform(){return null!==this.props.children&&void 0!==this.props.children?this.props.children:[]}}e.RedAgatePhantomComponent=o;class a extends s{constructor(t,e){super(e),this.fn=t}transform(){return this.fn(this.props)}}function h(t,e){if(e){1===e.length?t.children=e[0]:e.length>1&&(t.children=e);let r={},n=!1;for(const t of e)if(null===t||void 0===t);else if(Array.isArray(t));else if("object"!=typeof t);else if(t.props){const e=t.props;"object"==typeof e.refs&&(n=!0,r=Object.assign(r,e.refs)),"string"==typeof e.ref&&(n=!0,r[e.ref]=t)}n&&(t.refs=r)}return t}function l(t,e){if(e||(e={counter:0}),null===t||void 0===t)return t;if(Array.isArray(t))return t.map(t=>l(t,e)).filter(t=>null!==t&&void 0!==t);if("object"!=typeof t)return t;const r=function(t){return{type:t.type,props:t.props,nodeId:t.nodeId,children:Array.isArray(t.children)?t.children.slice(0):t.children,component:t.component}}(function(t,e){return null!==t.nodeId&&void 0!==t.nodeId||(t.nodeId=e.counter++,t.props.__nodeId=t.nodeId),null!==t.component&&void 0!==t.component||"function"==typeof t.type&&(t.component=t.type.prototype&&t.type.prototype.transform?new t.type(t.props):new a(t.type,t.props)),t}(t,e));if(r.component&&r.component.transform){const t=r.component.transform();null===t||void 0===t?r.children=[]:Array.isArray(t)?r.children=t:r.children=[t]}else r.children||(r.children=[]);return r.children=r.children.map(t=>l(t,e)).filter(t=>null!==t&&void 0!==t),r}function c(t){return"string"==typeof t?t:Object.getOwnPropertyNames(t).filter(e=>null!==t[e]&&void 0!==t[e]).map(r=>`${n.Escape.html((e=r,e.replace(/([a-z0-9])([A-Z])/g,(t,e,r)=>`${e}-${r.toLowerCase()}`)))}:${n.Escape.html(t[r])};`).join("");var e}function u(t,e,r){let i="",s="";const o=t=>Array.isArray(t)?t.map(t=>n.Escape.html(t.toString())).filter(t=>null!==t&&void 0!==t).join(" "):n.Escape.html(t.toString());for(const a of Object.getOwnPropertyNames(t))switch(a){case"styleClass":case"className":case"class":i+=` class="${o(t[a])}"`;break;case"style":i+=` style="${c(t.style)}"`;break;case"children":case"__nodeId":break;case"dangerouslySetInnerHTML":s+=t[a].__html;break;case"setInnerText":s+=n.Escape.html(t[a].__text).replace(/\r?\n/g,"<br/>").replace(/\r/g,"<br/>");break;default:e&&e.has(a)||r&&!r.has(a)&&"id"!==a||null===t[a]||void 0===t[a]||!1===t[a]||(!0===t[a]?i+=` ${n.Escape.html(a)}`:i+=` ${n.Escape.html(a)}="${o(t[a])}"`)}return{attrs:i,children:s}}function p(t,e){if(null===t||void 0===t)return"";if(Array.isArray(t))return t.map(t=>p(t,e)).join("");if("object"!=typeof t)return n.Escape.html(t.toString());if(!t.props)return n.Escape.html(t.toString());const r=t;let{attrs:s,children:o}=u(r.props);r.component&&r.component.beforeRender&&r.component.beforeRender(e),null!==r.children&&void 0!==r.children&&(o+=r.children.map(t=>p(t,e)).join(""));let a="";if(r.component&&r.component.render)a=r.component.render(e,o);else if("string"==typeof r.type){const t=n.Escape.html(r.type);a=""!==o&&null!==o&&void 0!==o||!i.has(t)?`<${t}${s}>${o}</${t}>`:`<${t}${s}/>`}else a=o;return r.component&&r.component.afterRender&&r.component.afterRender(e),a}function d(t){const e=new Map,r=l(t,{counter:0});return Promise.all(function t(e,r){if(null===r||void 0===r)return e;if(Array.isArray(r))return r.forEach(r=>t(e,r)),e;if("object"!=typeof r)return e;if(r.component&&r.component.defer){const t=r.component.defer();t&&e.push(t)}return r.children&&t(e,r.children),e}([],r)).then(t=>p(r,e))}e.Fragment=class extends o{constructor(t){super(t)}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapePropsDefault=e.CONTEXT_ASSET_=e.CONTEXT_SVG_PATH=e.CONTEXT_SVG_CANVAS=void 0,e.renderSvgCanvas=function(t,e,r,s){return t.asImgTag?`<img style="width:${r}${t.unit};height:${s}${t.unit};" src="${e.toDataUrl(new i.Rect2D(0,0,r,s),t.unit,120)}"${n.htmlAttributesRenderer(t,void 0,new Set([])).attrs}></img>`:t.asElementStyle?`${t.style?n.elementStyleRenderer(t.style):""}${n.elementStyleRenderer({"background-image":`url("${e.toDataUrl(new i.Rect2D(0,0,r,s),t.unit,0)}")`})}`:t.asDataUrl?e.toDataUrl(new i.Rect2D(0,0,r,s),t.unit,0):e.render(new i.Rect2D(0,0,r,s),t.unit)},e.toImgTag=function(t){const e=Object.assign({},t.props);e.asImgTag=!0,e.asElementStyle=!1,e.asDataUrl=!1;const r=t.props;t.props=e;const i=n.renderAsHtml_noDefer(n.createElementFromComponentInstance(t));return t.props=r,i},e.toElementStyle=function(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!0,e.asDataUrl=!1;const r=t.props;t.props=e;const i=n.renderAsHtml_noDefer(n.createElementFromComponentInstance(t));return t.props=r,i},e.toDataUrl=function(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!1,e.asDataUrl=!0;const r=t.props;t.props=e;const i=n.renderAsHtml_noDefer(n.createElementFromComponentInstance(t));return t.props=r,i},e.toSvg=function(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!1,e.asDataUrl=!1;const r=t.props;t.props=e;const i=n.renderAsHtml_noDefer(n.createElementFromComponentInstance(t));return t.props=r,i};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),i=r(14);const s=e.CONTEXT_SVG_CANVAS="CONTEXT_SVG_CANVAS",o=e.CONTEXT_SVG_PATH="CONTEXT_SVG_PATH";e.CONTEXT_ASSET_="CONTEXT_ASSET_",e.shapePropsDefault={x:0,y:0,margin:0};e.Shape=class extends n.RedAgatePhantomComponent{constructor(t){super(t),this.isAmbient=!1,this.isPathFragment=!1,this.isGroup=!0}initializeCanvas(t){if((this.props.fill||this.isAmbient)&&void 0!==this.props.fillColor&&null!==this.props.fillColor&&(t.fillStyle=this.props.fillColor.toString()),(this.props.stroke||this.isAmbient)&&(void 0!==this.props.strokeColor&&null!==this.props.strokeColor&&(t.strokeStyle=this.props.strokeColor.toString()),void 0!==this.props.lineCap&&null!==this.props.lineCap&&(t.lineCap=this.props.lineCap),void 0!==this.props.lineJoin&&null!==this.props.lineJoin&&(t.lineJoin=this.props.lineJoin),void 0!==this.props.lineWidth&&null!==this.props.lineWidth&&(t.lineWidth=this.props.lineWidth),void 0!==this.props.miterLimit&&null!==this.props.miterLimit&&(t.miterLimit=this.props.miterLimit),void 0!==this.props.lineDash&&null!==this.props.lineDash&&t.setLineDash(this.props.lineDash),void 0!==this.props.lineDashOffset&&null!==this.props.lineDashOffset&&(t.lineDashOffset=this.props.lineDashOffset)),this.isAmbient){const e=this.props;(e.margin||e.x||e.y)&&t.translate((e.margin||0)+(e.x||0),(e.margin||0)+(e.y||0)),void 0!==e.scaleX&&null!==e.scaleX&&t.scale(e.scaleX,1),void 0!==e.scaleY&&null!==e.scaleY&&t.scale(1,e.scaleY),void 0!==e.rotationDeg&&null!==e.rotationDeg&&t.rotate(e.rotationDeg*Math.PI/180),void 0!==e.tm&&null!==e.tm&&e.tm.length>=6&&t.transform(e.tm[0],e.tm[1],e.tm[2],e.tm[3],e.tm[4],e.tm[5])}}setGraphicState(t){this.isGroup&&t.beginGroup(),t.save(),t.translate(this.props.margin+this.props.x,this.props.margin+this.props.y),this.initializeCanvas(t)}restoreGraphicState(t){t.restore(),this.isGroup&&t.endGroup()}fillStrokePaths(t){this.props.fill&&this.props.stroke?t.fillStroke():this.props.fill?t.fill():this.props.stroke&&t.stroke()}beforeRender(t){this.isPathFragment=this.getContext(t,o)||!1;const e=this.getContext(t,s);e&&(this.isPathFragment||this.setGraphicState(e))}afterRender(t){const e=this.getContext(t,s);e&&(this.isPathFragment||(this.fillStrokePaths(e),this.restoreGraphicState(e)))}}},function(t,e,r){"use strict";var n=r(10).nextTick,i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var s=r(7);s.inherits=r(2);var o=r(37),a=r(31);s.inherits(u,o);for(var h=i(a.prototype),l=0;l<h.length;l++){var c=h[l];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n(e,t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.LoggerLogLevel=void 0;!function(t){t[t.NO_LOG=0]="NO_LOG",t[t.ERROR=1]="ERROR",t[t.PRODUCTION=1]="PRODUCTION",t[t.ASSERT=2]="ASSERT",t[t.WARN=3]="WARN",t[t.STAGING=3]="STAGING",t[t.INFO=4]="INFO",t[t.LOG=5]="LOG",t[t.DEVELOPMENT=5]="DEVELOPMENT",t[t.TRACE=6]="TRACE",t[t.DEBUG=6]="DEBUG",t[t.VERBOSE=6]="VERBOSE"}(n||(e.LoggerLogLevel=n={}));class i{static assert(t,e,...r){if(this.logLevel<=n.PRODUCTION)return this;let s=!1;try{s=Boolean(t)}catch(t){s=!1}if(!s){try{i.con.assert(t,e,...r)}catch(t){if(this.logLevel<=n.STAGING)throw t}if(this.logLevel<=n.STAGING){let t="";try{t=String(e)}catch(t){}throw new Error("Assertion failed:"+t)}}return this}static dir(t,...e){if(this.logLevel<=n.DEBUG)return this;try{i.con.dir(t,...e)}catch(t){}return this}static error(t,...e){if(this.logLevel<n.ERROR)return this;try{i.con.error(t,...e)}catch(t){}return this}static info(t,...e){if(this.logLevel<n.INFO)return this;try{i.con.info(t,...e)}catch(t){}return this}static log(t,...e){if(this.logLevel<n.LOG)return this;try{i.con.log(t,...e)}catch(t){}return this}static time(t){if(this.logLevel<=n.DEBUG)return this;try{i.con.time(t)}catch(t){}return this}static timeEnd(t){if(this.logLevel<=n.DEBUG)return this;try{i.con.timeEnd(t)}catch(t){}return this}static trace(t,...e){if(this.logLevel<n.TRACE)return this;try{i.con.trace(t,...e)}catch(t){}return this}static warn(t,...e){if(this.logLevel<n.WARN)return this;try{i.con.warn(t,...e)}catch(t){}return this}}e.Logger=i,i.__ctor=(i.isNode=!1,"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(void 0!==process.type&&"renderer"===process.type||(i.isNode=!0)),void(i.isNode?(i.con=new console.Console(process.stderr),i.logLevel=n.PRODUCTION):(i.con=console,i.logLevel=n.DEVELOPMENT)))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static encodeToUtf8(t){return n.__encodeToUtf8(t)}static decodeUtf8(t){return n.__decodeUtf8(t)}static __encodeToUtf8Impl(t){const e=t.length;let r,n,i=-1,s=512,o=new Uint8Array(s);for(r=0;r<e;++r){const e=t.codePointAt(r);if(void 0===e)throw new Error("Can't convert string to UTF-8. string include unexpected sequence.");if((n=e)<=127)o[++i]=n;else if(n<=2047)o[++i]=192|n>>>6,o[++i]=128|63&n;else if(n<=65535)o[++i]=224|n>>>12,o[++i]=128|n>>>6&63,o[++i]=128|63&n;else{if(!(n<=1114111))throw new Error("Can't convert string to UTF-8. string include unexpected sequence.");o[++i]=240|n>>>18,o[++i]=128|n>>>12&63,o[++i]=128|n>>>6&63,o[++i]=128|63&n,65536<=n&&++r}if(s-i<=4){const t=o;s*=2,(o=new Uint8Array(s)).set(t)}}return o.subarray(0,++i)}static __decodeUtf8Impl(t){let e="",r=0;const n=t.length;let i,s,o,a;for(;r<n;)switch((i=t[r++])>>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCodePoint(i);break;case 12:case 13:s=t[r++],e+=String.fromCodePoint((31&i)<<6|63&s);break;case 14:s=t[r++],o=t[r++],e+=String.fromCodePoint((15&i)<<12|(63&s)<<6|(63&o)<<0);break;case 16:if(i>>>3&1)throw new Error("Can't convert UTF-8 to string. UTF-8 include unexpected sequence.");s=t[r++],o=t[r++],a=t[r++],e+=String.fromCodePoint((7&i)<<18|(63&s)<<12|(63&o)<<6|(63&a)<<0)}return e}}e.TextEncoding=n,n.__ctor=(n.isNode="undefined"!=typeof Buffer,n.isTextEncoder="undefined"!=typeof TextEncoder,void(n.isNode?(n.__encodeToUtf8=(t=>Buffer.from(t,"utf8")),n.__decodeUtf8=(t=>Buffer.from(Array.isArray(t)?t:Array.from(t)).toString("utf8"))):n.isTextEncoder?(n.utf8Encoder=new TextEncoder("utf8"),n.__encodeToUtf8=(t=>n.utf8Encoder.encode(t)),n.utfDecoder=new TextDecoder("utf8"),n.__decodeUtf8=(t=>n.utfDecoder.decode(t))):(n.__encodeToUtf8=n.__encodeToUtf8Impl,n.__decodeUtf8=n.__decodeUtf8Impl)))},function(t,e){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=Buffer.isBuffer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SvgCanvas=e.SvgCanvas2DPattern=e.SvgCanvas2DRadialGradient=e.SvgCanvas2DLinerGradient=e.SvgCanvasImageData=void 0;var n=r(6),i=r(12),s=r(21),o=r(43),a=r(23),h=r(14);class l{constructor(t,e,r,n,i){this.url=t,this.x=e,this.y=r,this.width=n,this.height=i}}e.SvgCanvasImageData=l;class c{constructor(t,e,r,n,i){this.id=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i,this.content=`<linearGradient id="${t}" gradientUnits="userSpaceOnUse" x1="${e}" y1="${r}" x2="${n}" y2="${i}" >\n`}addColorStop(t,e,r=1){this.content+=`<stop offset="${t}" stop-color="${e}" stop-opacity="${r}" />\n`}toDef(){return this.content+"</linearGradient>"}toString(){return`url(#${this.id})`}}e.SvgCanvas2DLinerGradient=c;class u{constructor(t,e,r,n,i,s){this.id=t,this.cx=e,this.cy=r,this.r=n,this.fx=i,this.fy=s,this.content=`<radialGradient id="${t}" gradientUnits="userSpaceOnUse" cx="${e}" cy="${r}" r="${n}" fx="${i}" fy="${s}" >\n`}addColorStop(t,e,r=1){this.content+=`<stop offset="${t}" stop-color="${e}" stop-opacity="${r}" />\n`}toDef(){return this.content+"</radialGradient>"}toString(){return`url(#${this.id})`}}e.SvgCanvas2DRadialGradient=u;class p{constructor(t,e){this.id=t,this.imageData=e}toDef(){const t=`<image x="0" y="0" width="${this.imageData.width}" height="${this.imageData.height}" \n`+`xlink:href="${this.imageData.url}" />`;return`<pattern id="${this.id}"  patternUnits="userSpaceOnUse" patternContentUnits="userSpaceOnUse" `+`x="${this.imageData.x}" y="${this.imageData.y}" `+`width="${this.imageData.width}" height="${this.imageData.height}">${t}</pattern>`}toString(){return`url(#${this.id})`}}e.SvgCanvas2DPattern=p;class d{constructor(t){if(this.globalAlpha=1,this.globalCompositeOperation="source-over",this.shadowBlur=0,this.shadowColor="rgba(0,0,0,1)",this.shadowOffsetX=0,this.shadowOffsetY=0,this.filterIdUrl=null,this.font="normal 12px 'Times New Roman'",this.textAlign="start",this.textBaseline="auto",this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=4,this.strokeStyle="black",this.fillStyle="black",this.ctm=new h.TransferMatrix2D,this.currentPoint=null,this.currentPointOnCtm=null,this.subpath=[],this.lineDash=[],this.clipPath="",t){for(const e in this)this.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(this[e]=t[e]);this.subpath=Array.from(this.subpath)}}}class f{constructor(){this.graphicsStack=[],this.assets=[],this.content="",this.contentSaved="",this.idCount=0,this.template=null,this.graphicsStack.push(new d)}get globalAlpha(){return this.graphicsStack[this.graphicsStack.length-1].globalAlpha}set globalAlpha(t){this.graphicsStack[this.graphicsStack.length-1].globalAlpha=t}get globalCompositeOperation(){return this.graphicsStack[this.graphicsStack.length-1].globalCompositeOperation}set globalCompositeOperation(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].globalCompositeOperation=t}get shadowBlur(){return this.graphicsStack[this.graphicsStack.length-1].shadowBlur}set shadowBlur(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowBlur=t}get shadowColor(){return this.graphicsStack[this.graphicsStack.length-1].shadowColor}set shadowColor(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowColor=t}get shadowOffsetX(){return this.graphicsStack[this.graphicsStack.length-1].shadowOffsetX}set shadowOffsetX(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowOffsetX=t}get shadowOffsetY(){return this.graphicsStack[this.graphicsStack.length-1].shadowOffsetY}set shadowOffsetY(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowOffsetY=t}get filterIdUrl(){return this.graphicsStack[this.graphicsStack.length-1].filterIdUrl}set filterIdUrl(t){this.graphicsStack[this.graphicsStack.length-1].filterIdUrl=t}get font(){return this.graphicsStack[this.graphicsStack.length-1].font}set font(t){this.graphicsStack[this.graphicsStack.length-1].font=t}get textAlign(){return this.graphicsStack[this.graphicsStack.length-1].textAlign}set textAlign(t){this.graphicsStack[this.graphicsStack.length-1].textAlign=t}get textBaseline(){return this.graphicsStack[this.graphicsStack.length-1].textBaseline}set textBaseline(t){this.graphicsStack[this.graphicsStack.length-1].textBaseline=t}get lineCap(){return this.graphicsStack[this.graphicsStack.length-1].lineCap}set lineCap(t){this.graphicsStack[this.graphicsStack.length-1].lineCap=t}get lineDashOffset(){return this.graphicsStack[this.graphicsStack.length-1].lineDashOffset}set lineDashOffset(t){this.graphicsStack[this.graphicsStack.length-1].lineDashOffset=t}get lineJoin(){return this.graphicsStack[this.graphicsStack.length-1].lineJoin}set lineJoin(t){this.graphicsStack[this.graphicsStack.length-1].lineJoin=t}get lineWidth(){return this.graphicsStack[this.graphicsStack.length-1].lineWidth}set lineWidth(t){this.graphicsStack[this.graphicsStack.length-1].lineWidth=t}get miterLimit(){return this.graphicsStack[this.graphicsStack.length-1].miterLimit}set miterLimit(t){this.graphicsStack[this.graphicsStack.length-1].miterLimit=t}get strokeStyle(){return this.graphicsStack[this.graphicsStack.length-1].strokeStyle}set strokeStyle(t){this.graphicsStack[this.graphicsStack.length-1].strokeStyle=t.toString()}get fillStyle(){return this.graphicsStack[this.graphicsStack.length-1].fillStyle}set fillStyle(t){this.graphicsStack[this.graphicsStack.length-1].fillStyle=t.toString()}get ctm(){return this.graphicsStack[this.graphicsStack.length-1].ctm}set ctm(t){this.graphicsStack[this.graphicsStack.length-1].ctm=t}get currentPoint(){return this.graphicsStack[this.graphicsStack.length-1].currentPoint}set currentPoint(t){this.graphicsStack[this.graphicsStack.length-1].currentPoint=t}get currentPointOnCtm(){return this.graphicsStack[this.graphicsStack.length-1].currentPointOnCtm}set currentPointOnCtm(t){this.graphicsStack[this.graphicsStack.length-1].currentPointOnCtm=t}get subpath(){return this.graphicsStack[this.graphicsStack.length-1].subpath}set subpath(t){this.graphicsStack[this.graphicsStack.length-1].subpath=t}get lineDash(){return this.graphicsStack[this.graphicsStack.length-1].lineDash}set lineDash(t){this.graphicsStack[this.graphicsStack.length-1].lineDash=t}get clipPath(){return this.graphicsStack[this.graphicsStack.length-1].clipPath}set clipPath(t){this.graphicsStack[this.graphicsStack.length-1].clipPath=t}get subpathIsEmptyOrClosed(){return 0===this.subpath.length||"Z"===this.subpath[this.subpath.length-1]}static fromTemplate(t){const e=new f;return e.template=t,e.idCount=(new Date).getTime(),e}render(t,e="mm"){const r='xmlns="http://www.w3.org/2000/svg"',n='xmlns:xlink="http://www.w3.org/1999/xlink"',i=`viewBox="${t.x} ${t.y} ${t.w} ${t.h}"`,s=`<defs>\n${this.assets.map(t=>"string"==typeof t?t:t.toDef()).join("\n")}</defs>`;if(this.template){let o=this.template.replace(/<\/svg>\s*$/,"");{const r=/(<svg[^>]*?)\s+?width\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=r.test(o)?o.replace(r,`$1 width="${t.w}${e}"$2`):o.replace(/<svg\s/,`<svg width="${t.w}${e}" `)}{const r=/(<svg[^>]*?)\s+?height\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=r.test(o)?o.replace(r,`$1 height="${t.h}${e}"$2`):o.replace(/<svg\s/,`<svg height="${t.h}${e}" `)}{const t=/(<svg[^>]*?)\s+?viewBox\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=t.test(o)?o.replace(t,`$1 ${i}$2`):o.replace(/<svg\s/,`<svg ${i} `)}return o.match(/<svg[^>]*?\s+?xmlns:xlink\s*?=/)||(o=o.replace(/<svg\s/,`<svg ${n} `)),o.match(/<svg[^>]*?\s+?xmlns\s*?=/)||(o=o.replace(/<svg\s/,`<svg ${r} `)),`${o}\n${s}\n${this.contentSaved}${this.content}</svg>`}return`<svg ${r} ${n} version="1.1" width="${t.w}${e}" height="${t.h}${e}" ${i}>\n${s}\n${this.contentSaved}${this.content}</svg>`}toDataUrl(t,e="mm",r=120){return"data:image/svg+xml;base64,"+i.Base64.encode(n.TextEncoding.encodeToUtf8(this.render(t,e)),r)}save(){const t=new d(this.graphicsStack[this.graphicsStack.length-1]);this.graphicsStack.push(t)}restore(t=!1){if(t)0<this.graphicsStack.length&&this.graphicsStack.pop();else if(0<this.graphicsStack.length){const t=this.subpath,e=this.currentPoint,r=this.currentPointOnCtm;this.graphicsStack.pop(),this.subpath=t,this.currentPoint=e,this.currentPointOnCtm=r}}scale(t,e){if(null!==this.currentPointOnCtm){const r=(new h.TransferMatrix2D).scale(t,e);this.currentPointOnCtm=r.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.scale(t,e)}translate(t,e){if(null!==this.currentPointOnCtm){const r=(new h.TransferMatrix2D).translate(t,e);this.currentPointOnCtm=r.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.translate(t,e)}rotate(t){if(null!==this.currentPointOnCtm){const e=(new h.TransferMatrix2D).rotate(t);this.currentPointOnCtm=e.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.rotate(t)}transform(t,e,r,n,i,s){const o=new h.TransferMatrix2D(t,e,r,n,i,s);null!==this.currentPointOnCtm&&(this.currentPointOnCtm=o.transfer(this.currentPointOnCtm)),this.ctm=this.ctm.concat(o)}setTransform(t,e,r,n,i,s){this.currentPointOnCtm=null,this.ctm=new h.TransferMatrix2D(t,e,r,n,i,s)}beginPath(){this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}closePath(){this.subpath.push("Z"),this.currentPoint=null,this.currentPointOnCtm=null}moveTo(t,e){const r=new h.Point2D(t,e);this.subpath.push("M",this.ctm.transfer(r)),this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=r}lineTo(t,e,...r){let n=new h.Point2D(t,e);if(this.subpath.push("L",this.ctm.transfer(n)),r&&r.length%4==0)for(let t=0;t<r.length&&!(r.length<=t+1);t+=2)n=new h.Point2D(r[t],r[t+1]),this.subpath.push(this.ctm.transfer(n));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=n}quadraticCurveTo(t,e,r,n,...i){let s=new h.Point2D(r,n);if(this.subpath.push("Q",this.ctm.transfer(new h.Point2D(t,e)),this.ctm.transfer(s)),i&&i.length%4==0)for(let t=0;t<i.length&&!(i.length<=t+1);t+=2)s=new h.Point2D(i[t],i[t+1]),this.subpath.push(this.ctm.transfer(s));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=s}bezierCurveTo(t,e,r,n,i,s,...o){let a=new h.Point2D(i,s);if(this.subpath.push("C",this.ctm.transfer(new h.Point2D(t,e)),this.ctm.transfer(new h.Point2D(r,n)),this.ctm.transfer(a)),o&&o.length%6==0)for(let t=0;t<o.length;t+=2)a=new h.Point2D(o[t],o[t+1]),this.subpath.push(this.ctm.transfer(a));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=a}arc(t,e,r,n,i,s=!0){const o=Math.abs(i-n)>=2*Math.PI;Math.abs(n)>2*Math.PI&&(n%=2*Math.PI),n<0&&(n=2*Math.PI-n),Math.abs(i)>2*Math.PI&&(i%=2*Math.PI),i<0&&(i=2*Math.PI-i),o?i=n+2*Math.PI:(s&&([n,i]=[i,n]),i<n&&(i+=2*Math.PI));let a=i-n,l=0;const c=Math.PI/2,u=4*(Math.sqrt(2)-1)/3,p=(new h.TransferMatrix2D).translate(t,e).scale(r,r);let d=[];for(;c<a;l+=c,a-=c){const t=p.rotate(n+l);0===d.length&&d.push(t.transfer(new h.Point2D(1,0))),d.push(t.transfer(new h.Point2D(1,u))),d.push(t.transfer(new h.Point2D(u,1))),d.push(t.transfer(new h.Point2D(0,1)))}const f=4*Math.tan(a/4)/3;{const t=p.rotate(n+l);0===d.length&&d.push(t.transfer(new h.Point2D(1,0))),d.push(t.transfer(new h.Point2D(1,f))),d.push(t.transfer(new h.Point2D(Math.cos(a)+f*Math.sin(a),Math.sin(a)-f*Math.cos(a)))),d.push(t.transfer(new h.Point2D(Math.cos(a),Math.sin(a))))}s&&(d=d.reverse());const g=d[d.length-1];d=d.map(t=>this.ctm.transfer(t)),this.subpath.push(this.subpathIsEmptyOrClosed?"M":"L",d.shift(),"C"),this.subpath.push(...d),this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=g}arcTo(t,e,r,n,i){const s=this.currentPointOnCtm;if(null===s)return;const o=new h.Point2D(t,e),a=new h.Point2D(r,n),l=h.Vector2D.fromPoints(s,o),c=h.Vector2D.fromPoints(o,a);if(0===l.x&&0===c.x||0===l.y&&0===c.y||l.isZero()||c.isZero())return this.subpath.push("L",this.ctm.transfer(o),this.ctm.transfer(a)),void(this.currentPointOnCtm=a);const u=h.Vector2D.getAngle(l,c);if(0===u||u===Math.PI)return this.subpath.push("L",this.ctm.transfer(o),this.ctm.transfer(a)),void(this.currentPointOnCtm=a);const p=Math.PI-u,d=i/Math.sin(p/2),f=Math.abs(Math.cos(p/2)*d);let g=h.Vector2D.fromPoints(o,s).getAngle(),m=c.getAngle();const b=new h.Point2D(f*Math.cos(g)+o.x,f*Math.sin(g)+o.y),y=new h.Point2D(f*Math.cos(m)+o.x,f*Math.sin(m)+o.y);Math.abs(m-g)>Math.PI&&(m>g?g+=2*Math.PI:m+=2*Math.PI);const v=new h.Point2D(d*Math.cos((g+m)/2)+o.x,d*Math.sin((g+m)/2)+o.y),w=h.Vector2D.fromPoints(v,b),x=h.Vector2D.fromPoints(v,y);let _=w.getAngle(),S=x.getAngle();Math.abs(S-_)>Math.PI&&(S>_?_+=2*Math.PI:S+=2*Math.PI),this.arc(v.x,v.y,i,_,S,_>=S),this.lineTo(r,n)}circle(t,e,r,n=!0){this.subpathIsEmptyOrClosed||this.closePath(),this.arc(t,e,r,0,2*Math.PI,n),this.closePath()}rect(t,e,r,n,i=!0){i?this.subpath.push("M",this.ctm.transfer(new h.Point2D(t,e)),"L",this.ctm.transfer(new h.Point2D(t,e+n)),this.ctm.transfer(new h.Point2D(t+r,e+n)),this.ctm.transfer(new h.Point2D(t+r,e)),"Z"):this.subpath.push("M",this.ctm.transfer(new h.Point2D(t,e)),"L",this.ctm.transfer(new h.Point2D(t+r,e)),this.ctm.transfer(new h.Point2D(t+r,e+n)),this.ctm.transfer(new h.Point2D(t,e+n)),"Z"),this.currentPoint=null,this.currentPointOnCtm=null}roundRect(t,e,r,n,i,s=!0){s?(this.moveTo(t,e+n/2),this.arcTo(t,e+n,t+r/2,e+n,i),this.arcTo(t+r,e+n,t+r,e+n/2,i),this.arcTo(t+r,e,t+r/2,e,i),this.arcTo(t,e,t,e+n/2,i)):(this.moveTo(t+r/2,e),this.arcTo(t+r,e,t+r,e+n/2,i),this.arcTo(t+r,e+n,t+r/2,e+n,i),this.arcTo(t,e+n,t,e+n/2,i),this.arcTo(t,e,t+r/2,e,i)),this.closePath()}getInheritedStyle(t){let e;const r=t.toString();let n,i=this.globalAlpha;if(n=a.WebColor.isRgb(r)){const e=n;i*=e.a,t=`rgb(${e.r},${e.g},${e.b})`}else if(n=a.WebColor.isHsl(r)){const e=n;i*=e.a,t=`hsl(${e.h},${100*e.s}%,${100*e.l}%)`}else this.ctm.isIdentity()||((e=r.match(/^url\(\#lgrad-(.+)\)$/))?(this.assets.push(`<linearGradient id="lgrad-${++this.idCount}" xlink:href="#lgrad-${e[1]}" `+`gradientTransform="matrix(${this.ctm.toString()})" />`),t=`url(#lgrad-${this.idCount})`):(e=r.match(/^url\(\#rgrad-(.+)\)$/))?(this.assets.push(`<radialGradient id="rgrad-${++this.idCount}" xlink:href="#rgrad-${e[1]}" `+`gradientTransform="matrix(${this.ctm.toString()})" />`),t=`url(#rgrad-${this.idCount})`):(e=r.match(/^url\(\#pat-(.+)\)$/))&&(this.assets.push(`<pattern id="pat-${++this.idCount}" xlink:href="#pat-${e[1]}" `+`patternTransform="matrix(${this.ctm.toString()})" />`),t=`url(#pat-${this.idCount})`));return{style:t,alpha:i}}getStrokeAttrs(){const t=this.getInheritedStyle(this.strokeStyle);return`stroke="${t.style}" stroke-width="${this.lineWidth}" `+`stroke-linecap="${this.lineCap}" stroke-linejoin="${this.lineJoin}" stroke-miterlimit="${this.miterLimit}" `+(this.getLineDash().length>0?`stroke-dasharray="${this.getLineDash().join(",")}" stroke-dashoffset="${this.lineDashOffset}" `:"")+`stroke-opacity="${t.alpha}" `}getFillAttrs(t){const e=this.getInheritedStyle(this.fillStyle);return`fill="${e.style}" fill-rule="${t}" fill-opacity="${e.alpha}" `}getFilterAttrs(){if(""===this.filterIdUrl);else if(null===this.filterIdUrl){if(0<this.shadowBlur||this.globalCompositeOperation&&"source-over"!==this.globalCompositeOperation){let t="",e="";if(0<this.shadowBlur)if(t+=`<feGaussianBlur stdDeviation="${this.shadowBlur}" result="blur" />\n`+`<feOffset in="blur" dx="${this.shadowOffsetX}" dy="${this.shadowOffsetY}" result="offsetBlur" />\n`,null===this.shadowColor)e+='<feMergeNode in="offsetBlur" />';else{const r=new a.WebColor(this.shadowColor);t+='<feColorMatrix in="offsetBlur" type="matrix" values=" 1 1 1 0 0  1 1 1 0 0  1 1 1 0 0  0 0 0 1 0 " result="color1" />\n<feColorMatrix in="color1" type="matrix" values="'+` ${r.r/255} 0 0 0 0 `+` 0 ${r.g/255} 0 0 0 `+` 0 0 ${r.b/255} 0 0 `+` 0 0 0 ${r.a} 0 " result="color2" />\n`,e+='<feMergeNode in="color2" />\n'}if(this.globalCompositeOperation&&"source-over"!==this.globalCompositeOperation){let r=this.globalCompositeOperation,n=!1;switch(r){case"destination-in":n=!0;case"source-in":r="in";break;case"destination-out":n=!0;case"source-out":r="out";break;case"destination-atop":n=!0;case"source-atop":r="atop";break;case"xor":r="xor";break;case"destination-over":n=!0;default:r="over"}t+=`<feComposite in${n?"2":""}="SourceGraphic" `+`in${n?"":"2"}="BackgroundImage" operator="${r}" result="comp"/>\n`,e+='<feMergeNode in="comp" />\n'}else e+='<feMergeNode in="SourceGraphic" />\n';return this.assets.push(`<filter id="filter-${++this.idCount}" filterUnits="userSpaceOnUse">\n`+`${t}<feMerge>\n${e}</feMerge>\n</filter>`),this.filterIdUrl=`url(#filter-${this.idCount})`,`filter="${this.filterIdUrl}" `}this.filterIdUrl=""}else if(""!==this.filterIdUrl)return`filter="${this.filterIdUrl}" `;return""}getMultilineTextHeight(t){if(t.multiline&&"string"==typeof this.font&&(void 0===t.lineHeight||null===t.lineHeight)){const e=new RegExp("^\\s*(?:normal|italic|oblique)?s*(?:normal|small-caps)?\\s*(?:normal|bold|lighter|bolder|100|200|300|400|500|600|700|800|900)??\\s*(?:([0-9.]+)(px|pt|mm|cm|in|pc)?)(?:\\/(?:([0-9.]+|normal)(px|pt|mm|cm|in|em|%)?))?").exec(this.font);if(e){let r=Number(e[1]);switch(e[2]){case"pt":r=r/72*96;break;case"pc":r=r/72*96/12;break;case"mm":r=r/25.4*96;break;case"cm":r=r/25.4*96*100;break;case"in":r*=96}let n=r;if(e[3])switch(n=Number(e[3])||1.3,e[4]){case"px":break;case"pt":n=n/72*96;break;case"pc":n=n/72*96/12;break;case"mm":n=n/25.4*96;break;case"cm":n=n/25.4*96*100;break;case"in":n*=96;break;case"%":n=n/100*r;break;default:n*=r}t.lineHeight=n}}return t}getTextAttributes(t){let e,r;switch(this.textAlign){case"left":e="start";break;case"right":e="end";break;case"center":e="middle";break;default:e=this.textAlign}switch(this.textBaseline){case"top":r="text-before-edge";break;case"bottom":r="text-after-edge";break;default:r=this.textBaseline}let n=` style="font:${s.Escape.xml(this.font)};" text-anchor="${e}" dominant-baseline="${r}"`;if(void 0===t||null===t)return n;if("number"==typeof t)return n+=` textLength="${t}"`;const i=this.getMultilineTextHeight(t);return void 0!==i.textLength&&null!==i.textLength&&(n+=` textLength="${i.textLength}"`),void 0!==i.lengthAdjust&&null!==i.lengthAdjust&&(n+=` lengthAdjust="${i.lengthAdjust}"`),void 0!==i.rotate&&null!==i.rotate&&(n+=` rotate="${i.rotate}"`),void 0!==i.writingMode&&null!==i.writingMode&&(n+=` writing-mode="${i.writingMode}"`),void 0!==i.glyphOrientationVertical&&null!==i.glyphOrientationVertical&&(n+=` glyph-orientation-vertical="${i.glyphOrientationVertical}"`),void 0!==i.glyphOrientationHorizontal&&null!==i.glyphOrientationHorizontal&&(n+=` glyph-orientation-horizontal="${i.glyphOrientationHorizontal}"`),void 0!==i.direction&&null!==i.direction&&(n+=` direction="${i.direction}"`),void 0!==i.unicodeBidi&&null!==i.unicodeBidi&&(n+=` unicode-bidi="${i.unicodeBidi}"`),void 0!==i.textDecoration&&null!==i.textDecoration&&(n+=` text-decoration="${i.textDecoration}"`),void 0!==i.kerning&&null!==i.kerning&&(n+=` kerning="${i.kerning}"`),void 0!==i.letterSpacing&&null!==i.letterSpacing&&(n+=` letter-spacing="${i.letterSpacing}"`),void 0!==i.wordSpacing&&null!==i.wordSpacing&&(n+=` word-spacing="${i.wordSpacing}"`),n}getTextPath(t){if(void 0!==t&&null!==t&&"object"==typeof t&&t.textPath){const e=this.ctm.getInverse(),r=[];for(const t of this.subpath)t instanceof h.Point2D?r.push(e.transfer(t)):r.push(t);const n=`path-${++this.idCount}`;this.assets.push(`<path id="${n}" d="${o.WordWrap.loose(r.join(" "))}" />\n`),this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null;const i={id:`#${n}`};return void 0!==t.textPathOffset&&null!==t.textPathOffset&&(i.offset=t.textPathOffset),i}return null}convertToMultiline(t,e,r,n){if(void 0!==n&&null!==n&&"object"==typeof n&&n.multiline&&!n.textPath){const i=n.lineHeight||12,o=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),a=s.Escape.xml(o).split("\n");switch(n.writingMode){case"tb":case"tb-rl":return`<tspan>${a.join(`</tspan><tspan dx="${-i}" y="${r}">`)}</tspan>`;default:return`<tspan>${a.join(`</tspan><tspan x="${e}" dy="${i}">`)}</tspan>`}}return`<tspan x="${e}" y="${r}">${s.Escape.xml(t)}</tspan>`}stroke(){this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<path d="${o.WordWrap.loose(this.subpath.join(" "))}" />\n</g>\n`,this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}strokeRect(t,e,r,n){this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}strokeText(t,e,r,n){const i=this.getTextPath(n);this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==i?`<textPath xlink:href="${i.id}"${void 0!==i.offset?` startOffset="${i.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==i?"</textPath>":""}</text></g>\n`}fill(t="nonzero"){this.content+=`<g stroke="none" ${this.getFillAttrs(t)}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<path d="${o.WordWrap.loose(this.subpath.join(" "))}" />\n</g>\n`,this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}fillRect(t,e,r,n){this.content+=`<g stroke="none" ${this.getFillAttrs("nonzero")}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}fillText(t,e,r,n){const i=this.getTextPath(n);this.content+=`<g stroke="none" ${this.getFillAttrs("nonzero")}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==i?`<textPath xlink:href="${i.id}"${void 0!==i.offset?` startOffset="${i.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==i?"</textPath>":""}</text></g>\n`}fillStroke(t="nonzero"){this.content+=`<g ${this.getFillAttrs(t)}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<path d="${o.WordWrap.loose(this.subpath.join(" "))}" />\n</g>\n`,this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}fillStrokeRect(t,e,r,n){this.content+=`<g ${this.getFillAttrs("nonzero")}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}fillStrokeText(t,e,r,n){const i=this.getTextPath(n);this.content+=`<g ${this.getFillAttrs("nonzero")}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?`clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==i?`<textPath xlink:href="${i.id}"${void 0!==i.offset?` startOffset="${i.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==i?"</textPath>":""}</text></g>\n`}getLineDash(){return this.lineDash}setLineDash(t){this.lineDash=t}clip(t="nonzero"){const e=`<clipPath id="clip-${++this.idCount}" fill-rule="${t}" >`+`<path d="${o.WordWrap.loose(this.subpath.join(" "))}" /></clipPath>`;this.assets.push(e),this.clipPath=`url(#clip-${this.idCount})`,this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}registerImage(t,e){const r=t=this.convertImageToSvgImageData(t),n=null===e||void 0===e?`img-${++this.idCount}_w${r.width}_h${r.height}`:e,i=`<image id="${n}" \n`+'x="0" y="0" width="1" height="1" preserveAspectRatio="none" '+`xlink:href="${r.url}" />`;return this.assets.push(i),`#${n}`}registerCustomFilter(t,e){this.assets.push(e),this.filterIdUrl=`url(#${t})`}registerCustomAsset(t){this.assets.push(t)}appendCustomContent(t){this.content+=`<g transform="matrix(${this.ctm.toString()})">${t}</g>\n`}createLinearGradient(t,e,r,n){const i=new c(`lgrad-${++this.idCount}`,t,e,r,n);return this.assets.push(i),i}createRadialGradient(t,e,r,n,i,s){const o=new u(`rgrad-${++this.idCount}`,t,e,r,n,i);return this.assets.push(o),o}createPattern(t,e){const r=new p(`pat-${++this.idCount}`,this.convertImageToSvgImageData(t));return this.assets.push(r),r}beginPattern(){this.contentSaved=this.content,this.content="";const t=new d;this.graphicsStack.push(t)}endPattern(t,e,r,n){const i=++this.idCount,s=`<pattern id="pat-${i}" patternUnits="userSpaceOnUse" patternContentUnits="userSpaceOnUse" `+`x="${t}" y="${e}" width="${r}" height="${n}">\n${this.content}</pattern>`;return this.assets.push(s),this.content=this.contentSaved,this.contentSaved="",this.restore(),`url(#pat-${i})`}convertImageToSvgImageData(t){let e;if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const n=r.getContext("2d");if(null===n)throw new Error("SvgCanvas#convertImageToSvgImageData: Can't get context from Canvas.");n.drawImage(t,0,0),e=new l(r.toDataURL(),0,0,r.width,r.height)}else e="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?new l(t.toDataURL(),0,0,t.width,t.height):t;return e}drawImage(t,e,r,n,i){let s;if((s="string"==typeof t?new l(t,0,0,n,i):this.convertImageToSvgImageData(t)).url.startsWith("#")){const t=this.ctm.translate(e,r).scale(n,i);this.content+='<g><use x="0" y="0" '+`transform="matrix(${t.toString()})" `+`\nxlink:href="${s.url}" /></g>\n`}else this.content+=`<g><image x="${e}" y="${r}" `+`width="${n}" height="${i}" `+'preserveAspectRatio="none" '+`transform="matrix(${this.ctm.toString()})" `+`\nxlink:href="${s.url}" /></g>\n`}beginGroup(){this.content+="<g>"}endGroup(){this.content+="</g>"}}e.SvgCanvas=f},function(t,e,r){var n=r(33),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),s(i,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick(function(){t.apply(null,i)})}}}:t.exports=process},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Integer53=class{static get MAX_INT(){return 9007199254740991}static highestBit(t){t=Math.abs(t);for(let e=52;e>=0;e--)if(Math.trunc(t/Math.pow(2,e))>0)return e;return-1}static bitOr(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296|(e-n)/4294967296)>>>0)+((r|n)>>>0)}static bitAnd(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296&(e-n)/4294967296)>>>0)+((r&n)>>>0)}static bitXor(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296^(e-n)/4294967296)>>>0)+((r^n)>>>0)}static bitNot(t){const e=(4294967295&(t=Math.abs(t)))>>>0;return 4294967296*((2097151&~((t-e)/4294967296))>>>0)+(~e>>>0)}static bitLShift(t,e){return t=Math.abs(t),e>=0?e<=52?t%Math.pow(2,53-e)*Math.pow(2,e):0:e>=-52?Math.trunc(t/Math.pow(2,-e)):0}static bitRShift(t,e){return t=Math.abs(t),e<=0?e>=-52?t%Math.pow(2,53+e)*Math.pow(2,-e):0:e<=52?Math.trunc(t/Math.pow(2,e)):0}static slice(t,e,r){return t=Math.abs(t),r<0&&(r+=53),0<e&&(t=Math.trunc(t/Math.pow(2,e)),r-=e),t%Math.pow(2,r)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Base64=class{static encode(t,e){let r=[];const n=t.length;let i=0,s=0,o=0;for(let e=0,a=0;e<n;e++)0==(a=e%3)?(o=(i=t[e])<<4&48,i=i>>>2&63):1===a?(s=(i=t[e])<<2&60,i=i>>>4&15|o,o=s):((i=(s=t[e])>>>6&3|o)<26?i+=65:i<52?i+=71:i<62?i-=4:i=i<63?43:47,r.push(i),i=63&s),i<26?i+=65:i<52?i+=71:i<62?i-=4:i=i<63?43:47,r.push(i);for(n%3&&(o<26?o+=65:o<52?o+=71:o<62?o-=4:o=o<63?43:47,r.push(o));r.length%4;)r.push(61);if(e&&0<e){const t=[];for(let n=0;n<r.length;n+=e)t.push(...r.slice(n,n+e),10);r=t}let a="";for(let t=0;t<r.length;t++)a+=String.fromCharCode(r[t]);return a}static decode(t){const e=[];let r=0,n=0,i=0;const s=t.length;let o=0,a=0;for(;r<s;r++){if(n=(r+i)%4,65<=(o=t.charCodeAt(r))&&o<=90)o-=65;else if(97<=o&&o<=122)o-=71;else if(48<=o&&o<=57)o+=4;else if(43===o)o=62;else if(47===o)o=63;else{if(61!==o){i++;continue}o=0,r=s}0===n?a=o<<2&252:1===n?(e.push(a|o>>>4&3),a=o<<4&240):2===n?(e.push(a|o>>>2&15),a=o<<6&192):e.push(a|63&o)}return e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransferMatrix2D=e.Rect2D=e.Vector2D=e.Point2D=void 0;const n=r(71).NumberPrecision.decimalPlaces(6);class i{constructor(t,e){this.x=t,this.y=e}toString(){return`${this.x},${this.y}`}}e.Point2D=i;class s{constructor(t,e){this.x=t,this.y=e}static fromPoints(t,e){return new s(e.x-t.x,e.y-t.y)}isZero(){return 0===this.x&&0===this.y}getLength(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}getAngle(){let t=Math.acos(this.x/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return 0>this.y&&(t=2*Math.PI-t),t}static getAngle(t,e){const r=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),n=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));return Math.acos((t.x*e.x+t.y*e.y)/(r*n))}toString(){return`${this.x},${this.y}`}}e.Vector2D=s;e.Rect2D=class{constructor(t,e,r,n){this.x=t,this.y=e,this.w=r,this.h=n}};class o{constructor(t,e,r,n,i,s){this.m11=1,this.m21=0,this.dx=0,this.m12=0,this.m22=1,this.dy=0,t&&("object"==typeof t?(this.m11=t.m11||this.m11,this.m12=t.m12||this.m12,this.m21=t.m21||this.m21,this.m22=t.m22||this.m22,this.dx=t.dx||this.dx,this.dy=t.dy||this.dy):(this.m11=t||this.m11,this.m12=e||this.m12,this.m21=r||this.m21,this.m22=n||this.m22,this.dx=i||this.dx,this.dy=s||this.dy))}toString(){return`${this.m11} ${this.m12} ${this.m21} ${this.m22} ${this.dx} ${this.dy}`}isIdentity(){return 1===this.m11&&0===this.m21&&0===this.dx&&0===this.m12&&1===this.m22&&0===this.dy}scale(t,e){return this.concat(new o(t,0,0,e,0,0))}translate(t,e){return this.concat(new o(1,0,0,1,t,e))}rotate(t){return this.concat(new o(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))}skewX(t){return this.concat(new o(1,0,Math.tan(t),1,0,0))}skewY(t){return this.concat(new o(1,Math.tan(t),0,1,0,0))}concat(t){return new o(this.m11*t.m11+this.m21*t.m12,this.m12*t.m11+this.m22*t.m12,this.m11*t.m21+this.m21*t.m22,this.m12*t.m21+this.m22*t.m22,this.m11*t.dx+this.m21*t.dy+this.dx,this.m12*t.dx+this.m22*t.dy+this.dy)}transfer(t,e){return"object"==typeof t?new i(n(this.m11*t.x+this.m21*t.y+this.dx),n(this.m12*t.x+this.m22*t.y+this.dy)):[n(this.m11*t+this.m21*e+this.dx),n(this.m12*t+this.m22*e+this.dy)]}getInverse(){return new o(this.m22,-this.m12,-this.m21,this.m11,this.m21*this.dy-this.dx*this.m22,this.dx*this.m12-this.m11*this.dy)}}e.TransferMatrix2D=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t=8,e=285){this.nth=t,this.px=e,this.expDict=[],this.lnDict=[this.NaN];let r=1;this.numElements=Math.pow(2,t),this.mask=this.numElements-1,this.expDict.length=this.mask,this.lnDict.length=this.numElements;for(let t=0;t<this.mask;t++)this.expDict[t]=r,this.lnDict[r]=t,(r*=2)>this.mask&&(r=((r^e)&this.mask)>>>0)}bitMask(t){const e=(4294967295&(t=Math.abs(t)))>>>0;return 4294967296*(((t-e)/4294967296&this.maskHi)>>>0)+((e&this.maskLo)>>>0)}checkGenerationResult(){for(let t=1;t<this.numElements;t++)if(void 0===this.lnDict[t])return!1;return!0}get MODULO(){return this.numElements}get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return 2}get NaN(){return Number.NaN}normalize(t){return(t&this.mask)>>>0}isNaN(t){return Number.isNaN(t)}eq(t,e){return(t&this.mask)>>>0==(e&this.mask)>>>0}noteq(t,e){return(t&this.mask)>>>0!=(e&this.mask)>>>0}neg(t){return(t&this.mask)>>>0}inv(t){return 0===(t=(t&this.mask)>>>0)?this.NaN:this.expDict[(this.mask-this.lnDict[t])%this.mask]}add(t,e){return((t^e)&this.mask)>>>0}sub(t,e){return((t^e)&this.mask)>>>0}mul(t,e){return t=(t&this.mask)>>>0,e=(e&this.mask)>>>0,0===t||0===e?0:this.expDict[(this.lnDict[t]+this.lnDict[e])%this.mask]}div(t,e){return t=(t&this.mask)>>>0,0===(e=(e&this.mask)>>>0)?this.NaN:0===t?0:this.expDict[(this.lnDict[t]+(this.mask-this.lnDict[e])%this.mask)%this.mask]}mod(t,e){return(e&this.mask)>>>0==0?this.NaN:0}divmod(t,e){return(e&this.mask)>>>0==0?{q:this.NaN,r:this.NaN,divisible:!1}:{q:this.div(t,e),r:0,divisible:!0}}pow(t,e){return t=this.normalize(t),e%=this.mask,0===t?0===e?1:0:e>=0?this.exp(this.ln(t)*e):this.inv(this.exp(this.ln(t)*-e))}log(t,e){const r=[this.NaN];for(let e=0;e<this.mask;e++){const n=this.pow(t,e);void 0===r[n]&&(r[n]=e)}const n=r[(e&this.mask)>>>0];return void 0!==n?n:this.NaN}exp(t){return t>=0?this.expDict[t%this.mask]:this.inv(this.expDict[-t%this.mask])}ln(t){return this.lnDict[(t&this.mask)>>>0]}}e.Gf2Ext=n;e.Gf2e8Field=class extends n{constructor(t=285){super(8,t)}};e.Gf2e6Field=class extends n{constructor(t=67){super(6,t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Equation=class{constructor(t){this.ring=t}solve(t,e,r,n){const i=this.ring.field;for(let e=0;e<n;e++){let r=this.ring.getAt(t[e],n-e);if(i.eq(r,i.ZERO)){for(let r=e+1;r<n;r++)if(i.noteq(this.ring.getAt(t[r],n-e),i.ZERO)){const n=t[e];t[e]=t[r],t[r]=n;break}r=this.ring.getAt(t[e],n-e)}if(!i.eq(r,i.ZERO)){t[e]=this.ring.mapToSelf(t[e],t=>i.div(t,r));for(let r=e+1;r<n;r++){const s=this.ring.getAt(t[r],n-e),o=this.ring.map(t[e],t=>i.mul(t,s));t[r]=this.ring.sub(t[r],o)}}}for(let e=n-1;e>=0;e--){const r=this.ring.getAt(t[e],n-e);if(!i.eq(r,i.ZERO))for(let r=0;r<e;r++){const s=this.ring.getAt(t[r],n-e),o=this.ring.map(t[e],t=>i.mul(t,s));t[r]=this.ring.sub(t[r],o)}}const s=this.ring.newNthPolynomial(n-1);for(let e=0;e<n;e++)i.eq(this.ring.getAt(t[e],n-e),i.ZERO)?this.ring.setAt(s,n-1-e,i.NaN):this.ring.setAt(s,n-1-e,i.neg(this.ring.getAt(t[e],0)));return s}det(t,e,r,n){const i=this.ring.field;if(n<=0)return i.NaN;const s=(t,e)=>{if(e<2)return this.ring.getAt(t[0],0);if(2===e)return i.sub(i.mul(this.ring.getAt(t[0],1),this.ring.getAt(t[1],0)),i.mul(this.ring.getAt(t[1],1),this.ring.getAt(t[0],0)));let r=i.ZERO;for(let n=0;n<e;n++){const o=[];for(let r=0;r<e;r++)n!==r&&o.push(this.ring.slice(t[r],0,e-1));const a=(e-1+e-n)%2?1:-1,h=s(o,e-1);r=i.add(r,i.mul(this.ring.getAt(t[n],e-1),a>=0?h:i.neg(h)))}return r};if(0===e)return s(0===r?t:t.slice(r),n);const o=[];for(let i=0;i<n;i++)o.push(this.ring.slice(t[r+i],e,e+n));return s(o,n)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.field=t,this._zero=[t.ZERO],this._one=[t.ONE],this._nan=[t.NaN]}listPx(t){throw new Error("not supported operation")}getAt(t,e){return t[e]}setAt(t,e,r){return t[e]=r,t}slice(t,e,r){return t.slice(e,r)}map(t,e){return this.mapToSelf(Array.from(t),e)}mapToSelf(t,e){for(let r=0;r<t.length;r++)t[r]=e(t[r]);return t}newNthPolynomial(t){const e=[];return e.length=t+1,e.fill(this.field.ZERO),e}get ZERO(){return Array.from(this._zero)}get ONE(){return Array.from(this._one)}get NaN(){return this._nan}normalize(t){return(Array.isArray(t)?t:Array.from(t)).map(t=>this.field.normalize(t))}isNaN(t){return t===this.NaN||1===t.length&&t[0]===this.field.NaN}eq(t,e){if(this.isNaN(t)||this.isNaN(e))return!1;const r=this.field.ZERO,n=Math.max(t.length,e.length);for(let i=0;i<n;i++)if(!this.field.eq(void 0!==t[i]?t[i]:r,void 0!==e[i]?e[i]:r))return!1;return!0}noteq(t,e){return!this.eq(t,e)}neg(t){const e=[];for(let r=0;r<t.length;r++)e[r]=this.field.neg(t[r]);return e}add(t,e){const r=[],n=this.field.ZERO;r.length=Math.max(t.length,e.length);for(let i=0;i<r.length;i++)r[i]=this.field.add(void 0!==t[i]?t[i]:n,void 0!==e[i]?e[i]:n);return r}sub(t,e){const r=[],n=this.field.ZERO;r.length=Math.max(t.length,e.length);for(let i=0;i<r.length;i++)r[i]=this.field.sub(void 0!==t[i]?t[i]:n,void 0!==e[i]?e[i]:n);return r}mul(t,e){const r=[],n=this.field.ZERO;r.length=t.length+e.length-1;for(let t=0;t<r.length;t++)r[t]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i+n]=this.field.add(r[i+n],this.field.mul(t[i],e[n]));return r}mod(t,e,r=0){return this.divmod(t,e,r).r}divmod(t,e,r=0){t=Array.from(t);const n=this.field.ZERO;if(r>0){const e=[];e.length=r;for(let t=0;t<r;t++)e[t]=n;t=e.concat(t)}let i=e.length;for(let t=0;t<i&&(void 0===e[i-1]||!this.field.noteq(e[i-1],n));t++,i--);if(0===i)return{q:this.NaN,r:this.NaN,divisible:!1};const s=t.length-i+1,o=[];o.length=s;for(let r=0;r<s;r++)if(this.field.noteq(t[t.length-1-r],n)){const n=this.field.divmod(t[t.length-1-r],e[i-1]);o[s-1-r]=n.q;for(let o=0;o<i-1;o++)t[s-1-r+o]=this.field.sub(t[s-1-r+o],this.field.mul(e[o],n.q));t[t.length-1-r]=n.r}else t[t.length-1-r]=n;let a=!0;const h=[];h.length=i-1;for(let e=0;e<h.length;e++)t[e]&&(a=!1),h[e]=t[e];return{q:o,r:h,divisible:a}}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}}e.ArrayPolynomialRing=n;e.NumberArrayPolynomialRing=class extends n{}},function(t,e,r){"use strict";var n=r(84),i=r(82);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=v(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(81);function v(t,e,r){if(t&&i.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,r),n}s.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var v=t=l.join(a);if(v=v.trim(),!r&&1===t.split("#").length){var w=h.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=o.exec(v);if(x){var _=(x=x[0]).toLowerCase();this.protocol=_,v=v.substr(x.length)}if(r||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===v.substr(0,2);!S||x&&m[x]||(v=v.substr(2),this.slashes=!0)}if(!m[x]&&(S||x&&!b[x])){for(var M,A,P=-1,C=0;C<p.length;C++){-1!==(T=v.indexOf(p[C]))&&(-1===P||T<P)&&(P=T)}-1!==(A=-1===P?v.lastIndexOf("@"):v.lastIndexOf("@",P))&&(M=v.slice(0,A),v=v.slice(A+1),this.auth=decodeURIComponent(M)),P=-1;for(C=0;C<u.length;C++){var T;-1!==(T=v.indexOf(u[C]))&&(-1===P||T<P)&&(P=T)}-1===P&&(P=v.length),this.host=v.slice(0,P),v=v.slice(P),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var k=this.hostname.split(/\./),E=(C=0,k.length);C<E;C++){var D=k[C];if(D&&!D.match(d)){for(var N="",R=0,$=D.length;R<$;R++)D.charCodeAt(R)>127?N+="x":N+=D[R];if(!N.match(d)){var L=k.slice(0,C),B=k.slice(C+1),j=D.match(f);j&&(L.push(j[1]),B.unshift(j[2])),B.length&&(v="/"+B.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var I=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+I,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[_])for(C=0,E=c.length;C<E;C++){var H=c[C];if(-1!==v.indexOf(H)){var F=encodeURIComponent(H);F===H&&(F=escape(H)),v=v.split(H).join(F)}}var W=v.indexOf("#");-1!==W&&(this.hash=v.substr(W),v=v.slice(0,W));var q=v.indexOf("?");if(-1!==q?(this.search=v.substr(q),this.query=v.substr(q+1),e&&(this.query=y.parse(this.query)),v=v.slice(0,q)):e&&(this.search="",this.query={}),v&&(this.pathname=v),b[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){I=this.pathname||"";var G=this.search||"";this.path=I+G}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(i.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var r=new s,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];"protocol"!==c&&(r[c]=t[c])}return b[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!b[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var d=u[p];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",y=r.search||"";r.path=g+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=w||v||r.host&&t.pathname,_=x,S=r.pathname&&r.pathname.split("/")||[],M=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!b[r.protocol]);if(M&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===S[0])),w)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(M)r.hostname=r.host=S.shift(),(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift());return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=S.slice(-1)[0],P=(r.host||t.host||S.length>1)&&("."===A||".."===A)||""===A,C=0,T=S.length;T>=0;T--)"."===(A=S[T])?S.splice(T,1):".."===A?(S.splice(T,1),C++):C&&(S.splice(T,1),C--);if(!x&&!_)for(;C--;C)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),P&&"/"!==S.join("/").substr(-1)&&S.push("");var O,k=""===S[0]||S[0]&&"/"===S[0].charAt(0);M&&(r.hostname=r.host=k?"":S.length?S.shift():"",(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift()));return(x=x||r.host&&S.length)&&!k&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileFetcher=void 0;var n=r(5);class i{static fetchLocation_node(t,e){return new Promise((e,i)=>{try{const s=t.toLowerCase();if(s.startsWith("http:")||s.startsWith("https:")){const o=r(s.startsWith("http:")?41:78);r(18);o.get(t,t=>{if(200===t.statusCode){const r=t.headers["content-type"],s=[];t.on("data",t=>{s.push(t)}),t.on("end",()=>{e({contentType:r,data:Buffer.concat(s)})}),t.on("error",t=>{n.Logger.log("FileFetcher#fetchLocation_node:http.get:on-error:"+t),i(t)})}else n.Logger.log("FileFetcher#fetchLocation_node:http.get:bad-status-code:"+t.statusCode),i(t)})}else if(!t.match(/^[A-Za-z][-+.A-Za-z0-9]*:/)||s.toLowerCase().startsWith("file:")||"win32"===process.platform&&t.match(/^[A-Za-z]:/)){const s=r(!function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}());let o=t;"win32"===process.platform&&(o=(o=o.replace(/^file:\/+([A-Za-z])\//i,"$1:/")).replace(/^\/+([A-Za-z])\//,"$1:/")),o=o.replace(/^file\:\/+/i,"/");const a=[];s.createReadStream(o).on("data",t=>{a.push(t)}).on("end",()=>{e({contentType:null,data:Buffer.concat(a)})}).on("error",t=>{n.Logger.log("FileFetcher#fetchLocation_node:fs.createReadStream:on-error:"+t),i(t)})}else i(t)}catch(t){n.Logger.log("FileFetcher#fetchLocation_node:"+t),i(t)}})}static fetchLocation_xhr(t,e){return new Promise((r,i)=>{try{const s=new XMLHttpRequest;if(s.onload=(t=>{if(200===s.status||304===s.status){const e=s.getResponseHeader("content-type"),o=s.response;o?r({contentType:e,data:new Uint8Array(o)}):(n.Logger.log("FileFetcher#fetchLocation_xhr:xhr.onload:empty-response:"+t),i(t))}else n.Logger.log("FileFetcher#fetchLocation_xhr:xhr.onload:bad-status-code:"+s.status+":"+t),i(t)}),s.onerror=(t=>{n.Logger.log("FileFetcher#fetchLocation_xhr:xhr.onerror:"+t),i(t)}),s.open(void 0!==e&&null!==e&&void 0!==e.method&&null!==e.method?e.method:"GET",t,!0,void 0!==e&&null!==e?e.user:void 0,void 0!==e&&null!==e?e.password:void 0),void 0!==e&&null!==e&&void 0!==e.headers&&null!==e.headers)for(const t of e.headers)s.setRequestHeader(t.header,t.value);s.responseType="arraybuffer",s.send(void 0!==e&&null!==e&&void 0!==e.data&&null!==e.data?e.data:null)}catch(t){n.Logger.log("FileFetcher#fetchLocation_xhr:"+t),i(t)}})}static fetchLocation(t,e){if(i.isNashorn)throw new Error("FileFetcher#fetchLocation: Nashorn handler is not impl.");return i.isNode?this.fetchLocation_node(t,e):this.fetchLocation_xhr(t,e)}}e.FileFetcher=i,i.__ctor=(i.isNashorn=!1,i.isNode=!1,void("undefined"!=typeof Java&&Java&&"function"==typeof Java.type?i.isNashorn=!0:"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(void 0!==process.type&&"renderer"===process.type||(i.isNode=!0))))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BitStreamWriter=e.StreamSeekOrigin=void 0;var n=r(11),i=e.StreamSeekOrigin=void 0;!function(t){t[t.Start=0]="Start",t[t.Current=1]="Current",t[t.End=2]="End"}(i||(e.StreamSeekOrigin=i={}));class s{constructor(t,e){this.pos=0,e?(this.data=e,this.pos=8*e.length):this.data=new Uint8Array(t)}static fromBytes(t,e){const r=new s(t),n=r.byteLength,i=r.data;if(n<e.length)if(e instanceof Uint8Array)r.data.set(e.subarray(0,n));else for(let t=0;t<n;t++)i[t]=e[t];else r.data.set(e);return r.pos=8*e.length,r}writeBits8(t,e){if(0<e){const r=Math.floor(this.pos/8),n=this.pos%8,i=t&255>>>8-e,s=8-n-e;this.data[r]&=255<<8-n,s>=0?this.data[r]|=i<<s:(this.data[r]|=i>>>-s,this.data[r+1]&=255>>>-s,this.data[r+1]|=i<<8+s),this.pos+=e}return this}writeBits(t,e){if(0<e){let r=Math.floor(this.pos/8),i=this.pos%8,s=e;const o=s%8||8,a=n.Integer53.slice(t,s-o,s),h=8-i-o;if(this.data[r]&=255<<8-i,h>=0?(this.data[r]|=a<<h,0===h&&(r+=1)):(this.data[r]|=a>>>-h,this.data[r+1]&=255>>>-h,this.data[r+1]|=a<<8+h,r+=1),s-=o,0===(i=(i+o)%8))for(;0<s;s-=8,r++)this.data[r]=n.Integer53.slice(t,s-8,s);else for(;0<s;s-=8,r++){const e=n.Integer53.slice(t,s-8,s);this.data[r]&=255<<8-i,this.data[r]|=e>>>i,this.data[r+1]&=255>>>i,this.data[r+1]|=e<<8-i}this.pos+=e}return this}writeBitsFromArray(t,e,r){if(0<r)if(e%8==0){const n=e/8,i=Math.floor(r/8),s=r%8;let o=0;if(this.pos%8==0){const e=this.pos/8;if(0<i)for(;o<i;o++)this.data[e+o]=t[n+o];s&&(this.data[e+o]&=255>>>s,this.data[e+o]|=t[n+o]>>>8-s<<8-s),this.pos+=r}else{if(0<i)for(;o<i;o++)this.writeBits8(t[n+o],8);this.writeBits8(t[n+o]>>>8-s,s)}}else{const n=Math.floor(e/8),i=Math.floor((e+r)/8),s=e%8,o=(e+r)%8;if(n===i)this.writeBits8(t[i]>>>8-o,r);else{this.writeBits8(t[n],8-s);for(let e=n+1;e<i;e++)this.writeBits8(t[e],8);this.writeBits8(t[i]>>>8-o,o)}}return this}seek(t,e){switch(e){case i.Start:this.pos=t;break;case i.Current:this.pos+=t;break;case i.End:this.pos=8*this.data.length+t}return this}resize(t){if(this.data.length>t)this.data=this.data.subarray(0,t),this.pos=Math.min(this.pos,8*t);else if(this.data.length<t){const e=new Uint8Array(t);e.set(this.data,0),this.data=e}return this}writeAlignedSingleByte(t){const e=Math.ceil(this.pos/8);return this.data[e]=255&t,this.pos=8*(e+1),this}writeAlignedBytes(t,e,r){const n=Math.ceil(this.pos/8);for(let i=0;i<r;i++)this.data[n+i]=t[e+i];return this.pos=8*(n+r),this}toBytes(){return this.data.subarray(0,this.byteLength)}get byteLength(){return Math.ceil(this.pos/8)}get bitLength(){return this.pos}slice(t,e){e<0&&(e=this.pos+e);const r=new s(Math.ceil((e-t)/8));return r.writeBitsFromArray(this.data,t,e-t),r}setBit(t,e){const r=Math.floor(t/8),n=t%8;this.data[r]=this.data[r]&~(128>>>n)|(e?128:0)>>>n}getBit(t){const e=Math.floor(t/8),r=t%8;return this.data[e]&128>>>r?1:0}setByte(t,e){this.data[t]=e}getByte(t){return this.data[t]}concat(...t){return s.concat(this,...t)}static concat(...t){let e=0;for(const r of t)e+=r.bitLength;const r=new s(Math.ceil(e/8));for(let e=0;e<t.length;e++)r.writeBitsFromArray(t[e].data,0,t[e].bitLength);return r}}e.BitStreamWriter=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static html(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static xml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}e.Escape=n;e.Unescape=class{static html(t){return t.replace(/&#39;/g,"'").replace(/&#x(?:0{0,2})27;/gi,"'").replace(/&apos;/g,"'").replace(/&#34;/g,'"').replace(/&#x(?:0{0,2})22;/gi,'"').replace(/&quot;/g,'"').replace(/&#62;/g,">").replace(/&#x(?:0{0,2})3e;/gi,">").replace(/&gt;/g,">").replace(/&#60;/g,"<").replace(/&#x(?:0{0,2})3c;/gi,"<").replace(/&lt;/g,"<").replace(/&#38;/g,"&").replace(/&#x(?:0{0,2})26;/gi,"&").replace(/&amp;/g,"&")}static xml(t){return n.html(t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Lambdas=class{static pipe(t,e){return(r,n,i)=>{t(r,n,(t,r)=>{t?i(t,null):e(r,n,(t,e)=>i(t,e))})}}};class n{static cli(t,e){if(n.suppressRun)return this;const r=new Map;for(let e of t){let t=!1,n=!1;e.startsWith("?")&&(e=e.substring(1),n=!0);for(const n of process.argv.slice(2))if(e.endsWith("*")){if(n.startsWith(e.substring(0,e.length-1))){t=!0,r.set(e,n.substring(e.length-1));break}}else if(n===e){t=!0,r.set(e,n.substring(e.length));break}if(!n&&!t)return this}return e(r),n.suppressRun=!0,this}static route(t,e){return n.lambdas.set(t,e),this}static run(t,e){if(n.suppressRun)return;process.stdin.resume(),process.stdin.setEncoding("utf8");let r="";process.stdin.on("data",t=>{r+=t}),process.stdin.on("end",()=>{const i=(t,e)=>{process.stdout.write(t)?process.exit(e):process.stdout.once("drain",()=>{process.exit(e)})};try{const s=JSON.parse(r);let o=e;o||s&&s.eventName&&(o=n.lambdas.get(s.eventName)),(o=o||((t,e,r)=>{r({message:`Error: event name ${s&&s.eventName||""} is not found.`},null)}))(s,t,(t,e)=>{t?i(String(t),-1):i(e,0)})}catch(t){i(String(t),-1)}})}}e.App=n,n.lambdas=new Map,n.suppressRun=!1},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){if(this._r=0,this._g=0,this._b=0,this._a=1,!t)return;let e={r:0,g:0,b:0,a:1};if("object"==typeof t){if(t.hasOwnProperty("r")){const r=t;e={r:n.cutoff255(r.r),g:n.cutoff255(r.g),b:n.cutoff255(r.b),a:n.cutoff1(r.a||1)}}else if(t.hasOwnProperty("h")){const r=t;e=n.hslToRgb(r.h,r.s,r.l,r.a||1)}}else if("string"==typeof t){let r;if(r=n.isCode(t)||n.isName(t)||n.isRgb(t)){e=r}else if(r=n.isHsl(t)){const t=r;e=n.hslToRgb(t.h,t.s,t.l,t.a)}}this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a}static cutoff255(t){return t<0?0:t>255?255:t}static cutoff1(t){return t<0?0:t>1?1:t}static isRgb(t){let e,r,i,s,o=1;return!!(s=t.match(/^\s*rgb(a?)\(\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*(?:,\s*((?:[01]?\.)?\d+)\s*)?\)\s*$/))&&(e=n.cutoff255(s[2].endsWith("%")?Math.round(Number.parseFloat(s[2])/100*255):Number.parseInt(s[2],10)),r=n.cutoff255(s[3].endsWith("%")?Math.round(Number.parseFloat(s[3])/100*255):Number.parseInt(s[3],10)),i=n.cutoff255(s[4].endsWith("%")?Math.round(Number.parseFloat(s[4])/100*255):Number.parseInt(s[4],10)),"a"===s[1]&&(o=n.cutoff1(Number.parseFloat(s[5]))),{r:e,g:r,b:i,a:o})}static isHsl(t){let e,r,i,s,o=1;return!!(s=t.match(/^\s*hsl(a?)\(\s*(-?(?:\d+\.)?\d+)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*((?:[01]?\.)?\d+)\s*\)\s*$/))&&((e=Number.parseFloat(s[2])%360)<0&&(e=360-e),r=n.cutoff1(s[3].endsWith("%")?Math.round(Number.parseFloat(s[3])/100):Number.parseFloat(s[3])),i=n.cutoff1(s[4].endsWith("%")?Math.round(Number.parseFloat(s[4])/100):Number.parseFloat(s[4])),"a"===s[1]&&(o=n.cutoff1(Number.parseFloat(s[5]))),{h:e,s:r,l:i,a:o})}static isCode(t){let e,r,n;let i;return(i=t.match(/^\s*#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])\s*$/))?{r:e=Number.parseInt(`${i[1]}${i[1]}`,16),g:r=Number.parseInt(`${i[2]}${i[2]}`,16),b:n=Number.parseInt(`${i[3]}${i[3]}`,16),a:1}:!!(i=t.match(/^\s*#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})\s*$/))&&{r:e=Number.parseInt(i[1],16),g:r=Number.parseInt(i[2],16),b:n=Number.parseInt(i[3],16),a:1}}static isName(t){if(n.colorNames.has(t)){const e=n.colorNames.get(t);return{r:e.r,g:e.g,b:e.b,a:1}}return!1}static fromRgba(t,e,r,i=1){const s=new n;return s._r=n.cutoff255(t),s._g=n.cutoff255(e),s._b=n.cutoff255(r),s._a=n.cutoff1(i),s}static hueToRgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}static hslToRgb(t,e,r,i=1){t%=360,e=n.cutoff1(e),r=n.cutoff1(r),t<0&&(t=360-t);const s=r<=.5?r*(e+1):r+e-r*e,o=2*r-s;return{r:n.hueToRgb(o,s,t+1/3),g:n.hueToRgb(o,s,t),b:n.hueToRgb(o,s,t-1/3),a:n.cutoff1(i)}}static fromHsla(t,e,r,i=1){t%=360,e=n.cutoff1(e),r=n.cutoff1(r),t<0&&(t=360-t);const s=new n,o=r<=.5?r*(e+1):r+e-r*e,a=2*r-o;return s._r=n.hueToRgb(a,o,t+1/3),s._g=n.hueToRgb(a,o,t),s._b=n.hueToRgb(a,o,t-1/3),s._a=n.cutoff1(i),s}static fromGray(t,e=1){const r=new n;return r._r=n.cutoff255(t),r._g=n.cutoff255(t),r._b=n.cutoff255(t),r._a=n.cutoff1(e),r}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}toString(){return 1!==this._a?this.toRgbaString():this.toCode()}toCode(){return"#"+`0${this._r.toString(16)}`.slice(-2)+`0${this._g.toString(16)}`.slice(-2)+`0${this._b.toString(16)}`.slice(-2)}toRgbString(){return`rgb(${this._r},${this._g},${this._b})`}toRgbaString(){return`rgb(${this._r},${this._g},${this._b},${this._a})`}toHsla(){const t=this._r/255,e=this._g/255,r=this._b/255,n=Math.max(e,r),i=Math.min(e,r);let s=0,o=0;const a=(n+i)/2,h=n-i;return n!==i&&(s=60*(s=n===t?(e-r)/h:n===e?(r-t)/h+2:(t-e)/h+4)+(s<0?360:0),o=h/(a<.5?n+i:2-n-i)),{h:s,s:o,l:a,a:this._a}}toHslString(){const t=this.toHsla();return`hsl(${t.h},${t.s}%,${t.l}%)`}toHslaString(){const t=this.toHsla();return`hsl(${t.h},${t.s}%,${t.l}%,${this._a})`}}e.WebColor=n,n.colorNames=new Map([["red",{r:255,g:0,b:0}],["darkred",{r:139,g:0,b:0}],["maroon",{r:128,g:0,b:0}],["brown",{r:165,g:42,b:42}],["firebrick",{r:178,g:34,b:34}],["sienna",{r:160,g:82,b:45}],["saddlebrown",{r:139,g:69,b:19}],["peru",{r:205,g:133,b:63}],["indianred",{r:205,g:92,b:92}],["rosybrown",{r:188,g:143,b:143}],["lightcoral",{r:240,g:128,b:128}],["salmon",{r:250,g:128,b:114}],["darksalmon",{r:233,g:150,b:122}],["coral",{r:255,g:127,b:80}],["tomato",{r:255,g:99,b:71}],["sandybrown",{r:244,g:164,b:96}],["lightsalmon",{r:255,g:160,b:122}],["chocolate",{r:210,g:105,b:30}],["orangered",{r:255,g:69,b:0}],["orange",{r:255,g:165,b:0}],["darkorange",{r:255,g:140,b:0}],["tan",{r:210,g:180,b:140}],["peachpuff",{r:255,g:218,b:185}],["bisque",{r:255,g:228,b:196}],["moccasin",{r:255,g:228,b:181}],["navajowhite",{r:255,g:222,b:173}],["wheat",{r:245,g:222,b:179}],["burlywood",{r:222,g:184,b:135}],["darkgoldenrod",{r:184,g:134,b:11}],["goldenrod",{r:218,g:165,b:32}],["gold",{r:255,g:215,b:0}],["yellow",{r:255,g:255,b:0}],["lightgoldenrodyellow",{r:250,g:250,b:210}],["palegoldenrod",{r:238,g:232,b:170}],["khaki",{r:240,g:230,b:140}],["darkkhaki",{r:189,g:183,b:107}],["blanchedalmond",{r:255,g:235,b:205}],["lightyellow",{r:255,g:255,b:224}],["cornsilk",{r:255,g:248,b:220}],["antiquewhite",{r:250,g:235,b:215}],["papayawhip",{r:255,g:239,b:213}],["papayawhite",{r:255,g:239,b:213}],["lemonchiffon",{r:255,g:250,b:205}],["beige",{r:245,g:245,b:220}],["oldlace",{r:253,g:245,b:230}],["lightcyan",{r:224,g:255,b:255}],["aliceblue",{r:240,g:248,b:255}],["whitesmoke",{r:245,g:245,b:245}],["lavenderblush",{r:255,g:240,b:245}],["floralwhite",{r:255,g:250,b:240}],["mintcream",{r:245,g:255,b:250}],["ghostwhite",{r:248,g:248,b:255}],["honeydew",{r:240,g:255,b:240}],["seashell",{r:255,g:245,b:238}],["ivory",{r:255,g:255,b:240}],["azure",{r:240,g:255,b:255}],["snow",{r:255,g:250,b:250}],["white",{r:255,g:255,b:255}],["gainsboro",{r:220,g:220,b:220}],["lightgrey",{r:211,g:211,b:211}],["silver",{r:192,g:192,b:192}],["darkgray",{r:169,g:169,b:169}],["lightslategray",{r:119,g:136,b:153}],["slategray",{r:112,g:128,b:144}],["gray",{r:128,g:128,b:128}],["dimgray",{r:105,g:105,b:105}],["darkslategray",{r:47,g:79,b:79}],["black",{r:0,g:0,b:0}],["lawngreen",{r:124,g:252,b:0}],["greenyellow",{r:173,g:255,b:47}],["chartreuse",{r:127,g:255,b:0}],["lime",{r:0,g:255,b:0}],["limegreen",{r:50,g:205,b:50}],["yellowgreen",{r:154,g:205,b:50}],["olive",{r:128,g:128,b:0}],["olivedrab",{r:107,g:142,b:35}],["darkolivegreen",{r:85,g:107,b:47}],["forestgreen",{r:34,g:139,b:34}],["darkgreen",{r:0,g:100,b:0}],["green",{r:0,g:128,b:0}],["seagreen",{r:46,g:139,b:87}],["mediumseagreen",{r:60,g:179,b:113}],["darkseagreen",{r:143,g:188,b:143}],["lightgreen",{r:144,g:238,b:144}],["palegreen",{r:152,g:251,b:152}],["springgreen",{r:0,g:255,b:127}],["mediumspringgreen",{r:0,g:250,b:154}],["teal",{r:0,g:128,b:128}],["darkcyan",{r:0,g:139,b:139}],["lightseagreen",{r:51,g:153,b:153}],["mediumaquamarine",{r:102,g:205,b:170}],["cadetblue",{r:95,g:158,b:160}],["steelblue",{r:70,g:130,b:180}],["aquamarine",{r:127,g:255,b:212}],["powderblue",{r:176,g:224,b:230}],["paleturquoise",{r:175,g:238,b:238}],["lightblue",{r:173,g:216,b:230}],["lightsteelblue",{r:176,g:196,b:222}],["skyblue",{r:135,g:206,b:235}],["lightskyblue",{r:135,g:206,b:250}],["mediumturquoise",{r:72,g:209,b:204}],["turquoise",{r:64,g:224,b:208}],["darkturquoise",{r:0,g:206,b:209}],["aqua",{r:0,g:255,b:255}],["cyan",{r:0,g:255,b:255}],["deepskyblue",{r:0,g:191,b:255}],["dodgerblue",{r:30,g:144,b:255}],["cornflowerblue",{r:100,g:149,b:237}],["royalblue",{r:65,g:105,b:225}],["blue",{r:0,g:0,b:255}],["mediumblue",{r:0,g:0,b:205}],["navy",{r:0,g:0,b:128}],["darkblue",{r:0,g:0,b:139}],["midnightblue",{r:25,g:25,b:112}],["darkslateblue",{r:72,g:61,b:139}],["mediumslateblue",{r:123,g:104,b:238}],["slateblue",{r:106,g:90,b:205}],["darkorchid",{r:153,g:50,b:204}],["darkviolet",{r:148,g:0,b:211}],["blueviolet",{r:138,g:43,b:226}],["mediumorchid",{r:186,g:85,b:211}],["plum",{r:221,g:160,b:221}],["lavender",{r:230,g:230,b:250}],["thistle",{r:216,g:191,b:216}],["orchid",{r:218,g:112,b:214}],["magenta",{r:255,g:0,b:255}],["fuchsia",{r:255,g:0,b:255}],["violet",{r:238,g:130,b:238}],["indigo",{r:75,g:0,b:130}],["darkmagenta",{r:139,g:0,b:139}],["purple",{r:128,g:0,b:128}],["mediumpurple",{r:147,g:112,b:219}],["mediumvioletred",{r:199,g:21,b:133}],["deeppink",{r:255,g:20,b:147}],["hotpink",{r:255,g:105,b:180}],["crimson",{r:220,g:20,b:60}],["palevioletred",{r:219,g:112,b:147}],["lightpink",{r:255,g:182,b:193}],["pink",{r:255,g:192,b:203}],["mistyrose",{r:255,g:228,b:225}]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReedSolomon=void 0;var n=r(17),i=r(16);e.ReedSolomon=class{constructor(t,e,r=0){this.field=t,this.gx=e,this.aDegree=r,this.poly=new n.ArrayPolynomialRing(t)}static listGx(t,e,r,i=0){const s=new n.ArrayPolynomialRing(t),o=e||[];let a=[t.exp(i),t.ONE];const h=[t.exp(i+1),t.ONE];0===o.length?o.push(a):(a=o[o.length-1],h[0]=t.exp(i+o.length));for(let e=o.length+1;e<=r;e++)a=s.mul(a,h),o.push(a),h[0]=t.exp(i+e);return o}static getGx(t,e,r=0){const i=new n.ArrayPolynomialRing(t);let s=[t.exp(r),t.ONE];const o=[t.exp(r+1),t.ONE];for(let n=2;n<=e;n++)s=i.mul(s,o),o[0]=t.exp(r+n);return s}encode(t){return this.poly.divmod(t,this.gx,this.gx.length-1).r}decode(t,e=0){let r=!1;const n=[];n.length=this.gx.length-1,n.length<=2*e&&(n.length=2*e);for(let e=0;e<n.length;e++){let i=t[0];for(let r=1;r<t.length;r++){const n=this.field.exp((this.aDegree+e)*r);i=this.field.add(this.field.mul(t[r],n),i)}n[e]=i,r=r||this.field.noteq(i,this.field.ZERO)}if(!r)return Array.prototype.slice.call(t,this.gx.length-1);const s=this.poly.field,o=new i.Equation(this.poly);let a=Math.floor(n.length/2),h=[];for(;a>0;a--){h.length=0;for(let t=0;t<a;t++)h[t]=n.slice(t,t+a);if(s.noteq(o.det(h,0,0,h.length),s.ZERO))break}if(0===a)return Array.prototype.slice.call(t,this.gx.length-1);for(let t=0;t<a;t++)h[t]=[s.neg(n[a+t])].concat(h[t]);const l=[s.ONE].concat(o.solve(h,0,0,a).reverse()),c=[];for(let t=0;t<s.MODULO-1;t++){let e=l[0];for(let r=1;r<l.length;r++){const n=s.exp((this.aDegree+t)*r);e=s.add(s.mul(l[r],n),e)}s.eq(s.ZERO,e)&&c.push(s.MODULO-1-t-this.aDegree)}h=[];for(let t=0;t<a;t++){h[t]=[s.neg(n[t])];for(let e=0;e<c.length;e++)h[t].push(s.exp((this.aDegree+t)*c[e]))}const u=o.solve(h,0,0,a);for(let e=0;e<a;e++)t[c[e]]=s.add(t[c[e]],u[e]);return Array.prototype.slice.call(t,this.gx.length-1)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BCH=void 0;var n=r(11),i=r(17),s=r(27),o=r(16);e.BCH=class{constructor(t,e,r=1){this.field=t,this.aDegree=r,this.gx=e}set gx(t){this._gx=t,this._gxLength=n.Integer53.highestBit(t)+1}get gx(){return this._gx}get gxLength(){return this._gxLength}static getGx(t,e,r=1){const i=Math.log2(t.MODULO),o=s.Gf2PrimeFieldHelper.listPx(i,!0),a=[],h=Math.min(2*e,t.MODULO-1);for(let e=0;e<t.MODULO-1;e++)for(let r=0;r<o.length;r++){const s=o[r];let h=1&s;for(let r=1;r<=i;r++)h=t.add(h,1&n.Integer53.bitRShift(s,r)?t.exp(r*e):0);0===h&&(a[e]=s)}let l=a[r];for(let t=1;t<h;t++){let e=!1;const n=a[t+r];for(let i=t-1;i>=0;i--)if(n===a[i+r]){e=!0;break}e||(l=s.Gf2PrimeFieldHelper.bitPolyMul(l,n))}return l}encode(t){return s.Gf2PrimeFieldHelper.bitPolyDiv(t,this._gx,this._gxLength-1).r}decode(t,e){const r=this.field.MODULO-1;let s=!1;const a=[];a.length=2*e;for(let e=0;e<a.length;e++){let i=(1&t)*this.field.ONE;for(let s=1;s<r;s++){const r=this.field.exp((this.aDegree+e)*s);i=this.field.add((1&n.Integer53.bitRShift(t,s))*r,i)}a[e]=i,s=s||this.field.noteq(i,this.field.ZERO)}if(!s)return n.Integer53.bitRShift(t,this._gxLength-1);const h=new o.Equation(new i.ArrayPolynomialRing(this.field));let l=Math.floor(a.length/2);const c=[];for(;l>0;l--){c.length=0;for(let t=0;t<l;t++)c[t]=a.slice(t,t+l);if(this.field.noteq(h.det(c,0,0,c.length),this.field.ZERO))break}if(0===l)return n.Integer53.bitRShift(t,this._gxLength-1);for(let t=0;t<l;t++)c[t]=[this.field.neg(a[l+t])].concat(c[t]);const u=[this.field.ONE].concat(h.solve(c,0,0,l).reverse()),p=[];for(let t=0;t<this.field.MODULO-1;t++){let e=u[0];for(let r=1;r<u.length;r++){const n=this.field.exp((this.aDegree+t)*r);e=this.field.add(this.field.mul(u[r],n),e)}this.field.eq(this.field.ZERO,e)&&p.push(this.field.MODULO-1-t-this.aDegree)}let d=0;for(let t=0;t<l;t++)d+=Math.pow(2,p[t]);return t=n.Integer53.bitXor(t,d),n.Integer53.bitRShift(t,this._gxLength-1)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GfPrime=class{constructor(t,e=3){this.prime=t,this.alpha=e,this.expDict=[],this.lnDict=[this.NaN];let r=1;for(let n=0;n<t-1;n++)this.expDict[n]=r,this.lnDict[r]=n,r=r*e%t}checkGenerationResult(){for(let t=1;t<this.prime;t++)if(void 0===this.lnDict[t])return!1;return!0}get MODULO(){return this.prime}get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return this.alpha}get NaN(){return Number.NaN}normalize(t){return(t<0?this.prime- -t%this.prime:t)%this.prime}isNaN(t){return Number.isNaN(t)}eq(t,e){return this.normalize(t)===this.normalize(e)}noteq(t,e){return this.normalize(t)!==this.normalize(e)}neg(t){return(this.prime-t%this.prime)%this.prime}inv(t){return 0===(t=this.normalize(t))?this.NaN:this.expDict[(this.prime-1-this.ln(t))%(this.prime-1)]}inv_withoutTable(t){if(0===(t=this.normalize(t)))return this.NaN;let e=1;for(let r=0;r<this.prime;r++){if(e%t==0)return e/t%this.prime;e+=this.prime}return this.NaN}add(t,e){return(this.normalize(t)+this.normalize(e))%this.prime}sub(t,e){return this.normalize(this.normalize(t)-this.normalize(e))}mul(t,e){return this.normalize(t)*this.normalize(e)%this.prime}div(t,e){return this.normalize(t)*this.inv(e)%this.prime}mod(t,e){return e%this.prime==0?this.NaN:0}divmod(t,e){return e%this.prime==0?{q:this.NaN,r:this.NaN,divisible:!1}:{q:this.div(t,e),r:0,divisible:!0}}pow(t,e){return t=this.normalize(t),e%=this.prime-1,0===t?0===e?1:0:e>=0?this.exp(this.ln(t)*e):this.inv(this.exp(this.ln(t)*-e))}pow_withoutTable(t,e){return t=this.normalize(t),e%=this.prime-1,0===t?0===e?1:0:e>=0?this.exp_withoutTable(this.ln_withoutTable(t)*e):this.inv_withoutTable(this.exp_withoutTable(this.ln(t)*-e))}log(t,e){const r=[this.NaN];for(let e=0;e<this.prime-1;e++){const n=this.pow(t,e);void 0===r[n]&&(r[n]=e)}const n=r[this.normalize(e)];return void 0!==n?n:this.NaN}log_withoutTable(t,e){let r=this.ln_withoutTable(e);const n=this.ln_withoutTable(t);if(this.isNaN(r)||this.isNaN(n))return this.NaN;for(let t=0;t<this.prime;t++){if(r%n==0)return r/n%this.prime;r=r+this.prime-1}return this.NaN}exp(t){return t>=0?this.expDict[t%(this.prime-1)]:this.inv(this.expDict[-t%(this.prime-1)])}exp_withoutTable(t){return t>=0?Math.pow(this.alpha,t%(this.prime-1))%this.prime:this.inv_withoutTable(Math.pow(this.alpha,-t%(this.prime-1)))}ln(t){return this.lnDict[this.normalize(t)]}ln_withoutTable(t){if(0===(t=this.normalize(t)))return this.NaN;let e=1;for(let r=0;r<this.prime-1;r++){if(t===e)return r;e=e*this.alpha%this.prime}return this.NaN}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Gf2PrimeArrayPolynomialRing=e.Gf2PrimeBitPolynomialRing=e.Gf2PrimeFieldHelper=void 0;var n=r(11),i=r(15),s=r(26);class o{static listPx(t,e=!1){const r=[],s=[];r[Math.pow(2,t)-1]=1,r[0]=1;const a=Math.pow(2,t+1);for(let t=2;t<a;t++){o.polyDiv(r,o.bitToPoly(t)).divisible&&(0===s.length||s.every(e=>!o.bitPolyDiv(t,e).divisible))&&s.push(t)}return e?s:s.filter(e=>Boolean(1&n.Integer53.bitRShift(e,t))).filter(e=>{return new i.Gf2Ext(t,e).checkGenerationResult()})}static bitToPoly(t){const e=[],r=(4294967295&(t=Math.abs(t)))>>>0,n=(t-r)/4294967296;for(let t=0;t<32;t++)e[t]=(r&1<<t)>>>0?1:0;for(let t=0;t<21;t++)e[32+t]=(n&1<<t)>>>0?1:0;for(let t=52;t>0;t--)if(e[t])return e.length=t+1,e;return e.length=1,e}static polyToBit(t){let e=0;const r=Math.min(53,t.length);for(let n=0;n<r;n++)t[n]&&(e+=Math.pow(2,n));return e}static polyAdd(t,e){const r=[];r.length=Math.max(t.length,e.length);for(let n=0;n<r.length;n++)r[n]=(void 0!==t[n]?t[n]:0)^(void 0!==e[n]?e[n]:0);return r}static polySub(t,e){return this.polyAdd(t,e)}static bitPolyAdd(t,e){return n.Integer53.bitXor(t,e)}static bitPolySub(t,e){return n.Integer53.bitXor(t,e)}static polyMul(t,e){const r=[];r.length=t.length+e.length-1;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i+n]^=t[i]&e[n];return r}static bitPolyMul(t,e){let r=0;for(let i=0;i<53;i++)r=n.Integer53.bitXor(r,t*(1&n.Integer53.bitRShift(e,i))*Math.pow(2,i));return r}static polyDiv(t,e,r=0){if(t=Array.from(t),r>0){const e=[];e.length=r;for(let t=0;t<r;t++)e[t]=0;t=e.concat(t)}let n=e.length;for(let t=0;t<n&&!e[n-1];t++,n--);if(0===n)return{q:[Number.NaN],r:[Number.NaN],divisible:!1};const i=t.length-n+1,s=[];s.length=i;for(let r=0;r<i;r++)if(t[t.length-1-r]){s[i-1-r]=1;for(let s=0;s<n;s++)t[i-1-r+s]^=e[s]}else t[t.length-1-r]=0;let o=!0;const a=[];a.length=n-1;for(let e=0;e<a.length;e++)t[e]&&(o=!1),a[e]=t[e];return{q:s,r:a,divisible:o}}static bitPolyDiv(t,e,r=0){r&&(t=n.Integer53.bitLShift(t,r));let i=53;for(let t=0;t<53&&!n.Integer53.bitRShift(e,52-t);t++,i--);if(0===i)return{q:Number.NaN,r:Number.NaN,divisible:!1};const s=53-i+1;let o=0;for(let r=0,i=Math.pow(2,52);r<s;r++,i/=2)if(1&Math.trunc(t/i)){const i=Math.pow(2,s-1-r);o+=i,t=n.Integer53.bitXor(t,e*i)}return{q:o,r:t,divisible:0===t}}static polyIsZero(t){const e=Math.min(52,t.length);for(let r=0;r<e;r++)if(t[r])return!0;return!1}}e.Gf2PrimeFieldHelper=o;e.Gf2PrimeBitPolynomialRing=class{get field(){return this._field?this._field:(this._field=new s.GfPrime(2),this._field)}listPx(t,e=!1){return o.listPx(t,e)}getAt(t,e){return 1&n.Integer53.bitRShift(t,e)}setAt(t,e,r){return n.Integer53.bitNot(n.Integer53.bitLShift(1&r?0:1,e))}slice(t,e,r){return n.Integer53.bitAnd(n.Integer53.bitRShift(n.Integer53.MAX_INT,r-e),n.Integer53.bitRShift(t,e))}map(t,e){return this.mapToSelf(t,e)}mapToSelf(t,e){for(let r=0;r<53;r++)t=this.setAt(t,r,e(this.getAt(t,r)));return t}newNthPolynomial(t){return 0}get ZERO(){return 0}get ONE(){return 1}get NaN(){return Number.NaN}normalize(t){return t}isNaN(t){return Number.isNaN(t)}eq(t,e){return t===e}noteq(t,e){return t!==e}neg(t){return t}add(t,e){return n.Integer53.bitXor(t,e)}sub(t,e){return n.Integer53.bitXor(t,e)}mul(t,e){return o.bitPolyMul(t,e)}mod(t,e,r=0){return o.bitPolyDiv(t,e,r).r}divmod(t,e,r=0){return o.bitPolyDiv(t,e,r)}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}};e.Gf2PrimeArrayPolynomialRing=class{constructor(){this._nan=[Number.NaN]}get field(){return this._field?this._field:(this._field=new s.GfPrime(2),this._field)}listPx(t,e=!1){return o.listPx(t,e).map(t=>o.bitToPoly(t))}getAt(t,e){return t[e]}setAt(t,e,r){return t[e]=r,t}slice(t,e,r){return t.slice(e,r)}map(t,e){return this.mapToSelf(Array.from(t),e)}mapToSelf(t,e){for(let r=0;r<t.length;r++)t[r]=e(t[r]);return t}newNthPolynomial(t){const e=[];return e.length=t+1,e.fill(0),e}get ZERO(){return[0]}get ONE(){throw[1]}get NaN(){return this._nan}normalize(t){return(Array.isArray(t)?t:Array.from(t)).map(t=>Boolean(1&t)?1:0)}isNaN(t){return t===this.NaN||1===t.length&&t[0]===Number.NaN}eq(t,e){if(this.isNaN(t)||this.isNaN(e))return!1;const r=Math.max(t.length,e.length);for(let n=0;n<r;n++)if((void 0!==t[n]&&Boolean(1&t[n])?1:0)!=(void 0!==e[n]&&Boolean(1&e[n])?1:0))return!1;return!0}noteq(t,e){return!this.eq(t,e)}neg(t){return Array.from(t)}add(t,e){return o.polyAdd(t,e)}sub(t,e){return o.polySub(t,e)}mul(t,e){return o.polyMul(t,e)}mod(t,e,r=0){return o.polyDiv(t,e,r).r}divmod(t,e,r=0){return o.polyDiv(t,e,r)}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static isAbsolute(t){const e=t.toLowerCase();return!(!e.startsWith("/")&&!e.startsWith("\\"))||"."!==e&&!e.startsWith("./")&&!e.startsWith(".\\")&&(".."!==e&&!e.startsWith("../")&&!e.startsWith("..\\")&&(!!e.match(/^([a-z][a-z0-9+\-.]*):/)||!!e.match(/^[a-z]:[/\/]/)))}static getDirectory(t){let e="",r=t;r.startsWith("\\\\?\\")&&(e+="\\\\?\\",r=r.substring(3));let n=r.indexOf("?");n<0&&(n=r.length);let i=r.indexOf("#");if(i<0&&(i=r.length),(r=r.substring(0,Math.min(n,i))).endsWith("/")||r.endsWith("\\"))return e+r;for(;r.length>0;)if((r=r.substring(0,r.length-1)).endsWith("/")||r.endsWith("\\"))return e+r;return e+r||"/"}static join(t,e){return n.isAbsolute(e)?e:n.getDirectory(t)+e}static getPathExt(t){return t.slice(2+(t.lastIndexOf(".")-1>>>0)).toLowerCase()}static pathExtToContentType(t){let e=null;switch(t){case"jpeg":case"jpg":e="image/jpeg";break;case"png":e="image/png";break;case"gif":e="image/gif";break;case"svg":case"svgz":e="image/svg+xml";break;case"tiff":case"tif":e="image/tiff";break;case"jp2":case"j2c":e="image/jp2";break;case"css":e="text/css";break;case"js":e="text/javascript";break;case"csv":e="text/csv";break;case"txt":e="text/plain";break;case"html":case"htm":e="text/plain"}return e}}e.Uri=n},function(t,e,r){"use strict";t.exports=s;var n=r(4),i=r(7);function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(this,null,null)}function a(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(2),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},function(t,e,r){"use strict";var n=r(9).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(r);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(r+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(r+2)}}(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=o(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r)return 0;if((i=o(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r)return 0;if((i=o(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";var n=r(10).nextTick;function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var s,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n;m.WritableState=g;var a=r(7);a.inherits=r(2);var h={deprecate:r(89)},l=r(34),c=r(9).Buffer,u=global.Uint8Array||function(){};var p,d=r(32);function f(){}function g(t,e){s=s||r(4),t=t||{};var a=e instanceof s;this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var h=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=h||0===h?h:a&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,s=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,s){--e.pendingcb,r?(n(s,i),n(_,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(s(i),t._writableState.errorEmitted=!0,t.emit("error",i),_(t,e))}(t,r,i,e,s);else{var a=w(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||v(t,r),i?o(y,t,r,a,s):y(t,r,a,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function m(t){if(s=s||r(4),!(p.call(m,this)||this instanceof s))return new m(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function b(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function y(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),_(t,e)}function v(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,h=!0;r;)s[a]=r,r.isBuf||(h=!1),r=r.next,a+=1;s.allBuffers=h,b(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,c,u),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),_(t,e)})}function _(t,e){var r=w(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}a.inherits(m,l),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===m&&(t&&t._writableState instanceof g)}})):p=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,r){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=t,c.isBuffer(i)||i instanceof u);return a&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof r&&(r=f),s.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),n(e,r)}(this,r):(a||function(t,e,r,i){var s=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),n(i,o),s=!1),s}(this,s,t,r))&&(s.pendingcb++,o=function(t,e,r,n,i,s){if(!r){var o=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,r));return e}(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,n,i,s);return h}(this,s,a,t,e,r)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},m.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,r){var i=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,r){e.ending=!0,_(t,e),r&&(e.finished?n(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=d.destroy,m.prototype._undestroy=d.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}},function(t,e,r){"use strict";var n=r(10).nextTick;function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var n=r(94),i=r(93),s=r(36);function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,r){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=p(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!h.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(h.isBuffer(e)){var r=0|d(e.length);return 0===(t=a(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):p(t,e);if("Buffer"===e.type&&s(e.data))return p(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!h.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function p(t,e){var r=e.length<0?0:0|d(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function f(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n)return U(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){var s,o=1,a=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,r/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(s=r;s<a;s++)if(l(t,s)===l(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===h)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){for(var u=!0,p=0;p<h;p++)if(l(t,s+p)!==l(e,p)){u=!1;break}if(u)return s}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function v(t,e,r,n){return F(U(e,t.length-r),t,r,n)}function w(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function _(t,e,r,n){return F(H(e),t,r,n)}function S(t,e,r,n){return F(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function M(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,h,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u<=r)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(s=t[i+1]))&&(h=(31&l)<<6|63&s)>127&&(c=h);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(h=(15&l)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=u}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=P));return r}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,r){return l(null,t,e,r)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return M(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,r,n,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var s=i-n,o=r-e,a=Math.min(s,o),l=this.slice(n,i),c=t.slice(e,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=I(t[s]);return i}function k(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function E(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,i,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function R(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function $(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,s){return s||$(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,s){return s||$(t,0,r,8),i.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=h.prototype;else{var i=e-t;r=new h(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},h.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},h.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),i.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),i.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),i.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),i.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);D(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);D(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=h.isBuffer(t)?t:U(new h(t,n).toString()),a=o.length;for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function I(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}},function(t,e,r){t.exports=r(35).EventEmitter},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,a,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(s(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,h=0;h<o;h++)l[h].apply(this,a);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,s,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,s=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(a=o;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){s=a;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=r(10).nextTick;t.exports=y;var i,s=r(36);y.ReadableState=b;r(35).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(34),h=r(9).Buffer,l=global.Uint8Array||function(){};var c=r(7);c.inherits=r(2);var u=r(92),p=void 0;p=u&&u.debuglog?u.debuglog("stream"):function(){};var d,f=r(91),g=r(32);c.inherits(y,a);var m=["error","close","destroy","pause","resume"];function b(t,e){i=i||r(4),t=t||{};var n=e instanceof i;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(30).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function y(t){if(i=i||r(4),!(this instanceof y))return new y(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function v(t,e,r,n,i){var s,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,S(t)}(t,o)):(i||(s=function(t,e){var r;n=e,h.isBuffer(n)||n instanceof l||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||0!==e.length?w(t,o,e,!1):A(t,o)):w(t,o,e,!1))):n||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),A(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=h.from(t,e),e=""),r=!0),v(this,t,e,!1,r)},y.prototype.unshift=function(t){return v(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return d||(d=r(30).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var x=8388608;function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n(M,t):M(t))}function M(t){p("emit readable"),t.emit("readable"),O(t)}function A(t,e){e.readingMore||(e.readingMore=!0,n(P,t,e))}function P(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function C(t){p("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),0===(t-=o)){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=h.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),0===(t-=o)){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function E(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}y.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):S(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&E(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(r,e))),null===(n=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&E(this)),null!==n&&this.emit("data",n),n},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,p("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==process.stdout&&t!==process.stderr?l:y;function h(e,n){p("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",b),t.removeListener("drain",c),t.removeListener("error",g),t.removeListener("unpipe",h),r.removeListener("end",l),r.removeListener("end",y),r.removeListener("data",f),u=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){p("onend"),t.end()}i.endEmitted?n(a):r.once("end",a),t.on("unpipe",h);var c=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,O(t))}}(r);t.on("drain",c);var u=!1;var d=!1;function f(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==N(i.pipes,t))&&!u&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function g(e){p("onerror",e),y(),t.removeListener("error",g),0===o(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",b),y()}function b(){p("onfinish"),t.removeListener("close",m),y()}function y(){p("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",m),t.once("finish",b),t.emit("pipe",r),i.flowing||(p("pipe resume"),r.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var o=N(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},y.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):n(C,this))}return r},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n(T,t,e))}(this,t)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var s=0;s<m.length;s++)t.on(m[s],this.emit.bind(this,m[s]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},y._fromList=k},function(t,e,r){(e=t.exports=r(37)).Stream=e,e.Readable=e,e.Writable=r(31),e.Duplex=r(4),e.Transform=r(29),e.PassThrough=r(88)},function(t,e,r){var n=r(40),i=r(2),s=r(38),o=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},a=e.IncomingMessage=function(t,e,r,i){var o=this;if(s.Readable.call(o),o._mode=r,o.headers={},o.rawHeaders=[],o.trailers={},o.rawTrailers=[],o.on("end",function(){process.nextTick(function(){o.emit("close")})}),"fetch"===r){if(o._fetchResponse=e,o.url=e.url,o.statusCode=e.status,o.statusMessage=e.statusText,e.headers.forEach(function(t,e){o.headers[e.toLowerCase()]=t,o.rawHeaders.push(e,t)}),n.writableStream){var a=new WritableStream({write:function(t){return new Promise(function(e,r){o._destroyed?r():o.push(new Buffer(t))?e():o._resumeFetch=e})},close:function(){global.clearTimeout(i),o._destroyed||o.push(null)},abort:function(t){o._destroyed||o.emit("error",t)}});try{return void e.body.pipeTo(a).catch(function(t){global.clearTimeout(i),o._destroyed||o.emit("error",t)})}catch(t){}}var h=e.body.getReader();!function t(){h.read().then(function(e){if(!o._destroyed){if(e.done)return global.clearTimeout(i),void o.push(null);o.push(new Buffer(e.value)),t()}}).catch(function(t){global.clearTimeout(i),o._destroyed||o.emit("error",t)})}()}else{if(o._xhr=t,o._pos=0,o.url=t.responseURL,o.statusCode=t.status,o.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===o.headers[r]&&(o.headers[r]=[]),o.headers[r].push(e[2])):void 0!==o.headers[r]?o.headers[r]+=", "+e[2]:o.headers[r]=e[2],o.rawHeaders.push(e[1],e[2])}}),o._charset="x-user-defined",!n.overrideMimeType){var l=o.rawHeaders["mime-type"];if(l){var c=l.match(/;\s*charset=([^;])(;|$)/);c&&(o._charset=c[1].toLowerCase())}o._charset||(o._charset="utf-8")}}};i(a,s.Readable),a.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},a.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==o.DONE)break;try{r=new global.VBArray(e.responseBody).toArray()}catch(t){}if(null!==r){t.push(new Buffer(r));break}case"text":try{r=e.responseText}catch(e){t._mode="text:vbarray";break}if(r.length>t._pos){var n=r.substr(t._pos);if("x-user-defined"===t._charset){for(var i=new Buffer(n.length),s=0;s<n.length;s++)i[s]=255&n.charCodeAt(s);t.push(i)}else t.push(n,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==o.DONE||!e.response)break;r=e.response,t.push(new Buffer(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==o.LOADING||!r)break;t.push(new Buffer(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==o.LOADING)break;var a=new global.MSStreamReader;a.onprogress=function(){a.result.byteLength>t._pos&&(t.push(new Buffer(new Uint8Array(a.result.slice(t._pos)))),t._pos=a.result.byteLength)},a.onload=function(){t.push(null)},a.readAsArrayBuffer(r)}t._xhr.readyState===o.DONE&&"ms-stream"!==t._mode&&t.push(null)}},function(t,e){e.fetch=a(global.fetch)&&a(global.ReadableStream),e.writableStream=a(global.WritableStream),e.abortController=a(global.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var r;function n(){if(void 0!==r)return r;if(global.XMLHttpRequest){r=new global.XMLHttpRequest;try{r.open("GET",global.XDomainRequest?"/":"https://example.com")}catch(t){r=null}}else r=null;return r}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var s=void 0!==global.ArrayBuffer,o=s&&a(global.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}e.arraybuffer=e.fetch||s&&i("arraybuffer"),e.msstream=!e.fetch&&o&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&s&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&a(n().overrideMimeType),e.vbArray=a(global.VBArray),r=null},function(t,e,r){var n=r(95),i=r(39),s=r(86),o=r(85),a=r(18),h=e;h.request=function(t,e){t="string"==typeof t?a.parse(t):s(t);var r=-1===global.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||r,o=t.hostname||t.host,h=t.port,l=t.path||"/";o&&-1!==o.indexOf(":")&&(o="["+o+"]"),t.url=(o?i+"//"+o:"")+(h?":"+h:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var c=new n(t);return e&&c.on("response",e),c},h.get=function(t,e){var r=h.request(t,e);return r.end(),r},h.ClientRequest=n,h.IncomingMessage=i.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=o,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bitmap=void 0;var n=r(20);e.Bitmap=class{constructor(t,e,r){this.w=t,this.h=e,this.widthAligned=8*Math.ceil(t/8),this.buf=new n.BitStreamWriter(this.widthAligned*e,r),this.buf.seek(0,n.StreamSeekOrigin.End)}get width(){return this.w}get height(){return this.h}toBytes(){return this.buf.toBytes()}set(t,e,r){this.buf.setBit(e*this.widthAligned+t,r)}get(t,e){return this.buf.getBit(e*this.widthAligned+t)}clear(t,e,r,n){t=Math.max(0,t),e=Math.max(0,e),r=Math.max(0,Math.min(r,Math.max(0,this.w-t))),n=Math.max(0,Math.min(n,Math.max(0,this.h-e)));for(let i=0;i<n;i++){const n=(e+i)*this.widthAligned+t;for(let t=0;t<r;t++)this.buf.setBit(n+t,0)}return this}fill(t,e,r,n,i){t=Math.max(0,t),e=Math.max(0,e),r=Math.max(0,Math.min(r,Math.max(0,this.w-t))),n=Math.max(0,Math.min(n,Math.max(0,this.h-e)));for(let s=0;s<n;s++){const n=(e+s)*this.widthAligned+t;for(let t=0;t<r;t++)this.buf.setBit(n+t,i)}return this}clearAll(){const t=this.buf.byteLength;for(let e=0;e<t;e++)this.buf.setByte(e,0);return this}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static loose(t,e=120){let r="",n=0;for(const i of t)++n>=e&&" \f\t\v".indexOf(i)>-1?(r+="\n",n=0):r+=i;return r}static normal(t,e=120){return n.loose(t,e)}static force(t,e=120){return n.loose(t,e)}}e.WordWrap=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.matrixSize=[0,21,25,29,33,37,41,45,49,53,57,61,65,69,73,77,81,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,169,173,177],e.dataCodewords={L:[0,19,34,55,80,108,136,156,194,232,274,324,370,428,461,523,589,647,721,795,861,932,1006,1094,1174,1276,1370,1468,1531,1631,1735,1843,1955,2071,2191,2306,2434,2566,2702,2812,2956],M:[0,16,28,44,64,86,108,124,154,182,216,254,290,334,365,415,453,507,563,627,669,714,782,860,914,1e3,1062,1128,1193,1267,1373,1455,1541,1631,1725,1812,1914,1992,2102,2216,2334],Q:[0,13,22,34,48,62,76,88,110,132,154,180,206,244,261,295,325,367,397,445,485,512,568,614,664,718,754,808,871,911,985,1033,1115,1171,1231,1286,1354,1426,1502,1582,1666],H:[0,9,16,26,36,46,60,66,86,100,122,140,158,180,197,223,253,283,313,341,385,406,442,464,514,538,596,628,661,701,745,793,845,901,961,986,1054,1096,1142,1222,1276]},e.segments=[{L:[[0,0,0,0]],M:[[0,0,0,0]],Q:[[0,0,0,0]],H:[[0,0,0,0]]},{L:[[1,26,19,2]],M:[[1,26,16,4]],Q:[[1,26,13,6]],H:[[1,26,9,8]]},{L:[[1,44,34,4]],M:[[1,44,28,8]],Q:[[1,44,22,11]],H:[[1,44,16,14]]},{L:[[1,70,55,7]],M:[[1,70,44,13]],Q:[[2,35,17,9]],H:[[2,35,13,11]]},{L:[[1,100,80,10]],M:[[2,50,32,9]],Q:[[2,50,24,13]],H:[[4,25,9,8]]},{L:[[1,134,108,13]],M:[[2,67,43,12]],Q:[[2,33,15,9],[2,34,16,9]],H:[[2,33,11,11],[2,34,12,11]]},{L:[[2,86,68,9]],M:[[4,43,27,8]],Q:[[4,43,19,12]],H:[[4,43,15,14]]},{L:[[2,98,78,10]],M:[[4,49,31,9]],Q:[[2,32,14,9],[4,33,15,9]],H:[[4,39,13,13],[1,40,14,13]]},{L:[[2,121,97,12]],M:[[2,60,38,11],[2,61,39,11]],Q:[[4,40,18,11],[2,41,19,11]],H:[[4,40,14,13],[2,41,15,13]]},{L:[[2,146,116,15]],M:[[3,58,36,11],[2,59,37,11]],Q:[[4,36,16,10],[4,37,17,10]],H:[[4,36,12,12],[4,37,13,12]]},{L:[[2,86,68,9],[2,87,69,9]],M:[[4,69,43,13],[1,70,44,13]],Q:[[6,43,19,12],[2,44,20,12]],H:[[6,43,15,14],[2,44,16,14]]},{L:[[4,101,81,10]],M:[[1,80,50,15],[4,81,51,15]],Q:[[4,50,22,14],[4,51,23,14]],H:[[3,36,12,12],[8,37,13,12]]},{L:[[2,116,92,12],[2,117,93,12]],M:[[6,58,36,11],[2,59,37,11]],Q:[[4,46,20,13],[6,47,21,13]],H:[[7,42,14,14],[4,43,15,14]]},{L:[[4,133,107,13]],M:[[8,59,37,11],[1,60,38,11]],Q:[[8,44,20,13],[4,45,21,13]],H:[[12,33,11,14],[4,34,12,14]]},{L:[[3,145,115,15],[1,146,116,15]],M:[[4,64,40,12],[5,65,41,12]],Q:[[11,36,16,10],[5,37,17,10]],H:[[11,36,12,12],[5,37,13,12]]},{L:[[5,109,87,11],[1,110,88,11]],M:[[5,65,41,12],[5,66,42,12]],Q:[[5,54,24,15],[7,55,25,15]],H:[[11,36,12,12],[7,37,13,12]]},{L:[[5,122,98,12],[1,123,99,12]],M:[[7,73,45,14],[3,74,46,14]],Q:[[15,43,19,12],[2,44,20,12]],H:[[3,45,15,15],[13,46,16,15]]},{L:[[1,135,107,14],[5,136,108,14]],M:[[10,74,46,14],[1,75,47,14]],Q:[[1,50,22,14],[15,51,23,14]],H:[[2,42,14,14],[17,43,15,14]]},{L:[[5,150,120,15],[1,151,121,15]],M:[[9,69,43,13],[4,70,44,13]],Q:[[17,50,22,14],[1,51,23,14]],H:[[2,42,14,14],[19,43,15,14]]},{L:[[3,141,113,14],[4,142,114,14]],M:[[3,70,44,13],[11,71,45,13]],Q:[[17,47,21,13],[4,48,22,13]],H:[[9,39,13,13],[16,40,14,13]]},{L:[[3,135,107,14],[5,136,108,14]],M:[[3,67,41,13],[13,68,42,13]],Q:[[15,54,24,15],[5,55,25,15]],H:[[15,43,15,14],[10,44,16,14]]},{L:[[4,144,116,14],[4,145,117,14]],M:[[17,68,42,13]],Q:[[17,50,22,14],[6,51,23,14]],H:[[19,46,16,15],[6,47,17,15]]},{L:[[2,139,111,14],[7,140,112,14]],M:[[17,74,46,14]],Q:[[7,54,24,15],[16,55,25,15]],H:[[34,37,13,12]]},{L:[[4,151,121,15],[5,152,122,15]],M:[[4,75,47,14],[14,76,48,14]],Q:[[11,54,24,15],[14,55,25,15]],H:[[16,45,15,15],[14,46,16,15]]},{L:[[6,147,117,15],[4,148,118,15]],M:[[6,73,45,14],[14,74,46,14]],Q:[[11,54,24,15],[16,55,25,15]],H:[[30,46,16,15],[2,47,17,15]]},{L:[[8,132,106,13],[4,133,107,13]],M:[[8,75,47,14],[13,76,48,14]],Q:[[7,54,24,15],[22,55,25,15]],H:[[22,45,15,15],[13,46,16,15]]},{L:[[10,142,114,14],[2,143,115,14]],M:[[19,74,46,14],[4,75,47,14]],Q:[[28,50,22,14],[6,51,23,14]],H:[[33,46,16,15],[4,47,17,15]]},{L:[[8,152,122,15],[4,153,123,15]],M:[[22,73,45,14],[3,74,46,14]],Q:[[8,53,23,15],[26,54,24,15]],H:[[12,45,15,15],[28,46,16,15]]},{L:[[3,147,117,15],[10,148,118,15]],M:[[3,73,45,14],[23,74,46,14]],Q:[[4,54,24,15],[31,55,25,15]],H:[[11,45,15,15],[31,46,16,15]]},{L:[[7,146,116,15],[7,147,117,15]],M:[[21,73,45,14],[7,74,46,14]],Q:[[1,53,23,15],[37,54,24,15]],H:[[19,45,15,15],[26,46,16,15]]},{L:[[5,145,115,15],[10,146,116,15]],M:[[19,75,47,14],[10,76,48,14]],Q:[[15,54,24,15],[25,55,25,15]],H:[[23,45,15,15],[25,46,16,15]]},{L:[[13,145,115,15],[3,146,116,15]],M:[[2,74,46,14],[29,75,47,14]],Q:[[42,54,24,15],[1,55,25,15]],H:[[23,45,15,15],[28,46,16,15]]},{L:[[17,145,115,15]],M:[[10,74,46,14],[23,75,47,14]],Q:[[10,54,24,15],[35,55,25,15]],H:[[19,45,15,15],[35,46,16,15]]},{L:[[17,145,115,15],[1,146,116,15]],M:[[14,74,46,14],[21,75,47,14]],Q:[[29,54,24,15],[19,55,25,15]],H:[[11,44,15,15],[46,45,16,15]]},{L:[[13,145,115,15],[6,146,116,15]],M:[[14,74,46,14],[23,75,47,14]],Q:[[44,54,24,15],[7,55,25,15]],H:[[59,46,16,15],[1,47,17,15]]},{L:[[12,151,121,15],[7,152,122,15]],M:[[12,75,47,14],[26,76,48,14]],Q:[[39,54,24,15],[14,55,25,15]],H:[[22,45,15,15],[41,46,16,15]]},{L:[[6,151,121,15],[14,152,122,15]],M:[[6,75,47,14],[34,76,48,14]],Q:[[46,54,24,15],[10,55,25,15]],H:[[2,45,15,15],[64,46,16,15]]},{L:[[17,152,122,15],[4,153,123,15]],M:[[29,74,46,14],[14,75,47,14]],Q:[[49,54,24,15],[10,55,25,15]],H:[[24,45,15,15],[46,46,16,15]]},{L:[[4,152,122,15],[18,153,123,15]],M:[[13,74,46,14],[32,75,47,14]],Q:[[48,54,24,15],[14,55,25,15]],H:[[42,45,15,15],[32,46,16,15]]},{L:[[20,147,117,15],[4,148,118,15]],M:[[40,75,47,14],[7,76,48,14]],Q:[[43,54,24,15],[22,55,25,15]],H:[[10,45,15,15],[67,46,16,15]]},{L:[[19,148,118,15],[6,149,119,15]],M:[[18,75,47,14],[31,76,48,14]],Q:[[34,54,24,15],[34,55,25,15]],H:[[20,45,15,15],[61,46,16,15]]}],e.alignmentPatterns=[[],[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.QrDataChunkType=void 0;!function(t){t[t.Control=0]="Control",t[t.Number=1]="Number",t[t.Alnum=2]="Alnum",t[t.Binary=3]="Binary"}(n||(e.QrDataChunkType=n={}));e.ecLevelMap=new Map([["L",1],["M",0],["Q",3],["H",2]]),e.numberModeCharMap=new Map([["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9]]),e.alnumModeCharMap=new Map([["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["A",10],["B",11],["C",12],["D",13],["E",14],["F",15],["G",16],["H",17],["I",18],["J",19],["K",20],["L",21],["M",22],["N",23],["O",24],["P",25],["Q",26],["R",27],["S",28],["T",29],["U",30],["V",31],["W",32],["X",33],["Y",34],["Z",35],[" ",36],["$",37],["%",38],["*",39],["+",40],["-",41],[".",42],["/",43],[",",44]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Qr=e.qrPropsDefault=void 0;var n=f(r(13)),i=r(8),s=r(3),o=r(15),a=r(25),h=r(24),l=r(20),c=r(6),u=r(42),p=r(45),d=f(r(44));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}const g=e.qrPropsDefault=Object.assign({},s.shapePropsDefault,{version:"auto",ecLevel:"M",encoding:"auto",cellSize:.33,unit:"mm"}),m=new o.Gf2e8Field;let b=[];const y=[{index:0,fn:(t,e)=>(t+e)%2==0},{index:1,fn:(t,e)=>e%2==0},{index:2,fn:(t,e)=>t%3==0},{index:3,fn:(t,e)=>(t+e)%3==0},{index:4,fn:(t,e)=>(Math.floor(t/3)+Math.floor(e/2))%2==0},{index:5,fn:(t,e)=>t*e%2+t*e%3==0},{index:6,fn:(t,e)=>(t*e%2+t*e%3)%2==0},{index:7,fn:(t,e)=>(t*e%3+(t+e)%2)%2==0}];e.Qr=class extends s.Shape{constructor(t){super(Object.assign({},g,t))}toImgTag(){return(0,s.toImgTag)(this)}toElementStyle(){return(0,s.toElementStyle)(this)}toDataUrl(){return(0,s.toDataUrl)(this)}toSvg(){return(0,s.toSvg)(this)}toRendered(){return n.renderAsHtml_noDefer(this)}render(t,e){let r=this.getContext(t,s.CONTEXT_SVG_CANVAS);const n=Boolean(r);n||(r=new i.SvgCanvas,this.setContext(t,s.CONTEXT_SVG_CANVAS,r),super.beforeRender(t));const o=this.props.data||"",a=this.encodeData(o),h=this.buildBitmap(a.data,a.version);if(this.drawBitmap(r,h),n)return"";{super.afterRender(t),this.unsetContext(t,s.CONTEXT_SVG_CANVAS);const e=h.width*this.props.cellSize+2*this.props.margin,n=e+(this.props.x||0),i=e+(this.props.y||0);return(0,s.renderSvgCanvas)(this.props,r,n,i)}}evaluteMask(t){const e=t.width,r=t.height;let n=0;for(let i=0;i<r;i++){let r=null,s=1;for(let o=0;o<e;o++){const e=t.get(o,i);r!==e?s=1:s+=1,5===s?n+=3:5<s&&(n+=1),r=e}}for(let i=0;i<e;i++){let e=null,s=1;for(let o=0;o<r;o++){const r=t.get(i,o);e!==r?s=1:s+=1,5===s?n+=3:5<s&&(n+=1),e=r}}for(let i=0;i<r-1;i++)for(let r=0;r<e-1;r++){const e=t.get(r,i);e===t.get(r+1,i)&&e===t.get(r,i+1)&&e===t.get(r+1,i+1)&&(n+=3)}for(let i=0;i<r;i++)for(let r=0;r<e-10;r++)0!==t.get(r,i)&&0===t.get(r+1,i)&&0!==t.get(r+2,i)&&0!==t.get(r+3,i)&&0!==t.get(r+4,i)&&0===t.get(r+5,i)&&0!==t.get(r+6,i)&&0===t.get(r+7,i)&&0===t.get(r+8,i)&&0===t.get(r+9,i)&&0===t.get(r+10,i)?n+=40:0===t.get(r,i)&&0===t.get(r+1,i)&&0===t.get(r+2,i)&&0===t.get(r+3,i)&&0!==t.get(r+4,i)&&0===t.get(r+5,i)&&0!==t.get(r+6,i)&&0!==t.get(r+7,i)&&0!==t.get(r+8,i)&&0===t.get(r+9,i)&&0!==t.get(r+10,i)&&(n+=40);for(let i=0;i<e;i++)for(let e=0;e<r-10;e++)0!==t.get(i,e)&&0===t.get(i,e+1)&&0!==t.get(i,e+2)&&0!==t.get(i,e+3)&&0!==t.get(i,e+4)&&0===t.get(i,e+5)&&0!==t.get(i,e+6)&&0===t.get(i,e+7)&&0===t.get(i,e+8)&&0===t.get(i,e+9)&&0===t.get(i,e+10)?n+=40:0===t.get(i,e)&&0===t.get(i,e+1)&&0===t.get(i,e+2)&&0===t.get(i,e+3)&&0!==t.get(i,e+4)&&0===t.get(i,e+5)&&0!==t.get(i,e+6)&&0!==t.get(i,e+7)&&0!==t.get(i,e+8)&&0===t.get(i,e+9)&&0!==t.get(i,e+10)&&(n+=40);let i=0,s=0;for(let n=0;n<r;n++)for(let r=0;r<e;r++)0===t.get(r,n)?i++:s++;return n+=10*Math.floor(Math.abs(s/(i+s)*100-50)/5)}encodeNumberData(t){const e=Math.ceil(10*t.length/24),r=new l.BitStreamWriter(e);let n=0,i=0;for(;n<t.length;n++){const e=p.numberModeCharMap.get(t[n]);if(void 0===e)return null;i=10*i+e,2==n%3&&(r.writeBits(i,10),i=0)}return(n%=3)&&r.writeBits8(i,1+3*n),{data:r,charLength:t.length}}encodeAlnumData(t){const e=Math.ceil(11*t.length/16),r=new l.BitStreamWriter(e);let n=0,i=0;for(;n<t.length;n++){const e=p.alnumModeCharMap.get(t[n]);if(void 0===e)return null;i=45*i+e,1==n%2&&(r.writeBits(i,11),i=0)}return n%2&&r.writeBits8(i,6),{data:r,charLength:t.length}}encode8bitData(t){const e=new l.BitStreamWriter(0,c.TextEncoding.encodeToUtf8(t));return{data:e,charLength:e.byteLength}}encodeChunks(t){Array.isArray(t)||(t=[t]);const e=[];for(const r of t)if(r instanceof l.BitStreamWriter)e.push({type:p.QrDataChunkType.Binary,data:r,charLength:r.byteLength});else if(r instanceof Uint8Array)e.push({type:p.QrDataChunkType.Binary,data:new l.BitStreamWriter(0,r),charLength:r.length});else if("string"==typeof r){let t,n=null,i=!0;switch(this.props.encoding){case"auto":i=!1;case"number":if(n=this.encodeNumberData(r),t=p.QrDataChunkType.Number,i||n)break;case"alnum":if(n=this.encodeAlnumData(r),t=p.QrDataChunkType.Alnum,i||n)break;case"8bit":default:n=this.encode8bitData(r),t=p.QrDataChunkType.Binary}if(null===n)throw new Error("QrModel2: character is out of range.");e.push({type:t,data:n.data,charLength:n.charLength})}return e}determineSymbolVersion(t){let e,r="auto"===this.props.version?1:this.props.version||1,n=0,i=0;for(;;){i=0;for(const e of t){switch(e.type){case p.QrDataChunkType.Number:i+=r<10?14:r<27?16:18;break;case p.QrDataChunkType.Alnum:i+=r<10?13:r<27?15:17;break;case p.QrDataChunkType.Binary:i+=r<10?12:20}i+=e.data.bitLength}switch(this.props.ecLevel){case"L":e=d.segments[r].L,n=8*d.dataCodewords.L[r];break;case"Q":e=d.segments[r].Q,n=8*d.dataCodewords.Q[r];break;case"H":e=d.segments[r].H,n=8*d.dataCodewords.H[r];break;case"M":default:e=d.segments[r].M,n=8*d.dataCodewords.M[r]}if(i<=n)break;if("auto"!==this.props.version||!d.segments[++r])throw new Error("QrModel2: data is too large.")}return{version:r,segments:e,dataLength:i,maxDataLength:n}}encodeData(t){const e=this.encodeChunks(t),{version:r,segments:n,dataLength:i,maxDataLength:s}=this.determineSymbolVersion(e);let o;{const t=[];for(const n of e){let e=0;const i=new l.BitStreamWriter(3);switch(n.type){case p.QrDataChunkType.Number:i.writeBits8(1,4),e=r<10?10:r<27?12:14,i.writeBits(n.charLength,e);break;case p.QrDataChunkType.Alnum:i.writeBits8(2,4),e=r<10?9:r<27?11:13,i.writeBits(n.charLength,e);break;case p.QrDataChunkType.Binary:i.writeBits8(4,4),e=r<10?8:16,i.writeBits(n.charLength,e)}0<i.bitLength&&t.push(i),t.push(n.data)}if(i<s){let e=s-i;const r=new l.BitStreamWriter(Math.ceil(e/8));let n=Math.min(4,e);r.writeBits8(0,n),0<(e-=n)&&0!=e%8&&(n=e%8,r.writeBits8(0,n),e-=n);for(let t=0;0<e;t++)n=Math.min(8,e),r.writeBits8(0==t%2?236:17,n),e-=n;t.push(r)}o=l.BitStreamWriter.concat(...t).toBytes()}let a=0;const c=[],u=[];for(let t=0,e=0;t<n.length;t++){const r=n[t][0],i=n[t][2],s=n[t][1]-i;let l;b.length<=s-1&&(b=h.ReedSolomon.listGx(m,b,s,0)),l=b[s-1];const p=new h.ReedSolomon(m,l,0);for(let t=0;t<r;t++){const t=o.slice(e,e+i).reverse(),r=Uint8Array.from(p.encode(t));c.push(t.reverse()),u.push(r.reverse()),a+=i+s,e+=i}}const d=new Uint8Array(a);{const t=[c,u];let e=0;for(const r of t)for(let t=0,n=!0;n;t++){n=!1;for(let i=0;i<r.length;i++)t<r[i].length&&(d[e++]=r[i][t],n=!0)}}return{data:d,version:r,ecLevel:this.props.ecLevel}}applyMask(t,e,r){const n=t.width,i=t.width;for(let s=0;s<n;s++)for(let o=0;o<i;o++)0===e.get(n-1-s,i-1-o)&&t.set(n-1-s,i-1-o,t.get(n-1-s,i-1-o)^(r(s,o)?1:0))}buildBitmap(t,e){const r=d.matrixSize[e],n=r,i=r,s=new u.Bitmap(r,r),o=new u.Bitmap(r,r);{o.fill(0,i-9,8,9,1),o.fill(n-9,0,9,8,1),o.fill(n-9,i-9,9,9,1),7<=e&&(o.fill(8,i-6,3,6,1),o.fill(n-6,8,6,3,1));for(const{px:t,py:e}of[{px:n-7,py:i-7},{px:0,py:i-7},{px:n-7,py:0}])s.set(t+0,e+0,1),s.set(t+0,e+1,1),s.set(t+0,e+2,1),s.set(t+0,e+3,1),s.set(t+0,e+4,1),s.set(t+0,e+5,1),s.set(t+0,e+6,1),s.set(t+1,e+0,1),s.set(t+2,e+0,1),s.set(t+3,e+0,1),s.set(t+4,e+0,1),s.set(t+5,e+0,1),s.set(t+6,e+0,1),s.set(t+6,e+1,1),s.set(t+6,e+2,1),s.set(t+6,e+3,1),s.set(t+6,e+4,1),s.set(t+6,e+5,1),s.set(t+1,e+6,1),s.set(t+2,e+6,1),s.set(t+3,e+6,1),s.set(t+4,e+6,1),s.set(t+5,e+6,1),s.set(t+6,e+6,1),s.set(t+2,e+2,1),s.set(t+2,e+3,1),s.set(t+2,e+4,1),s.set(t+3,e+2,1),s.set(t+4,e+2,1),s.set(t+4,e+3,1),s.set(t+4,e+4,1),s.set(t+3,e+4,1),s.set(t+3,e+3,1);const t=d.alignmentPatterns[e];for(let e=0;e<t.length;e++){const r=n-t[e]-1;for(let e=0;e<t.length;e++){const n=i-t[e]-1;let a=!0;for(let t=r-2;t<=r+2;t++){for(let e=n-2;e<=n+2;e++)if(o.get(t,e)){a=!1;break}if(!a)break}a&&(o.fill(r-2,n-2,5,5,1),s.set(r-2,n+2,1),s.set(r-2,n+1,1),s.set(r-2,n,1),s.set(r-2,n-1,1),s.set(r-2,n-2,1),s.set(r+2,n+2,1),s.set(r+2,n+1,1),s.set(r+2,n,1),s.set(r+2,n-1,1),s.set(r+2,n-2,1),s.set(r+1,n-2,1),s.set(r+1,n+2,1),s.set(r,n+2,1),s.set(r,n,1),s.set(r,n-2,1),s.set(r-1,n-2,1),s.set(r-1,n+2,1))}}o.fill(8,i-7,n-17,1,1),o.fill(n-7,8,1,i-17,1);for(let t=8;t<=i-9;t+=2)s.set(n-7,t,1),s.set(t,i-7,1)}{let e=1,r=-1,a=!0,h=!1;for(let l=0;l<t.length;l++)for(let c=7;c>=0;c--)for(;;)if(h?e+=1:i-1===r&&a||0===r&&!a?(e+=e===n-8?2:1,a=!a):(e-=1,a?r+=1:r-=1),h=!h,0===o.get(e,r)){s.set(e,r,t[l]>>>c&1);break}}if(7<=e){const t=e<<12|new a.BCH(m,7973).encode(e);s.set(n-1,10,t>>>0&1),s.set(n-1,9,t>>>1&1),s.set(n-1,8,t>>>2&1),s.set(n-2,10,t>>>3&1),s.set(n-2,9,t>>>4&1),s.set(n-2,8,t>>>5&1),s.set(n-3,10,t>>>6&1),s.set(n-3,9,t>>>7&1),s.set(n-3,8,t>>>8&1),s.set(n-4,10,t>>>9&1),s.set(n-4,9,t>>>10&1),s.set(n-4,8,t>>>11&1),s.set(n-5,10,t>>>12&1),s.set(n-5,9,t>>>13&1),s.set(n-5,8,t>>>14&1),s.set(n-6,10,t>>>15&1),s.set(n-6,9,t>>>16&1),s.set(n-6,8,t>>>17&1),s.set(10,i-1,t>>>0&1),s.set(9,i-1,t>>>1&1),s.set(8,i-1,t>>>2&1),s.set(10,i-2,t>>>3&1),s.set(9,i-2,t>>>4&1),s.set(8,i-2,t>>>5&1),s.set(10,i-3,t>>>6&1),s.set(9,i-3,t>>>7&1),s.set(8,i-3,t>>>8&1),s.set(10,i-4,t>>>9&1),s.set(9,i-4,t>>>10&1),s.set(8,i-4,t>>>11&1),s.set(10,i-5,t>>>12&1),s.set(9,i-5,t>>>13&1),s.set(8,i-5,t>>>14&1),s.set(10,i-6,t>>>15&1),s.set(9,i-6,t>>>16&1),s.set(8,i-6,t>>>17&1)}let h=0;{let t=Number.MAX_SAFE_INTEGER;for(const e of y){this.applyMask(s,o,e.fn);const r=this.evaluteMask(s);r<t&&(h=e.index,t=r),this.applyMask(s,o,e.fn)}this.applyMask(s,o,y[h].fn)}{const t=this.props,e=p.ecLevelMap.get(t.ecLevel);if(void 0===e)throw new Error(`Qr#buildBitmap: bad ecLevel '${t.ecLevel}' is specified.`);let r=e<<3|y[h].index;r=21522^(r<<10|new a.BCH(m,1335).encode(r));for(let t=0;t<=7;t++)s.set(t,i-9,r>>>t&1);s.set(n-8,i-9,r>>>8&1);for(let t=9;t<=14;t++)s.set(t+n-15,i-9,r>>>t&1);for(let t=0;t<=5;t++)s.set(n-9,i-1-t,r>>>t&1);for(let t=6;t<=7;t++)s.set(n-9,i-2-t,r>>>t&1);s.set(n-9,7,1);for(let t=8;t<=14;t++)s.set(n-9,14-t,r>>>t&1)}return s}drawBitmap(t,e){const r=e.width,n=e.height;for(let i=0;i<r;i++)for(let s=0;s<n;s++)e.get(i,s)&&t.rect(r-1-i,n-1-s,1,1);t.fill()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=e.charactersMap=new Map([["0",{index:0,pattern:"11111220",width:9}],["1",{index:1,pattern:"11112210",width:9}],["2",{index:2,pattern:"11121120",width:9}],["3",{index:3,pattern:"22111110",width:9}],["4",{index:4,pattern:"11211210",width:9}],["5",{index:5,pattern:"21111210",width:9}],["6",{index:6,pattern:"12111120",width:9}],["7",{index:7,pattern:"12112110",width:9}],["8",{index:8,pattern:"12211110",width:9}],["9",{index:9,pattern:"21121110",width:9}],["-",{index:10,pattern:"11122110",width:9}],["$",{index:11,pattern:"11221110",width:9}],[":",{index:12,pattern:"21112120",width:10}],["/",{index:13,pattern:"21211120",width:10}],[".",{index:14,pattern:"21212110",width:10}],["+",{index:15,pattern:"11212120",width:10}],["A",{index:16,pattern:"11221210",width:10}],["B",{index:17,pattern:"12121120",width:10}],["C",{index:18,pattern:"11121220",width:10}],["D",{index:19,pattern:"11122210",width:10}]]),i=e.reverseMap=new Map;for(const t of n.entries())i.set(t[1].index,t[0])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Nw7=e.nw7PropsDefault=void 0;var n=r(0),i=r(47);const s=e.nw7PropsDefault=Object.assign({},n.barcodeBasePropsDefault,{useRawDataAsText:!0,addCheckDigit:!0,narrowWidth:.33,wideWidth:.66,charGapWidth:void 0,startChar:"",stopChar:""});e.Nw7=class extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}calcSymbolSize(t,e,r,n){const s=this.props,o=s.charGapWidth||s.narrowWidth;s.narrowWidth,s.wideWidth;let a=2*s.quietWidth-o;const h=`${e}${t}${n}${r}`;for(const t of h){const e=i.charactersMap.get(t);if(void 0===e)throw new Error("NW7: character is out of range.");const r=e.width-7,n=7-r;a+=s.narrowWidth*n+s.wideWidth*r+o}return{tw:a,th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcCheckDigit(t){let e="";if(this.props.addCheckDigit){let r=0;for(let e=0;e<t.length;e++){const n=i.charactersMap.get(t[e]);if(void 0===n)throw new Error("NW7: character is out of range.");r=(r+n.index)%16}const n=i.reverseMap.get((16-r)%16);if(void 0===n)throw new Error("NW7: check digit is out of range.");e=n}return e}encodeData(t){return{data:t,startChar:this.props.startChar||"",stopChar:this.props.stopChar||""}}getBarSpaceWidth(){const t=this.props;return[t.charGapWidth||t.narrowWidth,t.narrowWidth,t.wideWidth]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=e.charactersMap=new Map([["0",{index:0,pattern:"144"}],["1",{index:1,pattern:"114"}],["2",{index:2,pattern:"132"}],["3",{index:3,pattern:"312"}],["4",{index:4,pattern:"123"}],["5",{index:5,pattern:"141"}],["6",{index:6,pattern:"321"}],["7",{index:7,pattern:"213"}],["8",{index:8,pattern:"231"}],["9",{index:9,pattern:"411"}],["-",{index:10,pattern:"414"}],["A",{index:11,pattern:"324"}],["B",{index:12,pattern:"342"}],["C",{index:13,pattern:"234"}],["D",{index:14,pattern:"432"}],["E",{index:15,pattern:"243"}],["F",{index:16,pattern:"423"}],["G",{index:17,pattern:"441"}],["H",{index:18,pattern:"111"}],["[",{index:19,pattern:"13"}],["]",{index:38,pattern:"31"}]]),i=e.reverseMap=new Map;for(const t of n.entries())i.set(t[1].index,t[0]);e.fullAsciiMap=new Map([[45,"-"],[48,"0"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[65,"A0"],[66,"A1"],[67,"A2"],[68,"A3"],[69,"A4"],[70,"A5"],[71,"A6"],[72,"A7"],[73,"A8"],[74,"A9"],[75,"B0"],[76,"B1"],[77,"B2"],[78,"B3"],[79,"B4"],[80,"B5"],[81,"B6"],[82,"B7"],[83,"B8"],[84,"B9"],[85,"C0"],[86,"C1"],[87,"C2"],[88,"C3"],[89,"C4"],[90,"C5"]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JapanPostal=e.japanPostalPropsDefault=void 0;var n=r(0),i=r(49);const s=e.japanPostalPropsDefault=Object.assign({},n.barcodeBasePropsDefault,{elementWidth:.6,height:1.2*3});e.JapanPostal=class extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}calcSymbolSize(t,e,r,n){const i=this.props,s=6*i.elementWidth;return{tw:2*i.quietWidth+21*s+7*i.elementWidth,th:2*i.quietHeight+i.height}}calcCheckDigit(t){let e="",r=0;for(let e=0;e<t.length;e++){const n=this.charactersMap.get(t[e]);if(void 0===n)throw new Error("Japan Post: character is out of range.");r=(r+n.index)%19}const n=i.reverseMap.get(r);if(void 0===n)throw new Error("Japan Post: check digit is out of range.");return e=n}encodeData(t){let e="";for(let r=0;r<t.length;r++){const n=i.fullAsciiMap.get(t.charCodeAt(r));if(void 0===n)throw new Error("Japan Post: character is out of range.");e+=n}return{data:(e+="DDDDDDDDDDDDDDDDD").slice(0,20),startChar:"[",stopChar:"]"}}getBarSpaceWidth(){return[0,this.props.elementWidth]}getBarSpaceHeight(){const t=this.props.height;return[[{offset:0,height:t}],[{offset:0,height:t}],[{offset:0,height:2*t/3}],[{offset:t/3,height:2*t/3}],[{offset:t/3,height:t/3}]]}get isHeightModulated(){return!0}renderText(t,e,r,n,i){}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new Map([[0,"11221"],[1,"21112"],[2,"12112"],[3,"22111"],[4,"11212"],[5,"21211"],[6,"12211"],[7,"11122"],[8,"21121"],[9,"12121"]]),i=e.charactersMap=new Map;for(const t of n)for(const e of n){const r=10*t[0]+e[0],n=String.fromCharCode(r);let s="";for(let r=0;r<5;r++)s+=t[1][r]+e[1][r];i.set(n,{index:r,pattern:s})}i.set("d",{index:100,pattern:"1111"}),i.set("e",{index:101,pattern:"211"})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Itf=e.itfPropsDefault=void 0;var n=r(0),i=r(51);const s=e.itfPropsDefault=Object.assign({},n.barcodeBasePropsDefault,{addCheckDigit:!0,narrowWidth:.33,wideWidth:.66});e.Itf=class extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}calcSymbolSize(t,e,r,n){const i=this.props,s=3*i.narrowWidth+2*i.wideWidth;return{tw:2*i.quietWidth+8*i.narrowWidth+s*t.length*2,th:2*i.quietHeight+i.height+(i.drawText?i.textHeight:0)}}calcItfMod10W3Checksum(t){let e=0,r=0;for(let n=0;n<t.length;n++)(n+1)%2?e=(e+Number.parseInt(t[t.length-1-n]))%10:r=(r+Number.parseInt(t[t.length-1-n]))%10;return String((10-(3*e+r)%10)%10)}encodeData(t){let e=t;this.props.addCheckDigit&&(e+=this.calcItfMod10W3Checksum(t));let r="";if(e.length%2)throw new Error("bad data length");for(let t=0;t<e.length;t+=2){const n=Number.parseInt(e.slice(t,t+2));r+=String.fromCharCode(n)}return{data:r,labelText:e,startChar:"d",stopChar:"e"}}getBarSpaceWidth(){const t=this.props;return[0,t.narrowWidth,t.wideWidth]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.charactersMap=new Map([["\0",{index:0,pattern:"-1123"}],["",{index:1,pattern:"-1222"}],["",{index:2,pattern:"-2212"}],["",{index:3,pattern:"-1141"}],["",{index:4,pattern:"-2311"}],["",{index:5,pattern:"-1321"}],["",{index:6,pattern:"-4111"}],["",{index:7,pattern:"-2131"}],["\b",{index:8,pattern:"-3121"}],["\t",{index:9,pattern:"-2113"}],["",{index:10,pattern:"-3211"}],["",{index:11,pattern:"-2221"}],["",{index:12,pattern:"-2122"}],["",{index:13,pattern:"-1411"}],["",{index:14,pattern:"-1132"}],["",{index:15,pattern:"-1231"}],["",{index:16,pattern:"-1114"}],["",{index:17,pattern:"-1312"}],["",{index:18,pattern:"-1213"}],["",{index:19,pattern:"-3112"}],[" ",{index:20,pattern:"3211"}],["!",{index:21,pattern:"2221"}],['"',{index:22,pattern:"2122"}],["#",{index:23,pattern:"1411"}],["$",{index:24,pattern:"1132"}],["%",{index:25,pattern:"1231"}],["&",{index:26,pattern:"1114"}],["'",{index:27,pattern:"1312"}],["(",{index:28,pattern:"1213"}],[")",{index:29,pattern:"3112"}],["0",{index:30,pattern:"111111"}],["1",{index:31,pattern:"110100"}],["2",{index:32,pattern:"110010"}],["3",{index:33,pattern:"110001"}],["4",{index:34,pattern:"101100"}],["5",{index:35,pattern:"100110"}],["6",{index:36,pattern:"100011"}],["7",{index:37,pattern:"101010"}],["8",{index:38,pattern:"101001"}],["9",{index:39,pattern:"100101"}],["@",{index:40,pattern:"111"}],["P",{index:50,pattern:"-11111"}],["`",{index:60,pattern:"111"}],["p",{index:70,pattern:"00111"}],["q",{index:71,pattern:"01011"}],["r",{index:72,pattern:"01101"}],["s",{index:73,pattern:"01110"}],["t",{index:74,pattern:"10011"}],["u",{index:75,pattern:"11001"}],["v",{index:76,pattern:"11100"}],["w",{index:77,pattern:"10101"}],["x",{index:78,pattern:"10110"}],["y",{index:79,pattern:"11010"}],["",{index:80,pattern:"11"}],["",{index:81,pattern:"10"}],["",{index:82,pattern:"01"}],["",{index:83,pattern:"00"}],["",{index:90,pattern:"-1112"}],["",{index:91,pattern:"-11"}],["",{index:92,pattern:"112"}],["",{index:93,pattern:"-111111"}],["",{index:100,pattern:"000111"}],["",{index:101,pattern:"001011"}],["",{index:102,pattern:"001101"}],["",{index:103,pattern:"001110"}],["",{index:104,pattern:"010011"}],["",{index:105,pattern:"011001"}],["",{index:106,pattern:"011100"}],["",{index:107,pattern:"010101"}],["",{index:108,pattern:"010110"}],["",{index:109,pattern:"011010"}],["",{index:110,pattern:"111000"}],["",{index:111,pattern:"110100"}],["",{index:112,pattern:"110010"}],["",{index:113,pattern:"110001"}],["",{index:114,pattern:"101100"}],["",{index:115,pattern:"100110"}],["",{index:116,pattern:"100011"}],["",{index:117,pattern:"101010"}],["",{index:118,pattern:"101001"}],["",{index:119,pattern:"100101"}]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpcE=e.UpcA=e.Ean2=e.Ean5=e.Ean8=e.Ean13=e.EanBase=e.eanPropsDefault=void 0;var n=r(0),i=r(53);const s=e.eanPropsDefault=Object.assign({},n.barcodeBasePropsDefault,{smallFont:"normal 3.0px 'OCRB'",elementWidth:.33,guardExtHeight:2});class o extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}get eanTypes(){throw new Error("EAN#eanTypes: abstract property")}calcSymbolSize(t,e,r,n){const i=this.props;let s,o=0;switch(this.eanTypes){case"ean-13":case"upc-a":s=12,o=11;break;case"ean-8":s=8,o=11;break;case"ean-5":s=5,o=13;break;case"upc-e":s=6,o=10;break;case"ean-2":s=2,o=7;break;default:throw new Error("bad data length")}return{tw:2*i.quietWidth+i.elementWidth*(7*s+o),th:2*i.quietHeight+i.height+(i.drawText?i.textHeight:0)}}calcEanMod10W3Checksum(t){let e=0,r=0;for(let n=0;n<t.length;n++){const i=this.charactersMap.get(t[t.length-1-n]);if(void 0===i)throw new Error("EAN: character is out of range.");(n+1)%2?e=(e+i.index)%10:r=(r+i.index)%10}return(10-(3*e+r)%10)%10}calcEan5Checksum(t){let e=0;for(let r=0;r<t.length;r++)e=(e+Number.parseInt(t[r])*(r%2?3:9))%10;return e}calcEan2Checksum(t){return Number.parseInt(t)%4}encodeData(t){let e,r=t,n="",i=void 0;if("upc-a"===this.eanTypes||"upc-e"===this.eanTypes){switch(t.length){case 12:case 11:t="0"+t}if("upc-e"===this.eanTypes){let e;switch(t.length){case 13:case 12:{if(r=t.slice(0,12),e=t.match(/^0([01])([0-9]{5})0{4}([5-9])/))t=`${e[1]}${e[2]}${e[3]}`;else if(e=t.match(/^0([01])([0-9]{4})0{5}([0-9])/))t=`${e[1]}${e[2]}${e[3]}4`;else if(e=t.match(/^0([01])([0-9]{3})0{5}([0-9]{2})/))t=`${e[1]}${e[2]}${e[3]}3`;else{if(!(e=t.match(/^0([01])([0-9]{2})([0-2])0{4}([0-9]{3})/)))throw new Error("EAN: bad data format");t=`${e[1]}${e[2]}${e[4]}${e[3]}`}const n=this.calcEanMod10W3Checksum(r);r+=n,t+=n}break;case 8:case 7:{if(!t.match(/^[01]/))throw new Error("EAN: bad data format");switch(t[6]){case"0":case"1":case"2":r=`0${t[0]}${t.slice(1,3)}${t.slice(6,7)}0000${t.slice(3,6)}`;break;case"3":r=`0${t[0]}${t.slice(1,4)}00000${t.slice(4,6)}`;break;case"4":r=`0${t[0]}${t.slice(1,5)}00000${t.slice(5,6)}`;break;case"5":case"6":case"7":case"8":case"9":r=`0${t[0]}${t.slice(1,6)}0000${t.slice(6,7)}`;break;default:throw new Error("EAN: bad data format")}const e=this.calcEanMod10W3Checksum(r);r+=e,t=t.slice(0,7)+e}}}}switch(this.eanTypes){case"ean-13":case"upc-a":{i="",e=t.slice(0,12),n+="@",i+="1";const r=this.charactersMap.get(String.fromCharCode(48+Number.parseInt(t[0])));if(void 0===r)throw new Error("EAN: character is out of range.");const s=r.pattern;for(let e=1;e<7;e++){const r=Number.parseInt(s[e-1]);n+=String.fromCharCode(16*r+Number.parseInt(t[e])),"upc-a"===this.eanTypes&&1===e?i+="1":i+="0"}n+="P",i+="1";for(let e=7;e<12;e++)n+=String.fromCharCode(32+Number.parseInt(t[e])),i+="0";const o=this.calcEanMod10W3Checksum(e);e+=String.fromCharCode(48+o),n+=String.fromCharCode(32+o),"upc-a"===this.eanTypes?i+="1":i+="0",n+="`",i+="1"}break;case"ean-8":{i="",e=t.slice(0,7),n+="@",i+="1";for(let e=0;e<4;e++)n+=String.fromCharCode(16+Number.parseInt(t[e])),i+="0";n+="P",i+="1";for(let e=4;e<7;e++)n+=String.fromCharCode(32+Number.parseInt(t[e])),i+="0";const r=this.calcEanMod10W3Checksum(e);e+=String.fromCharCode(48+r),n+=String.fromCharCode(32+r),i+="0",n+="`",i+="1"}break;case"upc-e":{i="",e=t,n+="",i+="1";const r=this.charactersMap.get(String.fromCharCode(("0"===t[0]?160:176)+Number.parseInt(t[7])));if(void 0===r)throw new Error("EAN: character is out of range.");const s=r.pattern;for(let e=1;e<7;e++){const r=Number.parseInt(s[e-1]);n+=String.fromCharCode(16*r+Number.parseInt(t[e])),i+="0"}n+="",i+="1"}break;case"ean-5":{e=t.slice(0,5),n+="";const r=this.charactersMap.get(String.fromCharCode(112+this.calcEan5Checksum(t)));if(void 0===r)throw new Error("EAN: character is out of range.");const i=r.pattern;for(let e=0;e<5;e++){const r=Number.parseInt(i[e]);e>0&&(n+=""),n+=String.fromCharCode(16*r+Number.parseInt(t[e]))}}break;case"ean-2":{e=t.slice(0,2),n+="";const r=this.charactersMap.get(String.fromCharCode(128+this.calcEan2Checksum(t)));if(void 0===r)throw new Error("EAN: character is out of range.");const i=r.pattern;for(let e=0;e<2;e++){const r=Number.parseInt(i[e]);e>0&&(n+=""),n+=String.fromCharCode(16*r+Number.parseInt(t[e]))}}break;default:throw new Error("EAN: bad data length")}return{data:n,heightData:i,labelText:e,startChar:"",stopChar:""}}getBarSpaceWidth(){const t=this.props.elementWidth;return[0,t,2*t,3*t,4*t]}getBarSpaceHeight(){const t=this.props,e=t.height;return[[{offset:0,height:e}],[{offset:0,height:e+t.guardExtHeight}]]}getRenderStartCoodinate(t,e){const r=this.props,n=r.quietWidth,i=r.quietHeight;switch(this.eanTypes){case"ean-13":case"ean-8":case"upc-a":case"upc-e":return{rx:n,ry:i};case"ean-5":case"ean-2":return{rx:n,ry:i+(r.drawText?r.textHeight:0)};default:throw new Error("EAN: bad data length")}}renderText(t,e,r,n,i){const s=this.props;switch(this.eanTypes){case"ean-13":s.guardExtHeight>0?(t.textBaseline="alphabetic",t.textAlign="start",t.fillText(i.slice(0,1),s.quietWidth-14*s.elementWidth,r-s.quietHeight),t.textAlign="center",t.fillText(i.slice(1,7),s.quietWidth+24*s.elementWidth,r-s.quietHeight),t.fillText(i.slice(7,13),s.quietWidth+71*s.elementWidth,r-s.quietHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i,e/2,r-s.quietHeight));break;case"upc-a":s.guardExtHeight>0?(t.textBaseline="alphabetic",t.font=s.smallFont||t.font,t.textAlign="start",t.fillText(i.slice(1,2),s.quietWidth-12*s.elementWidth,r-s.quietHeight-.2*s.textHeight),t.font=s.font||t.font,t.textAlign="center",t.fillText(i.slice(2,7),s.quietWidth+27.5*s.elementWidth,r-s.quietHeight),t.fillText(i.slice(7,12),s.quietWidth+67.5*s.elementWidth,r-s.quietHeight),t.font=s.smallFont||t.font,t.textAlign="start",t.fillText(i.slice(12,13),e-s.quietWidth+7*s.elementWidth,r-s.quietHeight-.2*s.textHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i.slice(1),e/2,r-s.quietHeight));break;case"ean-8":s.guardExtHeight>0?(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i.slice(0,4),s.quietWidth+17*s.elementWidth,r-s.quietHeight),t.fillText(i.slice(4,8),s.quietWidth+50*s.elementWidth,r-s.quietHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i,e/2,r-s.quietHeight));break;case"upc-e":s.guardExtHeight>0?(t.font=s.smallFont||t.font,t.textAlign="start",t.fillText(i.slice(0,1),s.quietWidth-12*s.elementWidth,r-s.quietHeight-.2*s.textHeight),t.font=s.font||t.font,t.textAlign="center",t.fillText(i.slice(1,7),e/2,r-s.quietHeight),t.font=s.smallFont||t.font,t.textAlign="start",t.fillText(i.slice(7,8),e-s.quietWidth+7*s.elementWidth,r-s.quietHeight-.2*s.textHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i,e/2,r-s.quietHeight));break;case"ean-5":case"ean-2":t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i,e/2,s.quietHeight+s.textHeight);break;default:throw new Error("EAN: bad data length")}}}e.EanBase=o;e.Ean13=class extends o{get eanTypes(){return"ean-13"}};e.Ean8=class extends o{get eanTypes(){return"ean-8"}};e.Ean5=class extends o{get eanTypes(){return"ean-5"}};e.Ean2=class extends o{get eanTypes(){return"ean-2"}};e.UpcA=class extends o{get eanTypes(){return"upc-a"}};e.UpcE=class extends o{get eanTypes(){return"upc-e"}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.charactersMap=new Map([["\0",{index:0,pattern:"212222"}],["",{index:1,pattern:"222122"}],["",{index:2,pattern:"222221"}],["",{index:3,pattern:"121223"}],["",{index:4,pattern:"121322"}],["",{index:5,pattern:"131222"}],["",{index:6,pattern:"122213"}],["",{index:7,pattern:"122312"}],["\b",{index:8,pattern:"132212"}],["\t",{index:9,pattern:"221213"}],["\n",{index:10,pattern:"221312"}],["\v",{index:11,pattern:"231212"}],["\f",{index:12,pattern:"112232"}],["\r",{index:13,pattern:"122132"}],["",{index:14,pattern:"122231"}],["",{index:15,pattern:"113222"}],["",{index:16,pattern:"123122"}],["",{index:17,pattern:"123221"}],["",{index:18,pattern:"223211"}],["",{index:19,pattern:"221132"}],["",{index:20,pattern:"221231"}],["",{index:21,pattern:"213212"}],["",{index:22,pattern:"223112"}],["",{index:23,pattern:"312131"}],["",{index:24,pattern:"311222"}],["",{index:25,pattern:"321122"}],["",{index:26,pattern:"321221"}],["",{index:27,pattern:"312212"}],["",{index:28,pattern:"322112"}],["",{index:29,pattern:"322211"}],["",{index:30,pattern:"212123"}],["",{index:31,pattern:"212321"}],[" ",{index:32,pattern:"232121"}],["!",{index:33,pattern:"111323"}],['"',{index:34,pattern:"131123"}],["#",{index:35,pattern:"131321"}],["$",{index:36,pattern:"112313"}],["%",{index:37,pattern:"132113"}],["&",{index:38,pattern:"132311"}],["'",{index:39,pattern:"211313"}],["(",{index:40,pattern:"231113"}],[")",{index:41,pattern:"231311"}],["*",{index:42,pattern:"112133"}],["+",{index:43,pattern:"112331"}],[",",{index:44,pattern:"132131"}],["-",{index:45,pattern:"113123"}],[".",{index:46,pattern:"113321"}],["/",{index:47,pattern:"133121"}],["0",{index:48,pattern:"313121"}],["1",{index:49,pattern:"211331"}],["2",{index:50,pattern:"231131"}],["3",{index:51,pattern:"213113"}],["4",{index:52,pattern:"213311"}],["5",{index:53,pattern:"213131"}],["6",{index:54,pattern:"311123"}],["7",{index:55,pattern:"311321"}],["8",{index:56,pattern:"331121"}],["9",{index:57,pattern:"312113"}],[":",{index:58,pattern:"312311"}],[";",{index:59,pattern:"332111"}],["<",{index:60,pattern:"314111"}],["=",{index:61,pattern:"221411"}],[">",{index:62,pattern:"431111"}],["?",{index:63,pattern:"111224"}],["@",{index:64,pattern:"111422"}],["A",{index:65,pattern:"121124"}],["B",{index:66,pattern:"121421"}],["C",{index:67,pattern:"141122"}],["D",{index:68,pattern:"141221"}],["E",{index:69,pattern:"112214"}],["F",{index:70,pattern:"112412"}],["G",{index:71,pattern:"122114"}],["H",{index:72,pattern:"122411"}],["I",{index:73,pattern:"142112"}],["J",{index:74,pattern:"142211"}],["K",{index:75,pattern:"241211"}],["L",{index:76,pattern:"221114"}],["M",{index:77,pattern:"413111"}],["N",{index:78,pattern:"241112"}],["O",{index:79,pattern:"134111"}],["P",{index:80,pattern:"111242"}],["Q",{index:81,pattern:"121142"}],["R",{index:82,pattern:"121241"}],["S",{index:83,pattern:"114212"}],["T",{index:84,pattern:"124112"}],["U",{index:85,pattern:"124211"}],["V",{index:86,pattern:"411212"}],["W",{index:87,pattern:"421112"}],["X",{index:88,pattern:"421211"}],["Y",{index:89,pattern:"212141"}],["Z",{index:90,pattern:"214121"}],["[",{index:91,pattern:"412121"}],["\\",{index:92,pattern:"111143"}],["]",{index:93,pattern:"111341"}],["^",{index:94,pattern:"131141"}],["_",{index:95,pattern:"114113"}],["`",{index:96,pattern:"114311"}],["a",{index:97,pattern:"411113"}],["b",{index:98,pattern:"411311"}],["c",{index:99,pattern:"113141"}],["d",{index:100,pattern:"114131"}],["e",{index:101,pattern:"311141"}],["f",{index:102,pattern:"411131"}],["g",{index:103,pattern:"211412"}],["h",{index:104,pattern:"211214"}],["i",{index:105,pattern:"211232"}],["j",{index:106,pattern:"2331112"}]]),e.fullAsciiMap=new Map([[0,["@",null]],[1,["A",null]],[2,["B",null]],[3,["C",null]],[4,["D",null]],[5,["E",null]],[6,["F",null]],[7,["G",null]],[8,["H",null]],[9,["I",null]],[0,["J",null]],[11,["K",null]],[12,["L",null]],[13,["M",null]],[14,["N",null]],[15,["O",null]],[16,["P",null]],[17,["Q",null]],[18,["R",null]],[19,["S",null]],[20,["T",null]],[21,["U",null]],[22,["V",null]],[23,["W",null]],[24,["X",null]],[25,["Y",null]],[26,["Z",null]],[27,["[",null]],[28,["\\",null]],[29,["]",null]],[30,["^",null]],[31,["_",null]],[32,["\0","\0"]],[33,["",""]],[34,["",""]],[35,["",""]],[36,["",""]],[37,["",""]],[38,["",""]],[39,["",""]],[40,["\b","\b"]],[41,["\t","\t"]],[42,["\n","\n"]],[43,["\v","\v"]],[44,["\f","\f"]],[45,["\r","\r"]],[46,["",""]],[47,["",""]],[48,["",""]],[49,["",""]],[50,["",""]],[51,["",""]],[52,["",""]],[53,["",""]],[54,["",""]],[55,["",""]],[56,["",""]],[57,["",""]],[58,["",""]],[59,["",""]],[60,["",""]],[61,["",""]],[62,["",""]],[63,["",""]],[64,[" "," "]],[65,["!","!"]],[66,['"','"']],[67,["#","#"]],[68,["$","$"]],[69,["%","%"]],[70,["&","&"]],[71,["'","'"]],[72,["(","("]],[73,[")",")"]],[74,["*","*"]],[75,["+","+"]],[76,[",",","]],[77,["-","-"]],[78,[".","."]],[79,["/","/"]],[80,["0","0"]],[81,["1","1"]],[82,["2","2"]],[83,["3","3"]],[84,["4","4"]],[85,["5","5"]],[86,["6","6"]],[87,["7","7"]],[88,["8","8"]],[89,["9","9"]],[90,[":",":"]],[91,[";",";"]],[92,["<","<"]],[93,["=","="]],[94,[">",">"]],[95,["?","?"]],[96,[null,"@"]],[97,[null,"A"]],[98,[null,"B"]],[99,[null,"C"]],[100,[null,"D"]],[101,[null,"E"]],[102,[null,"F"]],[103,[null,"G"]],[104,[null,"H"]],[105,[null,"I"]],[106,[null,"J"]],[107,[null,"K"]],[108,[null,"L"]],[109,[null,"M"]],[110,[null,"N"]],[111,[null,"O"]],[112,[null,"P"]],[113,[null,"Q"]],[114,[null,"R"]],[115,[null,"S"]],[116,[null,"T"]],[117,[null,"U"]],[118,[null,"V"]],[119,[null,"W"]],[120,[null,"X"]],[121,[null,"Y"]],[122,[null,"Z"]],[123,[null,"["]],[124,[null,"\\"]],[125,[null,"]"]],[126,[null,"^"]],[127,[null,"_"]],[128,["f","f","f"]],[129,["a","a",null]],[130,["`","`",null]],[131,["e","d",null]],[132,[null,"e","e"]],[133,["d",null,"d"]],[134,["c","c",null]],[135,[null,"b",null]],[135,["b",null,null]]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Code128=e.code128PropsDefault=void 0;var n=r(0),i=r(55);const s=e.code128PropsDefault=Object.assign({},n.barcodeBasePropsDefault,{elementWidth:.33,useLatin1:!1,raw:!1});e.Code128=class extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}calcSymbolSize(t,e,r,n){const i=this.props,s=11*i.elementWidth;return{tw:2*i.quietWidth+s*t.length+13*i.elementWidth,th:2*i.quietHeight+i.height+(i.drawText?i.textHeight:0)}}calcMod103Checksum(t){let e=i.charactersMap.get(t[0]);if(void 0===e)throw new Error("code128: character is out of range.");let r=e.index%103;for(let n=1;n<t.length;n++){if(void 0===(e=i.charactersMap.get(t[n])))throw new Error("code128: character is out of range.");r=(r+e.index*n)%103}return r}encodeData(t){if(this.props.raw)return{data:t,startChar:"",stopChar:"j"};let e="",r=4,n=null,s=0;const o=e=>{let n=e+1,i=1;for(;n<t.length;n++){const e=t.charCodeAt(n);if(48<=e&&e<=57)i++;else{if(128!==e)break;if(i%2)break}}return n>=t.length&&n-e>=4||n-e>=r},a=r=>{e+=null===n?"i":"c";let s=r,o=0,a=0;for(;s<t.length;s++){let r=t.charCodeAt(s);if(48<=r&&r<=57)o=10*o+(r-48),++a%2==0&&(e+=String.fromCharCode(o),o=0);else{if(this.props.useLatin1&&r>127&&(r-=128),128!==r)break;if(a%2)break;e+="f"}}if((s<t.length||a%2)&&(n=h(s),e+=0===n?"e":"d"),a%2){const t=i.fullAsciiMap.get(48+o);if(void 0===t)throw new Error("code128: character is out of range.");if(null===n)throw new Error("code128: mode === null. Assertion failed.");e+=t[n]}return s},h=e=>{let r=0,o=0,a=Math.max(e,s);for(;a<t.length;a++){let e=t.charCodeAt(a);this.props.useLatin1&&e>127&&(e-=128);const r=i.fullAsciiMap.get(e);if(void 0===r)throw new Error("code128: character is out of range.");const n=r[0],s=r[1];if(void 0===n||void 0===s)break}const h=Math.min(t.length,a+6);for(;a<h;a++){let e=t.charCodeAt(a);this.props.useLatin1&&e>127&&(e-=128);const n=i.fullAsciiMap.get(e);if(void 0===n)throw new Error("code128: character is out of range.");void 0===n[0]&&r++,void 0===n[1]&&o++}s=a;const l=null===n?1:n;return r<o?o-r<2?l:0:r>o?r-o<2?l:1:l};for(let s=0;s<t.length;){const l=t.charCodeAt(s);let c=!1,u=!1;if((48<=l&&l<=57||!this.props.useLatin1&&128===l||this.props.useLatin1&&256===l)&&(o(s)&&(s=a(s),c=!0),r=6),!c){let r=t.charCodeAt(s);this.props.useLatin1&&r>127&&(128<=(r-=128)&&r<=135?131===r&&(u=!0):u=!0);const o=i.fullAsciiMap.get(r);if(void 0===o)throw new Error("code128: character is out of range.");let a=null!==n?o[n]:void 0;if(void 0===a){const t=h(s);n===t?(e+="b",a=o[(n+1)%2]):(e+=null===n?0===n?"g":"h":0===n?"d":"e",a=o[n=t])}if(null===a)throw new Error("code128: character is out of range.");if(u){const t=i.fullAsciiMap.get(131);if(void 0===t)throw new Error("code128: character is out of range.");if(null===n)throw new Error("code128: mode === null. Assertion failed.");e+=t[n]}e+=a,s++}}return{data:e+=String.fromCharCode(this.calcMod103Checksum(e)),startChar:"",stopChar:"j"}}getBarSpaceWidth(){const t=this.props.elementWidth;return[0,t,2*t,3*t,4*t]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=e.charactersMap=new Map([["0",{index:0,pattern:"1112212110"}],["1",{index:1,pattern:"2112111120"}],["2",{index:2,pattern:"1122111120"}],["3",{index:3,pattern:"2122111110"}],["4",{index:4,pattern:"1112211120"}],["5",{index:5,pattern:"2112211110"}],["6",{index:6,pattern:"1122211110"}],["7",{index:7,pattern:"1112112120"}],["8",{index:8,pattern:"2112112110"}],["9",{index:9,pattern:"1122112110"}],["A",{index:10,pattern:"2111121120"}],["B",{index:11,pattern:"1121121120"}],["C",{index:12,pattern:"2121121110"}],["D",{index:13,pattern:"1111221120"}],["E",{index:14,pattern:"2111221110"}],["F",{index:15,pattern:"1121221110"}],["G",{index:16,pattern:"1111122120"}],["H",{index:17,pattern:"2111122110"}],["I",{index:18,pattern:"1121122110"}],["J",{index:19,pattern:"1111222110"}],["K",{index:20,pattern:"2111111220"}],["L",{index:21,pattern:"1121111220"}],["M",{index:22,pattern:"2121111210"}],["N",{index:23,pattern:"1111211220"}],["O",{index:24,pattern:"2111211210"}],["P",{index:25,pattern:"1121211210"}],["Q",{index:26,pattern:"1111112220"}],["R",{index:27,pattern:"2111112210"}],["S",{index:28,pattern:"1121112210"}],["T",{index:29,pattern:"1111212210"}],["U",{index:30,pattern:"2211111120"}],["V",{index:31,pattern:"1221111120"}],["W",{index:32,pattern:"2221111110"}],["X",{index:33,pattern:"1211211120"}],["Y",{index:34,pattern:"2211211110"}],["Z",{index:35,pattern:"1221211110"}],["-",{index:36,pattern:"1211112120"}],[".",{index:37,pattern:"2211112110"}],[" ",{index:38,pattern:"1221112110"}],["$",{index:39,pattern:"1212121110"}],["/",{index:40,pattern:"1212111210"}],["+",{index:41,pattern:"1211121210"}],["%",{index:42,pattern:"1112121210"}],["*",{index:43,pattern:"1211212110"}]]),i=e.reverseMap=new Map;for(const t of n.entries())i.set(t[1].index,t[0]);e.fullAsciiMap=new Map([[0,"%U"],[1,"$A"],[2,"$B"],[3,"$C"],[4,"$D"],[5,"$E"],[6,"$F"],[7,"$G"],[8,"$H"],[9,"$I"],[0,"$J"],[11,"$K"],[12,"$L"],[13,"$M"],[14,"$N"],[15,"$O"],[16,"$P"],[17,"$Q"],[18,"$R"],[19,"$S"],[20,"$T"],[21,"$U"],[22,"$V"],[23,"$W"],[24,"$X"],[25,"$Y"],[26,"$Z"],[27,"%A"],[28,"%B"],[29,"%C"],[30,"%D"],[31,"%E"],[32," "],[33,"/A"],[34,"/B"],[35,"/C"],[36,"/D"],[37,"/E"],[38,"/F"],[39,"/G"],[40,"/H"],[41,"/I"],[42,"/J"],[43,"/K"],[44,"/L"],[45,"-"],[46,"."],[47,"/"],[48,"0"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[58,"/Z"],[59,"%F"],[60,"%G"],[61,"%H"],[62,"%I"],[63,"%J"],[64,"%V"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"],[91,"%K"],[92,"%L"],[93,"%M"],[94,"%N"],[95,"%O"],[96,"%W"],[97,"+A"],[98,"+B"],[99,"+C"],[100,"+D"],[101,"+E"],[102,"+F"],[103,"+G"],[104,"+H"],[105,"+I"],[106,"+J"],[107,"+K"],[108,"+L"],[109,"+M"],[110,"+N"],[111,"+O"],[112,"+P"],[113,"+Q"],[114,"+R"],[115,"+S"],[116,"+T"],[117,"+U"],[118,"+V"],[119,"+W"],[120,"+X"],[121,"+Y"],[122,"+Z"],[123,"%P"],[124,"%Q"],[125,"%R"],[126,"%S"],[127,"%T"]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Code39=e.code39PropsDefault=void 0;var n=r(0),i=r(57);const s=e.code39PropsDefault=Object.assign({},n.barcodeBasePropsDefault,{addCheckDigit:!0,fullAscii:!1,narrowWidth:.33,wideWidth:.66,charGapWidth:void 0});e.Code39=class extends n.BarcodeBase{constructor(t){super(Object.assign({},s,t),i.charactersMap)}calcSymbolSize(t,e,r,n){const i=this.props,s=i.charGapWidth||i.narrowWidth,o=6*i.narrowWidth+3*i.wideWidth+s;return{tw:2*i.quietWidth+o*(t.length+2+(i.addCheckDigit?1:0))-s,th:2*i.quietHeight+i.height+(i.drawText?i.textHeight:0)}}calcCheckDigit(t){let e="";if(this.props.addCheckDigit){let r=0;for(let e=0;e<t.length;e++){const n=i.charactersMap.get(t[e]);if(void 0===n)throw new Error("code39: character is out of range.");r=(r+n.index)%43}const n=i.reverseMap.get(r);if(void 0===n)throw new Error("code39 (trace): checkdigit is out of range.");e=n}return e}encodeData(t){let e=t;if(this.props.fullAscii){e="";for(let r=0;r<t.length;r++){const n=i.fullAsciiMap.get(t.charCodeAt(r));if(void 0===n)throw new Error("code39 fullascii: character is out of range.");e+=n}}return{data:e,startChar:"*",stopChar:"*"}}getBarSpaceWidth(){const t=this.props;return[t.charGapWidth||t.narrowWidth,t.narrowWidth,t.wideWidth]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(58);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(56);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=r(54);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=r(52);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var h=r(50);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var l=r(48);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var c=r(46);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})})},function(t,e){t.exports=void 0},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactHost=void 0;var n=s(r(13)),i=s(r(60));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}e.ReactHost=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){return[]}render(){return i.renderToStaticMarkup(this.props.element)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(61);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HtmlRenderer=void 0;var _Base=__webpack_require__(12),_TextEncoding=__webpack_require__(6),_app=__webpack_require__(22),__awaiter=function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})};let isNode=!1;"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(void 0!==process.type&&"renderer"===process.type||(isNode=!0));const requireDynamic=isNode?eval("require"):void 0;class HtmlRenderer{static _toPdf(t,e,r){return __awaiter(this,void 0,void 0,function*(){const n=requireDynamic("puppeteer");let i=null,s=null;try{const o=yield(s=yield n.launch()).newPage();yield o.goto("data:text/html;base64,"+_Base.Base64.encode(_TextEncoding.TextEncoding.encodeToUtf8(t)),Object.assign({waitUntil:"load"},e||{})),i=yield o.pdf(Object.assign({width:"210mm",height:"297mm",printBackground:!0},r||{}))}finally{try{s&&(yield s.close())}catch(t){}}return i})}static toPdf(t,e,r){return __awaiter(this,void 0,void 0,function*(){return"string"==typeof t?HtmlRenderer._toPdf(t,e,r):HtmlRenderer._toPdf(yield t,e,r)})}static toPdfHandler(t,e,r){return _app.Lambdas.pipe(t,(t,n,i)=>{HtmlRenderer.toPdf(t,e,r).then(t=>i(null,t)).catch(t=>i(t,null))})}static _toImage(t,e,r){return __awaiter(this,void 0,void 0,function*(){const n=requireDynamic("puppeteer");let i=null,s=null;try{const o=yield(s=yield n.launch()).newPage();yield o.goto("data:text/html;base64,"+_Base.Base64.encode(_TextEncoding.TextEncoding.encodeToUtf8(t)),Object.assign({waitUntil:"load"},e||{})),yield o.emulateMedia("print"),i=yield o.screenshot(Object.assign({type:"png",fullPage:!0,omitBackground:!1},r||{}))}finally{try{s&&(yield s.close())}catch(t){}}return i})}static toImage(t,e,r){return __awaiter(this,void 0,void 0,function*(){return"string"==typeof t?HtmlRenderer._toImage(t,e,r):HtmlRenderer._toImage(yield t,e,r)})}static toImageHandler(t,e,r){return _app.Lambdas.pipe(t,(t,n,i)=>{HtmlRenderer.toImage(t,e,r).then(t=>i(null,t)).catch(t=>i(t,null))})}}exports.HtmlRenderer=HtmlRenderer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrinterMarks=e.printerMarksDefault=void 0;var n=r(3);const i=e.printerMarksDefault=Object.assign({},n.shapePropsDefault,{fill:!1,stroke:!0,strokeColor:"black",lineWidth:.105834,width:210,height:297,cropMarkLength:9,bleedMarks:!0,northBleed:3,southBleed:3,eastBleed:3,westBleed:3,centerMarks:!0,centerMarkArmLength:15,centerMarkArmMargin:3});e.PrinterMarks=class extends n.Shape{constructor(t){super(Object.assign({},i,t))}render(t,e){const r=this.getContext(t,n.CONTEXT_SVG_CANVAS),i=this.props;if(r.moveTo(-i.westBleed,0),r.lineTo(-i.westBleed-i.cropMarkLength,0),r.moveTo(-i.westBleed,i.height),r.lineTo(-i.westBleed-i.cropMarkLength,i.height),r.moveTo(i.width+i.eastBleed,0),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,0),r.moveTo(i.width+i.eastBleed,i.height),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,i.height),r.moveTo(0,-i.northBleed),r.lineTo(0,-i.northBleed-i.cropMarkLength),r.moveTo(i.width,-i.northBleed),r.lineTo(i.width,-i.northBleed-i.cropMarkLength),r.moveTo(0,i.height+i.southBleed),r.lineTo(0,i.height+i.southBleed+i.cropMarkLength),r.moveTo(i.width,i.height+i.southBleed),r.lineTo(i.width,i.height+i.southBleed+i.cropMarkLength),i.bleedMarks&&(r.moveTo(0,-i.northBleed),r.lineTo(-i.westBleed-i.cropMarkLength,-i.northBleed),r.moveTo(0,i.height+i.southBleed),r.lineTo(-i.westBleed-i.cropMarkLength,i.height+i.southBleed),r.moveTo(i.width,-i.northBleed),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,-i.northBleed),r.moveTo(i.width,i.height+i.southBleed),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,i.height+i.southBleed),r.moveTo(-i.westBleed,0),r.lineTo(-i.westBleed,-i.northBleed-i.cropMarkLength),r.moveTo(i.width+i.eastBleed,0),r.lineTo(i.width+i.eastBleed,-i.northBleed-i.cropMarkLength),r.moveTo(-i.westBleed,i.height),r.lineTo(-i.westBleed,i.height+i.southBleed+i.cropMarkLength),r.moveTo(i.width+i.eastBleed,i.height),r.lineTo(i.width+i.eastBleed,i.height+i.southBleed+i.cropMarkLength)),i.centerMarks&&(r.moveTo(i.width/2,-i.northBleed),r.lineTo(i.width/2,-i.northBleed-i.cropMarkLength),r.moveTo(i.width/2,i.height+i.southBleed),r.lineTo(i.width/2,i.height+i.southBleed+i.cropMarkLength),r.moveTo(i.width/2-i.centerMarkArmLength/2,-i.northBleed-i.centerMarkArmMargin),r.lineTo(i.width/2+i.centerMarkArmLength/2,-i.northBleed-i.centerMarkArmMargin),r.moveTo(i.width/2-i.centerMarkArmLength/2,i.height+i.southBleed+i.centerMarkArmMargin),r.lineTo(i.width/2+i.centerMarkArmLength/2,i.height+i.southBleed+i.centerMarkArmMargin),r.moveTo(-i.westBleed,i.height/2),r.lineTo(-i.westBleed-i.cropMarkLength,i.height/2),r.moveTo(i.width+i.eastBleed,i.height/2),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,i.height/2),r.moveTo(-i.westBleed-i.centerMarkArmMargin,i.height/2-i.centerMarkArmLength/2),r.lineTo(-i.westBleed-i.centerMarkArmMargin,i.height/2+i.centerMarkArmLength/2),r.moveTo(i.width+i.eastBleed+i.centerMarkArmMargin,i.height/2-i.centerMarkArmLength/2),r.lineTo(i.width+i.eastBleed+i.centerMarkArmMargin,i.height/2+i.centerMarkArmLength/2)),i.hFold){let t=0;for(const e of i.hFold)t+=e,r.moveTo(t,-i.northBleed),r.lineTo(t,-i.northBleed-i.cropMarkLength),r.moveTo(t,i.height+i.southBleed),r.lineTo(t,i.height+i.southBleed+i.cropMarkLength)}if(i.vFold){let t=0;for(const e of i.vFold)t+=e,r.moveTo(-i.westBleed,t),r.lineTo(-i.westBleed-i.cropMarkLength,t),r.moveTo(i.width+i.eastBleed,t),r.lineTo(i.width+i.eastBleed+i.cropMarkLength,t)}return""}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SingleFont=e.Font=e.Style=e.Script=e.Image=e.Asset=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),i=r(3),s=r(12),o=r(6),a=r(19),h=r(5),l=r(28);e.Asset=class extends n.RedAgatePhantomComponent{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();{const t=this.props.src;return new Promise((e,r)=>{try{a.FileFetcher.fetchLocation(this.props.src).then(n=>{let i=n.contentType;if(null===i){const e=l.Uri.getPathExt(t);if(null===(i=l.Uri.pathExtToContentType(e)))return h.Logger.log("Asset#defer:unknown content-type:"+e),void r("unknown content-type")}this.content=`data:${i};base64,`+s.Base64.encode(n.data,120),e()}).catch(t=>{h.Logger.log("Asset#defer:catch:"+t),r(t)})}catch(t){h.Logger.log("Asset#defer:catch:"+t),r(t)}})}}beforeRender(t){this.setContext(t,i.CONTEXT_ASSET_+this.props.contextName,this.content)}render(t,e){return""}};e.Image=class extends i.Shape{constructor(t){super(t),this.content=""}transform(){return null!==this.props.children&&void 0!==this.props.children?this.props.children:[]}defer(){if(void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use)return Promise.resolve();if(null!==this.content&&void 0!==this.content&&""!==this.content)return Promise.resolve();if(null===this.props.src||void 0===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return this.content=this.props.src,Promise.resolve();{const t=this.props.src;return new Promise((e,r)=>{a.FileFetcher.fetchLocation(t).then(n=>{let i=n.contentType;if(null===i){const e=l.Uri.getPathExt(t);if(null===(i=l.Uri.pathExtToContentType(e)))return h.Logger.log("Image#defer:unknown content-type:"+e),void r("unknown content-type")}this.content=`data:${i};base64,`+s.Base64.encode(n.data,120),e()}).catch(t=>{h.Logger.log("Image#defer:"+t),r(t)})})}}renderAsHtml(t){let e="";if(this.props.asAsset)e=`<script>(Function("return this")())['#img_asset_mb3vhWjBUxDX__${this.props.id}']="${this.content.replace(/\r/g,"").replace(/\n/g,"")}";<\/script>`;else if(void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use){const t=this.props.id||`__img_node_id_mb3vhWjBUxDX_${this.props.__nodeId}`;e=`<img id="${t}" style="width:${this.props.width}${this.props.unit||"px"};height:${this.props.height}${this.props.unit||"px"};"${n.htmlAttributesRenderer(this.props,new Set(["id","src","unit","width","height"])).attrs}></img><script>document.getElementById("${t}").src=(Function("return this")())['#img_asset_mb3vhWjBUxDX__${this.props.use}'];<\/script>`}else e=`<img src="${this.content}" style="width:${this.props.width}${this.props.unit||"px"};height:${this.props.height}${this.props.unit||"px"};"${n.htmlAttributesRenderer(this.props,new Set(["src","unit","width","height"])).attrs}></img>`;return e}renderAsSvg(t){const e=void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use?"#"+this.props.use:t.registerImage({url:this.content,x:0,y:0,width:1,height:1},this.props.id);this.props.asAsset||t.drawImage(e,this.props.x||0,this.props.y||0,this.props.width,this.props.height)}render(t,e){const r=this.getContext(t,i.CONTEXT_SVG_CANVAS);return void 0!==this.props.srcContext&&null!==this.props.srcContext&&""!==this.props.srcContext&&(this.content=this.getContext(t,i.CONTEXT_ASSET_+this.props.srcContext)),r?(this.renderAsSvg(r),""):this.renderAsHtml(t)}};e.Script=class extends n.RedAgatePhantomComponent{constructor(t){super(t),this.content=""}defer(){return void 0===this.props.src||null===this.props.src||""===this.props.src?Promise.resolve():this.props.noDownload?Promise.resolve():new Promise((t,e)=>{try{a.FileFetcher.fetchLocation(this.props.src).then(e=>{this.content=o.TextEncoding.decodeUtf8(e.data),t()}).catch(t=>{h.Logger.log("Script#defer:catch:"+t),e(t)})}catch(t){h.Logger.log("Script#defer:catch:"+t),e(t)}})}render(t,e){let r="";r=this.props.noDownload?`<script${n.htmlAttributesRenderer(this.props,new Set([])).attrs}><\/script>`:`<script${n.htmlAttributesRenderer(this.props,new Set(["src"])).attrs}>${this.content}<\/script>`;const s=this.getContext(t,i.CONTEXT_SVG_CANVAS);return s?(s.registerCustomAsset(r),""):r}};class c extends n.RedAgatePhantomComponent{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return Promise.resolve();return new Promise((t,e)=>{try{a.FileFetcher.fetchLocation(this.props.src).then(r=>{this.content=o.TextEncoding.decodeUtf8(r.data);const n=/^url\((.+?)\)$/,i=this.content.split(/(url\(.+?\))/),c=[],u=[];for(let t=0;t<i.length;t++){const e=n.exec(i[t]);e&&(c.push(a.FileFetcher.fetchLocation(l.Uri.join(this.props.src,e[1])).then(e=>{i[t]=i[t].replace(n,`url(${`data:${e.contentType};charset=utf-8;base64,`+s.Base64.encode(e.data)})`)})),u.push(t))}Promise.all(c).then(()=>{this.content=i.join(""),t()}).catch(t=>{h.Logger.log("Style#defer:catch(1):"+t),e(t)})}).catch(t=>{h.Logger.log("Style#defer:catch(2):"+t),e(t)})}catch(t){h.Logger.log("Style#defer:catch(3):"+t),e(t)}})}render(t,e){let r="";r=this.props.noDownload?`<style type="text/css">@import url("${this.props.src}");</style>`:`<style${n.htmlAttributesRenderer(this.props,new Set(["src"])).attrs}>${this.content}</style>`;const s=this.getContext(t,i.CONTEXT_SVG_CANVAS);return s?(s.registerCustomAsset(r),""):r}}e.Style=c;e.Font=c;e.SingleFont=class extends n.RedAgatePhantomComponent{constructor(t){super(t),this.content=""}defer(){return void 0===this.props.src||null===this.props.src||""===this.props.src?Promise.resolve():this.props.noDownload?Promise.resolve():new Promise((t,e)=>{try{a.FileFetcher.fetchLocation(this.props.src).then(e=>{this.content=`data:${e.contentType};charset=utf-8;base64,`+s.Base64.encode(e.data),t()}).catch(t=>{h.Logger.log("SingleFont#defer:catch:"+t),e(t)})}catch(t){h.Logger.log("SingleFont#defer:catch:"+t),e(t)}})}render(t,e){let r="";this.props.noDownload,r=`<style type="text/css">@font-face{font-family:${this.props.fontFamily};font-style:${this.props.fontStyle};font-weight:${this.props.fontWeight};src:${this.props.localNames?this.props.localNames.map(t=>` local(${t})`):""} url(${this.props.noDownload?this.props.src:this.content});unicode-range:${this.props.unicodeRange};}</style>`;const n=this.getContext(t,i.CONTEXT_SVG_CANVAS);return n?(n.registerCustomAsset(r),""):r}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SvgImposition=e.Text=e.textPropsDefault=e.SvgFragment=e.svgFragmentPropsDefault=e.SvgAssetFragment=e.svgAssetFragmentPropsDefault=e.RoundRect=e.roundRectPropsDefault=e.Rect=e.rectPropsDefault=e.Polygon=e.polygonPropsDefault=e.Pie=e.piePropsDefault=e.Path=e.pathPropsDefault=e.Line=e.linePropsDefault=e.Group=e.GridLine=e.gridLinePropsDefault=e.Curve=e.curvePropsDefault=e.Circle=e.circlePropsDefault=e.Canvas=e.canvasPropsDefault=e.Arc=e.arcPropsDefault=e.Ambient=e.ambientPropsDefault=e.Svg=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),i=r(8),s=r(6),o=r(19),a=r(5),h=r(3);e.Svg=class extends n.RedAgatePhantomComponent{constructor(t){super(t),this.template=null,t.template&&(this.template=t.template)}defer(){if(null!==this.template)return Promise.resolve();if(void 0===this.props.templateUrl||null===this.props.templateUrl||""===this.props.templateUrl)return Promise.resolve();{const t=this.props.templateUrl;return new Promise((e,r)=>{try{o.FileFetcher.fetchLocation(t).then(t=>{this.template=s.TextEncoding.decodeUtf8(t.data),e()}).catch(t=>{a.Logger.log("Svg#defer:catch:"+t),r(t)})}catch(t){a.Logger.log("Svg#defer:catch:"+t),r(t)}})}}toImgTag(){return(0,h.toImgTag)(this)}toElementStyle(){return(0,h.toElementStyle)(this)}toDataUrl(){return(0,h.toDataUrl)(this)}toSvg(){return(0,h.toSvg)(this)}toRendered(){return n.renderAsHtml_noDefer(this)}beforeRender(t){this.setContext(t,h.CONTEXT_SVG_CANVAS,null===this.template?new i.SvgCanvas:i.SvgCanvas.fromTemplate(this.template))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);return(0,h.renderSvgCanvas)(this.props,r,this.props.width,this.props.height)}afterRender(t){this.unsetContext(t,h.CONTEXT_SVG_CANVAS)}};const l=e.ambientPropsDefault=Object.assign({},h.shapePropsDefault,{});e.Ambient=class extends h.Shape{constructor(t){super(Object.assign({},l,t)),this.isAmbient=!0,this.isGroup=!1}render(t,e){return""}};const c=e.arcPropsDefault=Object.assign({},h.shapePropsDefault,{r:1,startDeg:0,endDeg:180,anticlockwise:!0});e.Arc=class extends h.Shape{constructor(t){super(Object.assign({},c,t))}render(t,e){return this.getContext(t,h.CONTEXT_SVG_CANVAS).arc(this.props.r,this.props.r,this.props.r,this.props.startDeg/180*Math.PI,this.props.endDeg/180*Math.PI,this.props.anticlockwise),""}};const u=e.canvasPropsDefault=Object.assign({},h.shapePropsDefault,{});e.Canvas=class extends h.Shape{constructor(t){super(Object.assign({},u,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);return(Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children)(r),""}};const p=e.circlePropsDefault=Object.assign({},h.shapePropsDefault,{r:1,anticlockwise:!0});e.Circle=class extends h.Shape{constructor(t){super(Object.assign({},p,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);return r.arc(this.props.r,this.props.r,this.props.r,0,2*Math.PI,this.props.anticlockwise),r.closePath(),""}};const d=e.curvePropsDefault=Object.assign({},h.shapePropsDefault,{move:!0,points:[]});e.Curve=class extends h.Shape{constructor(t){super(Object.assign({},d,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);this.props.move&&r.moveTo(this.props.points[0],this.props.points[1]);for(let t=this.props.move?2:0;t<this.props.points.length;t+=6)r.bezierCurveTo(this.props.points[t+0],this.props.points[t+1],this.props.points[t+2],this.props.points[t+3],this.props.points[t+4],this.props.points[t+5]);return""}};const f=e.gridLinePropsDefault=Object.assign({},h.shapePropsDefault,{lineWidth:.1,fill:!1,stroke:!0,strokeColor:"#ccc",startX:0,endX:210,startY:0,endY:296,gridSize:5,bleed:13});e.GridLine=class extends h.Shape{constructor(t){super(Object.assign({},f,t))}render(t,e){const r=this.props,n=this.getContext(t,h.CONTEXT_SVG_CANVAS),i=Math.ceil(r.bleed/r.gridSize)*r.gridSize,s=Math.ceil((r.endX-r.startX+r.bleed)/r.gridSize)*r.gridSize,o=Math.ceil((r.endY-r.startY+r.bleed)/r.gridSize)*r.gridSize;for(let t=r.startX-i;t<=s;t+=r.gridSize)n.moveTo(r.startX+t,r.startY-i),n.lineTo(r.startX+t,r.startY+o);for(let t=r.startY-i;t<=o;t+=r.gridSize)n.moveTo(r.startX-i,r.startY+t),n.lineTo(r.startX+s,r.startY+t);return n.rect(r.startX||0,r.startY||0,r.endX-r.startX,r.endY-r.startY),""}};class g extends h.Shape{constructor(t){super(Object.assign({},{},t)),this.isAmbient=!0}render(t,e){return""}}e.Group=g;const m=e.linePropsDefault=Object.assign({},h.shapePropsDefault,{move:!0,points:[]});e.Line=class extends h.Shape{constructor(t){super(Object.assign({},m,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);this.props.move&&r.moveTo(this.props.points[0],this.props.points[1]);for(let t=this.props.move?2:0;t<this.props.points.length;t+=2)r.lineTo(this.props.points[t],this.props.points[t+1]);return""}};const b=e.pathPropsDefault=Object.assign({},h.shapePropsDefault,{close:!1,clip:!1,width:10,height:10,paths:[]});e.Path=class extends h.Shape{constructor(t){super(Object.assign({},b,t))}beforeRender(t){this.setContext(t,h.CONTEXT_SVG_PATH,!0)}render(t,e){return""}afterRender(t){this.unsetContext(t,h.CONTEXT_SVG_PATH)}};const y=e.piePropsDefault=Object.assign({},h.shapePropsDefault,{r:1,startDeg:0,endDeg:180,anticlockwise:!0});e.Pie=class extends h.Shape{constructor(t){super(Object.assign({},y,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);return r.moveTo(this.props.r,this.props.r),r.arc(this.props.r,this.props.r,this.props.r,this.props.startDeg/180*Math.PI,this.props.endDeg/180*Math.PI,this.props.anticlockwise),r.closePath(),""}};const v=e.polygonPropsDefault=Object.assign({},h.shapePropsDefault,{points:[]});e.Polygon=class extends h.Shape{constructor(t){super(Object.assign({},v,t))}render(t,e){const r=this.getContext(t,h.CONTEXT_SVG_CANVAS);r.moveTo(this.props.points[0],this.props.points[1]);for(let t=2;t<this.props.points.length;t+=2)r.lineTo(this.props.points[t],this.props.points[t+1]);return r.closePath(),""}};const w=e.rectPropsDefault=Object.assign({},h.shapePropsDefault,{width:10,height:10});e.Rect=class extends h.Shape{constructor(t){super(Object.assign({},w,t))}render(t,e){return this.getContext(t,h.CONTEXT_SVG_CANVAS).rect(0,0,this.props.width,this.props.height),""}};const x=e.roundRectPropsDefault=Object.assign({},h.shapePropsDefault,{width:10,height:10,r:1});e.RoundRect=class extends h.Shape{constructor(t){super(Object.assign({},x,t))}render(t,e){return this.getContext(t,h.CONTEXT_SVG_CANVAS).roundRect(0,0,this.props.width,this.props.height,this.props.r),""}};e.svgAssetFragmentPropsDefault=Object.assign({},h.shapePropsDefault,{});e.SvgAssetFragment=class extends h.Shape{constructor(t){super(Object.assign({},u,t))}render(t,e){return this.getContext(t,h.CONTEXT_SVG_CANVAS).registerCustomAsset(e),""}};e.svgFragmentPropsDefault=Object.assign({},h.shapePropsDefault,{});e.SvgFragment=class extends h.Shape{constructor(t){super(Object.assign({},u,t))}render(t,e){return this.getContext(t,h.CONTEXT_SVG_CANVAS).appendCustomContent(e),""}};const _=e.textPropsDefault=Object.assign({},h.shapePropsDefault,{text:""});e.Text=class extends h.Shape{constructor(t){super(Object.assign({},_,t))}fillStrokeText(t){this.props.font&&(t.font=this.props.font),this.props.textAlign&&(t.textAlign=this.props.textAlign),this.props.textBaseline&&(t.textBaseline=this.props.textBaseline),this.props.fill&&this.props.stroke?t.fillStrokeText(this.props.text,0,0,this.props):this.props.fill?t.fillText(this.props.text,0,0,this.props):this.props.stroke&&t.strokeText(this.props.text,0,0,this.props)}render(t,e){return""}afterRender(t){const e=this.getContext(t,h.CONTEXT_SVG_CANVAS);this.isPathFragment||(this.fillStrokeText(e),this.restoreGraphicState(e))}};e.SvgImposition=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let i=0;i<this.props.items.length;i++)e.push(n.createElement(g,{x:this.props.paperWidth/this.props.cols*(i%this.props.cols)+(Array.isArray(this.props.itemTranslation)?Array.isArray(this.props.itemTranslation[i])?this.props.itemTranslation[i][0]||0:this.props.itemTranslation[0]||0:0),y:this.props.paperHeight/this.props.rows*Math.floor(i/this.props.cols)+(Array.isArray(this.props.itemTranslation)?Array.isArray(this.props.itemTranslation[i])?this.props.itemTranslation[i][1]||0:this.props.itemTranslation[1]||0:0),scaleX:Array.isArray(this.props.itemScale)?Array.isArray(this.props.itemScale[i])?this.props.itemScale[i][0]||1:this.props.itemScale[0]||1:1,scaleY:Array.isArray(this.props.itemScale)?Array.isArray(this.props.itemScale[i])?this.props.itemScale[i][1]||1:this.props.itemScale[1]||1:1,rotationDeg:Array.isArray(this.props.itemRotationDeg)?this.props.itemRotationDeg[i]||0:this.props.itemRotationDeg||0},t(this.props.items[i],i,this.props.items,r)));return e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlImposition=e.Xml=e.Html5=e.Xhtml1_0_Frameset=e.Xhtml1_0_Transitional=e.Xhtml1_0_Strict=e.Html4_01_Frameset=e.Html4_01_Transitional=e.Html4_01_Strict=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));e.Html4_01_Strict=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Html4_01_Transitional=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Html4_01_Frameset=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Xhtml1_0_Strict=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Xhtml1_0_Transitional=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Xhtml1_0_Frameset=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"><html${r.attrs}>${r.children}${e}</html>`}};e.Html5=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){const r=n.htmlAttributesRenderer(this.props);return`<!DOCTYPE html><html${r.attrs}>${r.children}${e}</html>`}};e.Xml=class extends n.RedAgatePhantomComponent{constructor(t){super(t)}render(t,e){return`<?xml version="${"string"==typeof this.props.version?this.props.version:"1.0"}" encoding="${"string"==typeof this.props.encoding?this.props.encoding:"UTF-8"}"?>${e}`}};e.HtmlImposition=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let i=0;i<this.props.items.length;i++)e.push(n.createElement("div",{style:{position:"absolute",left:this.props.paperWidth/this.props.cols*(i%this.props.cols),top:this.props.paperHeight/this.props.rows*Math.floor(i/this.props.cols)}},t(this.props.items[i],i,this.props.items,r)));return e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Template=e.Facet=e.Do=e.If=e.ForEach=e.Repeat=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));e.Repeat=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.times;n++)e.push(t(n,r));return e}};e.ForEach=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.items.length;n++)e.push(t(this.props.items[n],n,this.props.items,r));return e}};e.If=class extends n.RedAgateComponent{constructor(t){super(t)}transform(){return this.props.condition?this.props.children:[]}};e.Do=class extends n.RedAgateComponent{constructor(t){super(t),(Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children)()}earlyConstruct(){}transform(){return[]}render(t,e){return""}};class i extends n.Fragment{constructor(t){super(t)}}e.Facet=i;e.Template=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.query=function(t){return new n(t)};class n{constructor(t){this.data=t}orderBy(t){let e;return e=Array.isArray(t)?(e,r)=>{for(const n of t)if("string"==typeof n){if(e[n]>r[n])return 1;if(e[n]<r[n])return-1}else{const t="desc"===n[1]?-1:1;if(e[n[0]]>r[n[0]])return 1*t;if(e[n[0]]<r[n[0]])return-1*t}return 0}:t,new n(this.data.slice(0).sort(e))}groupBy(t){let e;e=Array.isArray(t)?(e,r)=>{for(const n of t)if(e[n]!==r[n])return!1;return!0}:t;const r=[];let i=0,s=1;for(;s<this.data.length;s++)e(this.data[i],this.data[s],s,this.data)||(r.push(this.data.slice(i,s)),i=s);return r.push(this.data.slice(i,s)),new n(r)}groupEvery(t){if("number"==typeof t)return this.groupBy((e,r,n,i)=>n%t!=0);{const e=Object.assign({first:t.intermediate,last:t.intermediate},t),r=this.groupBy((t,r,n,i)=>e.single>=i.length?n%e.single!=0:n<=e.first?n%e.first!=0:(n-e.first)%e.intermediate!=0);return 1===r.data.length&&e.single<r.data[0].length&&r.data.push([]),r.data.length>1&&r.data[r.data.length-1].length>e.last&&r.data.push([]),r}}where(t){return new n(this.data.filter(t))}select(t){return t?this.data.map(t):this.data}}e.Query=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(69);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(3);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=r(68);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=r(67);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var h=r(66);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var l=r(65);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var c=r(64);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var u=r(22);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var p=r(63);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NumberPrecision=class{static decimalPlaces(t){return e=>Number(e.toFixed(t))}static precision(t){return e=>Number(e.toPrecision(t))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(14);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(23);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CRC32=class{constructor(t=3988292384){this.reversedGx=t,this.table=[];for(let e=0;e<256;e++){let r=e;for(let e=0;e<8;e++)r=1&r?t^r>>>1:r>>>1;this.table[e]=r}}calc(t){let e=4294967295;for(let r=0;r<t.length;r++)e=this.table[255&(e^t[r])]^e>>>8;return 4294967295^e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RealField=class{get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return Math.E}get NaN(){return Number.NaN}normalize(t){return t}isNaN(t){return Number.isNaN(t)}eq(t,e){return t===e}noteq(t,e){return t!==e}neg(t){return-t}inv(t){return 1/t}add(t,e){return t+e}sub(t,e){return t-e}mul(t,e){return t*e}div(t,e){return t/e}mod(t,e){return t%e}divmod(t,e){return 0===e?{q:this.NaN,r:this.NaN,divisible:!1}:{q:Math.sign(t)*(Math.abs(t)-Math.abs(t%e))/e,r:t%e,divisible:t%e==0}}pow(t,e){return Math.pow(t,e)}log(t,e){return Math.log(e)/Math.log(t)}exp(t){return Math.exp(t)}ln(t){return Math.log(t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(17);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(16);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(15);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=r(27);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=r(26);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var h=r(74);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var l=r(25);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var c=r(73);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var u=r(24);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Html5FileFetcher=void 0;var n=r(5);e.Html5FileFetcher=class{static fetch(t){return new Promise((e,r)=>{try{const i=new FileReader;i.onload=(r=>{e({contentType:t.type,data:new Uint8Array(r.target.result)})}),i.onerror=(t=>{n.Logger.log("Html5FileFetcher#fetch:onerror:"+t),r(t)}),i.onabort=(t=>{n.Logger.log("Html5FileFetcher#fetch:onabort:"+t),r(t)}),i.readAsArrayBuffer(t)}catch(t){n.Logger.log("Html5FileFetcher#fetch:"+t),r(t)}})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileSaver=void 0;var n=r(5);class i{static saveTextAs_node(t,e,i){return new Promise((s,o)=>{try{r(!function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}()).writeFile(t,e,"utf-8"===i||"UTF-8"===i?"utf8":i,t=>{t?(n.Logger.log("FileSaver#saveTextAs_node:writeFile:"+t),o(t)):s(!0)})}catch(t){n.Logger.log("FileSaver#saveTextAs_node:"+t),o(t)}})}static saveTextAs_html5(t,e,r){return new Promise((i,s)=>{try{if("utf-8"===r||"UTF-8"===r){const r=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t),i(!0);else{const e=window.URL.createObjectURL(r),n=document.createElement("a");n.href=e,n.download=t;const s=window.navigator.userAgent.toLowerCase(),o=-1!==s.indexOf("chrome/")&&-1===s.indexOf("edge/");o||document.body.appendChild(n),n.click(),window.setTimeout(()=>{window.URL.revokeObjectURL(e),o||document.body.removeChild(n),i(!0)},10)}}else n.Logger.log("FileSaver#saveTextAs_html5:unsupported text encoding:"+r),s("unsupported text encoding")}catch(t){n.Logger.log("FileSaver#saveTextAs_html5:"+t),s(t)}})}static saveBinaryAs_node(t,e){return new Promise((i,s)=>{try{r(!function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}()).writeFile(t,e,t=>{t?(n.Logger.log("FileSaver#saveBinaryAs_node:writeFile:"+t),s(t)):i(!0)})}catch(t){n.Logger.log("FileSaver#saveBinaryAs_node:"+t),s(t)}})}static saveBinaryAs_html5(t,e){return new Promise((r,i)=>{try{const s=new Blob([e],{type:"application/octet-binary"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,t),r(!0);else{const e=window.URL.createObjectURL(s),n=document.createElement("a");n.href=e,n.download=t;const i=window.navigator.userAgent.toLowerCase(),o=-1!==i.indexOf("chrome/")&&-1===i.indexOf("edge/");o||document.body.appendChild(n),n.click(),window.setTimeout(()=>{window.URL.revokeObjectURL(e),o||document.body.removeChild(n),r(!0)},10)}}catch(t){n.Logger.log("FileSaver#saveBinaryAs_html5:"+t),i(t)}})}static saveTextAs(t,e,r="utf-8"){if(i.isNashorn)throw new Error("FileSaver#saveTextAs: Nashorn handler is not impl.");return i.isNode?this.saveTextAs_node(t,e,r):this.saveTextAs_html5(t,e,r)}static saveBinaryAs(t,e){if(i.isNashorn)throw new Error("FileSaver#saveBinaryAs: Nashorn handler is not impl.");return i.isNode?this.saveBinaryAs_node(t,e):this.saveBinaryAs_html5(t,e)}}e.FileSaver=i,i.__ctor=(i.isNashorn=!1,i.isNode=!1,void("undefined"!=typeof Java&&Java&&"function"==typeof Java.type?i.isNashorn=!0:"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(void 0!==process.type&&"renderer"===process.type||(i.isNode=!0))))},function(t,e,r){var n=r(41),i=r(18),s=t.exports;for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);function a(t){if("string"==typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}s.request=function(t,e){return t=a(t),n.request.call(this,t,e)},s.get=function(t,e){return t=a(t),n.get.call(this,t,e)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),function(o){var a=encodeURIComponent(n(o))+r;return i(t[o])?s(t[o],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[o]))}).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,s){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var u,p,d,f,g=t[c].replace(a,"%20"),m=g.indexOf(r);m>=0?(u=g.substr(0,m),p=g.substr(m+1)):(u=g,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),n(o,d)?i(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";e.decode=e.parse=r(80),e.encode=e.stringify=r(79)},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var s="object"==typeof global&&global;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,h=36,l=1,c=26,u=38,p=700,d=72,f=128,g="-",m=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=h-l,x=Math.floor,_=String.fromCharCode;function S(t){throw new RangeError(v[t])}function M(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function A(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+M((t=t.replace(y,".")).split("."),e).join(".")}function P(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function C(t){return M(t,function(t){var e="";return t>65535&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=_(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,r){var n=0;for(t=r?x(t/p):t>>1,t+=x(t/e);t>w*c>>1;n+=h)t=x(t/w);return x(n+(w+1)*t/(t+u))}function k(t){var e,r,n,i,s,o,u,p,m,b,y,v=[],w=t.length,_=0,M=f,A=d;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&S("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<w;){for(s=_,o=1,u=h;i>=w&&S("invalid-input"),((p=(y=t.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:h)>=h||p>x((a-_)/o))&&S("overflow"),_+=p*o,!(p<(m=u<=A?l:u>=A+c?c:u-A));u+=h)o>x(a/(b=h-m))&&S("overflow"),o*=b;A=O(_-s,e=v.length+1,0==s),x(_/e)>a-M&&S("overflow"),M+=x(_/e),_%=e,v.splice(_++,0,M)}return C(v)}function E(t){var e,r,n,i,s,o,u,p,m,b,y,v,w,M,A,C=[];for(v=(t=P(t)).length,e=f,r=0,s=d,o=0;o<v;++o)(y=t[o])<128&&C.push(_(y));for(n=i=C.length,i&&C.push(g);n<v;){for(u=a,o=0;o<v;++o)(y=t[o])>=e&&y<u&&(u=y);for(u-e>x((a-r)/(w=n+1))&&S("overflow"),r+=(u-e)*w,e=u,o=0;o<v;++o)if((y=t[o])<e&&++r>a&&S("overflow"),y==e){for(p=r,m=h;!(p<(b=m<=s?l:m>=s+c?c:m-s));m+=h)A=p-b,M=h-b,C.push(_(T(b+A%M,0))),p=x(A/M);C.push(_(T(p,0))),s=O(r,w,n==i),r=0,++n}++r,++e}return C.join("")}o={version:"1.4.1",ucs2:{decode:P,encode:C},decode:k,encode:E,toASCII:function(t){return A(t,function(t){return b.test(t)?"xn--"+E(t):t})},toUnicode:function(t){return A(t,function(t){return m.test(t)?k(t.slice(4).toLowerCase()):t})}},void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()}).call(this,r(83)(t))},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},function(t,e,r){var n=r(33).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,i=0;i<r;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e,r){"use strict";t.exports=s;var n=r(29),i=r(7);function s(t){if(!(this instanceof s))return new s(t);n.call(this,t)}i.inherits=r(2),i.inherits(s,n),s.prototype._transform=function(t,e,r){r(null,t)}},function(t,e){function r(t){try{if(!global.localStorage)return!1}catch(t){return!1}var e=global.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}},function(t,e){},function(t,e,r){"use strict";var n=r(9).Buffer,i=r(90);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,s=n.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=s,i=a,e.copy(r,i),a+=o.data.length,o=o.next;return s},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e){e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,h=(1<<a)-1,l=h>>1,c=-7,u=r?i-1:0,p=r?-1:1,d=t[e+u];for(u+=p,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+u],u+=p,c-=8);if(0===s)s=1-l;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=l}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,h,l=8*s-i-1,c=(1<<l)-1,u=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+u>=1?p/h:p*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*h-1)*Math.pow(2,i),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&a,d+=f,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+d]=255&o,d+=f,o/=256,l-=8);t[r+d-f]|=128*g}},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=l(t),n=r[0],o=r[1],a=new s(function(t,e,r){return 3*(e+r)/4-r}(0,n,o)),h=0,c=o>0?n-4:n,u=0;u<c;u+=4)e=i[t.charCodeAt(u)]<<18|i[t.charCodeAt(u+1)]<<12|i[t.charCodeAt(u+2)]<<6|i[t.charCodeAt(u+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;2===o&&(e=i[t.charCodeAt(u)]<<2|i[t.charCodeAt(u+1)]>>4,a[h++]=255&e);1===o&&(e=i[t.charCodeAt(u)]<<10|i[t.charCodeAt(u+1)]<<4|i[t.charCodeAt(u+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e);return a},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(c(t,o,o+16383>a?a:o+16383));1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,h=o.length;a<h;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,s,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,r){var n=r(40),i=r(2),s=r(39),o=r(38),a=r(87),h=s.IncomingMessage,l=s.readyStates;var c=t.exports=function(t){var e,r=this;o.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new Buffer(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){r.setHeader(e,t.headers[e])});var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!n.abortController)i=!1,e=!0;else if("prefer-streaming"===t.mode)e=!1;else if("allow-wrong-content-type"===t.mode)e=!n.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");e=!0}r._mode=function(t,e){return n.fetch&&e?"fetch":n.mozchunkedarraybuffer?"moz-chunked-arraybuffer":n.msstream?"ms-stream":n.arraybuffer&&t?"arraybuffer":n.vbArray&&t?"text:vbarray":"text"}(e,i),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};i(c,o.Writable),c.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===u.indexOf(r)&&(this._headers[r]={name:t,value:e})},c.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},c.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},c.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts,r=t._headers,i=null;"GET"!==e.method&&"HEAD"!==e.method&&(i=n.arraybuffer?a(Buffer.concat(t._body)):n.blobConstructor?new global.Blob(t._body.map(function(t){return a(t)}),{type:(r["content-type"]||{}).value||""}):Buffer.concat(t._body).toString());var s=[];if(Object.keys(r).forEach(function(t){var e=r[t].name,n=r[t].value;Array.isArray(n)?n.forEach(function(t){s.push([e,t])}):s.push([e,n])}),"fetch"===t._mode){var o=null;if(n.abortController){var h=new AbortController;o=h.signal,t._fetchAbortController=h,"requestTimeout"in e&&0!==e.requestTimeout&&(t._fetchTimer=global.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},e.requestTimeout))}global.fetch(t._opts.url,{method:t._opts.method,headers:s,body:i||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:o}).then(function(e){t._fetchResponse=e,t._connect()},function(e){global.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var c=t._xhr=new global.XMLHttpRequest;try{c.open(t._opts.method,t._opts.url,!0)}catch(e){return void process.nextTick(function(){t.emit("error",e)})}"responseType"in c&&(c.responseType=t._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!e.withCredentials),"text"===t._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in e&&(c.timeout=e.requestTimeout,c.ontimeout=function(){t.emit("requestTimeout")}),s.forEach(function(t){c.setRequestHeader(t[0],t[1])}),t._response=null,c.onreadystatechange=function(){switch(c.readyState){case l.LOADING:case l.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(c.onprogress=function(){t._onXHRProgress()}),c.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{c.send(i)}catch(e){return void process.nextTick(function(){t.emit("error",e)})}}}},c.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},c.prototype._connect=function(){var t=this;t._destroyed||(t._response=new h(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},c.prototype._write=function(t,e,r){this._body.push(t),r()},c.prototype.abort=c.prototype.destroy=function(){this._destroyed=!0,global.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},c.prototype.end=function(t,e,r){"function"==typeof t&&(r=t,t=void 0),o.Writable.prototype.end.call(this,t,e,r)},c.prototype.flushHeaders=function(){},c.prototype.setTimeout=function(){},c.prototype.setNoDelay=function(){},c.prototype.setSocketKeepAlive=function(){};var u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.QueryString=class{static*entries(t){for(const e of Object.keys(t))yield[e,t[e]]}static build(t){let e="",r=0;for(const[n,i]of this.entries(t))e+=`${r++?"&":""}${encodeURIComponent(n)}=${encodeURIComponent(i)}`;return e}static decode(t){const e={};return t.substr(1).split("&").forEach(t=>{const r=t.split("=");e[r[0]]=decodeURIComponent(r[1])}),e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(12);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(21);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(96);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=r(6);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=r(43);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var h=r(42);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var l=r(20);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var c=r(19);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var u=r(77);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var p=r(76);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})});var d=r(5);Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})});var f=r(28);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})});var g=r(11);Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(97);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=r(75);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var s=r(72);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=r(70);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=r(62);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var h=r(59);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})})},function(t,e,r){t.exports=r(98)}]);
//# sourceMappingURL=red-agate.min.js.map