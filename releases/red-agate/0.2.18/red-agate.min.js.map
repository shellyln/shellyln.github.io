{"version":3,"sources":["webpack://RedAgate/webpack/universalModuleDefinition","webpack://RedAgate/webpack/bootstrap","webpack://RedAgate/../red-agate-util/modules/runtime/require-cjs.js","webpack://RedAgate/external {\"root\":\"ReactDOMServer\",\"commonjs2\":\"react-dom/server\",\"commonjs\":\"react-dom/server\",\"amd\":\"react-dom/server\",\"umd\":\"react-dom/server\"}","webpack://RedAgate/../red-agate-util/src/convert/Base64.ts","webpack://RedAgate/../red-agate-util/src/convert/Escape.ts","webpack://RedAgate/../red-agate-util/src/convert/QueryString.ts","webpack://RedAgate/../red-agate-util/src/convert/TextEncoding.ts","webpack://RedAgate/../red-agate-util/src/convert/WordWrap.ts","webpack://RedAgate/../red-agate-util/src/types/Integer53.ts","webpack://RedAgate/../red-agate-util/src/io/BitStream.ts","webpack://RedAgate/../red-agate-util/src/imaging/Bitmap.ts","webpack://RedAgate/../red-agate-util/src/runtime/is-node.ts","webpack://RedAgate/../red-agate-util/src/io/Logger.ts","webpack://RedAgate/../red-agate-util/src/runtime/require-dynamic.ts","webpack://RedAgate/../red-agate-util/src/io/FileFetcher.ts","webpack://RedAgate/../red-agate-util/src/io/FileSaver.ts","webpack://RedAgate/../red-agate-util/src/io/Html5FileFetcher.ts","webpack://RedAgate/../red-agate-util/src/io/Uri.ts","webpack://RedAgate/../red-agate-math/src/math/ArrayPolynomialRing.ts","webpack://RedAgate/../red-agate-math/src/math/Equation.ts","webpack://RedAgate/../red-agate-math/src/math/Gf2Ext.ts","webpack://RedAgate/../red-agate-math/src/math/GfPrime.ts","webpack://RedAgate/../red-agate-math/src/math/Gf2PrimeHelper.ts","webpack://RedAgate/../red-agate-math/src/math/RealField.ts","webpack://RedAgate/../red-agate-math/src/error-correction/BCH.ts","webpack://RedAgate/../red-agate-math/src/error-correction/CRC32.ts","webpack://RedAgate/../red-agate-math/src/error-correction/ReedSolomon.ts","webpack://RedAgate/../red-agate-svg-canvas/src/drawing/canvas/WebColor.ts","webpack://RedAgate/../red-agate-svg-canvas/src/drawing/canvas/TransferMatrix2D.ts","webpack://RedAgate/../red-agate-util/src/convert/NumberPrecision.ts","webpack://RedAgate/../red-agate-svg-canvas/src/drawing/canvas/SvgCanvas.ts","webpack://RedAgate/../red-agate/src/red-agate/red-agate.ts","webpack://RedAgate/../red-agate/src/red-agate/data.ts","webpack://RedAgate/../red-agate/src/red-agate/tags/Shape.ts","webpack://RedAgate/../red-agate/src/red-agate/taglib.ts","webpack://RedAgate/../red-agate/src/red-agate/html.tsx","webpack://RedAgate/../red-agate/src/red-agate/svg.tsx","webpack://RedAgate/../red-agate/src/red-agate/bundler.ts","webpack://RedAgate/../red-agate/src/red-agate/printing.ts","webpack://RedAgate/../red-agate/src/red-agate/app.ts","webpack://RedAgate/../red-agate/src/red-agate/renderer.ts","webpack://RedAgate/../red-agate-react-host/src/react-host.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/BarcodeBase.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Code39.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Code39.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Code128.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Code128.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Ean.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Ean.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Itf.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Itf.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/JapanPostal.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/JapanPostal.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Nw7.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Nw7.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Qr.defs.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/data/Qr.m2.data.ts","webpack://RedAgate/../red-agate-barcode/src/barcode/Qr.ts","webpack://RedAgate/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","eval","Base64","[object Object]","message","lineLength","buf","length","v","q","push","slice","z","String","fromCharCode","charCodeAt","Escape","replace","Unescape","html","QueryString","obj","keys","params","qs","this","entries","encodeURIComponent","search","query","substr","result","split","forEach","part","item","decodeURIComponent","TextEncoding","str","__encodeToUtf8","__decodeUtf8","idx","byteLength","bytes","Uint8Array","cp","codePointAt","Error","_bytes","set","subarray","out","len","char2","char3","char4","fromCodePoint","__ctor","isNode","Buffer","isTextEncoder","TextEncoder","from","Array","isArray","toString","utf8Encoder","encode","utfDecoder","TextDecoder","decode","__encodeToUtf8Impl","__decodeUtf8Impl","WordWrap","charsPerLine","indexOf","loose","Integer53","MAX_INT","x","Math","abs","trunc","pow","y","loX","loY","start","end","StreamSeekOrigin","BitStream_BitStreamWriter","initialSizeBytes","data","pos","bitLength","floor","w","w2","bitOffset","writeBits8","s1","e1","s2","e2","offset","Start","Current","End","sizeBytes","min","ceil","byteOffset","startBit","endBit","writeBitsFromArray","a","concat","b","Bitmap_Bitmap","width","height","src","h","widthAligned","seek","toBytes","setBit","getBit","max","j","setByte","process","versions","node","type","LoggerLogLevel","is_node","Logger","test","optionalParams","logLevel","PRODUCTION","succeeded","Boolean","e","con","assert","STAGING","DEBUG","dir","ERROR","error","INFO","info","LOG","log","timerName","time","timeEnd","TRACE","trace","WARN","warn","console","Console","stderr","DEVELOPMENT","requireDynamicGen","require_cjs","require_dynamic","id","FileFetcher_FileFetcher","uri","config","Promise","resolve","reject","uriLower","toLowerCase","startsWith","http","res","statusCode","contentType","headers","on","chunk","match","platform","fs","path","createReadStream","xhr","XMLHttpRequest","onload","status","getResponseHeader","arrayBuffer","response","onerror","open","method","user","password","setRequestHeader","header","responseType","send","fetchLocation_node","fetchLocation_xhr","FileSaver_FileSaver","pathOrFileName","text","encoding","writeFile","err","blob","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","document","createElement","href","download","ua","userAgent","isChrome","body","appendChild","click","setTimeout","revokeObjectURL","removeChild","saveTextAs_node","saveTextAs_html5","saveBinaryAs_node","saveBinaryAs_html5","Html5FileFetcher_Html5FileFetcher","file","reader","FileReader","ev","target","onabort","readAsArrayBuffer","Uri","substring","hash","endsWith","base","needle","isAbsolute","getDirectory","lastIndexOf","pathExt","ArrayPolynomialRing","field","_zero","ZERO","_one","ONE","_nan","NaN","nth","index","fn","mapToSelf","fill","map","normalize","isNaN","zero","eq","neg","add","sub","mul","extendDividendLength","divmod","ext","ylen","noteq","divisible","NumberArrayPolynomialRing","Equation","ring","equation","offsetX","offsetY","getAt","div","ss","newNthPolynomial","setAt","matrix","mat","m2","sign","matr","Gf2Ext","px","expDict","lnDict","numElements","mask","maskHi","maskLo","MODULO","ALPHA","Number","exp","ln","inv","logDict","Gf2e8Field","super","Gf2e6Field","GfPrime","prime","alpha","exp_withoutTable","ln_withoutTable","inv_withoutTable","Gf2PrimeHelper_Gf2PrimeFieldHelper","listAll","zx","pxs","polyDiv","bitToPoly","every","bitPolyDiv","filter","bitRShift","checkGenerationResult","hiX","polyAdd","bitXor","bitLShift","Gf2PrimeHelper_Gf2PrimeBitPolynomialRing","_field","listPx","bitNot","bitAnd","bitPolyMul","Gf2PrimeHelper_Gf2PrimeArrayPolynomialRing","polySub","polyMul","RealField","E","BCH_BCH","gx","aDegree","fx","_gx","_gxLength","highestBit","gxLength","numCorrect","log2","roots","k","received","maxErrors","receivedLength","hasError","equ","errors","det","lx","solve","reverse","locations","ex","CRC32","reversedGx","table","ReedSolomon_ReedSolomon","poly","gxList","gxs","u","WebColor","name_or_code","_r","_g","_b","_a","rgba","g","c2","cutoff255","cutoff1","hsla","hslToRgb","isCode","isName","isRgb","isHsl","round","parseFloat","parseInt","colorNames","has","m1","hueToRgb","gray","toRgbaString","toCode","toHsla","Map","dp","toFixed","toPrecision","decimalPlaces","Point2D","Vector2D","p1","p2","sqrt","angle","acos","PI","v1","v2","vlen1","vlen2","Rect2D","TransferMatrix2D","m11_or_src","m12","m21","m22","dx","dy","m11","cos","sin","tan","x_or_p","SvgCanvasImageData","SvgCanvas2DGradient","SvgCanvas2DLinerGradient","x0","y0","x1","y1","content","color","opacity","SvgCanvas2DRadialGradient","cx","cy","fy","SvgCanvas2DPattern","imageData","SvgCanvas_SvgCanvasGraphicState","globalAlpha","globalCompositeOperation","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","filterIdUrl","font","textAlign","textBaseline","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","strokeStyle","fillStyle","ctm","currentPoint","currentPointOnCtm","subpath","lineDash","clipPath","SvgCanvas_SvgCanvas","graphicsStack","assets","contentSaved","idCount","template","_fontHeightRatio","subpathIsEmptyOrClosed","Date","getTime","viewbox","unit","svgns","xlinkns","vbox","defs","toDef","join","tmpl","re","encodeToUtf8","render","restorePath","pop","cpt","cptoctm","tm","scale","transfer","translate","rotate","extra","cpx","cpy","cp1x","cp1y","cp2x","cp2y","radius","startAngle","endAngle","anticlockwise","entired","PI_2","k0","tm0","points","k1","pt","shift","x2","y2","p0","fromPoints","isZero","arcAngle","getAngle","linesAngle","vang1","vang2","cp1","cp2","center","vcp1","vcp2","angcp1","angcp2","arc","lineTo","closePath","moveTo","arcTo","style","found","styleStr","isIdentity","styleAndAlpha","getInheritedStyle","getLineDash","fillRule","merge","op","multiline","lineHeight","RegExp","exec","fontSizePx","maxWidthOrExtraAttrs","xml","getMultilineTextHeight","textLength","lengthAdjust","writingMode","glyphOrientationVertical","glyphOrientationHorizontal","direction","unicodeBidi","textDecoration","kerning","letterSpacing","wordSpacing","textPath","getInverse","textPathOffset","getStrokeAttrs","getFilterAttrs","getTextPath","getTextAttributes","convertToMultiline","getFillAttrs","segments","img","convertImageToSvgImageData","imgId","markup","fr","repetition","restore","HTMLImageElement","ctx","getContext","drawImage","toDataURL","HTMLCanvasElement","canvasOffsetX","canvasOffsetY","canvasImageWidth","canvasImageHeight","fontHeightRatio","size","save","fillRect","HTML_NO_CLOSE_TAGS","Set","RedAgateComponent","props","savedContexts","contexts","delete","RedAgatePhantomComponent","children","RedAgateSimpleComponent","buildElementProps","refs","hasRefs","assign","ref","nodeId","component","earlyConstruct","transform","cloneElement","el","__nodeId","createElementFromComponentInstance","constructor","element","transformContext","counter","duplicateElement","constructComponent","elementStyleRenderer","getOwnPropertyNames","camelToKebabCase","htmlAttributesRenderer","omitKeys","whiteListKeys","attrs","formatArrayProp","prop","__html","__text","htmlRenderer","beforeRender","afterRender","renderAsHtml","all","getPromises","promises","defer","then","renderAsHtml_noDefer","container","callback","innerHTML","catch","renderOnAwsLambda","renderOnExpress","req","JSON","stringify","Fragment","Query","condition","desc","sort","groupBy","array","first","intermediate","last","single","unshift","CONTEXT_SVG_CANVAS","CONTEXT_SVG_PATH","CONTEXT_ASSET_","shapePropsDefault","margin","Shape_Shape","isAmbient","isPathFragment","isGroup","canvas","fillColor","stroke","strokeColor","setLineDash","ambientProps","scaleX","scaleY","rotationDeg","beginGroup","initializeCanvas","endGroup","fillStroke","beginPath","setGraphicState","fillStrokePaths","restoreGraphicState","renderSvgCanvas","imageWidth","imageHeight","asImgTag","toDataUrl","asElementStyle","background-image","asDataUrl","toImgTag","propsNew","propsSaved","toElementStyle","toSvg","taglib_Repeat","repeater","find","scope","times","taglib_ForEach","items","taglib_If","taglib_Do","taglib_Facet","Template","html_Html4_01_Strict","html_Html4_01_Transitional","html_Html4_01_Frameset","html_Xhtml1_0_Strict","html_Xhtml1_0_Transitional","html_Xhtml1_0_Frameset","html_Html5","html_Xml","version","html_HtmlImposition","position","left","paperWidth","cols","top","paperHeight","rows","svg_Svg","templateUrl","fetchLocation","decodeUtf8","setContext","fromTemplate","unsetContext","ambientPropsDefault","svg_Ambient","arcPropsDefault","startDeg","endDeg","svg_Arc","canvasPropsDefault","svg_Canvas","circlePropsDefault","svg_Circle","curvePropsDefault","move","svg_Curve","bezierCurveTo","gridLinePropsDefault","startX","endX","startY","endY","gridSize","bleed","svg_GridLine","mX","mY","rect","svg_Group","linePropsDefault","svg_Line","pathPropsDefault","close","clip","paths","svg_Path","piePropsDefault","svg_Pie","polygonPropsDefault","svg_Polygon","rectPropsDefault","svg_Rect","roundRectPropsDefault","svg_RoundRect","roundRect","svgAssetFragmentPropsDefault","svg_SvgAssetFragment","registerCustomAsset","svgFragmentPropsDefault","svg_SvgFragment","appendCustomContent","textPropsDefault","svg_Text","fillStrokeText","fillText","strokeText","svg_SvgImposition","itemTranslation","itemScale","itemRotationDeg","bundler_Asset","getPathExt","pathExtToContentType","contextName","bundler_Image","use","noDownload","asAsset","registerImage","srcContext","renderAsSvg","bundler_Script","bundler_Style","reReplace","fragments","indexes","fmntResult","Font","bundler_SingleFont","fontFamily","fontStyle","fontWeight","localNames","unicodeRange","printerMarksDefault","cropMarkLength","bleedMarks","northBleed","southBleed","eastBleed","westBleed","centerMarks","centerMarkArmLength","centerMarkArmMargin","printing_PrinterMarks","hFold","vFold","Lambdas","handler1","handler2","event","context","evt2","App","options","handler","suppressRun","optsMap","matched","isOptional","arg","argv","lambda","lambdas","stdin","resume","setEncoding","inputData","write","exitCode","stdout","exit","once","parse","lambda_","eventName","evt","cb","renderer_HtmlRenderer","rendererPackageName","_rendererPackageName","launchOptions","_launchOptions","opts","tmpPath","util","tmp","includes","crypto","randomBytes","tmpFullPath","fd","promisify","encodeURI","navigateOptions","pdfOptions","puppeteer","buffer","browser","writeToTempFile","launch","page","newPage","goto","waitUntil","pdf","printBackground","unlink","_toPdf","pipe","toPdf","imageOptions","emulateMedia","screenshot","fullPage","omitBackground","_toImage","toImage","react_host_ReactHost","server_","barcodeBasePropsDefault","rotation","quietWidth","quietHeight","drawText","useRawDataAsText","textHeight","BarcodeBase_BarcodeBase","charactersMap","contextHasCanvas","originalData","heightData","labelText","startChar","stopChar","encodeData","cdChar","calcCheckDigit","tw","th","calcSymbolSize","isHeightModulated","renderHeightModulatedBarData","renderBarData","renderAdditional","renderText","rx","ry","bw","getBarSpaceWidth","vseg","getBarSpaceHeight","getRenderStartCoodinate","cmap","pattern","bar","seg","reverseMap","fullAsciiMap","code39PropsDefault","addCheckDigit","fullAscii","narrowWidth","wideWidth","charGapWidth","Code39_Code39","gw","mw","cd","cdch","Code128_data_charactersMap","Code128_data_fullAsciiMap","code128PropsDefault","elementWidth","useLatin1","raw","Code128_Code128","cLimit","scanned","detC","continuing","encodeC","detAB","cA","cB","bA","bB","N","mode2","ci","done","latin1","newMode","fnc4","calcMod103Checksum","Ean_data_charactersMap","eanPropsDefault","smallFont","guardExtHeight","Ean_EanBase","eanTypes","guard","odd","even","hd","ma","calcEanMod10W3Checksum","eo","calcEan5Checksum","calcEan2Checksum","qw","qh","Ean13","Gtin13","Ean8","Gtin8","Ean5","Ean2","UpcA","UpcE","characterPatterns","Itf_data_charactersMap","itfPropsDefault","Itf_Itf","calcItfMod10W3Checksum","JapanPostal_data_charactersMap","JapanPostal_data_reverseMap","JapanPostal_data_fullAsciiMap","japanPostalPropsDefault","JapanPostal_JapanPostal","Nw7_data_charactersMap","Nw7_data_reverseMap","nw7PropsDefault","Nw7_Nw7","data2","wide","narrow","QrDataChunkType","ecLevelMap","numberModeCharMap","alnumModeCharMap","matrixSize","dataCodewords","L","M","Q","H","Qr_m2_data_segments","alignmentPatterns","qrPropsDefault","ecLevel","cellSize","Qr_field","Qr_gxList","masks","Qr_Qr","encoded","bitmap","buildBitmap","drawBitmap","total","nx","ny","white","black","writeBits","charLength","chunks","Binary","isManual","encodeNumberData","encodeAlnumData","Alnum","encode8bitData","maxDataLength","dataLength","encodeChunks","determineSymbolVersion","bits","rem","fin","totalLength","dataCwStack","ecCwStack","repeats","dataCwSize","ecCwSize","listGx","rs","ecCodewords","codewords","stacks","stack","funcPatternsMap","py","aps","b2t","vi","maskNo","maskScore","MAX_SAFE_INTEGER","applyMask","score","evaluteMask","fi","__webpack_exports__"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,qBACA,mBAAAC,eAAAC,IACAD,OAAA,qBAAAJ,GACA,iBAAAC,QACAA,QAAA,SAAAD,EAAAG,QAAA,qBAEAJ,EAAA,SAAAC,EAAAD,EAAA,gBARA,CASCO,OAAA,SAAAC,gCACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAX,QAAA,IAUA,OANAY,EAAAH,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAU,GAAA,EAGAV,EAAAD,QA0DA,OArDAQ,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAhB,EAAAiB,EAAAC,GACAV,EAAAW,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAxB,GACA,oBAAAyB,eAAAC,aACAN,OAAAC,eAAArB,EAAAyB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAArB,EAAA,cAAiD2B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAlC,GACA,IAAAiB,EAAAjB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,8BCjFAxC,OAAOD,QAAU,WAAc,OAAO0C,KAAK,2BCD3CzC,EAAAD,QAAAM,oGCSM,MAAOqC,EAQFC,cAAcC,EAA4BC,GAQ7C,IAAIC,EAAgB,GACpB,MAAMZ,EAAIU,EAAQG,OAClB,IAAMC,EAAI,EAAGC,EAAI,EAAG1B,EAAI,EAExB,IAAK,IAAId,EAAI,EAAGI,EAAI,EAAGJ,EAAIyB,EAAGzB,IAEhB,KADVI,EAAIJ,EAAI,IAGJc,GADAyB,EAAIJ,EAAQnC,KACD,EAAK,GAChBuC,EAAKA,IAAM,EAAK,IAEL,IAANnC,GAELoC,GADAD,EAAIJ,EAAQnC,KACA,EAAK,GACjBuC,EAAMA,IAAM,EAAK,GAAQzB,EACzBA,EAAI0B,KAIJD,GADAC,EAAIL,EAAQnC,MACA,EAAK,EAAQc,GACZ,GAAMyB,GAAK,GACfA,EAAI,GAAMA,GAAK,GACfA,EAAI,GAAMA,GAAK,EACLA,EAAVA,EAAI,GAAW,GACA,GACxBF,EAAII,KAAKF,GACTA,EAAQ,GAAJC,GAECD,EAAI,GAAMA,GAAK,GACfA,EAAI,GAAMA,GAAK,GACfA,EAAI,GAAMA,GAAK,EACLA,EAAVA,EAAI,GAAW,GACA,GACxBF,EAAII,KAAKF,GAYb,IATId,EAAI,IACKX,EAAI,GAAMA,GAAK,GACfA,EAAI,GAAMA,GAAK,GACfA,EAAI,GAAMA,GAAK,EACLA,EAAVA,EAAI,GAAW,GACA,GACxBuB,EAAII,KAAK3B,IAGNuB,EAAIC,OAAS,GAChBD,EAAII,KAAK,IAGb,GAAIL,GAAc,EAAIA,EAAY,CAC9B,MAAML,EAAc,GACpB,IAAK,IAAI/B,EAAI,EAAGA,EAAIqC,EAAIC,OAAQtC,GAAKoC,EACjCL,EAAEU,QAAQJ,EAAIK,MAAM1C,EAAGA,EAAIoC,GAAa,IAE5CC,EAAMN,EAGV,IAAIY,EAAI,GAER,IAAK,IAAI3C,EAAI,EAAGA,EAAIqC,EAAIC,OAAQtC,IAE5B2C,GAAKC,OAAOC,aAAaR,EAAIrC,IAEjC,OAAO2C,EAQJT,cAAcC,GACjB,MAAME,EAAgB,GACtB,IAAMrC,EAAI,EAAGI,EAAI,EAAG2B,EAAI,EACxB,MAAMN,EAAIU,EAAQG,OAClB,IAAMC,EAAI,EAAGzB,EAAI,EAEjB,KAAOd,EAAIyB,EAAGzB,IAAK,CAGf,GAFAI,GAAKJ,EAAI+B,GAAK,EAEL,KADTQ,EAAIJ,EAAQW,WAAW9C,KACDuC,GAAK,GAAMA,GAAK,QACjC,GAAI,IAAQA,GAAKA,GAAK,IAAMA,GAAK,QACjC,GAAI,IAAQA,GAAKA,GAAK,GAAMA,GAAK,OACjC,GAAU,KAANA,EAAwBA,EAAK,QACjC,GAAU,KAANA,EAAwBA,EAAK,OACjC,IAAU,KAANA,EAGF,CACHR,IACA,SAJAQ,EAAI,EACJvC,EAAIyB,EAKE,IAANrB,EACAU,EAAKyB,GAAK,EAAK,IAEJ,IAANnC,GACLiC,EAAII,KAAK3B,EAAMyB,IAAM,EAAK,GAC1BzB,EAAKyB,GAAK,EAAK,KAEJ,IAANnC,GACLiC,EAAII,KAAK3B,EAAMyB,IAAM,EAAK,IAC1BzB,EAAKyB,GAAK,EAAK,KAGfF,EAAII,KAAK3B,EAAS,GAAJyB,GAGtB,OAAOF,GC3HT,MAAOU,EAOFb,YAAYH,GACf,OAAOA,EACFiB,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,SAQhBd,WAAWH,GACd,OAAOA,EACFiB,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,WASrB,MAAOC,EAOFf,YAAYH,GACf,OAAOA,EACFiB,QAAQ,SAAU,KAClBA,QAAQ,qBAAsB,KAC9BA,QAAQ,UAAW,KAEnBA,QAAQ,SAAU,KAClBA,QAAQ,qBAAsB,KAC9BA,QAAQ,UAAW,KAEnBA,QAAQ,SAAU,KAClBA,QAAQ,qBAAsB,KAC9BA,QAAQ,QAAS,KAEjBA,QAAQ,SAAU,KAClBA,QAAQ,qBAAsB,KAC9BA,QAAQ,QAAS,KAEjBA,QAAQ,SAAU,KAClBA,QAAQ,qBAAsB,KAC9BA,QAAQ,SAAU,KAQpBd,WAAWH,GACd,OAAOgB,EAAOG,KAAKnB,IC3ErB,MAAOoB,EAEDjB,eAAgBkB,GACpB,IAAK,MAAM7B,KAAOb,OAAO2C,KAAKD,QACpB,CAAC7B,EAAK6B,EAAI7B,IAIjBW,aAAaoB,GAChB,IAAIC,EAAK,GACLvD,EAAI,EACR,IAAK,MAAOuB,EAAKN,KAAUuC,KAAKC,QAAQH,GACpCC,MAASvD,IAAM,IAAM,KAAK0D,mBAAmBnC,MAAQmC,mBAAmBzC,KAE5E,OAAOsC,EAGJrB,cAAcyB,GACjB,MAAMC,EAAQD,EAAOE,OAAO,GACtBC,EAAc,GAKpB,OAJAF,EAAMG,MAAM,KAAKC,QAASC,IACtB,MAAMC,EAAOD,EAAKF,MAAM,KACxBD,EAAOI,EAAK,IAAMC,mBAAmBD,EAAK,MAEvCJ,GCiBT,MAAOM,EAgCFlC,oBAAoBmC,GACvB,OAAOD,EAAaE,eAAeD,GAGhCnC,kBAAkBG,GACrB,OAAO+B,EAAaG,aAAalC,GAG7BH,0BAA0BmC,GAQ9B,MAAM5C,EAAI4C,EAAI/B,OACd,IAGItC,EAAWK,EAHXmE,GAAO,EACPC,EAAa,IACbC,EAAQ,IAAIC,WAAWF,GAG3B,IAAKzE,EAAI,EAAGA,EAAIyB,IAAKzB,EAAG,CAGpB,MAAM4E,EAAKP,EAAIQ,YAAY7E,GAC3B,QAAW,IAAP4E,EACA,MAAM,IAAIE,MAAM,sEAGpB,IADAzE,EAAIuE,IACK,IACLF,IAAQF,GAAOnE,OACZ,GAAIA,GAAK,KACZqE,IAAQF,GAAO,IAAQnE,IAAO,EAC9BqE,IAAQF,GAAO,IAAY,GAAJnE,OACpB,GAAIA,GAAK,MACZqE,IAAQF,GAAO,IAASnE,IAAM,GAC9BqE,IAAQF,GAAO,IAASnE,IAAO,EAAK,GACpCqE,IAAQF,GAAO,IAAa,GAAJnE,MACrB,MAAIA,GAAK,SAQZ,MAAM,IAAIyE,MAAM,sEANhBJ,IAAQF,GAAO,IAASnE,IAAM,GAC9BqE,IAAQF,GAAO,IAASnE,IAAM,GAAM,GACpCqE,IAAQF,GAAO,IAASnE,IAAO,EAAK,GACpCqE,IAAQF,GAAO,IAAa,GAAJnE,EACpB,OAAYA,KAAKL,EAIzB,GAAIyE,EAAaD,GAAO,EAAG,CAEvB,MAAMO,EAASL,EACfD,GAAc,GACdC,EAAQ,IAAIC,WAAWF,IACjBO,IAAID,IAGlB,OAAOL,EAAMO,SAAS,IAAKT,GAGvBtC,wBAAwBG,GAY5B,IAAM6C,EAAM,GAAIlF,EAAI,EACpB,MAAMmF,EAAM9C,EAAIC,OAChB,IAAIjC,EAAW+E,EAAeC,EAAeC,EAE7C,KAAOtF,EAAImF,GAEP,QADA9E,EAAIgC,EAAIrC,QACM,GACd,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,EAEzDkF,GAAOtC,OAAO2C,cAAclF,GAC5B,MACJ,KAAK,GAAI,KAAK,GAEV+E,EAAQ/C,EAAIrC,KACZkF,GAAOtC,OAAO2C,eACI,GAARlF,IAAiB,EACT,GAAR+E,GAEV,MACJ,KAAK,GAEDA,EAAQ/C,EAAIrC,KACZqF,EAAQhD,EAAIrC,KACZkF,GAAOtC,OAAO2C,eACI,GAARlF,IAAiB,IACT,GAAR+E,IAAkB,GACV,GAARC,IAAkB,GAE5B,MACJ,KAAK,GAID,GAAKhF,IAAM,EAAK,EACZ,MAAM,IAAIyE,MAAM,qEAEpBM,EAAQ/C,EAAIrC,KACZqF,EAAQhD,EAAIrC,KACZsF,EAAQjD,EAAIrC,KACZkF,GAAOtC,OAAO2C,eACI,EAARlF,IAAiB,IACT,GAAR+E,IAAiB,IACT,GAARC,IAAkB,GACV,GAARC,IAAkB,GAMpC,OAAOJ,GA3IId,EAAAoB,QACXpB,EAAaqB,OAA4B,oBAAXC,OAC9BtB,EAAauB,cAAwC,oBAAhBC,iBAEjCxB,EAAaqB,QACbrB,EAAaE,eAAkBD,IAAgBqB,OAAOG,KAAKxB,EAAK,SAChED,EAAaG,aAAgBlC,IAA2BqD,OAAOG,KAAKC,MAAMC,QAAQ1D,GAAOA,EAAMyD,MAAMD,KAAKxD,IAAM2D,SAAS,UAClH5B,EAAauB,eACpBvB,EAAa6B,YAAc,IAAIL,YAAY,QAC3CxB,EAAaE,eAAkBD,IAAgBD,EAAa6B,YAAYC,OAAO7B,IAC/ED,EAAa+B,WAAa,IAAIC,YAAY,QAC1ChC,EAAaG,aAAgBlC,IAA2B+B,EAAa+B,WAAWE,OAAOhE,MAEvF+B,EAAaE,eAAiBF,EAAakC,mBAC3ClC,EAAaG,aAAeH,EAAamC,oBCrE/C,MAAOC,EAEFtE,aAAamC,EAAaoC,EAAuB,KACpD,IAAI3F,EAAI,GACJd,EAAI,EACR,IAAK,MAAMK,KAAKgE,IACZrE,GACSyG,GAAgB,UAAUC,QAAQrG,IAAM,GAC7CS,GAAK,KACLd,EAAI,GAEJc,GAAKT,EAGb,OAAOS,EAGJoB,cAAcmC,EAAaoC,EAAuB,KAGrD,OAAOD,EAASG,MAAMtC,EAAKoC,GAGxBvE,aAAamC,EAAaoC,EAAuB,KAGpD,OAAOD,EAASG,MAAMtC,EAAKoC,ICvB7B,MAAOG,EAEFC,qBACH,OAAO,iBAGJ3E,kBAAkB4E,GACrBA,EAAIC,KAAKC,IAAIF,GACb,IAAK,IAAI9G,EAAI,GAAIA,GAAK,EAAGA,IACrB,GAAI+G,KAAKE,MAAMH,EAAKC,KAAAG,IAAA,EAAKlH,IAAM,EAAG,OAAOA,EAE7C,OAAQ,EAMLkC,aAAa4E,EAAWK,GAG3B,MAAMC,GAAW,YAFjBN,EAAIC,KAAKC,IAAIF,OAEoB,EAE3BO,GAAW,YAHjBF,EAAIJ,KAAKC,IAAIG,OAGoB,EAEjC,OAA6B,cAHhBL,EAAIM,GAAO,YAEXD,EAAIE,GAAO,cACA,KAAoBD,EAAMC,KAAS,GAMxDnF,cAAc4E,EAAWK,GAG5B,MAAMC,GAAW,YAFjBN,EAAIC,KAAKC,IAAIF,OAEoB,EAE3BO,GAAW,YAHjBF,EAAIJ,KAAKC,IAAIG,OAGoB,EAEjC,OAA6B,cAHhBL,EAAIM,GAAO,YAEXD,EAAIE,GAAO,cACA,KAAoBD,EAAMC,KAAS,GAMxDnF,cAAc4E,EAAWK,GAG5B,MAAMC,GAAW,YAFjBN,EAAIC,KAAKC,IAAIF,OAEoB,EAE3BO,GAAW,YAHjBF,EAAIJ,KAAKC,IAAIG,OAGoB,EAEjC,OAA6B,cAHhBL,EAAIM,GAAO,YAEXD,EAAIE,GAAO,cACA,KAAoBD,EAAMC,KAAS,GAMxDnF,cAAc4E,GAEjB,MAAMM,GAAW,YADjBN,EAAIC,KAAKC,IAAIF,OACoB,EAEjC,OAAuC,aAArB,WADLA,EAAIM,GAAO,eACU,KAAqBA,IAAS,GAM7DlF,iBAAiB4E,EAAW/E,GAE/B,OADA+E,EAAIC,KAAKC,IAAIF,GACT/E,GAAK,EACDA,GAAK,GAAa+E,EAAKC,KAAAG,IAAA,EAAM,GAAKnF,GAAQgF,KAAAG,IAAA,EAAKnF,GAC9B,EAEjBA,IAAM,GAAWgF,KAAKE,MAAMH,EAAKC,KAAAG,IAAA,GAAMnF,IACtB,EAOtBG,iBAAiB4E,EAAW/E,GAE/B,OADA+E,EAAIC,KAAKC,IAAIF,GACT/E,GAAK,EACDA,IAAM,GAAY+E,EAAKC,KAAAG,IAAA,EAAM,GAAKnF,GAAQgF,KAAAG,IAAA,GAAMnF,GAC/B,EAEjBA,GAAK,GAAYgF,KAAKE,MAAMH,EAAKC,KAAAG,IAAA,EAAKnF,IACrB,EAOtBG,aAAa4E,EAAWQ,EAAeC,GAO1C,OANAT,EAAIC,KAAKC,IAAIF,GACTS,EAAM,IAAGA,GAAO,IAChB,EAAID,IACJR,EAAIC,KAAKE,MAAMH,EAAKC,KAAAG,IAAA,EAAKI,IACzBC,GAAOD,GAEJR,EAAKC,KAAAG,IAAA,EAAKK,ICvGzB,IAAYC,GAAZ,SAAYA,GACRA,IAAA,iBAAOA,IAAA,qBAASA,IAAA,aADpB,CAAYA,MAAgB,KAMtB,MAAOC,EAuBTvF,YAAmBwF,EAA0BC,GAFrCnE,KAAAoE,IAAM,EAGND,GACAnE,KAAKmE,KAAOA,EACZnE,KAAKoE,IAAqB,EAAdD,EAAKrF,QAEjBkB,KAAKmE,KAAO,IAAIhD,WAAW+C,GA3B5BxF,iBAAiBwF,EAA0BhD,GAC9C,MAAM3C,EAAI,IAAI0F,EAAgBC,GACxBjG,EAAIM,EAAE0C,WACNnE,EAAIyB,EAAE4F,KACZ,GAAIlG,EAAIiD,EAAMpC,OACV,GAAIoC,aAAiBC,WACjB5C,EAAE4F,KAAK3C,IAAIN,EAAMO,SAAS,EAAGxD,SAE7B,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAAGzB,IACnBM,EAAEN,GAAK0E,EAAM1E,QAIrB+B,EAAE4F,KAAK3C,IAAIN,GAGf,OADA3C,EAAE6F,IAAqB,EAAflD,EAAMpC,OACPP,EAeJG,WAAWK,EAAWsF,GACzB,GAAI,EAAIA,EAAW,CACf,MAAM/F,EAAIiF,KAAKe,MAAMtE,KAAKoE,IAAM,GAC1BxH,EAAIoD,KAAKoE,IAAM,EAEfG,EAAIxF,EAAK,MAAY,EAAIsF,EACzB9F,EAAI,EAAI3B,EAAIyH,EAElBrE,KAAKmE,KAAK7F,IAAM,KAAW,EAAI1B,EAC3B2B,GAAK,EACLyB,KAAKmE,KAAK7F,IAAMiG,GAAKhG,GAErByB,KAAKmE,KAAK7F,IAAUiG,KAAOhG,EAC3ByB,KAAKmE,KAAK7F,EAAI,IAAM,OAAYC,EAChCyB,KAAKmE,KAAK7F,EAAI,IAAMiG,GAAO,EAAIhG,GAGnCyB,KAAKoE,KAAOC,EAEhB,OAAOrE,KAGJtB,UAAUK,EAAWsF,GACxB,GAAI,EAAIA,EAAW,CACf,IAAI/F,EAAIiF,KAAKe,MAAMtE,KAAKoE,IAAM,GAC1BxH,EAAIoD,KAAKoE,IAAM,EACf3H,EAAI4H,EAER,MAAMrF,EAAKvC,EAAI,GAAM,EACf8H,EAAInB,EAAUlE,MAAMH,EAAGtC,EAAIuC,EAAGvC,GAC9B8B,EAAI,EAAI3B,EAAIoC,EAgBlB,GAdAgB,KAAKmE,KAAK7F,IAAM,KAAW,EAAI1B,EAC3B2B,GAAK,GACLyB,KAAKmE,KAAK7F,IAAMiG,GAAKhG,EACX,IAANA,IAASD,GAAK,KAElB0B,KAAKmE,KAAK7F,IAAUiG,KAAOhG,EAC3ByB,KAAKmE,KAAK7F,EAAI,IAAM,OAAYC,EAChCyB,KAAKmE,KAAK7F,EAAI,IAAMiG,GAAO,EAAIhG,EAC/BD,GAAK,GAGT7B,GAAKuC,EAGK,KAFVpC,GAAKA,EAAIoC,GAAK,GAIV,KAAO,EAAIvC,EAAGA,GAAK,EAAG6B,IAClB0B,KAAKmE,KAAK7F,GAAK8E,EAAUlE,MAAMH,EAAGtC,EAAI,EAAGA,QAI7C,KAAO,EAAIA,EAAGA,GAAK,EAAG6B,IAAK,CACvB,MAAMkG,EAAKpB,EAAUlE,MAAMH,EAAGtC,EAAI,EAAGA,GACrCuD,KAAKmE,KAAK7F,IAAU,KAAW,EAAI1B,EACnCoD,KAAKmE,KAAK7F,IAAUkG,IAAO5H,EAC3BoD,KAAKmE,KAAK7F,EAAI,IAAM,MAAW1B,EAC/BoD,KAAKmE,KAAK7F,EAAI,IAAMkG,GAAQ,EAAI5H,EAIxCoD,KAAKoE,KAAOC,EAEhB,OAAOrE,KAGJtB,mBAAmBwC,EAAmBuD,EAAmBJ,GAC5D,GAAI,EAAIA,EACJ,GAAKI,EAAY,GAAO,EAAG,CACvB,MAAMxH,EAAIwH,EAAY,EAChBxG,EAAIsF,KAAKe,MAAMD,EAAY,GAC3BzH,EAAIyH,EAAY,EACtB,IAAI7H,EAAI,EACR,GAAKwD,KAAKoE,IAAM,GAAO,EAAG,CACtB,MAAM9F,EAAI0B,KAAKoE,IAAM,EACrB,GAAI,EAAInG,EACJ,KAAOzB,EAAIyB,EAAGzB,IACVwD,KAAKmE,KAAK7F,EAAI9B,GAAK0E,EAAMjE,EAAIT,GAGjCI,IACAoD,KAAKmE,KAAK7F,EAAI9B,IAAM,MAAWI,EAC/BoD,KAAKmE,KAAK7F,EAAI9B,IAAO0E,EAAMjE,EAAIT,KAAQ,EAAII,GAAQ,EAAIA,GAE3DoD,KAAKoE,KAAOC,MACT,CACH,GAAI,EAAIpG,EACJ,KAAOzB,EAAIyB,EAAGzB,IACVwD,KAAK0E,WAAWxD,EAAMjE,EAAIT,GAAI,GAGtCwD,KAAK0E,WAAWxD,EAAMjE,EAAIT,KAAQ,EAAII,EAAIA,QAE3C,CACH,MAAM+H,EAAKpB,KAAKe,MAAMG,EAAY,GAC5BG,EAAKrB,KAAKe,OAAOG,EAAYJ,GAAa,GAC1CQ,EAAKJ,EAAY,EACjBK,GAAML,EAAYJ,GAAa,EACrC,GAAIM,IAAOC,EACP5E,KAAK0E,WAAWxD,EAAM0D,KAAS,EAAIE,EAAKT,OACrC,CACHrE,KAAK0E,WAAWxD,EAAMyD,GAAK,EAAIE,GAC/B,IAAK,IAAIrI,EAAImI,EAAK,EAAGnI,EAAIoI,EAAIpI,IACzBwD,KAAK0E,WAAWxD,EAAM1E,GAAI,GAE9BwD,KAAK0E,WAAWxD,EAAM0D,KAAS,EAAIE,EAAKA,IAIpD,OAAO9E,KAGJtB,KAAK+F,EAAmBM,GAC3B,OAAQA,GACR,KAAKf,EAAiBgB,MAClBhF,KAAKoE,IAAMK,EACX,MACJ,KAAKT,EAAiBiB,QAClBjF,KAAKoE,KAAOK,EACZ,MACJ,KAAKT,EAAiBkB,IAClBlF,KAAKoE,IAAyB,EAAnBpE,KAAKmE,KAAKrF,OAAa2F,EAGtC,OAAOzE,KAGJtB,OAAOyG,GACV,GAAInF,KAAKmE,KAAKrF,OAASqG,EACnBnF,KAAKmE,KAAOnE,KAAKmE,KAAK1C,SAAS,EAAG0D,GAClCnF,KAAKoE,IAAOb,KAAK6B,IAAIpF,KAAKoE,IAAiB,EAAZe,QAC5B,GAAInF,KAAKmE,KAAKrF,OAASqG,EAAW,CACrC,MAAMrI,EAAI,IAAIqE,WAAWgE,GACzBrI,EAAE0E,IAAIxB,KAAKmE,KAAM,GACjBnE,KAAKmE,KAAOrH,EAEhB,OAAOkD,KAGJtB,uBAAuBK,GAC1B,MAAMT,EAAIiF,KAAK8B,KAAKrF,KAAKoE,IAAM,GAG/B,OAFApE,KAAKmE,KAAK7F,GAAS,IAAJS,EACfiB,KAAKoE,IAAgB,GAAT9F,EAAI,GACT0B,KAGJtB,kBAAkBwC,EAAmBoE,EAAoBrE,GAC5D,MAAM3C,EAAIiF,KAAK8B,KAAKrF,KAAKoE,IAAM,GAC/B,IAAK,IAAI5H,EAAI,EAAGA,EAAIyE,EAAYzE,IAC5BwD,KAAKmE,KAAK7F,EAAI9B,GAAK0E,EAAMoE,EAAa9I,GAG1C,OADAwD,KAAKoE,IAAyB,GAAlB9F,EAAI2C,GACTjB,KAGJtB,UACH,OAAOsB,KAAKmE,KAAK1C,SAAS,EAAGzB,KAAKiB,YAGtCA,iBACI,OAAOsC,KAAK8B,KAAKrF,KAAKoE,IAAM,GAGhCC,gBACI,OAAOrE,KAAKoE,IAGT1F,MAAM6G,EAAkBC,GACvBA,EAAS,IAAGA,EAASxF,KAAKoE,IAAMoB,GACpC,MAAMlI,EAAI,IAAI2G,EAAgBV,KAAK8B,MAAMG,EAASD,GAAY,IAE9D,OADAjI,EAAEmI,mBAAmBzF,KAAKmE,KAAMoB,EAAUC,EAASD,GAC5CjI,EAGJoB,OAAOlC,EAAWuC,GACrB,MAAMT,EAAIiF,KAAKe,MAAM9H,EAAI,GACnBI,EAAIJ,EAAI,EACdwD,KAAKmE,KAAK7F,GAAM0B,KAAKmE,KAAK7F,KAAQ,MAAW1B,IAASmC,EAAI,IAAS,KAAOnC,EAGvE8B,OAAOlC,GACV,MAAM8B,EAAIiF,KAAKe,MAAM9H,EAAI,GACnBI,EAAIJ,EAAI,EACd,OAAQwD,KAAKmE,KAAK7F,GAAM,MAAW1B,EAAM,EAAI,EAG1C8B,QAAQlC,EAAWuC,GACtBiB,KAAKmE,KAAK3H,GAAKuC,EAGZL,QAAQlC,GACX,OAAOwD,KAAKmE,KAAK3H,GAGdkC,UAAUgH,GACb,OAAOzB,EAAgB0B,OAAO3F,QAAS0F,GAGpChH,iBAAiBgH,GACpB,IAAIzH,EAAI,EACR,IAAK,MAAM2H,KAAKF,EACZzH,GAAK2H,EAAEvB,UAEX,MAAM/G,EAAI,IAAI2G,EAAgBV,KAAK8B,KAAKpH,EAAI,IAE5C,IAAK,IAAIzB,EAAI,EAAGA,EAAIkJ,EAAE5G,OAAQtC,IAC1Bc,EAAEmI,mBAAmBC,EAAElJ,GAAG2H,KAAM,EAAGuB,EAAElJ,GAAG6H,WAE5C,OAAO/G,GCpPT,MAAOuI,EAMTnH,YAAmBoH,EAAeC,EAAgBC,GAC9ChG,KAAKuE,EAAIuB,EACT9F,KAAKiG,EAAIF,EACT/F,KAAKkG,aAAsC,EAAvB3C,KAAK8B,KAAKS,EAAQ,GACtC9F,KAAKnB,IAAM,IAAIoF,EAAgBjE,KAAKkG,aAAeH,EAAQC,GAC3DhG,KAAKnB,IAAIsH,KAAK,EAAGnC,EAAiBkB,KAGtCY,YACI,OAAO9F,KAAKuE,EAGhBwB,aACI,OAAO/F,KAAKiG,EAGTvH,UACH,OAAOsB,KAAKnB,IAAIuH,UAGb1H,IAAI4E,EAAWK,EAAW5E,GAC7BiB,KAAKnB,IAAIwH,OAAO1C,EAAI3D,KAAKkG,aAAe5C,EAAGvE,GAGxCL,IAAI4E,EAAWK,GAClB,OAAO3D,KAAKnB,IAAIyH,OAAO3C,EAAI3D,KAAKkG,aAAe5C,GAG5C5E,MAAM4E,EAAWK,EAAWmC,EAAeC,GAC9CzC,EAAIC,KAAKgD,IAAI,EAAGjD,GAChBK,EAAIJ,KAAKgD,IAAI,EAAG5C,GAChBmC,EAASvC,KAAKgD,IAAI,EAAGhD,KAAK6B,IAAIU,EAAQvC,KAAKgD,IAAI,EAAGvG,KAAKuE,EAAIjB,KAC3DyC,EAASxC,KAAKgD,IAAI,EAAGhD,KAAK6B,IAAIW,EAAQxC,KAAKgD,IAAI,EAAGvG,KAAKiG,EAAItC,KAC3D,IAAK,IAAI6C,EAAI,EAAGA,EAAIT,EAAQS,IAAK,CAC7B,MAAMzB,GAAUpB,EAAI6C,GAAKxG,KAAKkG,aAAe5C,EAC7C,IAAK,IAAI9G,EAAI,EAAGA,EAAIsJ,EAAOtJ,IACvBwD,KAAKnB,IAAIwH,OAAOtB,EAASvI,EAAG,GAGpC,OAAOwD,KAGJtB,KAAK4E,EAAWK,EAAWmC,EAAeC,EAAgBhH,GAC7DuE,EAAIC,KAAKgD,IAAI,EAAGjD,GAChBK,EAAIJ,KAAKgD,IAAI,EAAG5C,GAChBmC,EAASvC,KAAKgD,IAAI,EAAGhD,KAAK6B,IAAIU,EAAQvC,KAAKgD,IAAI,EAAGvG,KAAKuE,EAAIjB,KAC3DyC,EAASxC,KAAKgD,IAAI,EAAGhD,KAAK6B,IAAIW,EAAQxC,KAAKgD,IAAI,EAAGvG,KAAKiG,EAAItC,KAC3D,IAAK,IAAI6C,EAAI,EAAGA,EAAIT,EAAQS,IAAK,CAC7B,MAAMzB,GAAUpB,EAAI6C,GAAKxG,KAAKkG,aAAe5C,EAC7C,IAAK,IAAI9G,EAAI,EAAGA,EAAIsJ,EAAOtJ,IACvBwD,KAAKnB,IAAIwH,OAAOtB,EAASvI,EAAGuC,GAGpC,OAAOiB,KAGJtB,WACH,MAAMI,EAASkB,KAAKnB,IAAIoC,WACxB,IAAK,IAAIzE,EAAI,EAAGA,EAAIsC,EAAQtC,IACxBwD,KAAKnB,IAAI4H,QAAQjK,EAAG,GAExB,OAAOwD,MCvEf,IAAIiC,GAAS,EACU,iBAAZyE,SACyB,iBAArBA,QAAQC,eACsB,IAA1BD,QAAQC,SAASC,YACa,IAAzBF,QAAgBG,MAAkD,aAAzBH,QAAgBG,OAGjE5E,GAAS,IAKV,ICVH6E,EDUGC,EAAA,GCVf,SAAYD,GACRA,IAAA,mBAEAA,IAAA,iBACAA,IAAA,2BAEAA,IAAA,mBACAA,IAAA,eACAA,IAAA,qBAEAA,IAAA,eACAA,IAAA,aACAA,IAAA,6BAEAA,IAAA,iBACAA,IAAA,iBACAA,IAAA,qBAhBJ,CAAYA,MAAc,KAoBpB,MAAOE,EA6BFtI,cAAcuI,EAAgBtI,KAAqBuI,GACtD,GAAIlH,KAAKmH,UAAYL,EAAeM,WAChC,OAAOpH,KAGX,IAAIqH,GAAY,EAChB,IACIA,EAAYC,QAAQL,GACtB,MAAOM,GACLF,GAAY,EAGhB,IAAKA,EAAW,CACZ,IACIL,EAAOQ,IAAIC,OAAOR,EAAMtI,KAAYuI,GACtC,MAAOK,GAEL,GAAIvH,KAAKmH,UAAYL,EAAeY,QAChC,MAAMH,EAId,GAAIvH,KAAKmH,UAAYL,EAAeY,QAAS,CACzC,IAAI9K,EAAI,GACR,IACIA,EAAIwC,OAAOT,GACb,MAAO4I,IACT,MAAM,IAAIjG,MAAM,oBAAsB1E,IAI9C,OAAOoD,KAGJtB,WAAWjB,KAAgByJ,GAC9B,GAAIlH,KAAKmH,UAAYL,EAAea,MAChC,OAAO3H,KAEX,IACIgH,EAAOQ,IAAII,IAAInK,KAAUyJ,GAC3B,MAAOK,IACT,OAAOvH,KAGJtB,aAAaC,KAAkBuI,GAClC,GAAIlH,KAAKmH,SAAWL,EAAee,MAC/B,OAAO7H,KAEX,IACIgH,EAAOQ,IAAIM,MAAMnJ,KAAYuI,GAC/B,MAAOK,IACT,OAAOvH,KAGJtB,YAAYC,KAAkBuI,GACjC,GAAIlH,KAAKmH,SAAWL,EAAeiB,KAC/B,OAAO/H,KAEX,IACIgH,EAAOQ,IAAIQ,KAAKrJ,KAAYuI,GAC9B,MAAOK,IACT,OAAOvH,KAGJtB,WAAWC,KAAkBuI,GAChC,GAAIlH,KAAKmH,SAAWL,EAAemB,IAC/B,OAAOjI,KAEX,IACIgH,EAAOQ,IAAIU,IAAIvJ,KAAYuI,GAC7B,MAAOK,IACT,OAAOvH,KAGJtB,YAAYyJ,GACf,GAAInI,KAAKmH,UAAYL,EAAea,MAChC,OAAO3H,KAEX,IACIgH,EAAOQ,IAAIY,KAAKD,GAClB,MAAOZ,IACT,OAAOvH,KAGJtB,eAAeyJ,GAClB,GAAInI,KAAKmH,UAAYL,EAAea,MAChC,OAAO3H,KAEX,IACIgH,EAAOQ,IAAIa,QAAQF,GACrB,MAAOZ,IACT,OAAOvH,KAGJtB,aAAaC,KAAkBuI,GAClC,GAAIlH,KAAKmH,SAAWL,EAAewB,MAC/B,OAAOtI,KAEX,IACIgH,EAAOQ,IAAIe,MAAM5J,KAAYuI,GAC/B,MAAOK,IACT,OAAOvH,KAGJtB,YAAYC,KAAkBuI,GACjC,GAAIlH,KAAKmH,SAAWL,EAAe0B,KAC/B,OAAOxI,KAEX,IACIgH,EAAOQ,IAAIiB,KAAK9J,KAAYuI,GAC9B,MAAOK,IACT,OAAOvH,MAtIIgH,EAAAhF,YACP+E,GACAC,EAAOQ,IAAM,IAAIkB,QAAQC,QAAQjC,QAAQkC,QAKjC5B,EAAOG,SAAWL,EAAeM,aAWzCJ,EAAOQ,IAAMkB,QACb1B,EAAOG,SAAWL,EAAe+B,yBC5C7C,MAAMC,SAAqBpD,GAAsCqD,EAGlD,IAAAC,EAAAjC,EAAW+B,IAAgDG,QAAgB,ECWpF,MAAOC,EACDxK,0BAA0ByK,EAAaC,GAgE3C,OA9DI,IAAIC,QAA+D,CAACC,EAASC,KAE7E,IACI,MAAMC,EAAWL,EAAIM,cACrB,GAAID,EAASE,WAAW,UAAYF,EAASE,WAAW,UAAW,CAE/D,MAAMC,EAAOX,EAAeQ,EAASE,WAAW,SAAW,OAAS,SACxDV,EAAe,OAG3BW,EAAKtM,IAAI8L,EAAMS,IAEX,GAAuB,MAAnBA,EAAIC,WAAoB,CACxB,MAAMC,EAAcF,EAAIG,QAAQ,gBAC1B5F,EAAiB,GACvByF,EAAII,GAAG,OAASC,IACZ9F,EAAKlF,KAAKgL,KAEdL,EAAII,GAAG,MAAO,KACVV,EAAQ,CAACQ,cAAa3F,KAAMjC,OAAOyD,OAAOxB,OAE9CyF,EAAII,GAAG,QAAUzC,IACbP,EAAOkB,IAAI,oDAAsDX,GACjEgC,EAAOhC,UAGXP,EAAOkB,IAAI,2DAA6D0B,EAAIC,YAC5EN,EAAOK,UAGZ,IAAIT,EAAIe,MAAM,8BACfV,EAASC,cAAcC,WAAW,UACZ,UAArBhD,QAAQyD,UAAwBhB,EAAIe,MAAM,cAG1C,CAEH,MAAME,EAAKpB,EAAe,MAC1B,IAAIqB,EAAOlB,EACc,UAArBzC,QAAQyD,WAERE,GADAA,EAAOA,EAAK7K,QAAQ,yBAA0B,SAClCA,QAAQ,mBAAoB,SAE5C6K,EAAOA,EAAK7K,QAAQ,cAAe,KACnC,MAAM2E,EAAc,GACpBiG,EAAGE,iBAAiBD,GACnBL,GAAG,OAASC,IACT9F,EAAKlF,KAAKgL,KAEbD,GAAG,MAAO,KACPV,EAAQ,CAACQ,YAAa,KAAM3F,KAAMjC,OAAOyD,OAAOxB,OAEnD6F,GAAG,QAAUzC,IACVP,EAAOkB,IAAI,+DAAiEX,GAC5EgC,EAAOhC,UApBXgC,EAAOJ,GAuBb,MAAO5B,GACLP,EAAOkB,IAAI,kCAAoCX,GAC/CgC,EAAOhC,MAMX7I,yBAAyByK,EAAaC,GAkD1C,OAhDI,IAAIC,QAA+D,CAACC,EAASC,KAE7E,IACI,MAAMgB,EAAM,IAAIC,eA4BhB,GA3BAD,EAAIE,OAAUlD,KACV,GAAmB,MAAfgD,EAAIG,QAAiC,MAAfH,EAAIG,OAAgB,CAC1C,MAAMZ,EAAcS,EAAII,kBAAkB,gBACpCC,EAAcL,EAAIM,SACpBD,EACAtB,EAAQ,CAACQ,cAAa3F,KAAM,IAAIhD,WAAWyJ,MAE3C5D,EAAOkB,IAAI,2DAA6DX,GACxEgC,EAAOhC,SAGXP,EAAOkB,IAAI,4DAA8DqC,EAAIG,OAAS,IAAMnD,GAC5FgC,EAAOhC,KAGfgD,EAAIO,QAAWvD,KACXP,EAAOkB,IAAI,6CAA+CX,GAC1DgC,EAAOhC,KAEXgD,EAAIQ,KACA3B,cACsB,IAAlBA,EAAO4B,QAAuC,OAAlB5B,EAAO4B,OACjC5B,EAAO4B,OAAS,MACtB7B,GAAK,EACLC,QAAuCA,EAAO6B,UAAO,EACrD7B,QAAuCA,EAAO8B,cAAW,GAEzD9B,cACmB,IAAnBA,EAAOW,SAAyC,OAAnBX,EAAOW,QACpC,IAAK,MAAM9D,KAAKmD,EAAOW,QACnBQ,EAAIY,iBAAiBlF,EAAEmF,OAAQnF,EAAExI,OAGzC8M,EAAIc,aAAe,cACnBd,EAAIe,KACAlC,cACoB,IAAhBA,EAAOjF,MAAmC,OAAhBiF,EAAOjF,KAC/BiF,EAAOjF,UAAO,GAE1B,MAAOoD,GACLP,EAAOkB,IAAI,iCAAmCX,GAC9CgC,EAAOhC,MAYZ7I,qBAAqByK,EAAaC,GACrC,OAAIrC,EACO/G,KAAKuL,mBAAmBpC,EAAKC,GAE7BpJ,KAAKwL,kBAAkBrC,EAAKC,IC7IzC,MAAOqC,EACD/M,uBAAuBgN,EAAwBC,EAAcC,GAmBjE,OAlBgB,IAAIvC,QAAiB,CAACC,EAASC,KAC3C,IACeP,EAAe,MACvB6C,UACCH,EAAgBC,EACH,UAAbC,GAAqC,UAAbA,EAAuB,OAASA,EAAWE,IAC/DA,GACA9E,EAAOkB,IAAI,uCAAyC4D,GACpDvC,EAAOuC,IAEPxC,GAAQ,KAGlB,MAAO/B,GACLP,EAAOkB,IAAI,6BAA+BX,GAC1CgC,EAAOhC,MAMX7I,wBAAwBgN,EAAwBC,EAAcC,GAyClE,OAxCgB,IAAIvC,QAAiB,CAACC,EAASC,KAC3C,IACI,GAAiB,UAAbqC,GAAqC,UAAbA,EAAsB,CAC9C,MAAMG,EAAO,IAAIC,KAAK,CAACL,GAAO,CAAC9E,KAAM,eAErC,GAAI1K,OAAO8P,UAAUC,iBACjB/P,OAAO8P,UAAUC,iBAAiBH,EAAML,GACxCpC,GAAQ,OACL,CACH,MAAM6C,EAAMhQ,OAAOiQ,IAAIC,gBAAgBN,GACjCrG,EAAI4G,SAASC,cAAc,KACjC7G,EAAE8G,KAAOL,EACRzG,EAAU+G,SAAWf,EAEtB,MAAMgB,EAAKvQ,OAAO8P,UAAUU,UAAUlD,cAIhCmD,GAAwC,IAA5BF,EAAGxJ,QAAQ,aAA+C,IAAzBwJ,EAAGxJ,QAAQ,SAExD0J,GAAUN,SAASO,KAAKC,YAAYpH,GAE1CA,EAAEqH,QACF5Q,OAAO6Q,WAAW,KACd7Q,OAAOiQ,IAAIa,gBAAgBd,GAErBS,GAAUN,SAASO,KAAKK,YAAYxH,GAE1C4D,GAAQ,IACT,UAGPtC,EAAOkB,IAAI,wDAA0D0D,GACrErC,EAAO,6BAEb,MAAOhC,GACLP,EAAOkB,IAAI,8BAAgCX,GAC3CgC,EAAOhC,MAMX7I,yBAAyBgN,EAAwBvH,GAkBrD,OAjBgB,IAAIkF,QAAiB,CAACC,EAASC,KAC3C,IACeP,EAAe,MACvB6C,UACCH,EAAgBvH,EAAO2H,IACnBA,GACA9E,EAAOkB,IAAI,yCAA2C4D,GACtDvC,EAAOuC,IAEPxC,GAAQ,KAGlB,MAAO/B,GACLP,EAAOkB,IAAI,+BAAiCX,GAC5CgC,EAAOhC,MAMX7I,0BAA0BgN,EAAwBvH,GAoCtD,OAnCgB,IAAIkF,QAAiB,CAACC,EAASC,KAC3C,IACI,MAAMwC,EAAO,IAAIC,KAAK,CAAC7H,GAAO,CAAC0C,KAAM,6BAErC,GAAI1K,OAAO8P,UAAUC,iBACjB/P,OAAO8P,UAAUC,iBAAiBH,EAAML,GACxCpC,GAAQ,OACL,CACH,MAAM6C,EAAMhQ,OAAOiQ,IAAIC,gBAAgBN,GACjCrG,EAAI4G,SAASC,cAAc,KACjC7G,EAAE8G,KAAOL,EACRzG,EAAU+G,SAAWf,EAEtB,MAAMgB,EAAKvQ,OAAO8P,UAAUU,UAAUlD,cAIhCmD,GAAwC,IAA5BF,EAAGxJ,QAAQ,aAA+C,IAAzBwJ,EAAGxJ,QAAQ,SAExD0J,GAAUN,SAASO,KAAKC,YAAYpH,GAE1CA,EAAEqH,QACF5Q,OAAO6Q,WAAW,KACd7Q,OAAOiQ,IAAIa,gBAAgBd,GAErBS,GAAUN,SAASO,KAAKK,YAAYxH,GAE1C4D,GAAQ,IACT,KAET,MAAO/B,GACLP,EAAOkB,IAAI,gCAAkCX,GAC7CgC,EAAOhC,MAMZ7I,kBAAkBgN,EAAwBC,EAAcC,EAAmB,SAC9E,OAAI7E,EACO/G,KAAKmN,gBAAgBzB,EAAgBC,EAAMC,GAE3C5L,KAAKoN,iBAAiB1B,EAAgBC,EAAMC,GAIpDlN,oBAAoBgN,EAAwBvH,GAC/C,OAAI4C,EACO/G,KAAKqN,kBAAkB3B,EAAgBvH,GAEvCnE,KAAKsN,mBAAmB5B,EAAgBvH,ICjJrD,MAAOoJ,EAKF7O,aAAa8O,GAwBhB,OAtBI,IAAInE,QAAyD,CAACC,EAASC,KAEvE,IACI,MAAMkE,EAAS,IAAIC,WACnBD,EAAOhD,OAAUkD,KACbrE,EAAQ,CAACQ,YAAa0D,EAAK3G,KAAM1C,KAAM,IAAIhD,WAAYwM,EAAGC,OAAetN,YAE7EmN,EAAO3C,QAAW6C,KACd3G,EAAOkB,IAAI,kCAAoCyF,GAC/CpE,EAAOoE,KAEXF,EAAOI,QAAWF,KACd3G,EAAOkB,IAAI,kCAAoCyF,GAC/CpE,EAAOoE,KAGXF,EAAOK,kBAAkBN,GAC3B,MAAOjG,GACLP,EAAOkB,IAAI,0BAA4BX,GACvCgC,EAAOhC,OC3BjB,MAAOwG,EACFrP,kBAAkByK,GACrB,MAAM7F,EAAI6F,EAAIM,cACd,SAAInG,EAAEoG,WAAW,OAAQpG,EAAEoG,WAAW,QAK5B,MAANpG,IAAaA,EAAEoG,WAAW,QAASpG,EAAEoG,WAAW,SAG1C,OAANpG,IAAcA,EAAEoG,WAAW,SAAUpG,EAAEoG,WAAW,YAGlDpG,EAAE4G,MAAM,6BAIR5G,EAAE4G,MAAM,mBAOTxL,oBAAoByK,GACvB,IAAI7K,EAAI,GACJgF,EAAI6F,EACJ7F,EAAEoG,WAAW,aACbpL,GAAK,UACLgF,EAAIA,EAAE0K,UAAU,IAGpB,IAAI5N,EAAQkD,EAAEJ,QAAQ,KAClB9C,EAAQ,IAAGA,EAAQkD,EAAExE,QACzB,IAAImP,EAAO3K,EAAEJ,QAAQ,KAIrB,GAHI+K,EAAO,IAAGA,EAAO3K,EAAExE,SACvBwE,EAAIA,EAAE0K,UAAU,EAAGzK,KAAK6B,IAAIhF,EAAO6N,KAE7BC,SAAS,MAAQ5K,EAAE4K,SAAS,MAC9B,OAAO5P,EAAIgF,EAGf,KAAOA,EAAExE,OAAS,GAEd,IADAwE,EAAIA,EAAE0K,UAAU,EAAG1K,EAAExE,OAAS,IACxBoP,SAAS,MAAQ5K,EAAE4K,SAAS,MAC9B,OAAO5P,EAAIgF,EAGnB,OAAQhF,EAAIgF,GAAM,IAGf5E,YAAYyP,EAAcC,GAC7B,OAAIL,EAAIM,WAAWD,GACRA,EAEJL,EAAIO,aAAaH,GAAQC,EAG7B1P,kBAAkB2L,GACrB,OAAQA,EAAKnL,MAA0C,GAAnCmL,EAAKkE,YAAY,KAAO,IAAM,IAAS9E,cAGxD/K,4BAA4B8P,GAC/B,IAAI1E,EAA6B,KAEjC,OAAQ0E,GACJ,IAAK,OACL,IAAK,MACD1E,EAAc,aACd,MACJ,IAAK,MACDA,EAAc,YACd,MACJ,IAAK,MACDA,EAAc,YACd,MACJ,IAAK,MACL,IAAK,OACDA,EAAc,gBACd,MACJ,IAAK,OACL,IAAK,MACDA,EAAc,aACd,MACJ,IAAK,MACL,IAAK,MACDA,EAAc,YACd,MAEJ,IAAK,MACDA,EAAc,WACd,MACJ,IAAK,KACDA,EAAc,kBACd,MACJ,IAAK,MACDA,EAAc,WACd,MACJ,IAAK,MACDA,EAAc,aACd,MACJ,IAAK,OACL,IAAK,MACDA,EAAc,aAGtB,OAAOA,GCpGT,MAAO2E,EAYT/P,YAAmBgQ,GAAA1O,KAAA0O,QACf1O,KAAK2O,MAAQ,CAACD,EAAME,MACpB5O,KAAK6O,KAAO,CAACH,EAAMI,KACnB9O,KAAK+O,KAAO,CAACL,EAAMM,KAMhBtQ,OAAOuQ,GACV,MAAM,IAAI3N,MAAM,2BAIb5C,MAAM4E,EAAiB4L,GAC1B,OAAO5L,EAAE4L,GAGNxQ,MAAM4E,EAAQ4L,EAAenQ,GAEhC,OADAuE,EAAE4L,GAASnQ,EACJuE,EAGJ5E,MAAM4E,EAAQQ,EAAeC,GAChC,OAAOT,EAAEpE,MAAM4E,EAAOC,GAGnBrF,IAAI4E,EAAiB6L,GACxB,OAAOnP,KAAKoP,UAAU9M,MAAMD,KAAKiB,GAAI6L,GAGlCzQ,UAAU4E,EAAQ6L,GACrB,IAAK,IAAI3S,EAAI,EAAGA,EAAI8G,EAAExE,OAAQtC,IAAK8G,EAAE9G,GAAK2S,EAAG7L,EAAE9G,IAC/C,OAAO8G,EAGJ5E,iBAAiBT,GACpB,MAAMX,EAAS,GAGf,OAFAA,EAAEwB,OAASb,EAAI,EACfX,EAAE+R,KAAKrP,KAAK0O,MAAME,MACXtR,EAOXsR,WACI,OAAOtM,MAAMD,KAAKrC,KAAK2O,OAM3BG,UACI,OAAOxM,MAAMD,KAAKrC,KAAK6O,MAM3BG,UACI,OAAOhP,KAAK+O,KAMTrQ,UAAU4E,GACb,OAAQhB,MAAMC,QAAQe,GAAKA,EAAIhB,MAAMD,KAAKiB,IAAIgM,IAAIvQ,GAAKiB,KAAK0O,MAAMa,UAAUxQ,IAMzEL,MAAM4E,GACT,OAAIA,IAAMtD,KAAKgP,KACM,IAAb1L,EAAExE,QAAgBwE,EAAE,KAAOtD,KAAK0O,MAAMM,IAS3CtQ,GAAG4E,EAAiBK,GACvB,GAAI3D,KAAKwP,MAAMlM,IAAMtD,KAAKwP,MAAM7L,GAAI,OAAO,EAC3C,MAAM8L,EAAOzP,KAAK0O,MAAME,KAClBjN,EAAM4B,KAAKgD,IAAIjD,EAAExE,OAAQ6E,EAAE7E,QACjC,IAAK,IAAItC,EAAI,EAAGA,EAAImF,EAAKnF,IACrB,IAAMwD,KAAK0O,MAAMgB,QACJ,IAATpM,EAAE9G,GAAiB8G,EAAE9G,GAAKiT,OACjB,IAAT9L,EAAEnH,GAAiBmH,EAAEnH,GAAKiT,GAAO,OAAO,EAEhD,OAAO,EAMJ/Q,MAAM4E,EAAiBK,GAC1B,OAAQ3D,KAAK0P,GAAGpM,EAAGK,GAMhBjF,IAAI4E,GACP,MAAMhG,EAAS,GACf,IAAK,IAAId,EAAI,EAAGA,EAAI8G,EAAExE,OAAQtC,IAC1Bc,EAAEd,GAAKwD,KAAK0O,MAAMiB,IAAIrM,EAAE9G,IAE5B,OAAOc,EAMJoB,IAAI4E,EAAiBK,GACxB,MAAMrG,EAAS,GACTmS,EAAOzP,KAAK0O,MAAME,KACxBtR,EAAEwB,OAASyE,KAAKgD,IAAIjD,EAAExE,OAAQ6E,EAAE7E,QAChC,IAAK,IAAItC,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IAC1Bc,EAAEd,GAAKwD,KAAK0O,MAAMkB,SACL,IAATtM,EAAE9G,GAAiB8G,EAAE9G,GAAKiT,OACjB,IAAT9L,EAAEnH,GAAiBmH,EAAEnH,GAAKiT,GAElC,OAAOnS,EAMJoB,IAAI4E,EAAiBK,GACxB,MAAMrG,EAAS,GACTmS,EAAOzP,KAAK0O,MAAME,KACxBtR,EAAEwB,OAASyE,KAAKgD,IAAIjD,EAAExE,OAAQ6E,EAAE7E,QAChC,IAAK,IAAItC,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IAC1Bc,EAAEd,GAAKwD,KAAK0O,MAAMmB,SACL,IAATvM,EAAE9G,GAAiB8G,EAAE9G,GAAKiT,OACjB,IAAT9L,EAAEnH,GAAiBmH,EAAEnH,GAAKiT,GAElC,OAAOnS,EAMJoB,IAAI4E,EAAiBK,GACxB,MAAMrG,EAAS,GACTmS,EAAOzP,KAAK0O,MAAME,KACxBtR,EAAEwB,OAASwE,EAAExE,OAAS6E,EAAE7E,OAAS,EACjC,IAAK,IAAItC,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IAC1Bc,EAAEd,GAAKiT,EAEX,IAAK,IAAIjT,EAAI,EAAGA,EAAImH,EAAE7E,OAAQtC,IAC1B,IAAK,IAAIgK,EAAI,EAAGA,EAAIlD,EAAExE,OAAQ0H,IAC1BlJ,EAAEkJ,EAAIhK,GAAKwD,KAAK0O,MAAMkB,IAAItS,EAAEkJ,EAAIhK,GAAIwD,KAAK0O,MAAMoB,IAAIxM,EAAEkD,GAAI7C,EAAEnH,KAGnE,OAAOc,EAMJoB,IAAI4E,EAAyBK,EAAiBoM,EAA+B,GAChF,OAAO/P,KAAKgQ,OAAO1M,EAAGK,EAAGoM,GAAsBzS,EAM5CoB,OAAO4E,EAAyBK,EAAiBoM,EAA+B,GAEnFzM,EAAIhB,MAAMD,KAAKiB,GACf,MAAMmM,EAAOzP,KAAK0O,MAAME,KAExB,GAAImB,EAAuB,EAAG,CAC1B,MAAME,EAAW,GACjBA,EAAInR,OAASiR,EACb,IAAK,IAAIvT,EAAI,EAAGA,EAAIuT,EAAsBvT,IACtCyT,EAAIzT,GAAKiT,EAEbnM,EAAI2M,EAAItK,OAAOrC,GAGnB,IAAI4M,EAAOvM,EAAE7E,OACb,IAAK,IAAItC,EAAI,EAAGA,EAAI0T,SACI,IAAhBvM,EAAEuM,EAAO,KACTlQ,KAAK0O,MAAMyB,MAAMxM,EAAEuM,EAAO,GAAIT,IAFZjT,IAAK0T,KAI/B,GAAa,IAATA,EAAY,MAAO,CAAClR,EAAGgB,KAAKgP,IAAK1R,EAAG0C,KAAKgP,IAAKoB,WAAW,GAE7D,MAAMnS,EAAYqF,EAAExE,OAASoR,EAAO,EAC9BlR,EAAS,GACfA,EAAEF,OAASb,EACX,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAAGzB,IACnB,GAAIwD,KAAK0O,MAAMyB,MAAM7M,EAAEA,EAAExE,OAAS,EAAItC,GAAIiT,GAAO,CAC7C,MAAM5S,EAAImD,KAAK0O,MAAMsB,OAAO1M,EAAEA,EAAExE,OAAS,EAAItC,GAAImH,EAAEuM,EAAO,IAC1DlR,EAAEf,EAAI,EAAIzB,GAAKK,EAAEmC,EACjB,IAAK,IAAIwH,EAAI,EAAGA,EAAI0J,EAAO,EAAG1J,IAC1BlD,EAAErF,EAAI,EAAIzB,EAAIgK,GAAKxG,KAAK0O,MAAMmB,IAAIvM,EAAErF,EAAI,EAAIzB,EAAIgK,GAAIxG,KAAK0O,MAAMoB,IAAInM,EAAE6C,GAAI3J,EAAEmC,IAE/EsE,EAAEA,EAAExE,OAAS,EAAItC,GAAKK,EAAES,OAExBgG,EAAEA,EAAExE,OAAS,EAAItC,GAAKiT,EAI9B,IAAIW,GAAY,EAChB,MAAM9S,EAAS,GACfA,EAAEwB,OAASoR,EAAO,EAClB,IAAK,IAAI1T,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IACtB8G,EAAE9G,KAAI4T,GAAY,GACtB9S,EAAEd,GAAK8G,EAAE9G,GAEb,MAAO,CAACwC,IAAG1B,IAAG8S,aAMX1R,IAAIgH,EAAiBpC,GACxB,MAAM,IAAIhC,MAAM,2BAMb5C,IAAI4E,GACP,MAAM,IAAIhC,MAAM,4BAQlB,MAAO+O,UAAkC5B,GC7PzC,MAAO6B,EAET5R,YAAmB6R,GAAAvQ,KAAAuQ,OA4BZ7R,MAAM8R,EAAeC,EAAiBC,EAAiBzS,GAC1D,MAAMyQ,EAAQ1O,KAAKuQ,KAAK7B,MAExB,IAAK,IAAIlS,EAAI,EAAGA,EAAIyB,EAAGzB,IAAK,CACxB,IAAIK,EAAImD,KAAKuQ,KAAKI,MAAMH,EAAShU,GAAIyB,EAAIzB,GACzC,GAAIkS,EAAMgB,GAAG7S,EAAG6R,EAAME,MAAO,CACzB,IAAK,IAAIpI,EAAIhK,EAAI,EAAGgK,EAAIvI,EAAGuI,IACvB,GAAIkI,EAAMyB,MAAMnQ,KAAKuQ,KAAKI,MAAMH,EAAShK,GAAIvI,EAAIzB,GAAIkS,EAAME,MAAO,CAC9D,MAAMtR,EAAIkT,EAAShU,GACnBgU,EAAShU,GAAKgU,EAAShK,GACvBgK,EAAShK,GAAKlJ,EACd,MAGRT,EAAImD,KAAKuQ,KAAKI,MAAMH,EAAShU,GAAIyB,EAAIzB,GAEzC,IAAIkS,EAAMgB,GAAG7S,EAAG6R,EAAME,MAAtB,CAEA4B,EAAShU,GAAKwD,KAAKuQ,KAAKnB,UAAUoB,EAAShU,GAAIuC,GAAK2P,EAAMkC,IAAI7R,EAAGlC,IACjE,IAAK,IAAI2J,EAAIhK,EAAI,EAAGgK,EAAIvI,EAAGuI,IAAK,CAC5B,MAAM5J,EAAIoD,KAAKuQ,KAAKI,MAAMH,EAAShK,GAAIvI,EAAIzB,GACrCc,EAAI0C,KAAKuQ,KAAKjB,IAAIkB,EAAShU,GAAIuC,GAAK2P,EAAMoB,IAAI/Q,EAAGnC,IACvD4T,EAAShK,GAAKxG,KAAKuQ,KAAKV,IAAIW,EAAShK,GAAIlJ,KAIjD,IAAK,IAAId,EAAIyB,EAAI,EAAGzB,GAAK,EAAGA,IAAK,CAC7B,MAAMK,EAAImD,KAAKuQ,KAAKI,MAAMH,EAAShU,GAAIyB,EAAIzB,GAC3C,IAAIkS,EAAMgB,GAAG7S,EAAG6R,EAAME,MAEtB,IAAK,IAAIpI,EAAI,EAAGA,EAAIhK,EAAGgK,IAAK,CACxB,MAAM5J,EAAIoD,KAAKuQ,KAAKI,MAAMH,EAAShK,GAAIvI,EAAIzB,GACrCc,EAAI0C,KAAKuQ,KAAKjB,IAAIkB,EAAShU,GAAIuC,GAAK2P,EAAMoB,IAAI/Q,EAAGnC,IACvD4T,EAAShK,GAAKxG,KAAKuQ,KAAKV,IAAIW,EAAShK,GAAIlJ,IAIjD,MAAMuT,EAAK7Q,KAAKuQ,KAAKO,iBAAiB7S,EAAI,GAC1C,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAAGzB,IACfkS,EAAMgB,GAAG1P,KAAKuQ,KAAKI,MAAMH,EAAShU,GAAIyB,EAAIzB,GAAIkS,EAAME,MACpD5O,KAAKuQ,KAAKQ,MAAMF,EAAI5S,EAAI,EAAIzB,EAAGkS,EAAMM,KAErChP,KAAKuQ,KAAKQ,MAAMF,EAAI5S,EAAI,EAAIzB,EAAGkS,EAAMiB,IAAI3P,KAAKuQ,KAAKI,MAAMH,EAAShU,GAAI,KAE9E,OAAOqU,EAqBJnS,IAAIsS,EAAaP,EAAiBC,EAAiBzS,GACtD,MAAMyQ,EAAQ1O,KAAKuQ,KAAK7B,MACxB,GAAIzQ,GAAK,EAAG,OAAOyQ,EAAMM,IAEzB,MAAMG,EAAmC,CAAC8B,EAAUtP,KAChD,GAAIA,EAAM,EACN,OAAO3B,KAAKuQ,KAAKI,MAAMM,EAAI,GAAI,GAEnC,GAAY,IAARtP,EAEA,OAAO+M,EAAMmB,IACTnB,EAAMoB,IAAI9P,KAAKuQ,KAAKI,MAAMM,EAAI,GAAI,GAAIjR,KAAKuQ,KAAKI,MAAMM,EAAI,GAAI,IAC9DvC,EAAMoB,IAAI9P,KAAKuQ,KAAKI,MAAMM,EAAI,GAAI,GAAIjR,KAAKuQ,KAAKI,MAAMM,EAAI,GAAI,KAEtE,IAAIlS,EAAI2P,EAAME,KACd,IAAK,IAAIpS,EAAI,EAAGA,EAAImF,EAAKnF,IAAK,CAC1B,MAAM0U,EAAU,GAChB,IAAK,IAAI1K,EAAI,EAAGA,EAAI7E,EAAK6E,IACjBhK,IAAMgK,GACV0K,EAAGjS,KAAKe,KAAKuQ,KAAKrR,MAAM+R,EAAIzK,GAAI,EAAG7E,EAAM,IAE7C,MAAMwP,GAAQxP,EAAM,EAAIA,EAAMnF,GAAK,EAAI,GAAK,EACtCM,EAAIqS,EAAG+B,EAAIvP,EAAM,GACvB5C,EAAI2P,EAAMkB,IAAI7Q,EAAG2P,EAAMoB,IACnB9P,KAAKuQ,KAAKI,MAAMM,EAAIzU,GAAImF,EAAM,GAC9BwP,GAAQ,EAAIrU,EAAI4R,EAAMiB,IAAI7S,KAElC,OAAOiC,GAGX,GAAgB,IAAZ0R,EACA,OAA0BtB,EAAV,IAAZuB,EAAyBM,EACdA,EAAO9R,MAAMwR,GADSzS,GAIzC,MAAMmT,EAAY,GAClB,IAAK,IAAI5U,EAAI,EAAGA,EAAIyB,EAAGzB,IACnB4U,EAAKnS,KAAKe,KAAKuQ,KAAKrR,MAAM8R,EAAON,EAAUlU,GAAIiU,EAASA,EAAUxS,IAEtE,OAAOkR,EAAGiC,EAAMnT,ICtIlB,MAAOoT,EAWT3S,YAAoBuQ,EAAc,EAAWqC,EAAa,KAAtCtR,KAAAiP,MAAyBjP,KAAAsR,KAVrCtR,KAAAuR,QAAoB,GACnBvR,KAAAwR,OAAmB,CAACxR,KAAKgP,KAU9B,IAAIjQ,EAAY,EAChBiB,KAAKyR,YAAclO,KAAAG,IAAA,EAAKuL,GACxBjP,KAAK0R,KAAO1R,KAAKyR,YAAc,EAE/BzR,KAAKuR,QAAQzS,OAASkB,KAAK0R,KAC3B1R,KAAKwR,OAAO1S,OAAUkB,KAAKyR,YAE3B,IAAK,IAAIjV,EAAI,EAAGA,EAAIwD,KAAK0R,KAAMlV,IAC3BwD,KAAKuR,QAAQ/U,GAAKuC,EAClBiB,KAAKwR,OAAQzS,GAAKvC,GAClBuC,GAAK,GACGiB,KAAK0R,OACT3S,IAAMA,EAAIuS,GAAMtR,KAAK0R,QAAU,GAQnChT,QAAQ4E,GAEZ,MAAMM,GAAW,YADjBN,EAAIC,KAAKC,IAAIF,OACoB,EAEjC,OAAqC,cADxBA,EAAIM,GAAO,WACT5D,KAAK2R,UAAY,KAAoB/N,EAAM5D,KAAK4R,UAAY,GAMxElT,wBACH,IAAK,IAAIlC,EAAI,EAAGA,EAAIwD,KAAKyR,YAAajV,IAClC,QAAuB,IAAnBwD,KAAKwR,OAAOhV,GACZ,OAAO,EAGf,OAAO,EAOXqV,aACI,OAAO7R,KAAKyR,YAMhB7C,WACI,OAAO,EAMXE,UACI,OAAO,EAMXgD,YACI,OAAO,EAMX9C,UACI,OAAO+C,OAAO/C,IAOXtQ,UAAU4E,GACb,OAAQA,EAAItD,KAAK0R,QAAU,EAMxBhT,MAAM4E,GACT,OAAOyO,OAAOvC,MAAMlM,GAMjB5E,GAAG4E,EAAWK,GACjB,OAASL,EAAItD,KAAK0R,QAAU,IAAS/N,EAAI3D,KAAK0R,QAAU,EAMrDhT,MAAM4E,EAAWK,GACpB,OAASL,EAAItD,KAAK0R,QAAU,IAAS/N,EAAI3D,KAAK0R,QAAU,EAMrDhT,IAAI4E,GACP,OAAQA,EAAItD,KAAK0R,QAAU,EAMxBhT,IAAI4E,GAEP,OAAe,KADfA,GAAKA,EAAItD,KAAK0R,QAAU,GACJ1R,KAAKgP,IACrBhP,KAAKuR,SAASvR,KAAK0R,KAAO1R,KAAKwR,OAAOlO,IAAMtD,KAAK0R,MAMlDhT,IAAI4E,EAAWK,GAClB,QAASL,EAAIK,GAAK3D,KAAK0R,QAAU,EAM9BhT,IAAI4E,EAAWK,GAClB,QAASL,EAAIK,GAAK3D,KAAK0R,QAAU,EAM9BhT,IAAI4E,EAAWK,GAGlB,OAFAL,GAAKA,EAAItD,KAAK0R,QAAU,EACxB/N,GAAKA,EAAI3D,KAAK0R,QAAU,EACd,IAANpO,GAAiB,IAANK,EAAgB,EACxB3D,KAAKuR,SAASvR,KAAKwR,OAAOlO,GAAKtD,KAAKwR,OAAO7N,IAAM3D,KAAK0R,MAM1DhT,IAAI4E,EAAWK,GAGlB,OAFAL,GAAKA,EAAItD,KAAK0R,QAAU,EAEd,KADV/N,GAAKA,EAAI3D,KAAK0R,QAAU,GACJ1R,KAAKgP,IACf,IAAN1L,EAAgB,EACbtD,KAAKuR,SACPvR,KAAKwR,OAAOlO,IAAOtD,KAAK0R,KAAO1R,KAAKwR,OAAO7N,IAAM3D,KAAK0R,MACrD1R,KAAK0R,MAMRhT,IAAI4E,EAAWK,GAClB,OAAUA,EAAI3D,KAAK0R,QAAU,GAAO,EAAK1R,KAAKgP,IAAM,EAMjDtQ,OAAO4E,EAAWK,GACrB,OAAUA,EAAI3D,KAAK0R,QAAU,GAAO,EAAK,CACrC1S,EAAGgB,KAAKgP,IACR1R,EAAG0C,KAAKgP,IACRoB,WAAW,GACX,CACApR,EAAGgB,KAAK4Q,IAAItN,EAAGK,GACfrG,EAAG,EACH8S,WAAW,GAOZ1R,IAAIgH,EAAWpC,GAGlB,OAFAoC,EAAI1F,KAAKuP,UAAU7J,GACnBpC,GAAQtD,KAAK0R,KACH,IAANhM,EACc,IAANpC,EAAW,EAAI,EAEnBA,GAAK,EACPtD,KAAKgS,IAAIhS,KAAKiS,GAAGvM,GAAKpC,GACtBtD,KAAKkS,IAAIlS,KAAKgS,IAAIhS,KAAKiS,GAAGvM,IAAMpC,IAMnC5E,IAAIgH,EAAWpC,GAQlB,MAAM6O,EAAoB,CAACnS,KAAKgP,KAChC,IAAK,IAAIrL,EAAI,EAAGA,EAAI3D,KAAK0R,KAAM/N,IAAK,CAChC,MAAM5E,EAAIiB,KAAK0D,IAAIgC,EAAG/B,QACH,IAAfwO,EAAQpT,KAAgBoT,EAAQpT,GAAK4E,GAE7C,MAAMrG,EAAI6U,GAAS7O,EAAItD,KAAK0R,QAAU,GACtC,YAAa,IAANpU,EAAgBA,EAAI0C,KAAKgP,IAM7BtQ,IAAI4E,GACP,OAAQA,GAAK,EACPtD,KAAKuR,QAAQjO,EAAItD,KAAK0R,MACtB1R,KAAKkS,IAAIlS,KAAKuR,SAASjO,EAAItD,KAAK0R,OAMnChT,GAAG4E,GACN,OAAOtD,KAAKwR,QAAQlO,EAAItD,KAAK0R,QAAU,IASzC,MAAOU,UAAmBf,EAI5B3S,YAAY4S,EAAa,KACrBe,MAAM,EAAGf,IAQX,MAAOgB,UAAmBjB,EAI5B3S,YAAY4S,EAAa,IACrBe,MAAM,EAAGf,ICzQX,MAAOiB,EAOT7T,YAAoB8T,EAAuBC,EAAgB,GAAvCzS,KAAAwS,QAAuBxS,KAAAyS,QANnCzS,KAAAuR,QAAoB,GACnBvR,KAAAwR,OAAmB,CAACxR,KAAKgP,KAM9B,IAAIjQ,EAAY,EAChB,IAAK,IAAIvC,EAAI,EAAGA,EAAIgW,EAAQ,EAAGhW,IAC3BwD,KAAKuR,QAAQ/U,GAAKuC,EAClBiB,KAAKwR,OAAQzS,GAAKvC,EAClBuC,EAAKA,EAAI0T,EAASD,EAOnB9T,wBACH,IAAK,IAAIlC,EAAI,EAAGA,EAAIwD,KAAKwS,MAAOhW,IAC5B,QAAuB,IAAnBwD,KAAKwR,OAAOhV,GAAgB,OAAO,EAE3C,OAAO,EAOXqV,aACI,OAAO7R,KAAKwS,MAMhB5D,WACI,OAAO,EAMXE,UACI,OAAO,EAMXgD,YACI,OAAO9R,KAAKyS,MAMhBzD,UACI,OAAO+C,OAAO/C,IAMXtQ,UAAU4E,GACb,OAAQA,EAAI,EAAItD,KAAKwS,QAAUlP,EAAItD,KAAKwS,MAASlP,GAAKtD,KAAKwS,MAMxD9T,MAAM4E,GACT,OAAOyO,OAAOvC,MAAMlM,GAMjB5E,GAAG4E,EAAWK,GACjB,OAAO3D,KAAKuP,UAAUjM,KAAOtD,KAAKuP,UAAU5L,GAMzCjF,MAAM4E,EAAWK,GACpB,OAAO3D,KAAKuP,UAAUjM,KAAOtD,KAAKuP,UAAU5L,GAMzCjF,IAAI4E,GACP,OAAQtD,KAAKwS,MAASlP,EAAItD,KAAKwS,OAAUxS,KAAKwS,MAM3C9T,IAAI4E,GAEP,OAAc,KADdA,EAAItD,KAAKuP,UAAUjM,IACAtD,KAAKgP,IACpBhP,KAAKuR,SAASvR,KAAKwS,MAAQ,EAAIxS,KAAKiS,GAAG3O,KAAOtD,KAAKwS,MAAQ,IAM5D9T,iBAAiB4E,GAEpB,GAAU,KADVA,EAAItD,KAAKuP,UAAUjM,IACN,OAAOtD,KAAKgP,IACzB,IAAIjQ,EAAY,EAChB,IAAK,IAAIvC,EAAI,EAAGA,EAAIwD,KAAKwS,MAAOhW,IAAK,CACjC,GAAKuC,EAAIuE,GAAO,EAAG,OAAQvE,EAAIuE,EAAKtD,KAAKwS,MACzCzT,GAAQiB,KAAKwS,MAEjB,OAAOxS,KAAKgP,IAMTtQ,IAAI4E,EAAWK,GAClB,OAAQ3D,KAAKuP,UAAUjM,GAAKtD,KAAKuP,UAAU5L,IAAM3D,KAAKwS,MAMnD9T,IAAI4E,EAAWK,GAClB,OAAO3D,KAAKuP,UAAUvP,KAAKuP,UAAUjM,GAAKtD,KAAKuP,UAAU5L,IAMtDjF,IAAI4E,EAAWK,GAClB,OAAQ3D,KAAKuP,UAAUjM,GAAKtD,KAAKuP,UAAU5L,GAAM3D,KAAKwS,MAMnD9T,IAAI4E,EAAWK,GAClB,OAAQ3D,KAAKuP,UAAUjM,GAAKtD,KAAKkS,IAAIvO,GAAM3D,KAAKwS,MAM7C9T,IAAI4E,EAAWK,GAClB,OAASA,EAAI3D,KAAKwS,OAAW,EAAKxS,KAAKgP,IAAM,EAM1CtQ,OAAO4E,EAAWK,GACrB,OAASA,EAAI3D,KAAKwS,OAAW,EAAK,CAC9BxT,EAAGgB,KAAKgP,IACR1R,EAAG0C,KAAKgP,IACRoB,WAAW,GACX,CACApR,EAAGgB,KAAK4Q,IAAItN,EAAGK,GACfrG,EAAG,EACH8S,WAAW,GAOZ1R,IAAIgH,EAAWpC,GAGlB,OAFAoC,EAAI1F,KAAKuP,UAAU7J,GACnBpC,GAAStD,KAAKwS,MAAQ,EACZ,IAAN9M,EACc,IAANpC,EAAW,EAAI,EAEnBA,GAAK,EACPtD,KAAKgS,IAAIhS,KAAKiS,GAAGvM,GAAKpC,GACtBtD,KAAKkS,IAAIlS,KAAKgS,IAAIhS,KAAKiS,GAAGvM,IAAMpC,IAMnC5E,iBAAiBgH,EAAWpC,GAG/B,OAFAoC,EAAI1F,KAAKuP,UAAU7J,GACnBpC,GAAStD,KAAKwS,MAAQ,EACZ,IAAN9M,EACc,IAANpC,EAAW,EAAI,EAEnBA,GAAK,EACPtD,KAAK0S,iBAAiB1S,KAAK2S,gBAAgBjN,GAAKpC,GAChDtD,KAAK4S,iBAAiB5S,KAAK0S,iBAAiB1S,KAAKiS,GAAGvM,IAAMpC,IAM7D5E,IAAIgH,EAAWpC,GAElB,MAAM6O,EAAoB,CAACnS,KAAKgP,KAChC,IAAK,IAAIrL,EAAI,EAAGA,EAAI3D,KAAKwS,MAAQ,EAAG7O,IAAK,CACrC,MAAM5E,EAAIiB,KAAK0D,IAAIgC,EAAG/B,QACH,IAAfwO,EAAQpT,KAAgBoT,EAAQpT,GAAK4E,GAG7C,MAAMrG,EAAI6U,EAAQnS,KAAKuP,UAAUjM,IACjC,YAAa,IAANhG,EAAgBA,EAAI0C,KAAKgP,IAM7BtQ,iBAAiBgH,EAAWpC,GAE/B,IAAIhF,EAAI0B,KAAK2S,gBAAgBrP,GAC7B,MAAMtE,EAAIgB,KAAK2S,gBAAgBjN,GAC/B,GAAI1F,KAAKwP,MAAMlR,IAAM0B,KAAKwP,MAAMxQ,GAAI,OAAOgB,KAAKgP,IAChD,IAAK,IAAIxS,EAAI,EAAGA,EAAIwD,KAAKwS,MAAOhW,IAAK,CACjC,GAAK8B,EAAIU,GAAO,EAAG,OAAQV,EAAIU,EAAKgB,KAAKwS,MACzClU,EAAIA,EAAI0B,KAAKwS,MAAQ,EAEzB,OAAOxS,KAAKgP,IAMTtQ,IAAI4E,GACP,OAAQA,GAAK,EACPtD,KAAKuR,QAAQjO,GAAKtD,KAAKwS,MAAQ,IAC/BxS,KAAKkS,IAAIlS,KAAKuR,SAASjO,GAAKtD,KAAKwS,MAAQ,KAM5C9T,iBAAiB4E,GACpB,OAAQA,GAAK,EACPC,KAAKG,IAAI1D,KAAKyS,MAAOnP,GAAKtD,KAAKwS,MAAQ,IAAMxS,KAAKwS,MAClDxS,KAAK4S,iBAAiBrP,KAAKG,IAAI1D,KAAKyS,OAAQnP,GAAKtD,KAAKwS,MAAQ,KAMjE9T,GAAG4E,GACN,OAAOtD,KAAKwR,OAAOxR,KAAKuP,UAAUjM,IAM/B5E,gBAAgB4E,GAEnB,GAAU,KADVA,EAAItD,KAAKuP,UAAUjM,IACN,OAAOtD,KAAKgP,IACzB,IAAIjQ,EAAY,EAChB,IAAK,IAAIvC,EAAI,EAAGA,EAAIwD,KAAKwS,MAAQ,EAAGhW,IAAK,CACrC,GAAI8G,IAAMvE,EAAG,OAAOvC,EACpBuC,EAAKA,EAAIiB,KAAKyS,MAASzS,KAAKwS,MAEhC,OAAOxS,KAAKgP,KCpQd,MAAO6D,EAEFnU,cAAcuQ,EAAa6D,GAAmB,GAIjD,MAGMC,EAAe,GACfC,EAAgB,GACtBD,EALoBxP,KAAAG,IAAA,EAAKuL,GACE,GAIhB,EACX8D,EAAG,GAAK,EAER,MAAM9U,EAAIsF,KAAAG,IAAA,EAAMuL,EAAM,GACtB,IAAK,IAAIzS,EAAI,EAAGA,EAAIyB,EAAGzB,IAAK,CACTqW,EAAoBI,QAAQF,EAAIF,EAAoBK,UAAU1W,IAClE4T,YAA6B,IAAf4C,EAAIlU,QACrBkU,EAAIG,MAAO7B,IAASuB,EAAoBO,WAAW5W,EAAG8U,GAAIlB,aAC9D4C,EAAI/T,KAAKzC,GAGjB,OAAIsW,EAAgBE,EACRA,EAAIK,OAAOtU,GAAKuI,QAAsC,EAA9BlE,EAAUkQ,UAAUvU,EAAGkQ,KAAWoE,OAAQtU,IAE1E,OADW,IAAIsS,EAAOpC,EAAKlQ,GACjBwU,0BAOX7U,iBAAiB4E,GACpB,MAAMhG,EAAc,GAEdsG,GAAW,YADjBN,EAAIC,KAAKC,IAAIF,OACoB,EAC3BkQ,GAAOlQ,EAAIM,GAAO,WAExB,IAAK,IAAIpH,EAAI,EAAGA,EAAI,GAAIA,IACpBc,EAAEd,IAAOoH,EAAO,GAAKpH,KAAQ,EAAK,EAAI,EAE1C,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,IACpBc,EAAE,GAAKd,IAAOgX,EAAO,GAAKhX,KAAQ,EAAK,EAAI,EAE/C,IAAK,IAAIA,EAAI,GAAIA,EAAI,EAAGA,IACpB,GAAIc,EAAEd,GAEF,OADAc,EAAEwB,OAAStC,EAAI,EACRc,EAIf,OADAA,EAAEwB,OAAS,EACJxB,EAMJoB,iBAAiB4E,GACpB,IAAIhG,EAAY,EAChB,MAAMW,EAAYsF,KAAK6B,IAAI,GAAI9B,EAAExE,QACjC,IAAK,IAAItC,EAAI,EAAGA,EAAIyB,EAAGzB,IACf8G,EAAE9G,KAAIc,GAAKiG,KAAAG,IAAA,EAAKlH,IAExB,OAAOc,EAMJoB,eAAe4E,EAAsBK,GAExC,MAAMrG,EAAc,GACpBA,EAAEwB,OAASyE,KAAKgD,IAAIjD,EAAExE,OAAQ6E,EAAE7E,QAChC,IAAK,IAAItC,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IAC1Bc,EAAEd,SAAe,IAAT8G,EAAE9G,GAAiB8G,EAAE9G,GAAK,SAAe,IAATmH,EAAEnH,GAAiBmH,EAAEnH,GAAK,GAEtE,OAAOc,EAMJoB,eAAe4E,EAAsBK,GAExC,OAAO3D,KAAKyT,QAAQnQ,EAAGK,GAMpBjF,kBAAkB4E,EAAWK,GAEhC,OAAOP,EAAUsQ,OAAOpQ,EAAGK,GAMxBjF,kBAAkB4E,EAAWK,GAEhC,OAAOP,EAAUsQ,OAAOpQ,EAAGK,GAMxBjF,eAAe4E,EAAsBK,GAExC,MAAMrG,EAAc,GACpBA,EAAEwB,OAASwE,EAAExE,OAAS6E,EAAE7E,OAAS,EACjC,IAAK,IAAItC,EAAI,EAAGA,EAAImH,EAAE7E,OAAQtC,IAC1B,IAAK,IAAIgK,EAAI,EAAGA,EAAIlD,EAAExE,OAAQ0H,IAE1BlJ,EAAEkJ,EAAIhK,IAAM8G,EAAEkD,GAAK7C,EAAEnH,GAG7B,OAAOc,EAMJoB,kBAAkB4E,EAAWK,GAEhC,IAAIrG,EAAI,EACR,IAAK,IAAId,EAAI,EAAGA,EAAI,GAAIA,IACpBc,EAAI8F,EAAUsQ,OAAOpW,EAAGgG,GAAiC,EAA5BF,EAAUkQ,UAAU3P,EAAGnH,IAAW+G,KAAAG,IAAA,EAAKlH,IAExE,OAAOc,EAMJoB,eACC4E,EAA8BK,EAAsBoM,EAA+B,GAIvF,GADAzM,EAAIhB,MAAMD,KAAKiB,GACXyM,EAAuB,EAAG,CAC1B,MAAME,EAAgB,GACtBA,EAAInR,OAASiR,EACb,IAAK,IAAIvT,EAAI,EAAGA,EAAIuT,EAAsBvT,IACtCyT,EAAIzT,GAAK,EAEb8G,EAAI2M,EAAItK,OAAOrC,GAGnB,IAAI4M,EAAOvM,EAAE7E,OACb,IAAK,IAAItC,EAAI,EAAGA,EAAI0T,IACZvM,EAAEuM,EAAO,GADS1T,IAAK0T,KAG/B,GAAa,IAATA,EAAY,MAAO,CAAClR,EAAG,CAAC+S,OAAO/C,KAAM1R,EAAG,CAACyU,OAAO/C,KAAMoB,WAAW,GAErE,MAAMnS,EAAYqF,EAAExE,OAASoR,EAAO,EAC9BlR,EAAc,GACpBA,EAAEF,OAASb,EACX,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAAGzB,IACnB,GAAI8G,EAAEA,EAAExE,OAAS,EAAItC,GAAI,CACrBwC,EAAEf,EAAI,EAAIzB,GAAK,EACf,IAAK,IAAIgK,EAAI,EAAGA,EAAI0J,EAAM1J,IACtBlD,EAAErF,EAAI,EAAIzB,EAAIgK,IAAM7C,EAAE6C,QAG1BlD,EAAEA,EAAExE,OAAS,EAAItC,GAAK,EAI9B,IAAI4T,GAAY,EAChB,MAAM9S,EAAc,GACpBA,EAAEwB,OAASoR,EAAO,EAClB,IAAK,IAAI1T,EAAI,EAAGA,EAAIc,EAAEwB,OAAQtC,IACtB8G,EAAE9G,KAAI4T,GAAY,GACtB9S,EAAEd,GAAK8G,EAAE9G,GAEb,MAAO,CAACwC,IAAG1B,IAAG8S,aAMX1R,kBAAkB4E,EAAWK,EAAWoM,EAA+B,GAGtEA,IACAzM,EAAIF,EAAUuQ,UAAUrQ,EAAGyM,IAC/B,IAAIG,EAAO,GACX,IAAK,IAAI1T,EAAI,EAAGA,EAAI,KACZ4G,EAAUkQ,UAAU3P,EAAG,GAAKnH,GADZA,IAAK0T,KAG7B,GAAa,IAATA,EAAY,MAAO,CAAClR,EAAG+S,OAAO/C,IAAK1R,EAAGyU,OAAO/C,IAAKoB,WAAW,GAEjE,MAAMnS,EAAY,GAAKiS,EAAO,EAC9B,IAAIlR,EAAY,EAEhB,IAAK,IAAIxC,EAAI,EAAGI,EAAI2G,KAAAG,IAAA,EAAK,IAAIlH,EAAIyB,EAAGzB,IAAKI,GAAK,EAC1C,GAAwB,EAApB2G,KAAKE,MAAMH,EAAI1G,GAAQ,CACvB,MAAM2H,EAAIhB,KAAAG,IAAA,EAAMzF,EAAI,EAAIzB,GACxBwC,GAAKuF,EACLjB,EAAIF,EAAUsQ,OAAOpQ,EAAGK,EAAIY,GAGpC,MAAO,CAACvF,IAAG1B,EAAGgG,EAAG8M,UAAiB,IAAN9M,GAMzB5E,kBAAkB4E,GACrB,MAAMrF,EAAYsF,KAAK6B,IAAI,GAAI9B,EAAExE,QACjC,IAAK,IAAItC,EAAI,EAAGA,EAAIyB,EAAGzB,IACnB,GAAI8G,EAAE9G,GAAI,OAAO,EAErB,OAAO,GAKT,MAAOoX,EAMTlF,YACI,OAAI1O,KAAK6T,OAAe7T,KAAK6T,QAC7B7T,KAAK6T,OAAS,IAAItB,EAAQ,GACnBvS,KAAK6T,QAITnV,OAAOuQ,EAAa6D,GAAmB,GAC1C,OAAOD,EAAoBiB,OAAO7E,EAAK6D,GAIpCpU,MAAM4E,EAAW4L,GACpB,OAAuC,EAAhC9L,EAAUkQ,UAAUhQ,EAAG4L,GAG3BxQ,MAAM4E,EAAW4L,EAAenQ,GACnC,OAAOqE,EAAU2Q,OAAO3Q,EAAUuQ,UAAe,EAAJ5U,EAAS,EAAI,EAAGmQ,IAG1DxQ,MAAM4E,EAAWQ,EAAeC,GACnC,OAAOX,EAAU4Q,OACb5Q,EAAUkQ,UAAUlQ,EAAUC,QAASU,EAAMD,GAC7CV,EAAUkQ,UAAUhQ,EAAGQ,IAGxBpF,IAAI4E,EAAW6L,GAClB,OAAOnP,KAAKoP,UAAU9L,EAAG6L,GAGtBzQ,UAAU4E,EAAW6L,GACxB,IAAK,IAAI3S,EAAI,EAAGA,EAAI,GAAIA,IAAK8G,EAAItD,KAAK+Q,MAAMzN,EAAG9G,EAAG2S,EAAGnP,KAAK2Q,MAAMrN,EAAG9G,KACnE,OAAO8G,EAGJ5E,iBAAiBT,GACpB,OAAO,EAOX2Q,WACI,OAAO,EAMXE,UACI,OAAO,EAMXE,UACI,OAAO+C,OAAO/C,IAOXtQ,UAAU4E,GACb,OAAOA,EAMJ5E,MAAM4E,GACT,OAAOyO,OAAOvC,MAAMlM,GASjB5E,GAAG4E,EAAWK,GACjB,OAAOL,IAAMK,EAMVjF,MAAM4E,EAAWK,GACpB,OAAOL,IAAMK,EAOVjF,IAAI4E,GACP,OAAOA,EAOJ5E,IAAI4E,EAAWK,GAClB,OAAOP,EAAUsQ,OAAOpQ,EAAGK,GAMxBjF,IAAI4E,EAAWK,GAClB,OAAOP,EAAUsQ,OAAOpQ,EAAGK,GAMxBjF,IAAI4E,EAAWK,GAClB,OAAOkP,EAAoBoB,WAAW3Q,EAAGK,GAMtCjF,IAAI4E,EAAWK,EAAWoM,EAA+B,GAC5D,OAAO8C,EAAoBO,WAAW9P,EAAGK,EAAGoM,GAAsBzS,EAQ/DoB,OAAO4E,EAAWK,EAAWoM,EAA+B,GAE/D,OAAO8C,EAAoBO,WAAW9P,EAAGK,EAAGoM,GAWzCrR,IAAIgH,EAAWpC,GAClB,MAAM,IAAIhC,MAAM,2BAQb5C,IAAI4E,GACP,MAAM,IAAIhC,MAAM,4BAKlB,MAAO4S,EAUTxV,cACIsB,KAAK+O,KAAO,CAACgD,OAAO/C,KAIxBN,YACI,OAAI1O,KAAK6T,OAAe7T,KAAK6T,QAC7B7T,KAAK6T,OAAS,IAAItB,EAAQ,GACnBvS,KAAK6T,QAITnV,OAAOuQ,EAAa6D,GAAmB,GAC1C,OAAOD,EAAoBiB,OAAO7E,EAAK6D,GAASxD,IAAIhM,GAAKuP,EAAoBK,UAAU5P,IAIpF5E,MAAM4E,EAAsB4L,GAC/B,OAAO5L,EAAE4L,GAGNxQ,MAAM4E,EAAa4L,EAAenQ,GAErC,OADAuE,EAAE4L,GAASnQ,EACJuE,EAGJ5E,MAAM4E,EAAaQ,EAAeC,GACrC,OAAOT,EAAEpE,MAAM4E,EAAOC,GAGnBrF,IAAI4E,EAAsB6L,GAC7B,OAAOnP,KAAKoP,UAAU9M,MAAMD,KAAKiB,GAAI6L,GAGlCzQ,UAAU4E,EAAa6L,GAC1B,IAAK,IAAI3S,EAAI,EAAGA,EAAI8G,EAAExE,OAAQtC,IAAK8G,EAAE9G,GAAK2S,EAAG7L,EAAE9G,IAC/C,OAAO8G,EAGJ5E,iBAAiBT,GACpB,MAAMX,EAAc,GAGpB,OAFAA,EAAEwB,OAASb,EAAI,EACfX,EAAE+R,KAAK,GACA/R,EAOXsR,WACI,MAAO,CAAC,GAMZE,UACI,KAAM,CAAC,GAMXE,UACI,OAAOhP,KAAK+O,KAOTrQ,UAAU4E,GACb,OAAQhB,MAAMC,QAAQe,GAAKA,EAAIhB,MAAMD,KAAKiB,IAAIgM,IAAIvQ,GAAKuI,QAAY,EAAJvI,GAAS,EAAI,GAMzEL,MAAM4E,GACT,OAAIA,IAAMtD,KAAKgP,KACM,IAAb1L,EAAExE,QAAgBwE,EAAE,KAAOyO,OAAO/C,IAYvCtQ,GAAG4E,EAAsBK,GAC5B,GAAI3D,KAAKwP,MAAMlM,IAAMtD,KAAKwP,MAAM7L,GAAI,OAAO,EAC3C,MAAMhC,EAAM4B,KAAKgD,IAAIjD,EAAExE,OAAQ6E,EAAE7E,QACjC,IAAK,IAAItC,EAAI,EAAGA,EAAImF,EAAKnF,IACrB,SAAc,IAAT8G,EAAE9G,IAAkB8K,QAAe,EAAPhE,EAAE9G,IAAU,EAAS,UACxC,IAATmH,EAAEnH,IAAkB8K,QAAe,EAAP3D,EAAEnH,IAAU,EAAS,GAAI,OAAO,EAErE,OAAO,EAMJkC,MAAM4E,EAAsBK,GAC/B,OAAQ3D,KAAK0P,GAAGpM,EAAGK,GAOhBjF,IAAI4E,GACP,OAAOhB,MAAMD,KAAKiB,GAOf5E,IAAI4E,EAAsBK,GAC7B,OAAOkP,EAAoBY,QAAQnQ,EAAGK,GAMnCjF,IAAI4E,EAAsBK,GAC7B,OAAOkP,EAAoBsB,QAAQ7Q,EAAGK,GAMnCjF,IAAI4E,EAAsBK,GAC7B,OAAOkP,EAAoBuB,QAAQ9Q,EAAGK,GAMnCjF,IAAI4E,EAA8BK,EAAsBoM,EAA+B,GAC1F,OAAO8C,EAAoBI,QAAQ3P,EAAGK,EAAGoM,GAAsBzS,EAQ5DoB,OAAO4E,EAA8BK,EAAsBoM,EAA+B,GAE7F,OAAO8C,EAAoBI,QAAQ3P,EAAGK,EAAGoM,GAWtCrR,IAAIgH,EAAsBpC,GAC7B,MAAM,IAAIhC,MAAM,2BAQb5C,IAAI4E,GACP,MAAM,IAAIhC,MAAM,4BChkBlB,MAAO+S,EAKTzF,WACI,OAAO,EAMXE,UACI,OAAO,EAMXgD,YACI,OAAOvO,KAAK+Q,EAMhBtF,UACI,OAAO+C,OAAO/C,IAMXtQ,UAAU4E,GACb,OAAOA,EAMJ5E,MAAM4E,GACT,OAAOyO,OAAOvC,MAAMlM,GAMjB5E,GAAG4E,EAAWK,GACjB,OAAOL,IAAMK,EAMVjF,MAAM4E,EAAWK,GACpB,OAAOL,IAAMK,EAMVjF,IAAI4E,GACP,OAAQA,EAML5E,IAAI4E,GACP,OAAO,EAAIA,EAMR5E,IAAI4E,EAAWK,GAClB,OAAOL,EAAIK,EAMRjF,IAAI4E,EAAWK,GAClB,OAAOL,EAAIK,EAMRjF,IAAI4E,EAAWK,GAClB,OAAOL,EAAIK,EAMRjF,IAAI4E,EAAWK,GAClB,OAAOL,EAAIK,EAMRjF,IAAI4E,EAAWK,GAClB,OAAOL,EAAIK,EAMRjF,OAAO4E,EAAWK,GACrB,OAAc,IAANA,EAAW,CACf3E,EAAGgB,KAAKgP,IACR1R,EAAG0C,KAAKgP,IACRoB,WAAW,GACX,CACApR,EAAGuE,KAAK4N,KAAK7N,IAAMC,KAAKC,IAAIF,GAAKC,KAAKC,IAAIF,EAAIK,IAAMA,EACpDrG,EAAGgG,EAAIK,EACPyM,UAAY9M,EAAIK,GAAO,GAOxBjF,IAAIgH,EAAWpC,GAClB,OAAOC,KAAAG,IAAAgC,EAAKpC,GAMT5E,IAAIgH,EAAWpC,GAClB,OAAOC,KAAK2E,IAAI5E,GAAKC,KAAK2E,IAAIxC,GAM3BhH,IAAI4E,GACP,OAAOC,KAAKyO,IAAI1O,GAMb5E,GAAG4E,GACN,OAAOC,KAAK2E,IAAI5E,IC7IlB,MAAOiR,EAKT7V,YAAmBgQ,EAAe8F,EAAmBC,EAAkB,GAApDzU,KAAA0O,QAAkC1O,KAAAyU,UACjDzU,KAAKwU,GAAKA,EAkBdA,OAAcE,GACV1U,KAAK2U,IAAMD,EACX1U,KAAK4U,UAAYxR,EAAUyR,WAAWH,GAAM,EAMhDF,SACI,OAAOxU,KAAK2U,IAMhBG,eACI,OAAO9U,KAAK4U,UAiBTlW,aAAagQ,EAAeqG,EAAoBN,EAAkB,GACrE,MAAMxF,EAAM1L,KAAKyR,KAAKtG,EAAMmD,QACtBmB,EAAMH,EAAoBiB,OAAO7E,GAAK,GACtCgG,EAAkB,GAElBpY,EAAI0G,KAAK6B,IAAI,EAAI2P,EAAYrG,EAAMmD,OAAS,GAClD,IAAK,IAAIrV,EAAI,EAAGA,EAAIkS,EAAMmD,OAAS,EAAGrV,IAClC,IAAK,IAAIgK,EAAI,EAAGA,EAAIwM,EAAIlU,OAAQ0H,IAAK,CACjC,MAAM8K,EAAK0B,EAAIxM,GACf,IAAIzH,EAAS,EAALuS,EACR,IAAK,IAAI4D,EAAI,EAAGA,GAAKjG,EAAKiG,IACtBnW,EAAI2P,EAAMkB,IAAI7Q,EAAiC,EAA7BqE,EAAUkQ,UAAUhC,EAAI4D,GAAUxG,EAAMsD,IAAIkD,EAAI1Y,GAAK,GAEjE,IAANuC,IACAkW,EAAMzY,GAAK8U,GAKvB,IAAIkD,EAAKS,EAAMR,GACf,IAAK,IAAIjY,EAAI,EAAGA,EAAIK,EAAGL,IAAK,CACxB,IAAIM,GAAI,EACR,MAAMQ,EAAI2X,EAAMzY,EAAIiY,GACpB,IAAK,IAAIjO,EAAIhK,EAAI,EAAGgK,GAAK,EAAGA,IACxB,GAAIlJ,IAAM2X,EAAMzO,EAAIiO,GAAU,CAC1B3X,GAAI,EACJ,MAGJA,IACJ0X,EAAK3B,EAAoBoB,WAAWO,EAAIlX,IAE5C,OAAOkX,EAOJ9V,OAAOC,GACV,OAAOkU,EAAoBO,WAAWzU,EAASqB,KAAK2U,IAAK3U,KAAK4U,UAAY,GAAGtX,EAO1EoB,OAAOyW,EAAkBC,GAE5B,MAAMC,EAAiBrV,KAAK0O,MAAMmD,OAAS,EAC3C,IAAIyD,GAAW,EACf,MAAMzE,EAAe,GACrBA,EAAG/R,OAAqB,EAAZsW,EAEZ,IAAK,IAAI5Y,EAAI,EAAGA,EAAIqU,EAAG/R,OAAQtC,IAAK,CAChC,IAAIuC,GAAgB,EAAXoW,GAAgBnV,KAAK0O,MAAMI,IACpC,IAAK,IAAItI,EAAI,EAAGA,EAAI6O,EAAgB7O,IAAK,CACrC,MAAMd,EAAI1F,KAAK0O,MAAMsD,KAAKhS,KAAKyU,QAAUjY,GAAKgK,GAC9CzH,EAAIiB,KAAK0O,MAAMkB,KAAwC,EAAnCxM,EAAUkQ,UAAU6B,EAAU3O,IAAUd,EAAG3G,GAEnE8R,EAAGrU,GAAKuC,EACRuW,EAAWA,GAAYtV,KAAK0O,MAAMyB,MAAMpR,EAAGiB,KAAK0O,MAAME,MAE1D,IAAM0G,EACF,OAAOlS,EAAUkQ,UAAU6B,EAAUnV,KAAK4U,UAAY,GAE1D,MAAMW,EAAM,IAAIjF,EAA2B,IAAI7B,EAAoBzO,KAAK0O,QAYxE,IAAI8G,EAASjS,KAAKe,MAAMuM,EAAG/R,OAAS,GACpC,MAAMmS,EAAkB,GACxB,KAAOuE,EAAS,EAAGA,IAAU,CACzBvE,EAAInS,OAAS,EACb,IAAK,IAAItC,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxByU,EAAIzU,GAAKqU,EAAG3R,MAAM1C,EAAGA,EAAIgZ,GAE7B,GAAIxV,KAAK0O,MAAMyB,MAAMoF,EAAIE,IAAIxE,EAAK,EAAG,EAAGA,EAAInS,QAASkB,KAAK0O,MAAME,MAAO,MAE3E,GAAe,IAAX4G,EAAc,OAAOpS,EAAUkQ,UAAU6B,EAAUnV,KAAK4U,UAAY,GAcxE,IAAK,IAAIpY,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxByU,EAAIzU,GAAK,CAACwD,KAAK0O,MAAMiB,IAAIkB,EAAG2E,EAAShZ,KAAKmJ,OAAOsL,EAAIzU,IAGzD,MAAMkZ,EAAe,CAAC1V,KAAK0O,MAAMI,KAAKnJ,OAAO4P,EAAII,MAAM1E,EAAK,EAAG,EAAGuE,GAAQI,WACpEC,EAAsB,GAC5B,IAAK,IAAIrZ,EAAI,EAAGA,EAAIwD,KAAK0O,MAAMmD,OAAS,EAAGrV,IAAK,CAC5C,IAAIuC,EAAY2W,EAAG,GACnB,IAAK,IAAIlP,EAAI,EAAGA,EAAIkP,EAAG5W,OAAQ0H,IAAK,CAChC,MAAMd,EAAI1F,KAAK0O,MAAMsD,KAAKhS,KAAKyU,QAAUjY,GAAKgK,GAC9CzH,EAAIiB,KAAK0O,MAAMkB,IAAI5P,KAAK0O,MAAMoB,IAAI4F,EAAGlP,GAAId,GAAI3G,GAE7CiB,KAAK0O,MAAMgB,GAAG1P,KAAK0O,MAAME,KAAM7P,IAC/B8W,EAAU5W,KAAKe,KAAK0O,MAAMmD,OAAS,EAAIrV,EAAIwD,KAAKyU,SASxD,IAAIqB,EAAK,EACT,IAAK,IAAItZ,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxBsZ,GAAMvS,KAAAG,IAAA,EAAKmS,EAAUrZ,IAIzB,OAFA2Y,EAAW/R,EAAUsQ,OAAOyB,EAAUW,GAE/B1S,EAAUkQ,UAAU6B,EAAUnV,KAAK4U,UAAY,ICnMxD,MAAOmB,EAMTrX,YAAmBsX,EAAqB,YAArBhW,KAAAgW,aALXhW,KAAAiW,MAAkB,GAMtB,IAAK,IAAIzZ,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAIK,EAAIL,EACR,IAAK,IAAIgK,EAAI,EAAGA,EAAI,EAAGA,IACnB3J,EAAS,EAAJA,EAAUmZ,EAAcnZ,IAAM,EAAOA,IAAM,EAEpDmD,KAAKiW,MAAMzZ,GAAKK,GAQjB6B,KAAKC,GACR,IAAI9B,EAAI,WACR,IAAK,IAAIL,EAAI,EAAGA,EAAImC,EAAQG,OAAQtC,IAChCK,EAAImD,KAAKiW,MAAyB,KAAlBpZ,EAAI8B,EAAQnC,KAAiBK,IAAM,EAEvD,OAAW,WAAJA,GCfT,MAAOqZ,EAWTxX,YAAmBgQ,EAA8B8F,EAAgBC,EAAkB,GAAhEzU,KAAA0O,QAA8B1O,KAAAwU,KAAgBxU,KAAAyU,UAC7DzU,KAAKmW,KAAO,IAAI1H,EAAoBC,GAUjChQ,cAAiBgQ,EAAuB0H,EAA2BnH,EAAawF,EAAkB,GACrG,MAAM0B,EAAO,IAAI1H,EAAoBC,GAC/B2H,EAAaD,GAAU,GAC7B,IAAME,EAAS,CAAC5H,EAAMsD,IAAIyC,GAAU/F,EAAMI,KAC1C,MAAM/P,EAAS,CAAC2P,EAAMsD,IAAIyC,EAAU,GAAI/F,EAAMI,KAE3B,IAAfuH,EAAIvX,OACJuX,EAAIpX,KAAKqX,IAETA,EAAID,EAAIA,EAAIvX,OAAS,GACrBC,EAAE,GAAK2P,EAAMsD,IAAIyC,EAAU4B,EAAIvX,SAGnC,IAAK,IAAItC,EAAI6Z,EAAIvX,OAAS,EAAGtC,GAAKyS,EAAKzS,IACnC8Z,EAAIH,EAAKrG,IAAIwG,EAAGvX,GAChBsX,EAAIpX,KAAKqX,GACTvX,EAAE,GAAK2P,EAAMsD,IAAIyC,EAAUjY,GAE/B,OAAO6Z,EAUJ3X,aAAgBgQ,EAAuBO,EAAawF,EAAkB,GACzE,MAAM0B,EAAO,IAAI1H,EAAoBC,GACrC,IAAM4H,EAAS,CAAC5H,EAAMsD,IAAIyC,GAAU/F,EAAMI,KAC1C,MAAM/P,EAAS,CAAC2P,EAAMsD,IAAIyC,EAAU,GAAI/F,EAAMI,KAE9C,IAAK,IAAItS,EAAI,EAAGA,GAAKyS,EAAKzS,IACtB8Z,EAAIH,EAAKrG,IAAIwG,EAAGvX,GAChBA,EAAE,GAAK2P,EAAMsD,IAAIyC,EAAUjY,GAE/B,OAAO8Z,EAOJ5X,OAAOC,GACV,OAAOqB,KAAKmW,KAAKnG,OAAOrR,EAASqB,KAAKwU,GAAIxU,KAAKwU,GAAG1V,OAAS,GAAGxB,EAO3DoB,OAAOyW,EAAgCC,EAAoB,GAE9D,IAAIE,GAAW,EACf,MAAMzE,EAAU,GAChBA,EAAG/R,OAASkB,KAAKwU,GAAG1V,OAAS,EACzB+R,EAAG/R,QAAsB,EAAZsW,IAAevE,EAAG/R,OAAqB,EAAZsW,GAE5C,IAAK,IAAI5Y,EAAI,EAAGA,EAAIqU,EAAG/R,OAAQtC,IAAK,CAChC,IAAIuC,EAAIoW,EAAS,GACjB,IAAK,IAAI3O,EAAI,EAAGA,EAAI2O,EAASrW,OAAQ0H,IAAK,CACtC,MAAMd,EAAI1F,KAAK0O,MAAMsD,KAAKhS,KAAKyU,QAAUjY,GAAKgK,GAC9CzH,EAAIiB,KAAK0O,MAAMkB,IAAI5P,KAAK0O,MAAMoB,IAAIqF,EAAS3O,GAAId,GAAI3G,GAEvD8R,EAAGrU,GAAKuC,EACRuW,EAAWA,GAAYtV,KAAK0O,MAAMyB,MAAMpR,EAAGiB,KAAK0O,MAAME,MAE1D,IAAM0G,EACF,OAAOhT,MAAMlE,UAAUc,MAAMvC,KAAKwY,EAAUnV,KAAKwU,GAAG1V,OAAS,GAEjE,MAAM4P,EAAQ1O,KAAKmW,KAAKzH,MAClB6G,EAAM,IAAIjF,EAAiBtQ,KAAKmW,MAYtC,IAAIX,EAASjS,KAAKe,MAAMuM,EAAG/R,OAAS,GAChCmS,EAAa,GACjB,KAAOuE,EAAS,EAAGA,IAAU,CACzBvE,EAAInS,OAAS,EACb,IAAK,IAAItC,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxByU,EAAIzU,GAAKqU,EAAG3R,MAAM1C,EAAGA,EAAIgZ,GAE7B,GAAI9G,EAAMyB,MAAMoF,EAAIE,IAAIxE,EAAK,EAAG,EAAGA,EAAInS,QAAS4P,EAAME,MAAO,MAEjE,GAAe,IAAX4G,EAAc,OAAOlT,MAAMlE,UAAUc,MAAMvC,KAAKwY,EAAUnV,KAAKwU,GAAG1V,OAAS,GAc/E,IAAK,IAAItC,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxByU,EAAIzU,GAAK,CAACkS,EAAMiB,IAAIkB,EAAG2E,EAAShZ,KAAKmJ,OAAOsL,EAAIzU,IAGpD,MAAMkZ,EAAU,CAAChH,EAAMI,KAAKnJ,OAAO4P,EAAII,MAAM1E,EAAK,EAAG,EAAGuE,GAAQI,WAC1DC,EAAsB,GAC5B,IAAK,IAAIrZ,EAAI,EAAGA,EAAIkS,EAAMmD,OAAS,EAAGrV,IAAK,CACvC,IAAIuC,EAAO2W,EAAG,GACd,IAAK,IAAIlP,EAAI,EAAGA,EAAIkP,EAAG5W,OAAQ0H,IAAK,CAChC,MAAMd,EAAIgJ,EAAMsD,KAAKhS,KAAKyU,QAAUjY,GAAKgK,GACzCzH,EAAI2P,EAAMkB,IAAIlB,EAAMoB,IAAI4F,EAAGlP,GAAId,GAAI3G,GAEnC2P,EAAMgB,GAAGhB,EAAME,KAAM7P,IACrB8W,EAAU5W,KAAKyP,EAAMmD,OAAS,EAAIrV,EAAIwD,KAAKyU,SAiBnDxD,EAAM,GACN,IAAK,IAAIzU,EAAI,EAAGA,EAAIgZ,EAAQhZ,IAAK,CAC7ByU,EAAIzU,GAAK,CAACkS,EAAMiB,IAAIkB,EAAGrU,KACvB,IAAK,IAAIgK,EAAI,EAAGA,EAAIqP,EAAU/W,OAAQ0H,IAClCyK,EAAIzU,GAAGyC,KAAKyP,EAAMsD,KAAKhS,KAAKyU,QAAUjY,GAAKqZ,EAAUrP,KAG7D,MAAMsP,EAAKP,EAAII,MAAM1E,EAAK,EAAG,EAAGuE,GAChC,IAAK,IAAIhZ,EAAI,EAAGA,EAAIgZ,EAAQhZ,IACxB2Y,EAASU,EAAUrZ,IAAMkS,EAAMkB,IAAIuF,EAASU,EAAUrZ,IAAKsZ,EAAGtZ,IAGlE,OAAO8F,MAAMlE,UAAUc,MAAMvC,KAAKwY,EAAUnV,KAAKwU,GAAG1V,OAAS,ICxL/D,MAAOyX,EAqLT7X,YAAY8X,GACR,GAlCIxW,KAAAyW,GAAa,EAMbzW,KAAA0W,GAAa,EAMb1W,KAAA2W,GAAa,EAMb3W,KAAA4W,GAAa,GAgBXJ,EAAc,OAEpB,IAAIK,EAAqD,CAACvZ,EAAG,EAAGwZ,EAAG,EAAGlR,EAAG,EAAGF,EAAG,GAE/E,GAA4B,iBAAjB8Q,GACP,GAAIA,EAAanY,eAAe,KAAM,CAClC,MAAM0Y,EAAKP,EACXK,EAAO,CACHvZ,EAAGiZ,EAASS,UAAUD,EAAGzZ,GACzBwZ,EAAGP,EAASS,UAAUD,EAAGD,GACzBlR,EAAG2Q,EAASS,UAAUD,EAAGnR,GACzBF,EAAG6Q,EAASU,QAAQF,EAAGrR,GAAK,SAE7B,GAAI8Q,EAAanY,eAAe,KAAM,CACzC,MAAM6Y,EAAOV,EACbK,EAAON,EAASY,SAASD,EAAKjR,EAAGiR,EAAK3Y,EAAG2Y,EAAKza,EAAGya,EAAKxR,GAAK,SAE5D,GAA4B,iBAAjB8Q,EAA2B,CACzC,IAAI3Z,EAGJ,GAAIA,EAAK0Z,EAASa,OAAOZ,IAAiBD,EAASc,OAAOb,IAAiBD,EAASe,MAAMd,GAAgB,CAEtGK,EADWha,OAIV,GAAIA,EAAI0Z,EAASgB,MAAMf,GAAe,CACvC,MAAMU,EAAOra,EACbga,EAAON,EAASY,SAASD,EAAKjR,EAAGiR,EAAK3Y,EAAG2Y,EAAKza,EAAGya,EAAKxR,IAI9D1F,KAAKyW,GAAKI,EAAKvZ,EACf0C,KAAK0W,GAAKG,EAAKC,EACf9W,KAAK2W,GAAKE,EAAKjR,EACf5F,KAAK4W,GAAKC,EAAKnR,EAjDXhH,iBAAiB4E,GACrB,OAAIA,EAAI,EAAU,EACdA,EAAI,IAAY,IACbA,EAGH5E,eAAe4E,GACnB,OAAIA,EAAI,EAAU,EACdA,EAAI,EAAU,EACXA,EA0CJ5E,aAAamC,GAChB,IAAIvD,EAAWwZ,EAAWlR,EACtBsE,EADiCxE,EAAI,EAIzC,SAAIwE,EAAQrJ,EAAIqJ,MAAM,oIAClB5M,EAAIiZ,EAASS,UAAU9M,EAAM,GAAGgE,SAAS,KAAO3K,KAAKiU,MAAMzF,OAAO0F,WAAWvN,EAAM,IAAM,IAAM,KAAO6H,OAAO2F,SAASxN,EAAM,GAAI,KAChI4M,EAAIP,EAASS,UAAU9M,EAAM,GAAGgE,SAAS,KAAO3K,KAAKiU,MAAMzF,OAAO0F,WAAWvN,EAAM,IAAM,IAAM,KAAO6H,OAAO2F,SAASxN,EAAM,GAAI,KAChItE,EAAI2Q,EAASS,UAAU9M,EAAM,GAAGgE,SAAS,KAAO3K,KAAKiU,MAAMzF,OAAO0F,WAAWvN,EAAM,IAAM,IAAM,KAAO6H,OAAO2F,SAASxN,EAAM,GAAI,KAC/G,MAAbA,EAAM,KACNxE,EAAI6Q,EAASU,QAAQlF,OAAO0F,WAAWvN,EAAM,MAE1C,CAAC5M,IAAGwZ,IAAGlR,IAAGF,MAIlBhH,aAAamC,GAChB,IAAIoF,EAAW1H,EAAW9B,EACtByN,EADiCxE,EAAI,EAIzC,SAAIwE,EAAQrJ,EAAIqJ,MAAM,8HAClBjE,EAAI8L,OAAO0F,WAAWvN,EAAM,IAAM,KAC1B,IAAGjE,EAAI,IAAMA,GACrB1H,EAAIgY,EAASU,QAAQ/M,EAAM,GAAGgE,SAAS,KAAO3K,KAAKiU,MAAMzF,OAAO0F,WAAWvN,EAAM,IAAM,KAAO6H,OAAO0F,WAAWvN,EAAM,KACtHzN,EAAI8Z,EAASU,QAAQ/M,EAAM,GAAGgE,SAAS,KAAO3K,KAAKiU,MAAMzF,OAAO0F,WAAWvN,EAAM,IAAM,KAAO6H,OAAO0F,WAAWvN,EAAM,KACrG,MAAbA,EAAM,KACNxE,EAAI6Q,EAASU,QAAQlF,OAAO0F,WAAWvN,EAAM,MAE1C,CAACjE,IAAG1H,IAAG9B,IAAGiJ,MAIlBhH,cAAcmC,GACjB,IAAMvD,EAAWwZ,EAAWlR,EAE5B,IAAIsE,EAGJ,OAAIA,EAAQrJ,EAAIqJ,MAAM,qDAIX,CAAC5M,EAHRA,EAAIyU,OAAO2F,YAAYxN,EAAM,KAAKA,EAAM,KAAM,IAGnC4M,EAFXA,EAAI/E,OAAO2F,YAAYxN,EAAM,KAAKA,EAAM,KAAM,IAEhCtE,EADdA,EAAImM,OAAO2F,YAAYxN,EAAM,KAAKA,EAAM,KAAM,IAC7BxE,EARX,MAWDwE,EAAQrJ,EAAIqJ,MAAM,+DAIhB,CAAC5M,EAHRA,EAAIyU,OAAO2F,SAASxN,EAAM,GAAI,IAGnB4M,EAFXA,EAAI/E,OAAO2F,SAASxN,EAAM,GAAI,IAEhBtE,EADdA,EAAImM,OAAO2F,SAASxN,EAAM,GAAI,IACbxE,EAfX,GAmBPhH,cAAcmC,GACjB,GAAI0V,EAASoB,WAAWC,IAAI/W,GAAM,CAC9B,MAAMhE,EAAI0Z,EAASoB,WAAWta,IAAIwD,GAClC,MAAO,CAACvD,EAAGT,EAAES,EAAGwZ,EAAGja,EAAEia,EAAGlR,EAAG/I,EAAE+I,EAAGF,EAAG,GAEvC,OAAO,EAEJhH,gBAAgBpB,EAAWwZ,EAAWlR,EAAWF,EAAY,GAChE,MAAM7I,EAAI,IAAI0Z,EAKd,OAJA1Z,EAAE4Z,GAAKF,EAASS,UAAU1Z,GAC1BT,EAAE6Z,GAAKH,EAASS,UAAUF,GAC1Bja,EAAE8Z,GAAKJ,EAASS,UAAUpR,GAC1B/I,EAAE+Z,GAAKL,EAASU,QAAQvR,GACjB7I,EAEH6B,gBAAgBmZ,EAAY3G,EAAYjL,GAG5C,OAFIA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACR,EAAJA,EAAQ,EAAU4R,GAAM3G,EAAK2G,GAAM5R,EAAI,EACnC,EAAJA,EAAQ,EAAUiL,EACd,EAAJjL,EAAQ,EAAU4R,GAAM3G,EAAK2G,IAAO,EAAI,EAAI5R,GAAK,EAC9C4R,EAEJnZ,gBAAgBuH,EAAW1H,EAAW9B,EAAWiJ,EAAY,GAEhEO,GAAQ,IAAK1H,EAAIgY,EAASU,QAAQ1Y,GAC9B0H,EAAI,IAAGA,EAAI,IAAMA,GACrB,MAAMiL,GAFgCzU,EAAI8Z,EAASU,QAAQxa,KAE3C,GAAMA,GAAK8B,EAAI,GAAK9B,EAAI8B,EAAI9B,EAAI8B,EAC1CsZ,EAAS,EAAJpb,EAAQyU,EACnB,MAAO,CACH5T,EAAGiZ,EAASuB,SAASD,EAAI3G,EAAIjL,EAAI,EAAI,GACrC6Q,EAAGP,EAASuB,SAASD,EAAI3G,EAAIjL,GAC7BL,EAAG2Q,EAASuB,SAASD,EAAI3G,EAAIjL,EAAI,EAAI,GACrCP,EAAG6Q,EAASU,QAAQvR,IAGrBhH,gBAAgBuH,EAAW1H,EAAW9B,EAAWiJ,EAAY,GAEhEO,GAAQ,IAAK1H,EAAIgY,EAASU,QAAQ1Y,GAAI9B,EAAI8Z,EAASU,QAAQxa,GACvDwJ,EAAI,IAAGA,EAAI,IAAMA,GACrB,MAAOpJ,EAAI,IAAI0Z,EACTrF,EAAKzU,GAAK,GAAMA,GAAK8B,EAAI,GAAK9B,EAAI8B,EAAI9B,EAAI8B,EAC1CsZ,EAAS,EAAJpb,EAAQyU,EAKnB,OAJArU,EAAE4Z,GAAKF,EAASuB,SAASD,EAAI3G,EAAIjL,EAAI,EAAI,GACzCpJ,EAAE6Z,GAAKH,EAASuB,SAASD,EAAI3G,EAAIjL,GACjCpJ,EAAE8Z,GAAKJ,EAASuB,SAASD,EAAI3G,EAAIjL,EAAI,EAAI,GACzCpJ,EAAE+Z,GAAKL,EAASU,QAAQvR,GACjB7I,EAEJ6B,gBAAgBqZ,EAAcrS,EAAY,GAC7C,MAAM7I,EAAI,IAAI0Z,EAKd,OAJA1Z,EAAE4Z,GAAKF,EAASS,UAAUe,GAC1Blb,EAAE6Z,GAAKH,EAASS,UAAUe,GAC1Blb,EAAE8Z,GAAKJ,EAASS,UAAUe,GAC1Blb,EAAE+Z,GAAKL,EAASU,QAAQvR,GACjB7I,EAEXS,QACI,OAAO0C,KAAKyW,GAEhBK,QACI,OAAO9W,KAAK0W,GAEhB9Q,QACI,OAAO5F,KAAK2W,GAEhBjR,QACI,OAAO1F,KAAK4W,GAETlY,WACH,OAAgB,IAAZsB,KAAK4W,GAAiB5W,KAAKgY,eACLhY,KAAKiY,SAE5BvZ,SACH,MAAO,QACCsB,KAAKyW,GAAGjU,SAAS,MAAMtD,OAAO,OAC9Bc,KAAK0W,GAAGlU,SAAS,MAAMtD,OAAO,OAC9Bc,KAAK2W,GAAGnU,SAAS,MAAMtD,OAAO,GAEnCR,cACH,aAAcsB,KAAKyW,MAAMzW,KAAK0W,MAAM1W,KAAK2W,MAEtCjY,eACH,aAAcsB,KAAKyW,MAAMzW,KAAK0W,MAAM1W,KAAK2W,MAAM3W,KAAK4W,MAEjDlY,SACH,MAAMpB,EAAI0C,KAAKyW,GAAK,IAAKK,EAAI9W,KAAK0W,GAAK,IAAK9Q,EAAI5F,KAAK2W,GAAK,IACpDpQ,EAAMhD,KAAKgD,IAAIuQ,EAAGlR,GAClBR,EAAM7B,KAAK6B,IAAI0R,EAAGlR,GACxB,IAAMK,EAAI,EAAG1H,EAAI,EACjB,MAAM9B,GAAK8J,EAAMnB,GAAO,EAAGvI,EAAI0J,EAAMnB,EAQrC,OAPImB,IAAQnB,IAIRa,EAAQ,IAHYA,EAAXM,IAAQjJ,GAAQwZ,EAAIlR,GAAK/I,EACzB0J,IAAQuQ,GAAQlR,EAAItI,GAAKT,EAAI,GACbS,EAAIwZ,GAAKja,EAAI,IACxBoJ,EAAI,EAAI,IAAM,GAC5B1H,EAAI1B,GAAKJ,EAAI,GAAM8J,EAAMnB,EAAM,EAAImB,EAAMnB,IAEtC,CAACa,IAAG1H,IAAG9B,IAAGiJ,EAAG1F,KAAK4W,IAEtBlY,cACH,MAAM7B,EAAImD,KAAKkY,SACf,aAAcrb,EAAEoJ,KAAKpJ,EAAE0B,MAAM1B,EAAEJ,MAE5BiC,eACH,MAAM7B,EAAImD,KAAKkY,SACf,aAAcrb,EAAEoJ,KAAKpJ,EAAE0B,MAAM1B,EAAEJ,MAAMuD,KAAK4W,OA1X/BL,EAAAoB,WAAa,IAAIQ,IAA+C,CAC3E,CAAC,MAAwB,CAAC7a,EAAG,IAAKwZ,EAAK,EAAGlR,EAAK,IAC/C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAK,IAC/C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAK,IAC/C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAK,IAC/C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,MAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,uBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,iBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,iBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAI,GAAIwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,QAAwB,CAACtI,EAAK,EAAGwZ,EAAK,EAAGlR,EAAK,IAC/C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,YAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,QAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,iBAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,cAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,YAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,QAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAK,IAC/C,CAAC,WAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAI,KAC9C,CAAC,iBAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,oBAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,mBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,iBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,kBAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAK,EAAGwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,iBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAI,GAAIwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAK,EAAGwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAK,EAAGwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAK,EAAGwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAI,GAAIwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,gBAAwB,CAACtI,EAAI,GAAIwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,kBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,aAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAI,GAAIwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,cAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,SAAwB,CAACtI,EAAG,IAAKwZ,EAAK,EAAGlR,EAAG,MAC7C,CAAC,eAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,kBAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,WAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,UAAwB,CAACtI,EAAG,IAAKwZ,EAAI,GAAIlR,EAAI,KAC9C,CAAC,gBAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,OAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,MAC7C,CAAC,YAAwB,CAACtI,EAAG,IAAKwZ,EAAG,IAAKlR,EAAG,QC1IrD,MAAMwS,ECAA,MACK1Z,qBAAqBT,GACxB,OAAQc,GACGgT,OAAOhT,EAAEsZ,QAAQpa,IAIzBS,iBAAiBT,GACpB,OAAQc,GACGgT,OAAOhT,EAAEuZ,YAAYra,MDTbsa,cAAc,GAGnC,MAAOC,EACT9Z,YAAmB4E,EAAkBK,GAAlB3D,KAAAsD,IAAkBtD,KAAA2D,IAE9BjF,WACH,SAAUsB,KAAKsD,KAAKtD,KAAK2D,KAK3B,MAAO8U,EACT/Z,YAAmB4E,EAAkBK,GAAlB3D,KAAAsD,IAAkBtD,KAAA2D,IAE9BjF,kBAAkBga,EAAaC,GAClC,OAAO,IAAIF,EAASE,EAAGrV,EAAIoV,EAAGpV,EAAGqV,EAAGhV,EAAI+U,EAAG/U,GAExCjF,SACH,OAAkB,IAAXsB,KAAKsD,GAAsB,IAAXtD,KAAK2D,EAEzBjF,YACH,OAAO6E,KAAKqV,KAAKrV,KAAAG,IAAA1D,KAAKsD,EAAK,GAAIC,KAAAG,IAAA1D,KAAK2D,EAAK,IAGtCjF,WACH,IAAIma,EAAQtV,KAAKuV,KAAK9Y,KAAKsD,EAAIC,KAAKqV,KAAKrV,KAAAG,IAAA1D,KAAKsD,EAAK,GAAIC,KAAAG,IAAA1D,KAAK2D,EAAK,KAKjE,OAJI,EAAI3D,KAAK2D,IAETkV,EAAkB,EAAVtV,KAAKwV,GAASF,GAEnBA,EAGJna,gBAAgBsa,EAAcC,GACjC,MAAMC,EAAQ3V,KAAKqV,KAAKrV,KAAAG,IAAAsV,EAAG1V,EAAK,GAAIC,KAAAG,IAAAsV,EAAGrV,EAAK,IACtCwV,EAAQ5V,KAAKqV,KAAKrV,KAAAG,IAAAuV,EAAG3V,EAAK,GAAIC,KAAAG,IAAAuV,EAAGtV,EAAK,IAC5C,OAAOJ,KAAKuV,MAAME,EAAG1V,EAAI2V,EAAG3V,EAAI0V,EAAGrV,EAAIsV,EAAGtV,IAAMuV,EAAQC,IAErDza,WACH,SAAUsB,KAAKsD,KAAKtD,KAAK2D,KAK3B,MAAOyV,EACT1a,YAAmB4E,EAAkBK,EAAkBY,EAAkB0B,GAAtDjG,KAAAsD,IAAkBtD,KAAA2D,IAAkB3D,KAAAuE,IAAkBvE,KAAAiG,KAKvE,MAAOoT,EAcT3a,YAAY4a,EAAiBC,EAAcC,EAAcC,EAAcC,EAAaC,GAV7E3Z,KAAA4Z,IAAc,EACd5Z,KAAAwZ,IAAc,EACdxZ,KAAA0Z,GAAa,EACb1Z,KAAAuZ,IAAc,EACdvZ,KAAAyZ,IAAc,EACdzZ,KAAA2Z,GAAa,EAMVL,IACoB,iBAAfA,GACPtZ,KAAK4Z,IAAMN,EAAWM,KAAO5Z,KAAK4Z,IAClC5Z,KAAKuZ,IAAMD,EAAWC,KAAOvZ,KAAKuZ,IAClCvZ,KAAKwZ,IAAMF,EAAWE,KAAOxZ,KAAKwZ,IAClCxZ,KAAKyZ,IAAMH,EAAWG,KAAOzZ,KAAKyZ,IAClCzZ,KAAK0Z,GAAMJ,EAAWI,IAAO1Z,KAAK0Z,GAClC1Z,KAAK2Z,GAAML,EAAWK,IAAO3Z,KAAK2Z,KAElC3Z,KAAK4Z,IAAMN,GAActZ,KAAK4Z,IAC9B5Z,KAAKuZ,IAAMA,GAAOvZ,KAAKuZ,IACvBvZ,KAAKwZ,IAAMA,GAAOxZ,KAAKwZ,IACvBxZ,KAAKyZ,IAAMA,GAAOzZ,KAAKyZ,IACvBzZ,KAAK0Z,GAAMA,GAAO1Z,KAAK0Z,GACvB1Z,KAAK2Z,GAAMA,GAAO3Z,KAAK2Z,KAGxBjb,WACH,SAAUsB,KAAK4Z,OAAO5Z,KAAKuZ,OAAOvZ,KAAKwZ,OAAOxZ,KAAKyZ,OAAOzZ,KAAK0Z,MAAM1Z,KAAK2Z,KAEvEjb,aACH,OAAoB,IAAbsB,KAAK4Z,KAA0B,IAAb5Z,KAAKwZ,KAAyB,IAAZxZ,KAAK0Z,IAC/B,IAAb1Z,KAAKuZ,KAA0B,IAAbvZ,KAAKyZ,KAAyB,IAAZzZ,KAAK2Z,GAG1Cjb,MAAM4E,EAAWK,GACpB,OAAO3D,KAAK2F,OAAO,IAAI0T,EAAiB/V,EAAG,EAAG,EAAGK,EAAG,EAAG,IAEpDjF,UAAU4E,EAAWK,GACxB,OAAO3D,KAAK2F,OAAO,IAAI0T,EAAiB,EAAG,EAAG,EAAG,EAAG/V,EAAGK,IAEpDjF,OAAOma,GACV,OAAO7Y,KAAK2F,OAAO,IAAI0T,EACnB9V,KAAKsW,IAAIhB,GAAQtV,KAAKuW,IAAIjB,IAAStV,KAAKuW,IAAIjB,GAAQtV,KAAKsW,IAAIhB,GAAQ,EAAG,IAEzEna,MAAMma,GACT,OAAO7Y,KAAK2F,OAAO,IAAI0T,EAAiB,EAAG,EAAG9V,KAAKwW,IAAIlB,GAAQ,EAAG,EAAG,IAElEna,MAAMma,GACT,OAAO7Y,KAAK2F,OAAO,IAAI0T,EAAiB,EAAG9V,KAAKwW,IAAIlB,GAAQ,EAAG,EAAG,EAAG,IAElEna,OAAOuS,GAIV,OAAO,IAAIoI,EACPrZ,KAAK4Z,IAAM3I,EAAI2I,IAAM5Z,KAAKwZ,IAAMvI,EAAIsI,IACpCvZ,KAAKuZ,IAAMtI,EAAI2I,IAAM5Z,KAAKyZ,IAAMxI,EAAIsI,IACpCvZ,KAAK4Z,IAAM3I,EAAIuI,IAAMxZ,KAAKwZ,IAAMvI,EAAIwI,IACpCzZ,KAAKuZ,IAAMtI,EAAIuI,IAAMxZ,KAAKyZ,IAAMxI,EAAIwI,IACpCzZ,KAAK4Z,IAAM3I,EAAIyI,GAAM1Z,KAAKwZ,IAAMvI,EAAI0I,GAAK3Z,KAAK0Z,GAC9C1Z,KAAKuZ,IAAMtI,EAAIyI,GAAM1Z,KAAKyZ,IAAMxI,EAAI0I,GAAK3Z,KAAK2Z,IAO/Cjb,SAASsb,EAAarW,GAIzB,MAAsB,iBAAXqW,EACA,IAAIxB,EACPJ,EAAGpY,KAAK4Z,IAAMI,EAAO1W,EAAItD,KAAKwZ,IAAMQ,EAAOrW,EAAI3D,KAAK0Z,IACpDtB,EAAGpY,KAAKuZ,IAAMS,EAAO1W,EAAItD,KAAKyZ,IAAMO,EAAOrW,EAAI3D,KAAK2Z,KAGjD,CACHvB,EAAGpY,KAAK4Z,IAAMI,EAASha,KAAKwZ,IAAO7V,EAAe3D,KAAK0Z,IACvDtB,EAAGpY,KAAKuZ,IAAMS,EAASha,KAAKyZ,IAAO9V,EAAe3D,KAAK2Z,KAW5Djb,aACH,OAAO,IAAI2a,EACNrZ,KAAKyZ,KACLzZ,KAAKuZ,KACLvZ,KAAKwZ,IACLxZ,KAAK4Z,IACN5Z,KAAKwZ,IAAMxZ,KAAK2Z,GAAM3Z,KAAK0Z,GAAM1Z,KAAKyZ,IACtCzZ,KAAK0Z,GAAM1Z,KAAKuZ,IAAMvZ,KAAK4Z,IAAM5Z,KAAK2Z,KE9F5C,MAAOM,EACTvb,YACWyN,EACA7I,EAAkBK,EAClBmC,EAAsBC,GAFtB/F,KAAAmM,MACAnM,KAAAsD,IAAkBtD,KAAA2D,IAClB3D,KAAA8F,QAAsB9F,KAAA+F,UAK/B,MAAgBmU,GAIhB,MAAOC,UAAiCD,EAE1Cxb,YACYuK,EACAmR,EAAoBC,EAAoBC,EAAoBC,GACpElI,QAFQrS,KAAAiJ,KACAjJ,KAAAoa,KAAoBpa,KAAAqa,KAAoBra,KAAAsa,KAAoBta,KAAAua,KAEpEva,KAAKwa,+BAAiCvR,yCAA0CmR,UAAWC,UAAWC,UAAWC,SAE9G7b,aAAaqG,EAAgB0V,EAAeC,EAAkB,GACjE1a,KAAKwa,0BAA4BzV,kBAAuB0V,oBAAwBC,UAE7Ehc,QACH,OAAOsB,KAAKwa,QAAU,oBAEnB9b,WACH,cAAesB,KAAKiJ,OAKtB,MAAO0R,UAAkCT,EAG3Cxb,YACYuK,EACA2R,EAAoBC,EAAoBvd,EACxCoX,EAAoBoG,GAC5BzI,QAHQrS,KAAAiJ,KACAjJ,KAAA4a,KAAoB5a,KAAA6a,KAAoB7a,KAAA1C,IACxC0C,KAAA0U,KAAoB1U,KAAA8a,KAE5B9a,KAAKwa,+BAAiCvR,yCAA0C2R,UAAWC,SAAUvd,UAAUoX,UAAWoG,SAEvHpc,aAAaqG,EAAgB0V,EAAeC,EAAkB,GACjE1a,KAAKwa,0BAA4BzV,kBAAuB0V,oBAAwBC,UAE7Ehc,QACH,OAAOsB,KAAKwa,QAAU,oBAEnB9b,WACH,cAAesB,KAAKiJ,OAKtB,MAAO8R,EACTrc,YACYuK,EACA+R,GADAhb,KAAAiJ,KACAjJ,KAAAgb,YAELtc,QACH,MAAM8b,+BAC2Bxa,KAAKgb,UAAUlV,kBAAkB9F,KAAKgb,UAAUjV,4BAC9D/F,KAAKgb,UAAU7O,UAClC,sBAAuBnM,KAAKiJ,iFAClBjJ,KAAKgb,UAAU1X,SAAStD,KAAKgb,UAAUrX,gBACnC3D,KAAKgb,UAAUlV,kBAAkB9F,KAAKgb,UAAUjV,WAAWyU,cAEtE9b,WACH,cAAesB,KAAKiJ,OA4D5B,MAAMgS,EA4EFvc,YAAYsH,GACR,GA5EGhG,KAAAkb,YAAsB,EAQtBlb,KAAAmb,yBAA0D,cAE1Dnb,KAAAob,WAAqB,EAKrBpb,KAAAqb,YAAsB,gBACtBrb,KAAAsb,cAAwB,EACxBtb,KAAAub,cAAwB,EAExBvb,KAAAwb,YAA6B,KAc7Bxb,KAAAyb,KAAe,gCAMfzb,KAAA0b,UAA4B,QAS5B1b,KAAA2b,aAAkC,OAMlC3b,KAAA4b,QAAwB,OACxB5b,KAAA6b,eAAyB,EAKzB7b,KAAA8b,SAA0B,QAC1B9b,KAAA+b,UAAoB,EACpB/b,KAAAgc,WAAqB,EAErBhc,KAAAic,YAAsB,QACtBjc,KAAAkc,UAAoB,QAEpBlc,KAAAmc,IAAwB,IAAI9C,EAC5BrZ,KAAAoc,aAA+B,KAC/Bpc,KAAAqc,kBAAoC,KACpCrc,KAAAsc,QAA4C,GAE5Ctc,KAAAuc,SAAqB,GACrBvc,KAAAwc,SAAmB,GAGhBxW,EAAN,CACA,IAAK,MAAMjI,KAAOiC,KACVA,KAAK3B,eAAeN,IAAQiI,EAAI3H,eAAeN,KAC9CiC,KAAajC,GAAQiI,EAAYjI,IAG1CiC,KAAKsc,QAAUha,MAAMD,KAAKrC,KAAKsc,WAQjC,MAAOG,EAiOT/d,cAPQsB,KAAA0c,cAAyC,GACzC1c,KAAA2c,OAA2C,GAC3C3c,KAAAwa,QAAU,GACVxa,KAAA4c,aAAe,GACf5c,KAAA6c,QAAU,EACV7c,KAAA8c,SAA0B,KA44B1B9c,KAAA+c,iBAAmB,KAz4BvB/c,KAAK0c,cAAczd,KAAK,IAAIgc,GAjOhCC,kBACI,OAAOlb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGoc,YAE7DA,gBAAuBzd,GACnBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGoc,YAAczd,EAGpE0d,+BACI,OAAOnb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGqc,yBAE7DA,6BAAoC1d,GAChCuC,KAAKwb,YAAc,KACnBxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGqc,yBAA2B1d,EAGjF2d,iBACI,OAAOpb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGsc,WAE7DA,eAAsB3d,GAClBuC,KAAKwb,YAAc,KACnBxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGsc,WAAa3d,EAEnE4d,kBACI,OAAOrb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGuc,YAE7DA,gBAAuB5d,GACnBuC,KAAKwb,YAAc,KACnBxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGuc,YAAc5d,EAEpE6d,oBACI,OAAOtb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGwc,cAE7DA,kBAAyB7d,GACrBuC,KAAKwb,YAAc,KACnBxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGwc,cAAgB7d,EAEtE8d,oBACI,OAAOvb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGyc,cAE7DA,kBAAyB9d,GACrBuC,KAAKwb,YAAc,KACnBxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGyc,cAAgB9d,EAEtE+d,kBACI,OAAOxb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG0c,YAE7DA,gBAAwB/d,GACpBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG0c,YAAc/d,EAepEge,WACI,OAAOzb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG2c,KAgB7DA,SAAgBhe,GACZuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG2c,KAAOhe,EAO7Die,gBACI,OAAO1b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG4c,UAO7DA,cAAqBje,GACjBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG4c,UAAYje,EAOlEke,mBACI,OAAO3b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG6c,aAO7DA,iBAAwBle,GACpBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG6c,aAAele,EAOrEme,cACI,OAAO5b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG8c,QAM7DA,YAAmBne,GACfuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG8c,QAAUne,EAEhEoe,qBACI,OAAO7b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG+c,eAE7DA,mBAA0Bpe,GACtBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG+c,eAAiBpe,EAMvEqe,eACI,OAAO9b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGgd,SAM7DA,aAAoBre,GAChBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGgd,SAAWre,EAEjEse,gBACI,OAAO/b,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGid,UAE7DA,cAAqBte,GACjBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGid,UAAYte,EAElEue,iBACI,OAAOhc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGkd,WAE7DA,eAAsBve,GAClBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGkd,WAAave,EAGnEwe,kBACI,OAAOjc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGmd,YAE7DA,gBAAuBxe,GACnBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGmd,YAAcxe,EAAM+E,WAE1E0Z,gBACI,OAAOlc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGod,UAE7DA,cAAqBze,GACjBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGod,UAAYze,EAAM+E,WAGxE2Z,UACI,OAAOnc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGqd,IAE7DA,QAAgB1e,GACZuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGqd,IAAM1e,EAE5D2e,mBACI,OAAOpc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGsd,aAE7DA,iBAAyB3e,GACrBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGsd,aAAe3e,EAErE4e,wBACI,OAAOrc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGud,kBAE7DA,sBAA8B5e,GAC1BuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGud,kBAAoB5e,EAE1E6e,cACI,OAAOtc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGwd,QAE7DA,YAAoB7e,GAChBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGwd,QAAU7e,EAGhE8e,eACI,OAAOvc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGyd,SAE7DA,aAAqB9e,GACjBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAGyd,SAAW9e,EAEjE+e,eACI,OAAOxc,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG0d,SAE7DA,aAAqB/e,GACjBuC,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,GAAG0d,SAAW/e,EAGjEuf,6BACI,OAA+B,IAAxBhd,KAAKsc,QAAQxd,QAA0D,MAA1CkB,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GAcpEJ,oBAAoBoe,GACvB,MAAMjgB,EAAI,IAAI4f,EAGd,OAFA5f,EAAEigB,SAAWA,EACbjgB,EAAEggB,SAAU,IAAII,MAAOC,UAChBrgB,EAGJ6B,OAAOye,EAAiBC,EAAe,MAC1C,MAAMC,EAAQ,qCACRC,EAAU,6CACVC,cAAmBJ,EAAQ7Z,KAAK6Z,EAAQxZ,KAAKwZ,EAAQ5Y,KAAK4Y,EAAQlX,KAClEuX,aACExd,KAAK2c,OAAOrN,IAAIhM,GAAkB,iBAANA,EAAiBA,EAAIA,EAAEma,SAASC,KAAK,eAGzE,GAAM1d,KAAK8c,SAGJ,CACH,IAAIa,EAAO3d,KAAK8c,SAAStd,QAAQ,cAAe,IAEhD,CACI,MAAMoe,EAAK,8DAEPD,EADAC,EAAG3W,KAAK0W,GACDA,EAAKne,QAAQoe,eAAiBT,EAAQ5Y,IAAI6Y,QAE1CO,EAAKne,QAAQ,wBAAyB2d,EAAQ5Y,IAAI6Y,OAGjE,CACI,MAAMQ,EAAK,+DAEPD,EADAC,EAAG3W,KAAK0W,GACDA,EAAKne,QAAQoe,gBAAkBT,EAAQlX,IAAImX,QAE3CO,EAAKne,QAAQ,yBAA0B2d,EAAQlX,IAAImX,OAGlE,CACI,MAAMQ,EAAK,gEAEPD,EADAC,EAAG3W,KAAK0W,GACDA,EAAKne,QAAQoe,QAAUL,OAEvBI,EAAKne,QAAQ,iBAAkB+d,MAW9C,OAPMI,EAAKzT,MAAM,oCACbyT,EAAOA,EAAKne,QAAQ,iBAAkB8d,OAEpCK,EAAKzT,MAAM,8BACbyT,EAAOA,EAAKne,QAAQ,iBAAkB6d,UAGhCM,MAASH,MAASxd,KAAK4c,eAAe5c,KAAKwa,gBArCrD,cAAe6C,KAASC,0BAAgCH,EAAQ5Y,IAAI6Y,cAAiBD,EAAQlX,IAAImX,MAASG,OACtGC,MAASxd,KAAK4c,eAAe5c,KAAKwa,gBAwCvC9b,UAAUye,EAAiBC,EAAe,KAAMxe,EAAqB,KACxE,MAAO,6BACHH,EAAOiE,OAAO9B,EAAaid,aAAa7d,KAAK8d,OAAOX,EAASC,IAAQxe,GAItEF,OACH,MAAMH,EAAI,IAAI0c,EAAsBjb,KAAK0c,cAAc1c,KAAK0c,cAAc5d,OAAS,IACnFkB,KAAK0c,cAAczd,KAAKV,GAGrBG,QAAQqf,GAAuB,GAClC,GAAIA,EACI,EAAI/d,KAAK0c,cAAc5d,QAAQkB,KAAK0c,cAAcsB,WAEtD,GAAI,EAAIhe,KAAK0c,cAAc5d,OAAQ,CAC/B,MAAMwd,EAAUtc,KAAKsc,QACf2B,EAAMje,KAAKoc,aACX8B,EAAUle,KAAKqc,kBAErBrc,KAAK0c,cAAcsB,MAEnBhe,KAAKsc,QAAUA,EACftc,KAAKoc,aAAe6B,EACpBje,KAAKqc,kBAAoB6B,GAM9Bxf,MAAM4E,EAAWK,GACpB,GAA+B,OAA3B3D,KAAKqc,kBAA4B,CACjC,MAAM8B,GAAK,IAAI9E,GAAmB+E,MAAM9a,EAAGK,GAC3C3D,KAAKqc,kBAAoB8B,EAAGE,SAASre,KAAKqc,mBAE9Crc,KAAKmc,IAAMnc,KAAKmc,IAAIiC,MAAM9a,EAAGK,GAG1BjF,UAAU4E,EAAWK,GACxB,GAA+B,OAA3B3D,KAAKqc,kBAA4B,CACjC,MAAM8B,GAAK,IAAI9E,GAAmBiF,UAAUhb,EAAGK,GAC/C3D,KAAKqc,kBAAoB8B,EAAGE,SAASre,KAAKqc,mBAE9Crc,KAAKmc,IAAMnc,KAAKmc,IAAImC,UAAUhb,EAAGK,GAG9BjF,OAAOma,GACV,GAA+B,OAA3B7Y,KAAKqc,kBAA4B,CACjC,MAAM8B,GAAK,IAAI9E,GAAmBkF,OAAO1F,GACzC7Y,KAAKqc,kBAAoB8B,EAAGE,SAASre,KAAKqc,mBAE9Crc,KAAKmc,IAAMnc,KAAKmc,IAAIoC,OAAO1F,GAGxBna,UAAUkb,EAAaL,EAAaC,EAAaC,EAAaC,EAAYC,GAC7E,MAAMwE,EAAK,IAAI9E,EAAiBO,EAAKL,EAAKC,EAAKC,EAAKC,EAAIC,GACzB,OAA3B3Z,KAAKqc,oBACLrc,KAAKqc,kBAAoB8B,EAAGE,SAASre,KAAKqc,oBAC9Crc,KAAKmc,IAAMnc,KAAKmc,IAAIxW,OAAOwY,GAGxBzf,aAAakb,EAAaL,EAAaC,EAAaC,EAAaC,EAAYC,GAChF3Z,KAAKqc,kBAAoB,KACzBrc,KAAKmc,IAAM,IAAI9C,EAAiBO,EAAKL,EAAKC,EAAKC,EAAKC,EAAIC,GAIrDjb,YACHsB,KAAKsc,QAAU,GACftc,KAAKoc,aAAe,KACpBpc,KAAKqc,kBAAoB,KAGtB3d,YACHsB,KAAKsc,QAAQrd,KAAK,KAClBe,KAAKoc,aAAe,KACpBpc,KAAKqc,kBAAoB,KAItB3d,OAAO4E,EAAWK,GACrB,MAAMrF,EAAI,IAAIka,EAAQlV,EAAGK,GACzB3D,KAAKsc,QAAQrd,KAAK,IAAKe,KAAKmc,IAAIkC,SAAS/f,IACzC0B,KAAKoc,aAAepc,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GACvDkB,KAAKqc,kBAAoB/d,EAGtBI,OAAO4E,EAAWK,KAAc6a,GACnC,IAAIlgB,EAAI,IAAIka,EAAQlV,EAAGK,GAEvB,GADA3D,KAAKsc,QAAQrd,KAAK,IAAKe,KAAKmc,IAAIkC,SAAS/f,IACrCkgB,GAASA,EAAM1f,OAAS,GAAM,EAC9B,IAAK,IAAItC,EAAI,EAAGA,EAAIgiB,EAAM1f,UAClB0f,EAAM1f,QAAWtC,EAAI,GADKA,GAAK,EAEnC8B,EAAI,IAAIka,EAAQgG,EAAMhiB,GAAIgiB,EAAMhiB,EAAI,IACpCwD,KAAKsc,QAAQrd,KAAKe,KAAKmc,IAAIkC,SAAS/f,IAG5C0B,KAAKoc,aAAepc,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GACvDkB,KAAKqc,kBAAoB/d,EAEtBI,iBAAiB+f,EAAaC,EAAapb,EAAWK,KAAc6a,GACvE,IAAIlgB,EAAI,IAAIka,EAAQlV,EAAGK,GAIvB,GAHA3D,KAAKsc,QAAQrd,KAAK,IACde,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQiG,EAAKC,IACnC1e,KAAKmc,IAAIkC,SAAS/f,IAClBkgB,GAASA,EAAM1f,OAAS,GAAM,EAC9B,IAAK,IAAItC,EAAI,EAAGA,EAAIgiB,EAAM1f,UAClB0f,EAAM1f,QAAWtC,EAAI,GADKA,GAAK,EAEnC8B,EAAI,IAAIka,EAAQgG,EAAMhiB,GAAIgiB,EAAMhiB,EAAI,IACpCwD,KAAKsc,QAAQrd,KAAKe,KAAKmc,IAAIkC,SAAS/f,IAG5C0B,KAAKoc,aAAepc,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GACvDkB,KAAKqc,kBAAoB/d,EAGtBI,cAAcigB,EAAcC,EAAcC,EAAcC,EAAcxb,EAAWK,KAAc6a,GAClG,IAAIlgB,EAAI,IAAIka,EAAQlV,EAAGK,GAKvB,GAJA3D,KAAKsc,QAAQrd,KAAK,IACde,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQmG,EAAMC,IACpC5e,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQqG,EAAMC,IACpC9e,KAAKmc,IAAIkC,SAAS/f,IAClBkgB,GAASA,EAAM1f,OAAS,GAAM,EAC9B,IAAK,IAAItC,EAAI,EAAGA,EAAIgiB,EAAM1f,OAAQtC,GAAK,EACnC8B,EAAI,IAAIka,EAAQgG,EAAMhiB,GAAIgiB,EAAMhiB,EAAI,IACpCwD,KAAKsc,QAAQrd,KAAKe,KAAKmc,IAAIkC,SAAS/f,IAG5C0B,KAAKoc,aAAepc,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GACvDkB,KAAKqc,kBAAoB/d,EAStBI,IAAI4E,EAAWK,EAAWob,EAAgBC,EAAoBC,EAAkBC,GAAyB,GAC5G,MAAMC,EAAU5b,KAAKC,IAAIyb,EAAWD,IAAgB,EAAIzb,KAAKwV,GAEzDxV,KAAKC,IAAIwb,GAAe,EAAIzb,KAAKwV,KAAKiG,GAA2B,EAAIzb,KAAKwV,IAC1EiG,EAAa,IAAyBA,EAAc,EAAIzb,KAAKwV,GAAMiG,GACnEzb,KAAKC,IAAIyb,GAAe,EAAI1b,KAAKwV,KAAKkG,GAA2B,EAAI1b,KAAKwV,IAC1EkG,EAAa,IAAyBA,EAAc,EAAI1b,KAAKwV,GAAMkG,GAEnEE,EACAF,EAAWD,EAAc,EAAIzb,KAAKwV,IAE9BmG,KACCF,EAAYC,GAAY,CAACA,EAAUD,IAEpCC,EAAWD,IACXC,GAAuB,EAAI1b,KAAKwV,KAGxC,IAAIF,EAAQoG,EAAWD,EACnB1hB,EAAI,EACR,MAAM8hB,EAAO7b,KAAKwV,GAAK,EAGjBsG,EAAM,GAAK9b,KAAKqV,KAAK,GAAK,GAAM,EAChC0G,GAAM,IAAIjG,GAAmBiF,UAAUhb,EAAGK,GAAGya,MAAMW,EAAQA,GAEjE,IAAIQ,EAAoB,GAGxB,KAAOH,EAAOvG,EAAOvb,GAAK8hB,EAAMvG,GAASuG,EAAM,CAC3C,MAAMjB,EAAKmB,EAAIf,OAAOS,EAAa1hB,GAEb,IAAlBiiB,EAAOzgB,QACPygB,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAQ,EAAG,KAE3C+G,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAS,EAAG6G,KACxCE,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAQ6G,EAAK,KACzCE,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAS,EAAI,KAG7C,MAAMgH,EAAM,EAAIjc,KAAKwW,IAAIlB,EAAQ,GAAM,EACvC,CACI,MAAMsF,EAAKmB,EAAIf,OAAOS,EAAa1hB,GAEb,IAAlBiiB,EAAOzgB,QACPygB,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAQ,EAAG,KAE3C+G,EAAOtgB,KAAKkf,EAAGE,SAAS,IAAI7F,EAAQ,EAAGgH,KACvCD,EAAOtgB,KAAKkf,EAAGE,SACX,IAAI7F,EACAjV,KAAKsW,IAAIhB,GAAS2G,EAAKjc,KAAKuW,IAAIjB,GAChCtV,KAAKuW,IAAIjB,GAAS2G,EAAKjc,KAAKsW,IAAIhB,MACxC0G,EAAOtgB,KAAKkf,EAAGE,SACX,IAAI7F,EACAjV,KAAKsW,IAAIhB,GACTtV,KAAKuW,IAAIjB,MAEjBqG,IAAeK,EAASA,EAAO3J,WAEnC,MAAMtX,EAAIihB,EAAOA,EAAOzgB,OAAS,GACjCygB,EAASA,EAAOjQ,IAAImQ,GAAMzf,KAAKmc,IAAIkC,SAASoB,IAC5Czf,KAAKsc,QAAQrd,KAAKe,KAAKgd,uBAAyB,IAAM,IAAKuC,EAAOG,QAAoB,KACtF1f,KAAKsc,QAAQrd,QAAQsgB,GACrBvf,KAAKoc,aAAepc,KAAKsc,QAAQtc,KAAKsc,QAAQxd,OAAS,GACvDkB,KAAKqc,kBAAoB/d,EAItBI,MAAM4b,EAAYC,EAAYoF,EAAYC,EAAYb,GACzD,MAAMc,EAAK7f,KAAKqc,kBAChB,GAAW,OAAPwD,EACA,OAGJ,MAAMnH,EAAK,IAAIF,EAAQ8B,EAAIC,GACrB5B,EAAK,IAAIH,EAAQmH,EAAIC,GAErB5G,EAAKP,EAASqH,WAAWD,EAAInH,GAC7BO,EAAKR,EAASqH,WAAWpH,EAAIC,GAEnC,GAAc,IAATK,EAAG1V,GAAoB,IAAT2V,EAAG3V,GAAsB,IAAT0V,EAAGrV,GAAoB,IAATsV,EAAGtV,GAChDqV,EAAG+G,UAAY9G,EAAG8G,SAGlB,OAFA/f,KAAKsc,QAAQrd,KAAK,IAAKe,KAAKmc,IAAIkC,SAAS3F,GAAK1Y,KAAKmc,IAAIkC,SAAS1F,SAChE3Y,KAAKqc,kBAAoB1D,GAI7B,MAAMqH,EAAWvH,EAASwH,SAASjH,EAAIC,GACvC,GAAiB,IAAb+G,GAAkBA,IAAazc,KAAKwV,GAGpC,OAFA/Y,KAAKsc,QAAQrd,KAAK,IAAKe,KAAKmc,IAAIkC,SAAS3F,GAAK1Y,KAAKmc,IAAIkC,SAAS1F,SAChE3Y,KAAKqc,kBAAoB1D,GAG7B,MAAMuH,EAAa3c,KAAKwV,GAAKiH,EAEvBta,EAAIqZ,EAASxb,KAAKuW,IAAIoG,EAAa,GACnCta,EAAIrC,KAAKC,IAAID,KAAKsW,IAAIqG,EAAa,GAAKxa,GAE9C,IAAIya,EAAQ1H,EAASqH,WAAWpH,EAAImH,GAAII,WACpCG,EAAQnH,EAAGgH,WAEf,MAAMI,EAAM,IAAI7H,EACZ5S,EAAIrC,KAAKsW,IAAIsG,GAASzH,EAAGpV,EACzBsC,EAAIrC,KAAKuW,IAAIqG,GAASzH,EAAG/U,GACvB2c,EAAM,IAAI9H,EACZ5S,EAAIrC,KAAKsW,IAAIuG,GAAS1H,EAAGpV,EACzBsC,EAAIrC,KAAKuW,IAAIsG,GAAS1H,EAAG/U,GACzBJ,KAAKC,IAAI4c,EAAQD,GAAS5c,KAAKwV,KAC3BqH,EAAQD,EAAOA,GAAmB,EAAV5c,KAAKwV,GACdqH,GAAmB,EAAV7c,KAAKwV,IAErC,MAAMwH,EAAS,IAAI/H,EACf9S,EAAInC,KAAKsW,KAAKsG,EAAQC,GAAS,GAAK1H,EAAGpV,EACvCoC,EAAInC,KAAKuW,KAAKqG,EAAQC,GAAS,GAAK1H,EAAG/U,GAErC6c,EAAO/H,EAASqH,WAAWS,EAAQF,GACnCI,EAAOhI,EAASqH,WAAWS,EAAQD,GACzC,IAAII,EAASF,EAAKP,WACdU,EAASF,EAAKR,WACd1c,KAAKC,IAAImd,EAASD,GAAUnd,KAAKwV,KAC7B4H,EAASD,EAAQA,GAAoB,EAAVnd,KAAKwV,GACf4H,GAAoB,EAAVpd,KAAKwV,IAIxC/Y,KAAK4gB,IAAIL,EAAOjd,EAAGid,EAAO5c,EAAGob,EAAQ2B,EAAQC,EAAQD,GAAUC,GAC/D3gB,KAAK6gB,OAAOlB,EAAIC,GAGblhB,OAAO4E,EAAWK,EAAWob,EAAgBG,GAAyB,GACnElf,KAAKgd,wBAAwBhd,KAAK8gB,YACxC9gB,KAAK4gB,IAAItd,EAAGK,EAAGob,EAAQ,EAAG,EAAIxb,KAAKwV,GAAImG,GACvClf,KAAK8gB,YAGFpiB,KAAK4E,EAAWK,EAAWY,EAAW0B,EAAWiZ,GAAyB,GACzEA,EACAlf,KAAKsc,QAAQrd,KACT,IAAKe,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAGK,IAAK,IAC3C3D,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAGK,EAAIsC,IAAKjG,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAIiB,EAAGZ,EAAIsC,IACnFjG,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAIiB,EAAGZ,IAAK,KAG9C3D,KAAKsc,QAAQrd,KACT,IAAKe,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAGK,IAAK,IAC3C3D,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAIiB,EAAGZ,IAAK3D,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAIiB,EAAGZ,EAAIsC,IACnFjG,KAAKmc,IAAIkC,SAAS,IAAI7F,EAAQlV,EAAGK,EAAIsC,IAAK,KAGlDjG,KAAKoc,aAAe,KACpBpc,KAAKqc,kBAAoB,KAGtB3d,UAAU4E,EAAWK,EAAWY,EAAW0B,EAAW8Y,EAAgBG,GAAyB,GAC9FA,GACAlf,KAAK+gB,OAAOzd,EAAWK,EAAIsC,EAAI,GAC/BjG,KAAMghB,MAAM1d,EAAWK,EAAIsC,EAAO3C,EAAIiB,EAAI,EAAGZ,EAAIsC,EAAO8Y,GACxD/e,KAAMghB,MAAM1d,EAAIiB,EAAOZ,EAAIsC,EAAO3C,EAAIiB,EAAOZ,EAAIsC,EAAI,EAAG8Y,GACxD/e,KAAMghB,MAAM1d,EAAIiB,EAAOZ,EAAWL,EAAIiB,EAAI,EAAGZ,EAAWob,GACxD/e,KAAMghB,MAAM1d,EAAWK,EAAWL,EAAWK,EAAIsC,EAAI,EAAG8Y,KAExD/e,KAAK+gB,OAAOzd,EAAIiB,EAAI,EAAGZ,GACvB3D,KAAMghB,MAAM1d,EAAIiB,EAAOZ,EAAWL,EAAIiB,EAAOZ,EAAIsC,EAAI,EAAG8Y,GACxD/e,KAAMghB,MAAM1d,EAAIiB,EAAOZ,EAAIsC,EAAO3C,EAAIiB,EAAI,EAAGZ,EAAIsC,EAAO8Y,GACxD/e,KAAMghB,MAAM1d,EAAWK,EAAIsC,EAAO3C,EAAWK,EAAIsC,EAAI,EAAG8Y,GACxD/e,KAAMghB,MAAM1d,EAAWK,EAAWL,EAAIiB,EAAI,EAAGZ,EAAWob,IAE5D/e,KAAK8gB,YAGDpiB,kBAAkBuiB,GAGtB,IAAIC,EACJ,MAAMC,EAAWF,EAAMze,WACvB,IAEIiY,EAFAhI,EAAQzS,KAAKkb,YAKjB,GAAIT,EAAQlE,EAASe,MAAM6J,GAAW,CAClC,MAAMtK,EAAO4D,EACbhI,GAASoE,EAAKnR,EACdub,SAAepK,EAAKvZ,KAAKuZ,EAAKC,KAAKD,EAAKjR,UAGvC,GAAI6U,EAAQlE,EAASgB,MAAM4J,GAAW,CACvC,MAAMjK,EAAOuD,EACbhI,GAASyE,EAAKxR,EACdub,SAAe/J,EAAKjR,KAAc,IAATiR,EAAK3Y,MAAqB,IAAT2Y,EAAKza,WAExCuD,KAAKmc,IAAIiF,gBAEZF,EAAQC,EAASjX,MAAM,2BACvBlK,KAAK2c,OAAO1d,oCACuBe,KAAK6c,+BAA+BqE,EAAM,oCAC5ClhB,KAAKmc,IAAI3Z,mBAC1Cye,gBAAsBjhB,KAAK6c,aAGtBqE,EAAQC,EAASjX,MAAM,2BAC5BlK,KAAK2c,OAAO1d,oCACuBe,KAAK6c,+BAA+BqE,EAAM,oCAC5ClhB,KAAKmc,IAAI3Z,mBAC1Cye,gBAAsBjhB,KAAK6c,aAGtBqE,EAAQC,EAASjX,MAAM,0BAC5BlK,KAAK2c,OAAO1d,2BACce,KAAK6c,6BAA6BqE,EAAM,mCAClClhB,KAAKmc,IAAI3Z,mBACzCye,cAAoBjhB,KAAK6c,aAGjC,MAAO,CAACoE,QAAOxO,SAGX/T,iBACJ,MAAM2iB,EAAgBrhB,KAAKshB,kBAAkBthB,KAAKic,aAClD,iBAAkBoF,EAAcJ,wBAAwBjhB,KAAK+b,iCACtC/b,KAAK4b,6BAA6B5b,KAAK8b,gCAAgC9b,KAAKgc,gBAC9Fhc,KAAKuhB,cAAcziB,OAAS,uBACJkB,KAAKuhB,cAAc7D,KAAK,4BAA4B1d,KAAK6b,mBAAqB,uBACpFwF,EAAc5O,UAEjC/T,aAAa8iB,GACjB,MAAMH,EAAgBrhB,KAAKshB,kBAAkBthB,KAAKkc,WAClD,eAAgBmF,EAAcJ,qBAAqBO,oBAA2BH,EAAc5O,UAGxF/T,iBACJ,GAAyB,KAArBsB,KAAKwb,kBAEF,GAAyB,OAArBxb,KAAKwb,YAAsB,CAClC,GAAI,EAAIxb,KAAKob,YACTpb,KAAKmb,0BAC6B,gBAAlCnb,KAAKmb,yBAA6C,CAElD,IAAIX,EAAU,GACViH,EAAU,GAEd,GAAI,EAAIzhB,KAAKob,WAIT,GAHAZ,oCACqCxa,KAAKob,4DACXpb,KAAKsb,sBAAsBtb,KAAKub,0CACtC,OAArBvb,KAAKqb,YACLoG,GACI,sCACD,CACH,MAAM5kB,EAAI,IAAI0Z,EAASvW,KAAKqb,aAC5Bb,GACI,+KAMI3d,EAAES,EAAI,qBACJT,EAAEia,EAAI,qBACJja,EAAE+I,EAAI,qBACJ/I,EAAE6I,6BAChB+b,GACI,gCAGZ,GAAIzhB,KAAKmb,0BAA8D,gBAAlCnb,KAAKmb,yBAA4C,CAClF,IAAIuG,EAAK1hB,KAAKmb,yBACVvF,GAAU,EACd,OAAQ8L,GACJ,IAAK,iBACD9L,GAAU,EACd,IAAK,YACD8L,EAAK,KACL,MACJ,IAAK,kBACD9L,GAAU,EACd,IAAK,aACD8L,EAAK,MACL,MACJ,IAAK,mBACD9L,GAAU,EACd,IAAK,cACD8L,EAAK,OACL,MACJ,IAAK,MACDA,EAAK,MACL,MACJ,IAAK,mBACD9L,GAAU,EACd,QACI8L,EAAK,OAGblH,qBACsB5E,EAAU,IAAM,2BAC7BA,EAAU,GAAK,mCAAmC8L,uBAC3DD,GAAW,mCAEXA,GAAW,uCAQf,OALAzhB,KAAK2c,OAAO1d,6BACgBe,KAAK6c,8CAC1BrC,eAAqBiH,0BAE5BzhB,KAAKwb,2BAA6Bxb,KAAK6c,sBACrB7c,KAAKwb,gBAEvBxb,KAAKwb,YAAc,QAEpB,GAAyB,KAArBxb,KAAKwb,YACZ,iBAAkBxb,KAAKwb,gBAE3B,MAAO,GAGH9c,uBAAuB7B,GAC3B,GAAKA,EAAE8kB,WACkB,iBAAd3hB,KAAKyb,YACM,IAAjB5e,EAAE+kB,YAA0C,OAAjB/kB,EAAE+kB,YAAsB,CAEpD,MAMMte,EANK,IAAIue,OACX,0NAKSC,KAAK9hB,KAAKyb,MACvB,GAAInY,EAAG,CAEH,IAAIye,EAAahQ,OAAOzO,EAAE,IAC1B,OAAQA,EAAE,IACN,IAAK,KAEDye,EAAcA,EAAa,GAAQ,GACnC,MACJ,IAAK,KACDA,EAAcA,EAAa,GAAQ,GAAO,GAC1C,MACJ,IAAK,KAEDA,EAAcA,EAAa,KAAQ,GACnC,MACJ,IAAK,KACDA,EAAcA,EAAa,KAAQ,GAAO,IAC1C,MACJ,IAAK,KAEDA,GAA0B,GAIlC,IAAIH,EAAaG,EACjB,GAAIze,EAAE,GAEF,OADAse,EAAa7P,OAAOzO,EAAE,KAAO,IACrBA,EAAE,IACN,IAAK,KACD,MACJ,IAAK,KAEDse,EAAcA,EAAa,GAAQ,GACnC,MACJ,IAAK,KACDA,EAAcA,EAAa,GAAQ,GAAO,GAC1C,MACJ,IAAK,KAEDA,EAAcA,EAAa,KAAQ,GACnC,MACJ,IAAK,KACDA,EAAcA,EAAa,KAAQ,GAAO,IAC1C,MACJ,IAAK,KAEDA,GAA0B,GAC1B,MACJ,IAAK,IACDA,EAAaA,EAAa,IAAMG,EAChC,MACJ,QACIH,GAA0BG,EAItCllB,EAAE+kB,WAAaA,GAGvB,OAAO/kB,EAGH6B,kBAAkBsjB,GACtB,IAAItG,EAgBAC,EAfJ,OAAQ3b,KAAK0b,WACb,IAAK,OACDA,EAAY,QACZ,MACJ,IAAK,QACDA,EAAY,MACZ,MACJ,IAAK,SACDA,EAAY,SACZ,MACJ,QACIA,EAAY1b,KAAK0b,UAKrB,OAAQ1b,KAAK2b,cACb,IAAK,MACDA,EAAe,mBACf,MACJ,IAAK,SACDA,EAAe,kBACf,MACJ,QACIA,EAAe3b,KAAK2b,aAIxB,IAAIjW,kBAAoBnG,EAAO0iB,IAAIjiB,KAAKyb,wBAAwBC,yBAAiCC,KAEjG,GAAIqG,QACA,OAAOtc,EACJ,GAAoC,iBAAzBsc,EAEd,OADAtc,mBAAqBsc,KAIzB,MAAMnlB,EAAImD,KAAKkiB,uBAAuBF,GAetC,YAbqC,IAAjCnlB,EAAEslB,YAA0E,OAAjCtlB,EAAEslB,aAAqCzc,mBAAqB7I,EAAEslB,oBACxE,IAAjCtlB,EAAEulB,cAA0E,OAAjCvlB,EAAEulB,eAAqC1c,qBAAuB7I,EAAEulB,sBAC1E,IAAjCvlB,EAAE0hB,QAA0E,OAAjC1hB,EAAE0hB,SAAqC7Y,eAAiB7I,EAAE0hB,gBACpE,IAAjC1hB,EAAEwlB,aAA0E,OAAjCxlB,EAAEwlB,cAAqC3c,qBAAuB7I,EAAEwlB,qBAC1E,IAAjCxlB,EAAEylB,0BAA0E,OAAjCzlB,EAAEylB,2BAAqC5c,mCAAqC7I,EAAEylB,kCACxF,IAAjCzlB,EAAE0lB,4BAA0E,OAAjC1lB,EAAE0lB,6BAAqC7c,qCAAuC7I,EAAE0lB,oCAC1F,IAAjC1lB,EAAE2lB,WAA0E,OAAjC3lB,EAAE2lB,YAAqC9c,kBAAoB7I,EAAE2lB,mBACvE,IAAjC3lB,EAAE4lB,aAA0E,OAAjC5lB,EAAE4lB,cAAqC/c,qBAAuB7I,EAAE4lB,qBAC1E,IAAjC5lB,EAAE6lB,gBAA0E,OAAjC7lB,EAAE6lB,iBAAqChd,wBAA0B7I,EAAE6lB,wBAC7E,IAAjC7lB,EAAE8lB,SAA0E,OAAjC9lB,EAAE8lB,UAAqCjd,gBAAkB7I,EAAE8lB,iBACrE,IAAjC9lB,EAAE+lB,eAA0E,OAAjC/lB,EAAE+lB,gBAAqCld,uBAAyB7I,EAAE+lB,uBAC5E,IAAjC/lB,EAAEgmB,aAA0E,OAAjChmB,EAAEgmB,cAAqCnd,qBAAuB7I,EAAEgmB,gBAExGnd,EAEHhH,YAAYsjB,GAChB,GAAIA,SAAoG,iBAAzBA,GACvEA,EAAqBc,SAAU,CAC/B,MAAM5Q,EAAMlS,KAAKmc,IAAI4G,aACfzG,EAA4C,GAClD,IAAK,MAAMvd,KAAKiB,KAAKsc,QACbvd,aAAayZ,EACb8D,EAAQrd,KAAKiT,EAAImM,SAAStf,IAE1Bud,EAAQrd,KAAKF,GAIrB,MAAMkK,YAAejJ,KAAK6c,UAC1B7c,KAAK2c,OAAO1d,kBAAkBgK,SAAUjG,EAASG,MAAMmZ,EAAQoB,KAAK,eACpE1d,KAAKsc,QAAU,GACftc,KAAKoc,aAAe,KACpBpc,KAAKqc,kBAAoB,KAEzB,MAAM/e,EAAmC,CAAC2L,OAAQA,KAKlD,YAH4C,IAAxC+Y,EAAqBgB,gBAAqE,OAAxChB,EAAqBgB,iBACvE1lB,EAAEyH,OAASid,EAAqBgB,gBAE7B1lB,EAGf,OAAO,KAEHoB,mBAAmBiN,EAAcrI,EAAWK,EAAWqe,GAC3D,GAAIA,SAAoG,iBAAzBA,GACvEA,EAAqBL,YAAcK,EAAqBc,SAAU,CAClE,MAAM7c,EAAI+b,EAAqBJ,YAAc,GACvCrjB,EAAIoN,EAAKnM,QAAQ,QAAS,MAAMA,QAAQ,MAAO,MAC/CkG,EAAInG,EAAO0iB,IAAI1jB,GAAGgC,MAAM,MAC9B,OAAQyhB,EAAqBK,aACzB,IAAK,KAAM,IAAK,QACZ,gBAAiB3c,EAAEgY,4BAA4BzX,SAAStC,iBAC5D,QACI,gBAAiB+B,EAAEgY,0BAA0Bpa,UAAU2C,kBAIvE,mBAAoB3C,SAASK,MAAMpE,EAAO0iB,IAAItW,aAG3CjN,SACHsB,KAAKwa,eACKxa,KAAKijB,8BAA8BjjB,KAAKkjB,oBAC7CljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDxZ,EAASG,MAAMnD,KAAKsc,QAAQoB,KAAK,oBAEjDhf,WAAW4E,EAAWK,EAAWY,EAAW0B,GAC/CjG,KAAKwa,eACKxa,KAAKijB,8BAA8BjjB,KAAKkjB,oBAC7CljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDlZ,SAASK,aAAaY,cAAc0B,2BAC9BjG,KAAKmc,IAAI3Z,gBAC9B,WAED9D,WAAWiN,EAAcrI,EAAWK,EAAWqe,GAClD,MAAM3X,EAAOrK,KAAKmjB,YAAYnB,GAC9BhiB,KAAKwa,eACKxa,KAAKijB,8BAA8BjjB,KAAKkjB,oBAC7CljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,IAC/D,cACGxc,KAAKojB,kBAAkBpB,wBAA2ChiB,KAAKmc,IAAI3Z,sBAC/D,OAAT6H,2BAAyCA,EAAKpB,WAAsB,IAAhBoB,EAAKtF,wBAAqCsF,EAAKtF,UAAY,QAAU,KAC/H/E,KAAKqjB,mBAAmB1X,EAAMrI,EAAGK,EAAGqe,MACxB,OAAT3X,EAAgB,cAAgB,kBAMpC3L,KAAK8iB,EAAmB,WAC3BxhB,KAAKwa,6BACmBxa,KAAKsjB,aAAa9B,KAAYxhB,KAAKkjB,oBACtDljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDxZ,EAASG,MAAMnD,KAAKsc,QAAQoB,KAAK,oBAEjDhf,SAAS4E,EAAWK,EAAWY,EAAW0B,GAC7CjG,KAAKwa,6BACmBxa,KAAKsjB,aAAa,aAAatjB,KAAKkjB,oBACvDljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDlZ,SAASK,aAAaY,cAAc0B,2BAC9BjG,KAAKmc,IAAI3Z,gBAC9B,WAED9D,SAASiN,EAAcrI,EAAWK,EAAWqe,GAChD,MAAM3X,EAAOrK,KAAKmjB,YAAYnB,GAC9BhiB,KAAKwa,6BACmBxa,KAAKsjB,aAAa,aAAatjB,KAAKkjB,oBACvDljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,IAC/D,cACGxc,KAAKojB,kBAAkBpB,wBAA2ChiB,KAAKmc,IAAI3Z,sBAC/D,OAAT6H,2BAAyCA,EAAKpB,WAAsB,IAAhBoB,EAAKtF,wBAAqCsF,EAAKtF,UAAY,QAAU,KAC/H/E,KAAKqjB,mBAAmB1X,EAAMrI,EAAGK,EAAGqe,MACxB,OAAT3X,EAAgB,cAAgB,kBAMpC3L,WAAW8iB,EAAmB,WACjCxhB,KAAKwa,eACKxa,KAAKsjB,aAAa9B,KAAYxhB,KAAKijB,mBAAmBjjB,KAAKkjB,oBAChEljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDxZ,EAASG,MAAMnD,KAAKsc,QAAQoB,KAAK,oBAEjDhf,eAAe4E,EAAWK,EAAWY,EAAW0B,GACnDjG,KAAKwa,eACKxa,KAAKsjB,aAAa,aAAatjB,KAAKijB,mBAAmBjjB,KAAKkjB,oBACjEljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,mBAChDlZ,SAASK,aAAaY,cAAc0B,2BAC9BjG,KAAKmc,IAAI3Z,gBAC9B,WAED9D,eAAeiN,EAAcrI,EAAWK,EAAWqe,GACtD,MAAM3X,EAAOrK,KAAKmjB,YAAYnB,GAC9BhiB,KAAKwa,eACKxa,KAAKsjB,aAAa,aAAatjB,KAAKijB,mBAAmBjjB,KAAKkjB,oBACjEljB,KAAKwc,SAAS1d,OAAS,iBAAmBkB,KAAKwc,aAAe,IAC/D,cACGxc,KAAKojB,kBAAkBpB,wBAA2ChiB,KAAKmc,IAAI3Z,sBAC/D,OAAT6H,2BAAyCA,EAAKpB,WAAsB,IAAhBoB,EAAKtF,wBAAqCsF,EAAKtF,UAAY,QAAU,KAC/H/E,KAAKqjB,mBAAmB1X,EAAMrI,EAAGK,EAAGqe,MACxB,OAAT3X,EAAgB,cAAgB,kBAGpC3L,cACH,OAAOsB,KAAKuc,SAET7d,YAAY6kB,GACfvjB,KAAKuc,SAAWgH,EAMb7kB,KAAK8iB,EAAmB,WAC3B,MAAM9b,0BACsB1F,KAAK6c,uBAAuB2E,mBACxCxe,EAASG,MAAMnD,KAAKsc,QAAQoB,KAAK,uBACjD1d,KAAK2c,OAAO1d,KAAKyG,GACjB1F,KAAKwc,sBAAwBxc,KAAK6c,WAG/Bne,cAAcsc,EAAsE/R,GACvF,MAAMua,EAAMxI,EAAYhb,KAAKyjB,2BAA2BzI,GAClD0I,EAASza,iBAAyCjJ,KAAK6c,YAAY2G,EAAI1d,UAAU0d,EAAIzd,SAAWkD,EAChGvD,gBACYge,QACd,8EAEeF,EAAIrX,UAEvB,OADAnM,KAAK2c,OAAO1d,KAAKyG,OACNge,IAGRhlB,qBAAqBuK,EAAY0a,GACpC3jB,KAAK2c,OAAO1d,KAAK0kB,GACjB3jB,KAAKwb,oBAAsBvS,KAGxBvK,oBAAoBilB,GACvB3jB,KAAK2c,OAAO1d,KAAK0kB,GAEdjlB,oBAAoBilB,GACvB3jB,KAAKwa,iCAAmCxa,KAAKmc,IAAI3Z,gBAAgBmhB,UAG9DjlB,qBAAqB0b,EAAYC,EAAYC,EAAYC,GAC5D,MAAM7U,EAAI,IAAIyU,aAAoCna,KAAK6c,UAAWzC,EAAIC,EAAIC,EAAIC,GAE9E,OADAva,KAAK2c,OAAO1d,KAAKyG,GACVA,EAGJhH,qBAAqBkc,EAAYC,EAAYvd,EAAWoX,EAAYoG,EAAY8I,GACnF,MAAMle,EAAI,IAAIiV,aAAqC3a,KAAK6c,UAAWjC,EAAIC,EAAIvd,EAAGoX,EAAIoG,GAElF,OADA9a,KAAK2c,OAAO1d,KAAKyG,GACVA,EAGJhH,cAAcsc,EAAsE6I,GACvF,MAAMne,EAAI,IAAIqV,WAA4B/a,KAAK6c,UAAW7c,KAAKyjB,2BAA2BzI,IAE1F,OADAhb,KAAK2c,OAAO1d,KAAKyG,GACVA,EAEJhH,eACHsB,KAAK4c,aAAe5c,KAAKwa,QACzBxa,KAAKwa,QAAU,GACf,MAAMjc,EAAI,IAAI0c,EACdjb,KAAK0c,cAAczd,KAAKV,GAErBG,WAAW4E,EAAWK,EAAWmC,EAAeC,GACnD,MAAMkD,IAAOjJ,KAAK6c,QACZnX,sBACkBuD,+EACd3F,SAASK,aAAamC,cAAkBC,QAAa/F,KAAKwa,oBAKpE,OAJAxa,KAAK2c,OAAO1d,KAAKyG,GACjB1F,KAAKwa,QAAUxa,KAAK4c,aACpB5c,KAAK4c,aAAe,GACpB5c,KAAK8jB,sBACc7a,KAGfvK,2BAA2Bsc,GAC/B,IAAIwI,EACJ,GAAgC,oBAArBO,kBAAoC/I,aAAqB+I,iBAAkB,CAClF,MAAMlnB,EAAIyP,SAASC,cAAc,UACjC1P,EAAEiJ,MAAQkV,EAAUlV,MACpBjJ,EAAEkJ,OAASiV,EAAUjV,OACrB,MAAMie,EAAMnnB,EAAEonB,WAAW,MACzB,GAAY,OAARD,EACA,MAAM,IAAI1iB,MAAM,wEAEpB0iB,EAAIE,UAAUlJ,EAAW,EAAG,GAC5BwI,EAAM,IAAIvJ,EAAmBpd,EAAEsnB,YAAa,EAAG,EAAGtnB,EAAEiJ,MAAOjJ,EAAEkJ,aAE7Dyd,EADoC,oBAAtBY,mBAAqCpJ,aAAqBoJ,kBAClE,IAAInK,EAAmBe,EAAUmJ,YAAa,EAAG,EAAGnJ,EAAUlV,MAAOkV,EAAUjV,QAE/EiV,EAEV,OAAOwI,EAGJ9kB,UAAUsc,EACAqJ,EAAuBC,EACvBC,EAA0BC,GACvC,IAAIhB,EAMJ,IAJIA,EADqB,iBAAdxI,EACD,IAAIf,EAAmBe,EAAW,EAAG,EAAGuJ,EAAkBC,GAE1DxkB,KAAKyjB,2BAA2BzI,IAElC7O,IAAIzC,WAAW,KAAM,CACzB,MAAMyU,EAAKne,KAAKmc,IAAImC,UAAU+F,EAAeC,GAAelG,MAAMmG,EAAkBC,GACpFxkB,KAAKwa,SACD,4CACqB2D,EAAG3b,iCACPghB,EAAIrX,qBAEzBnM,KAAKwa,yBACe6J,SAAqBC,gBAC3BC,cAA6BC,MACvC,mDACqBxkB,KAAKmc,IAAI3Z,iCACbghB,EAAIrX,gBAI1BzN,aACHsB,KAAKwa,SAAW,MAEb9b,WACHsB,KAAKwa,SAAW,OAMpBiK,sBACI,OAAOzkB,KAAK+c,iBAEhB0H,oBAA2BhnB,GACvBuC,KAAK+c,iBAAmBtf,EAErBiB,YAAYiN,GACf,MAAMiS,EAAK5d,KAAKyb,KAAKvR,MAAM,wCAC3B,IAAIkU,EAAQ,EACRsG,EAAO,GACX,GAAI9G,EAAI,CAIJ,OAAQA,EAAG,IACX,IAAK,KACDQ,EAAQ,GAAK,GACb,MACJ,IAAK,KACDA,EAAQ,GACR,MACJ,IAAK,KACDA,EAAc,EAAI,KAAV,GACR,MACJ,IAAK,KAAM,IAAK,MACZA,EAAQ,GACR,MACJ,IAAK,IACDA,EAAQ,IAGZsG,EAAO3S,OAAO0F,WAAWmG,EAAG,IAEhC,MAAO,CAAE9X,MAAOvC,KAAKiU,MAAM4G,EAAQsG,EAAOpiB,MAAMD,KAAKsJ,EAChDnM,QAAQ,qCAAsC,IAC9C+P,UAAU,SAASzQ,OAASkB,KAAKykB,kBAInC/lB,UAAU4E,EAAWK,EAAWY,EAAW0B,GAC9CjG,KAAK2kB,OACL3kB,KAAKkc,UAAY,QACjBlc,KAAK4kB,SAASthB,EAAGK,EAAGY,EAAG0B,GACvBjG,KAAK8jB,WCr0Cb,MAAMe,EAAqB,IAAIC,IAAI,CAC/B,OAAQ,OAAQ,KAAM,MAAO,UAAW,QAAS,KACjD,MAAO,QAAS,SAAU,OAAQ,OAAQ,QAAS,SAAU,QAAS,QAKpE,MAAgBC,EAKlBrmB,YAA0BsmB,EAAW,IAAXhlB,KAAAglB,QACtBhlB,KAAKilB,cAAgB,IAAI9M,IAKtBzZ,QACH,OAAO2K,QAAQC,UAGT5K,WAAWwmB,EAA4BnnB,EAAaN,GAC1D,GAAIuC,KAAKilB,cAAcrN,IAAI7Z,GACvB,MAAM,IAAIuD,gDAAgDvD,iCAE1DmnB,EAAStN,IAAI7Z,IACbmnB,EAAS1jB,IAAIzD,EAAKmnB,EAAS7nB,IAAIU,IAEnCmnB,EAAS1jB,IAAIzD,EAAKN,GAGZiB,aAAawmB,EAA4BnnB,GAC/CmnB,EAASC,OAAOpnB,GACZiC,KAAKilB,cAAcrN,IAAI7Z,KACvBmnB,EAAS1jB,IAAIzD,EAAKiC,KAAKilB,cAAc5nB,IAAIU,IACzCiC,KAAKilB,cAAcE,OAAOpnB,IAIxBW,WAAWwmB,EAA4BnnB,GAC7C,OAAOmnB,EAAS7nB,IAAIU,IAMtB,MAAgBqnB,UAA2DL,EACtErmB,YACH,OAC6B,OAAxBsB,KAAKglB,MAAMK,eAA6C,IAAxBrlB,KAAKglB,MAAMK,SAC5CrlB,KAAKglB,MAAMK,SAAW,IAOlC,MAAMC,WAA0DP,EAC5DrmB,YAA2ByQ,EAAgC6V,GACvD3S,MAAM2S,GADiBhlB,KAAAmP,KAIpBzQ,YACH,OAAOsB,KAAKmP,GAAGnP,KAAKglB,QAiC5B,SAASO,GAA4CP,EAAUK,GAC3D,GAAIA,EAAU,CACc,IAApBA,EAASvmB,OACTkmB,EAAMK,SAAWA,EAAS,GACnBA,EAASvmB,OAAS,IACzBkmB,EAAMK,SAAWA,GAGrB,IAAIG,EAAO,GACPC,GAAU,EACd,IAAK,MAAM5oB,KAAKwoB,EACZ,GAAIxoB,cAEG,GAAIyF,MAAMC,QAAQ1F,SAElB,GAAiB,iBAANA,QAGd,GAAKA,EAAyBmoB,MAAO,CACjC,MAAM1mB,EAAKzB,EAAyBmoB,MACd,iBAAX1mB,EAAEknB,OACTC,GAAU,EACVD,EAAOtoB,OAAOwoB,OAAOF,EAAMlnB,EAAEknB,OAEZ,iBAAVlnB,EAAEqnB,MACTF,GAAU,EACVD,EAAKlnB,EAAEqnB,KAAO9oB,GAK1B4oB,IACAT,EAAMQ,KAAOA,GAGrB,OAAOR,EAGL,SAAUzY,GACZ1F,EAA2Bme,KACxBK,GAKH,GAFAL,EAAQO,GAAkBP,GAAU,GAAUK,GAE1B,mBAATxe,EACP,MAAO,CACHA,OACAme,QACAY,OAAQ,KACRP,WAEAQ,UAAWhf,EAAKzI,WAAayI,EAAKzI,UAAU0nB,gBAAkBjf,EAAKzI,UAAU2nB,UACzE,IAAIlf,EAAKme,GACT,MAGZ,GAAoB,iBAATne,EACP,MAAO,CACHA,OACAme,QACAY,OAAQ,KACRP,WACAQ,UAAW,MAInB,MAAM,IAAIvkB,MAAM,kDAGd,SAAU0kB,GAAaC,GACzB,IAAIjB,EAAQ9nB,OAAOwoB,OAAO,GAAIO,EAAGjB,OAAS,WACnCA,EAAMkB,SAEb,MAAMb,EAAY/iB,MAAMC,QAAQ0jB,EAAGZ,UAAYY,EAAGZ,SAASnmB,MAAM,GAAK+mB,EAAGZ,SAGzE,OAFAL,EAAQO,GAAkBP,EAAOK,GAE1B,CACHxe,KAAMof,EAAGpf,KACTme,QACAY,OAAQ,KACRP,WACAQ,UAAW,MAIb,SAAUM,GAA6DtpB,GACzE,MAAO,CACHgK,KAAOhK,EAAEupB,YACTpB,MAAOnoB,EAAEmoB,MACTY,OAAQ,KACRP,SAAW/iB,MAAMC,QAAQ1F,EAAEmoB,MAAMK,UAAYxoB,EAAEmoB,MAAMK,SAAW,GAChEQ,UAAWhpB,GAoCb,SAAUkpB,GAAUM,EAAuBC,GAI7C,GAHKA,IACDA,EAAmB,CAAEC,QAAS,IAE9BF,QACA,OAAOA,EACJ,GAAI/jB,MAAMC,QAAQ8jB,GACrB,OAAQA,EACH/W,IAAIhM,GAAKyiB,GAAUziB,EAAGgjB,IACtBjT,OAAO/P,GAAKA,SAEd,GAAuB,iBAAZ+iB,EACd,OAAOA,EAGX,MAAMJ,EAzBV,SAA0BA,GACtB,MAAO,CACHpf,KAAMof,EAAGpf,KACTme,MAAOiB,EAAGjB,MACVY,OAAQK,EAAGL,OACXP,SAAW/iB,MAAMC,QAAQ0jB,EAAGZ,UAAYY,EAAGZ,SAASnmB,MAAM,GAAK+mB,EAAGZ,SAClEQ,UAAWI,EAAGJ,WAmBPW,CAzCf,SAA4BP,EAA0BK,GAalD,OAZkB,OAAdL,EAAGL,aAAiC,IAAdK,EAAGL,SACzBK,EAAGL,OAASU,EAAiBC,UAC7BN,EAAGjB,MAAMkB,SAAWD,EAAGL,QAEN,OAAjBK,EAAGJ,gBAAuC,IAAjBI,EAAGJ,WACL,mBAAZI,EAAGpf,OAEVof,EAAGJ,UAAaI,EAAGpf,KAAKzI,WAAa6nB,EAAGpf,KAAKzI,UAAU2nB,UACnD,IAAIE,EAAGpf,KAAKof,EAAGjB,OACf,IAAIM,GAAwBW,EAAGpf,KAAaof,EAAGjB,QAGpDiB,EA4BqBQ,CAAmBJ,EAAiCC,IAEhF,GAAIL,EAAGJ,WAAaI,EAAGJ,UAAUE,UAAW,CACxC,MAAM5mB,EAAI8mB,EAAGJ,UAAUE,YAEnB5mB,QACA8mB,EAAGZ,SAAW,GACP/iB,MAAMC,QAAQpD,GACrB8mB,EAAGZ,SAAWlmB,EAEd8mB,EAAGZ,SAAW,CAAClmB,QAIV8mB,EAAGZ,WACZY,EAAGZ,SAAW,IAOlB,OAJAY,EAAGZ,SAAWY,EAAGZ,SACZ/V,IAAIhM,GAAKyiB,GAAUziB,EAAGgjB,IACtBjT,OAAO/P,GAAKA,SAEV2iB,EAQL,SAAUS,GAAqBzF,GACjC,MAAwB,iBAAVA,EAAqBA,EAC/B/jB,OAAOypB,oBAAoB1F,GACtB5N,OAAO/P,GAAkB,OAAb2d,EAAM3d,SAA4B,IAAb2d,EAAM3d,IACvCgM,IAAIhM,MAAQ/D,EAAOG,KARhC,SAA0BnB,GACtB,OAAOA,EAAEiB,QAAQ,qBAAsB,CAAC0K,EAAOwO,EAAIC,OAAUD,KAAMC,EAAGlP,iBAOrCmd,CAAiBtjB,OAAO/D,EAAOG,KAAKuhB,EAAM3d,QAClEoa,KAAK,IAGZ,SAAUmJ,GAAuB7B,EAAY8B,EAAwBC,GACvE,IAAIC,EAAQ,GACR3B,EAAW,GAEf,MAAM4B,EAAmBC,IACrB,GAAI5kB,MAAMC,QAAQ2kB,GACd,OAAQA,EAAK5X,IAAKhM,GAAM/D,EAAOG,KAAK4D,EAAEd,aACjC6Q,OAAO/P,GAAKA,SACZoa,KAAK,KAEV,GAAIwJ,QACA,MAAO,GACJ,cAAeA,GAClB,IAAK,WAAY,IAAK,SAAU,IAAK,SACjC,MAAO,GACX,QACI,OAAO9nB,OAAO8nB,KAK9B,IAAK,MAAMnpB,KAAOb,OAAOypB,oBAAoB3B,GACzC,OAAQjnB,GACJ,IAAK,aAAc,IAAK,YAAa,IAAK,QACtCipB,cAAoBC,EAAgBjC,EAAMjnB,OAC1C,MAEJ,IAAK,QACDipB,cAAoBN,GAAqB1B,EAAM/D,UAC/C,MAEJ,IAAK,WAAY,IAAK,WAClB,MAEJ,IAAK,0BACDoE,GAAYL,EAAMjnB,GAAKopB,OACvB,MAEJ,IAAK,eACD9B,GAAY9lB,EAAOG,KAAKslB,EAAMjnB,GAAKqpB,QAAQ5nB,QAAQ,SAAU,SAASA,QAAQ,MAAO,SACrF,MAEJ,QACQsnB,GAAYA,EAASlP,IAAI7Z,IAElBgpB,IAAkBA,EAAcnP,IAAI7Z,IAAgB,OAARA,GAE7B,OAAfinB,EAAMjnB,SAAgC,IAAfinB,EAAMjnB,KAAkC,IAAfinB,EAAMjnB,MAEvC,IAAfinB,EAAMjnB,GACbipB,OAAaznB,EAAOG,KAAK3B,KAEzBipB,OAAaznB,EAAOG,KAAK3B,OAASkpB,EAAgBjC,EAAMjnB,QAIxE,MAAO,CAACipB,QAAO3B,YAGb,SAAUgC,GAAahB,EAAuBnB,GAChD,GAAImB,QACA,MAAO,GAGX,GAAI/jB,MAAMC,QAAQ8jB,GACd,OAAOA,EAAQ/W,IAAIhM,GAAK+jB,GAAa/jB,EAAG4hB,IAAWxH,KAAK,IAE5D,GAAuB,iBAAZ2I,EACP,OAAO9mB,EAAOG,KAAK2mB,EAAQ7jB,YAE/B,IAAM6jB,EAAgBrB,MAClB,OAAOzlB,EAAOG,KAAK2mB,EAAQ7jB,YAG/B,MAAMyjB,EAAKI,EAEX,IAAIW,MAACA,EAAD3B,SAAQA,GAAYwB,GAAuBZ,EAAGjB,OAE9CiB,EAAGJ,WAAaI,EAAGJ,UAAUyB,cAC7BrB,EAAGJ,UAAUyB,aAAapC,GAGV,OAAhBe,EAAGZ,eAAqC,IAAhBY,EAAGZ,WAC3BA,GAAYY,EAAGZ,SAAS/V,IAAIhM,GAAK+jB,GAAa/jB,EAAG4hB,IAAWxH,KAAK,KAGrE,IAAIpgB,EAAI,GAER,GAAI2oB,EAAGJ,WAAaI,EAAGJ,UAAU/H,OAC7BxgB,EAAI2oB,EAAGJ,UAAU/H,OAAOoH,EAAUG,QAC/B,GAAuB,iBAAZY,EAAGpf,KAAmB,CACpC,MAAMA,EAAOtH,EAAOG,KAAKumB,EAAGpf,MAIxBvJ,EAHc,KAAb+nB,GAAD,MAAoBA,IAA6CR,EAAmBjN,IAAI/Q,OAGhFA,IAAOmgB,KAAS3B,MAAaxe,SAF7BA,IAAOmgB,WAKnB1pB,EAAI+nB,EAOR,OAJIY,EAAGJ,WAAaI,EAAGJ,UAAU0B,aAC7BtB,EAAGJ,UAAU0B,YAAYrC,GAGtB5nB,EAGL,SAAUkqB,GAAanB,GACzB,MAAMnB,EAAW,IAAI/M,IAEfhZ,EAAI4mB,GAAUM,EADK,CAAEE,QAAS,IAGpC,OACIld,QAAQoe,IAlUhB,SAASC,EAAYC,EAA+BtB,GAChD,GAAIA,QACA,OAAOsB,EAGX,GAAIrlB,MAAMC,QAAQ8jB,GAEd,OADAA,EAAQ7lB,QAAQ8C,GAAKokB,EAAYC,EAAUrkB,IACpCqkB,EAEX,GAAuB,iBAAZtB,EACP,OAAOsB,EAGX,GAAKtB,EAAgBR,WAAcQ,EAAgBR,UAAU+B,MAAO,CAChE,MACMtpB,EADK+nB,EACWR,UAAU+B,QAC5BtpB,GAAGqpB,EAAS1oB,KAAKX,GAMzB,OAJK+nB,EAAgBhB,UACjBqC,EAAYC,EAAWtB,EAAgBhB,UAGpCsC,EA4SSD,CAAY,GAAIvoB,IACvB0oB,KAAK/qB,GAAKuqB,GAAaloB,EAAG+lB,IAIjC,SAAU4C,GAAqBzB,GACjC,MAAMnB,EAAW,IAAI/M,IAIrB,OAAOkP,GAFGtB,GAAUM,EADK,CAAEE,QAAS,IAGbrB,GAKrB,SAAUpH,GACZuI,EAAuB0B,EACvBC,GAEAR,GAAanB,GACZwB,KAAKnoB,IACFqoB,EAAUE,UAAYvoB,EAClBsoB,GAAUA,EAAStoB,EAAM,QAEhCwoB,MAAMpgB,IACCkgB,GAAUA,EAAS,KAAMlgB,KAM/B,SAAUqgB,GACZ9B,EACA2B,GAEAR,GAAanB,GACZwB,KAAKnoB,IACFsoB,EAAS,KAAMtoB,KAElBwoB,MAAMpgB,IACHkgB,EAASlgB,EAAO,QAelB,SAAUsgB,GACZ/B,EACAgC,EAAqBze,EAAsBG,GAE3Cyd,GAAanB,GACZwB,KAAKrN,IACEzQ,GACAA,EAAQvJ,QAAS8C,GAAMsG,EAAIpI,IAAI8B,EAAE,GAAoB,iBAATA,EAAE,GAAkBA,EAAE,QAAe,IAErFsG,EAAI0B,KAAKkP,KAEZ0N,MAAMpgB,IACHY,QAAQZ,MAAMwgB,KAAKC,UAAUzgB,IAC7B8B,EAAIc,OAAO,KAAKY,KAAK,MASvB,MAAOkd,WAAiBpD,EAC1B1mB,YAAmBsmB,GACf3S,MAAM2S,ICpkBR,MAAOyD,GACT/pB,YAA0ByF,GAAAnE,KAAAmE,OAGnBzF,QAAQgqB,GACX,IAAIvZ,EAkBJ,OAhBIA,EADA7M,MAAMC,QAAQmmB,GACT,CAACplB,EAAMK,KACR,IAAK,MAAM9G,KAAK6rB,EACZ,GAAiB,iBAAN7rB,EAAgB,CACvB,GAAIyG,EAAEzG,GAAK8G,EAAE9G,GAAI,OAAO,EACxB,GAAIyG,EAAEzG,GAAK8G,EAAE9G,GAAI,OAAQ,MACtB,CACH,MAAM8rB,EAAgB,SAAT9rB,EAAE,IAAiB,EAAI,EACpC,GAAIyG,EAAEzG,EAAE,IAAM8G,EAAE9G,EAAE,IAAK,OAAO,EAAI8rB,EAClC,GAAIrlB,EAAEzG,EAAE,IAAM8G,EAAE9G,EAAE,IAAK,OAAQ,EAAI8rB,EAG3C,OAAO,GAGND,EAEF,IAAID,GAAMzoB,KAAKmE,KAAKjF,MAAM,GAAG0pB,KAAKzZ,IAGtCzQ,QAAQgqB,GACX,IAAIvZ,EAEAA,EADA7M,MAAMC,QAAQmmB,GACT,CAACplB,EAAMK,KACR,IAAK,MAAM9G,KAAK6rB,EACZ,GAAIplB,EAAEzG,KAAO8G,EAAE9G,GAAI,OAAO,EAE9B,OAAO,GAGN6rB,EAET,MAAMprB,EAAW,GACjB,IAAIwG,EAAQ,EACRtH,EAAI,EACR,KAAOA,EAAIwD,KAAKmE,KAAKrF,OAAQtC,IACnB2S,EAAGnP,KAAKmE,KAAKL,GAAQ9D,KAAKmE,KAAK3H,GAAIA,EAAGwD,KAAKmE,QAC7C7G,EAAE2B,KAAKe,KAAKmE,KAAKjF,MAAM4E,EAAOtH,IAC9BsH,EAAQtH,GAIhB,OADAc,EAAE2B,KAAKe,KAAKmE,KAAKjF,MAAM4E,EAAOtH,IACvB,IAAIisB,GAAMnrB,GAGdoB,WAAWT,GACd,GAAiB,iBAANA,EACP,OAAO+B,KAAK6oB,QAAQ,CAACnjB,EAAGE,EAAGsJ,EAAO4Z,IACzB5Z,EAAQjR,GAAO,GAGrB,CACH,MAAMsG,EAAIrH,OAAOwoB,OAAO,CAACqD,MAAO9qB,EAAE+qB,aAAcC,KAAMhrB,EAAE+qB,cAAe/qB,GACjEX,EAAI0C,KAAK6oB,QAAQ,CAACnjB,EAAGE,EAAGsJ,EAAO4Z,IAC7BvkB,EAAE2kB,QAAUJ,EAAMhqB,OACboQ,EAAQ3K,EAAE2kB,QAAY,EAEpBha,GAAS3K,EAAEwkB,MACb7Z,EAAQ3K,EAAEwkB,OAAW,GAGpB7Z,EAAQ3K,EAAEwkB,OAASxkB,EAAEykB,cAAkB,GAmBrD,OAfsB,IAAlB1rB,EAAE6G,KAAKrF,OACHyF,EAAE2kB,OAAS5rB,EAAE6G,KAAK,GAAGrF,QACrBxB,EAAE6G,KAAKlF,KAAK,IAGZsF,EAAEwkB,MAAQzrB,EAAE6G,KAAK,GAAGrF,QAEpBxB,EAAE6G,KAAKglB,QAAQ,IAGnB7rB,EAAE6G,KAAKrF,OAAS,GACZxB,EAAE6G,KAAK7G,EAAE6G,KAAKrF,OAAS,GAAGA,OAASyF,EAAE0kB,MACrC3rB,EAAE6G,KAAKlF,KAAK,IAGb3B,GAIRoB,MAAMyQ,GACT,OAAO,IAAIsZ,GAAMzoB,KAAKmE,KAAKkP,OAAOlE,IAK/BzQ,OAAUyQ,GACb,OAAOA,EAAKnP,KAAKmE,KAAKmL,IAAIH,GAAMnP,KAAKmE,MAMvC,SAAU/D,GAAS+D,GACrB,OAAO,IAAIskB,GAAStkB,GC9FjB,MAAMilB,GAAqB,qBACrBC,GAAqB,mBACrBC,GAAqB,iBAgCrBC,GAAgC,CACzCjmB,EAAG,EACHK,EAAG,EACH6lB,OAAQ,GAGN,MAAgBC,WAAoCrE,EAKtD1mB,YAAmBsmB,GACf3S,MAAM2S,GALAhlB,KAAA0pB,WAAY,EACZ1pB,KAAA2pB,gBAAiB,EACjB3pB,KAAA4pB,SAAU,EAMVlrB,iBAAiBmrB,GAqBvB,IApBI7pB,KAAKglB,MAAM3V,MAAQrP,KAAK0pB,iBACK,IAAzB1pB,KAAKglB,MAAM8E,WAAiD,OAAzB9pB,KAAKglB,MAAM8E,YAC9CD,EAAO3N,UAAYlc,KAAKglB,MAAM8E,UAAUtnB,aAE5CxC,KAAKglB,MAAM+E,QAAU/pB,KAAK0pB,kBACK,IAA3B1pB,KAAKglB,MAAMgF,aAAqD,OAA3BhqB,KAAKglB,MAAMgF,cAChDH,EAAO5N,YAAcjc,KAAKglB,MAAMgF,YAAYxnB,iBACrB,IAAvBxC,KAAKglB,MAAMpJ,SAA6C,OAAvB5b,KAAKglB,MAAMpJ,UAC5CiO,EAAOjO,QAAU5b,KAAKglB,MAAMpJ,cACJ,IAAxB5b,KAAKglB,MAAMlJ,UAA+C,OAAxB9b,KAAKglB,MAAMlJ,WAC7C+N,EAAO/N,SAAW9b,KAAKglB,MAAMlJ,eACJ,IAAzB9b,KAAKglB,MAAMjJ,WAAiD,OAAzB/b,KAAKglB,MAAMjJ,YAC9C8N,EAAO9N,UAAY/b,KAAKglB,MAAMjJ,gBACJ,IAA1B/b,KAAKglB,MAAMhJ,YAAmD,OAA1Bhc,KAAKglB,MAAMhJ,aAC/C6N,EAAO7N,WAAahc,KAAKglB,MAAMhJ,iBACP,IAAxBhc,KAAKglB,MAAMzI,UAA+C,OAAxBvc,KAAKglB,MAAMzI,UAC7CsN,EAAOI,YAAYjqB,KAAKglB,MAAMzI,eACA,IAA9Bvc,KAAKglB,MAAMnJ,gBAA2D,OAA9B7b,KAAKglB,MAAMnJ,iBACnDgO,EAAOhO,eAAiB7b,KAAKglB,MAAMnJ,iBAEvC7b,KAAK0pB,UAAW,CAChB,MAAMQ,EAAelqB,KAAKglB,OACtBkF,EAAaV,QAAUU,EAAa5mB,GAAK4mB,EAAavmB,IACtDkmB,EAAOvL,WACF4L,EAAaV,QAAU,IAAMU,EAAa5mB,GAAK,IAC/C4mB,EAAaV,QAAU,IAAMU,EAAavmB,GAAK,SAG5B,IAAxBumB,EAAaC,QAA6C,OAAxBD,EAAaC,QAC/CN,EAAOzL,MAAM8L,EAAaC,OAAQ,QAEV,IAAxBD,EAAaE,QAA6C,OAAxBF,EAAaE,QAC/CP,EAAOzL,MAAM,EAAG8L,EAAaE,aAEA,IAA7BF,EAAaG,aAAuD,OAA7BH,EAAaG,aACpDR,EAAOtL,OAAO2L,EAAaG,YAAc9mB,KAAKwV,GAAK,UAE/B,IAApBmR,EAAa/L,IAAqC,OAApB+L,EAAa/L,IAAe+L,EAAa/L,GAAGrf,QAAU,GACpF+qB,EAAO9D,UACHmE,EAAa/L,GAAG,GAChB+L,EAAa/L,GAAG,GAChB+L,EAAa/L,GAAG,GAChB+L,EAAa/L,GAAG,GAChB+L,EAAa/L,GAAG,GAChB+L,EAAa/L,GAAG,KAMtBzf,gBAAgBmrB,GAClB7pB,KAAK4pB,SACLC,EAAOS,aAEXT,EAAOlF,OACPkF,EAAOvL,UACFte,KAAKglB,MAAMwE,OAAqBxpB,KAAKglB,MAAM1hB,EAC3CtD,KAAKglB,MAAMwE,OAAqBxpB,KAAKglB,MAAMrhB,GAEhD3D,KAAKuqB,iBAAiBV,GAGhBnrB,oBAAoBmrB,GAC1BA,EAAO/F,UACH9jB,KAAK4pB,SACLC,EAAOW,WAIL9rB,gBAAgBmrB,GAClB7pB,KAAKglB,MAAM3V,MAAQrP,KAAKglB,MAAM+E,OAC9BF,EAAOY,aAEFzqB,KAAKglB,MAAM3V,KAAQwa,EAAOxa,OAC1BrP,KAAKglB,MAAM+E,QAAQF,EAAOE,UAC/B/pB,KAAKglB,MAAM3V,MAAQrP,KAAKglB,MAAM+E,SAC9BF,EAAOa,YAIRhsB,aAAawmB,GAChBllB,KAAK2pB,eAAiB3pB,KAAKikB,WAAWiB,EAAUmE,MAAqB,EACrE,MAAMQ,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAChDS,IACK7pB,KAAK2pB,gBACN3pB,KAAK2qB,gBAAgBd,IAK1BnrB,YAAYwmB,GACf,MAAM2E,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAChDS,IACK7pB,KAAK2pB,iBACN3pB,KAAK4qB,gBAAgBf,GACrB7pB,KAAK6qB,oBAAoBhB,MAqBnC,SAAUiB,GAAgB9F,EAA8B6E,EAAmBkB,EAAoBC,GACjG,OAAIhG,EAAMiG,8BAGEF,IAAa/F,EAAM5H,eACf4N,IAAchG,EAAM5H,eACxByM,EAAOqB,UAAU,IAAI9R,EAAO,EAAG,EAAG2R,EAAYC,GAAchG,EAAM5H,KAAM,QACxEyJ,GAAgC7B,OAAO,EAAQ,IAAIF,IAAI,KAAKkC,eAE7DhC,EAAMmG,kBAETnG,EAAM/D,MAAQyF,GAA8B1B,EAAM/D,OAAS,KAC3DyF,GAA8B,CAAC0E,2BAC3BvB,EAAOqB,UAAU,IAAI9R,EAAO,EAAG,EAAG2R,EAAYC,GAAchG,EAAM5H,KAAM,WAEzE4H,EAAMqG,UACNxB,EAAOqB,UAAU,IAAI9R,EAAO,EAAG,EAAG2R,EAAYC,GAAchG,EAAM5H,KAAM,GAExEyM,EAAO/L,OAAO,IAAI1E,EAAO,EAAG,EAAG2R,EAAYC,GAAchG,EAAM5H,MAIxE,SAAUkO,GAASzF,GACrB,MAAM0F,EAAWruB,OAAOwoB,OAAO,GAAIG,EAAUb,OAC7CuG,EAASN,UAAW,EACpBM,EAASJ,gBAAiB,EAC1BI,EAASF,WAAY,EACrB,MAAMG,EAAa3F,EAAUb,MAE7Ba,EAAUb,MAAQuG,EAClB,MAAMjuB,EAAIwqB,GAA8B3B,GAA4CN,IAEpF,OADAA,EAAUb,MAAQwG,EACXluB,EAGL,SAAUmuB,GAAe5F,GAC3B,MAAM0F,EAAWruB,OAAOwoB,OAAO,GAAIG,EAAUb,OAC7CuG,EAASN,UAAW,EACpBM,EAASJ,gBAAiB,EAC1BI,EAASF,WAAY,EACrB,MAAMG,EAAa3F,EAAUb,MAE7Ba,EAAUb,MAAQuG,EAClB,MAAMjuB,EAAIwqB,GAA8B3B,GAA4CN,IAEpF,OADAA,EAAUb,MAAQwG,EACXluB,EAGL,SAAU4tB,GAAUrF,GACtB,MAAM0F,EAAWruB,OAAOwoB,OAAO,GAAIG,EAAUb,OAC7CuG,EAASN,UAAW,EACpBM,EAASJ,gBAAiB,EAC1BI,EAASF,WAAY,EACrB,MAAMG,EAAa3F,EAAUb,MAE7Ba,EAAUb,MAAQuG,EAClB,MAAMjuB,EAAIwqB,GAA8B3B,GAA4CN,IAEpF,OADAA,EAAUb,MAAQwG,EACXluB,EAGL,SAAUouB,GAAM7F,GAClB,MAAM0F,EAAWruB,OAAOwoB,OAAO,GAAIG,EAAUb,OAC7CuG,EAASN,UAAW,EACpBM,EAASJ,gBAAiB,EAC1BI,EAASF,WAAY,EACrB,MAAMG,EAAa3F,EAAUb,MAE7Ba,EAAUb,MAAQuG,EAClB,MAAMjuB,EAAIwqB,GAA8B3B,GAA4CN,IAEpF,OADAA,EAAUb,MAAQwG,EACXluB,ECzOL,MAAOquB,WAAkB5G,EAC3BrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,MAAMktB,EACDtpB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,SACb3f,EAA6B,GAC7BomB,EAAQ5uB,OAAOwoB,OAAO,GAAI1lB,KAAKglB,MAAM8G,OAAS,IACpD,IAAK,IAAItvB,EAAI,EAAGA,EAAIwD,KAAKglB,MAAM+G,MAAOvvB,IAClCkJ,EAAEzG,KAAK2sB,EAASpvB,EAAGsvB,IAEvB,OAAOpmB,GAeT,MAAOsmB,WAAsBjH,EAC/BrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,MAAMktB,EACDtpB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,SACb3f,EAA6B,GAC7BomB,EAAQ5uB,OAAOwoB,OAAO,GAAI1lB,KAAKglB,MAAM8G,OAAS,IACpD,IAAK,IAAItvB,EAAI,EAAGA,EAAIwD,KAAKglB,MAAMiH,MAAMntB,OAAQtC,IACzCkJ,EAAEzG,KAAK2sB,EAAS5rB,KAAKglB,MAAMiH,MAAMzvB,GAAIA,EAAGwD,KAAKglB,MAAMiH,MAAOH,IAE9D,OAAOpmB,GAUT,MAAOwmB,WAAWnH,EACpBrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,OAAIsB,KAAKglB,MAAM0D,UAAkB1oB,KAAKglB,MAAMK,SAChC,IASd,MAAO8G,WAAWpH,EACpBrmB,YAAmBsmB,GACf3S,MAAM2S,IAED1iB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,YAIhB3mB,kBAEAA,YACH,MAAO,GAGJA,OAAOwmB,EAA4BG,GACtC,MAAO,IAST,MAAO+G,WAAc5D,GACvB9pB,YAAmBsmB,GACf3S,MAAM2S,IAKP,MAAMqH,GAAWD,GC1GlB,MAAOE,WAAwBlH,EACjC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,wGACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAO9B,MAAOkH,WAA8BnH,EACvC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,oHACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAO9B,MAAOmH,WAA0BpH,EACnC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,mHACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAO9B,MAAOoH,WAAwBrH,EACjC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,2HACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAO9B,MAAOqH,WAA8BtH,EACvC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,uIACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAO9B,MAAOsH,WAA0BvH,EACnC1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,+HACI1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAM9B,MAAOuH,WAAcxH,EACvB1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,MAAM/hB,EAAIujB,GAAgC7mB,KAAKglB,OAC/C,6BAA8B1hB,EAAE0jB,SAAS1jB,EAAE+hB,WAAWA,YAWxD,MAAOwH,WAAYzH,EACrB1mB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,OAAOwmB,EAA4BG,GACtC,wBAAuD,iBAAvBrlB,KAAKglB,MAAM8H,QAAuB9sB,KAAKglB,MAAM8H,QAAU,oBACpD,iBAAxB9sB,KAAKglB,MAAMpZ,SAAwB5L,KAAKglB,MAAMpZ,SAAW,aAAayZ,KAenF,MAAO0H,WAA6BhI,EACtCrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,MAAMktB,EACDtpB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,SACb3f,EAA6B,GAC7BomB,EAAQ5uB,OAAOwoB,OAAO,GAAI1lB,KAAKglB,MAAM8G,OAAS,IACpD,IAAK,IAAItvB,EAAI,EAAGA,EAAIwD,KAAKglB,MAAMiH,MAAMntB,OAAQtC,IACzCkJ,EAAEzG,KACEsN,GAAA,OAAK0U,MAAO,CACR+L,SAAU,WACVC,KAAOjtB,KAAKglB,MAAMkI,WAAcltB,KAAKglB,MAAMmI,MAAS3wB,EAAIwD,KAAKglB,MAAMmI,MACnEC,IAAOptB,KAAKglB,MAAMqI,YAAcrtB,KAAKglB,MAAMsI,KAAS/pB,KAAKe,MAAM9H,EAAIwD,KAAKglB,MAAMmI,QAEhFvB,EAAS5rB,KAAKglB,MAAMiH,MAAMzvB,GAAIA,EAAGwD,KAAKglB,MAAMiH,MAAOH,KAG7D,OAAOpmB,GCjIT,MAAO6nB,WAAYnI,EACrB1mB,YAAmBsmB,GACf3S,MAAM2S,GAMFhlB,KAAA8c,SAA0B,KAL1BkI,EAAMlI,WACN9c,KAAK8c,SAAWkI,EAAMlI,UAMvBpe,QACH,GAAsB,OAAlBsB,KAAK8c,SACL,OAAOzT,QAAQC,UACZ,QAA+B,IAA3BtJ,KAAKglB,MAAMwI,aAAqD,OAA3BxtB,KAAKglB,MAAMwI,aAAmD,KAA3BxtB,KAAKglB,MAAMwI,YAC1F,OAAOnkB,QAAQC,UACZ,CACH,MAAM6C,EAAMnM,KAAKglB,MAAMwI,YAiBvB,OAhBgB,IAAInkB,QAAc,CAACC,EAASC,KACxC,IACIL,EAAYukB,cAActhB,GACzB0b,KAAMvnB,IACHN,KAAK8c,SAAWlc,EAAa8sB,WAAWptB,EAAO6D,MAC/CmF,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,mBAAqBX,GAChCgC,EAAOhC,KAEb,MAAOA,GACLP,EAAOkB,IAAI,mBAAqBX,GAChCgC,EAAOhC,OAOhB7I,WACH,OAAO4sB,GAAStrB,MAGbtB,iBACH,OAAO+sB,GAAezrB,MAGnBtB,YACH,OAAOwsB,GAAUlrB,MAGdtB,QACH,OAAOgtB,GAAM1rB,MAGVtB,aACH,OAAOopB,GAA8B9nB,MAGlCtB,aAAawmB,GAChBllB,KAAK2tB,WAAWzI,EAAUkE,GACJ,OAAlBppB,KAAK8c,SAAoB,IAAIL,EAAcA,EAAUmR,aAAa5tB,KAAK8c,WAIxEpe,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IACpD,OAAO0B,GAAgB9qB,KAAKglB,MAAO6E,EAAQ7pB,KAAKglB,MAAMlf,MAAO9F,KAAKglB,MAAMjf,QAGrErH,YAAYwmB,GACfllB,KAAK6tB,aAAa3I,EAAUkE,KAM7B,MAAM0E,GAAoC5wB,OAAOwoB,OAAO,GAAI6D,GAAmB,IAGhF,MAAOwE,WAAgBtE,GACzB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIoI,GAAqB9I,IAC7ChlB,KAAK0pB,WAAY,EACjB1pB,KAAK4pB,SAAU,EAGZlrB,OAAOwmB,EAA4BG,GACtC,MAAO,IAaR,MAAM2I,GAA4B9wB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC1EjsB,EAAG,EACH2wB,SAAU,EACVC,OAAQ,IACRhP,eAAe,IAGb,MAAOiP,WAAY1E,GACrB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIsI,GAAiBhJ,IAGtCtmB,OAAOwmB,EAA4BG,GAStC,OAR0BrlB,KAAKikB,WAAWiB,EAAUkE,IAC7CxI,IACH5gB,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAMiJ,SAAW,IAAM1qB,KAAKwV,GAAI/Y,KAAKglB,MAAMkJ,OAAS,IAAM3qB,KAAKwV,GACpE/Y,KAAKglB,MAAM9F,eAER,IAYR,MAAMkP,GAAkClxB,OAAOwoB,OAAO,GAAI6D,GAAmB,IAG9E,MAAO8E,WAAe5E,GACxB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI0I,GAAoBpJ,IAGzCtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAMpD,OAJK9mB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,UAChBwE,GACI,IAWR,MAAMyE,GAAkCpxB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAChFjsB,EAAG,EACH4hB,eAAe,IAGb,MAAOqP,WAAe9E,GACxB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI4I,GAAoBtJ,IAGzCtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IASpD,OARAS,EAAOjJ,IACH5gB,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX,EAAG,EAAIiG,KAAKwV,GACZ/Y,KAAKglB,MAAM9F,eAEf2K,EAAO/I,YACA,IAWR,MAAM0N,GAAgCtxB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC9EkF,MAAM,EACNlP,OAAQ,KAGN,MAAOmP,WAAcjF,GACvB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI8I,GAAmBxJ,IAGxCtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAChDppB,KAAKglB,MAAMyJ,MAAM5E,EAAO9I,OAAO/gB,KAAKglB,MAAMzF,OAAO,GAAIvf,KAAKglB,MAAMzF,OAAO,IAC3E,IAAK,IAAI/iB,EAAIwD,KAAKglB,MAAMyJ,KAAO,EAAI,EAAGjyB,EAAIwD,KAAKglB,MAAMzF,OAAOzgB,OAAQtC,GAAK,EACrEqtB,EAAO8E,cACH3uB,KAAKglB,MAAMzF,OAAO/iB,EAAI,GACtBwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,GACtBwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,GACtBwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,GACtBwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,GACtBwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,IAG9B,MAAO,IAuBR,MAAMoyB,GAAiD1xB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC/FxN,UAAW,GACX1M,MAAM,EACN0a,QAAQ,EACRC,YAAa,OACb6E,OAAQ,EACRC,KAAM,IACNC,OAAQ,EACRC,KAAM,IACNC,SAAU,EACVC,MAAO,KAGL,MAAOC,WAAiB1F,GAC1B/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIkJ,GAAsB5J,IAG3CtmB,OAAOwmB,EAA4BG,GACtC,MAAML,EAAQhlB,KAAKglB,MAEb6E,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAC9CvR,EAAKtU,KAAK8B,KAAK2f,EAAMkK,MAAQlK,EAAMiK,UAAYjK,EAAMiK,SACrDG,EAAK7rB,KAAK8B,MAAM2f,EAAM8J,KAAO9J,EAAM6J,OAAS7J,EAAMkK,OAASlK,EAAMiK,UAAYjK,EAAMiK,SACnFI,EAAK9rB,KAAK8B,MAAM2f,EAAMgK,KAAOhK,EAAM+J,OAAS/J,EAAMkK,OAASlK,EAAMiK,UAAYjK,EAAMiK,SAEzF,IAAK,IAAIvV,EAAKsL,EAAM6J,OAAShX,EAAI6B,GAAM0V,EAAI1V,GAAMsL,EAAMiK,SACnDpF,EAAO9I,OAAOiE,EAAM6J,OAASnV,EAAIsL,EAAM+J,OAASlX,GAChDgS,EAAOhJ,OAAOmE,EAAM6J,OAASnV,EAAIsL,EAAM+J,OAASM,GAEpD,IAAK,IAAI1V,EAAKqL,EAAM+J,OAASlX,EAAI8B,GAAM0V,EAAI1V,GAAMqL,EAAMiK,SACnDpF,EAAO9I,OAAOiE,EAAM6J,OAAShX,EAAImN,EAAM+J,OAASpV,GAChDkQ,EAAOhJ,OAAOmE,EAAM6J,OAASO,EAAIpK,EAAM+J,OAASpV,GAIpD,OADAkQ,EAAOyF,KAAKtK,EAAM6J,QAAU,EAAG7J,EAAM+J,QAAU,EAAG/J,EAAM8J,KAAO9J,EAAM6J,OAAQ7J,EAAMgK,KAAOhK,EAAM+J,QACzF,IAaT,MAAOQ,WAAc9F,GACvB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI,GAAIV,IAC5BhlB,KAAK0pB,WAAY,EAGdhrB,OAAOwmB,EAA4BG,GACtC,MAAO,IAWR,MAAMmK,GAA8BtyB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC5EkF,MAAM,EACNlP,OAAQ,KAGN,MAAOkQ,WAAahG,GACtB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI8J,GAAkBxK,IAGvCtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAChDppB,KAAKglB,MAAMyJ,MAAM5E,EAAO9I,OAAO/gB,KAAKglB,MAAMzF,OAAO,GAAIvf,KAAKglB,MAAMzF,OAAO,IAC3E,IAAK,IAAI/iB,EAAIwD,KAAKglB,MAAMyJ,KAAO,EAAI,EAAGjyB,EAAIwD,KAAKglB,MAAMzF,OAAOzgB,OAAQtC,GAAK,EACrEqtB,EAAOhJ,OAAO7gB,KAAKglB,MAAMzF,OAAO/iB,GAAIwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,IAE9D,MAAO,IAaR,MAAMkzB,GAA8BxyB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC5EoG,OAAO,EACPC,MAAM,EACN9pB,MAAO,GACPC,OAAQ,GACR8pB,MAAO,KAGL,MAAOC,WAAarG,GACtB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIgK,GAAkB1K,IAGvCtmB,aAAawmB,GAChBllB,KAAK2tB,WAAWzI,EAAUmE,IAAkB,GAGzC3qB,OAAOwmB,EAA4BG,GACtC,MAAO,GAGJ3mB,YAAYwmB,GACfllB,KAAK6tB,aAAa3I,EAAUmE,KAa7B,MAAM0G,GAA4B7yB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC1EjsB,EAAG,EACH2wB,SAAU,EACVC,OAAQ,IACRhP,eAAe,IAGb,MAAO8Q,WAAYvG,GACrB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIqK,GAAiB/K,IAGtCtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAUpD,OATAS,EAAO9I,OAAO/gB,KAAKglB,MAAM1nB,EAAG0C,KAAKglB,MAAM1nB,GACvCusB,EAAOjJ,IACH5gB,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAM1nB,EACX0C,KAAKglB,MAAMiJ,SAAW,IAAM1qB,KAAKwV,GAAI/Y,KAAKglB,MAAMkJ,OAAS,IAAM3qB,KAAKwV,GACpE/Y,KAAKglB,MAAM9F,eAEf2K,EAAO/I,YACA,IAUR,MAAMmP,GAAoC/yB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAClFhK,OAAQ,KAGN,MAAO2Q,WAAgBzG,GACzB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIuK,GAAqBjL,IAG1CtmB,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IACpDS,EAAO9I,OAAO/gB,KAAKglB,MAAMzF,OAAO,GAAIvf,KAAKglB,MAAMzF,OAAO,IACtD,IAAK,IAAI/iB,EAAI,EAAGA,EAAIwD,KAAKglB,MAAMzF,OAAOzgB,OAAQtC,GAAK,EAC/CqtB,EAAOhJ,OAAO7gB,KAAKglB,MAAMzF,OAAO/iB,GAAIwD,KAAKglB,MAAMzF,OAAO/iB,EAAI,IAG9D,OADAqtB,EAAO/I,YACA,IAWR,MAAMqP,GAA8BjzB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC5EzjB,MAAO,GACPC,OAAQ,KAGN,MAAOqqB,WAAa3G,GACtB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIyK,GAAkBnL,IAGvCtmB,OAAOwmB,EAA4BG,GAGtC,OAF0BrlB,KAAKikB,WAAWiB,EAAUkE,IAC7CkG,KAAK,EAAG,EAAGtvB,KAAKglB,MAAMlf,MAAO9F,KAAKglB,MAAMjf,QACxC,IAYR,MAAMsqB,GAAwCnzB,OAAOwoB,OAAO,GAAI6D,GAAmB,CACtFzjB,MAAO,GACPC,OAAQ,GACRzI,EAAG,IAGD,MAAOgzB,WAAkB7G,GAC3B/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI2K,GAAuBrL,IAG5CtmB,OAAOwmB,EAA4BG,GAGtC,OAF0BrlB,KAAKikB,WAAWiB,EAAUkE,IAC7CmH,UAAU,EAAG,EAAGvwB,KAAKglB,MAAMlf,MAAO9F,KAAKglB,MAAMjf,OAAQ/F,KAAKglB,MAAM1nB,GAChE,IASR,MAAMkzB,GAAiDtzB,OAAOwoB,OAAO,GAAI6D,GAAmB,IAG7F,MAAOkH,WAAyBhH,GAClC/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI0I,GAAoBpJ,IAGzCtmB,OAAOwmB,EAA4BG,GAGtC,OAF0BrlB,KAAKikB,WAAWiB,EAAUkE,IAC7CsH,oBAAoBrL,GACpB,IASR,MAAMsL,GAA4CzzB,OAAOwoB,OAAO,GAAI6D,GAAmB,IAGxF,MAAOqH,WAAoBnH,GAC7B/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAI0I,GAAoBpJ,IAGzCtmB,OAAOwmB,EAA4BG,GAGtC,OAF0BrlB,KAAKikB,WAAWiB,EAAUkE,IAC7CyH,oBAAoBxL,GACpB,IAaR,MAAMyL,GAA8B5zB,OAAOwoB,OAAO,GAAI6D,GAAmB,CAC5E5d,KAAM,KAGJ,MAAOolB,WAAatH,GACtB/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIoL,GAAkB9L,IAGpCtmB,eAAemrB,GACjB7pB,KAAKglB,MAAMvJ,OAAcoO,EAAOpO,KAAezb,KAAKglB,MAAMvJ,MAC1Dzb,KAAKglB,MAAMtJ,YAAcmO,EAAOnO,UAAe1b,KAAKglB,MAAMtJ,WAC1D1b,KAAKglB,MAAMrJ,eAAckO,EAAOlO,aAAe3b,KAAKglB,MAAMrJ,cAErD3b,KAAKglB,MAAM3V,MAAQrP,KAAKglB,MAAM+E,OAAQF,EAAOmH,eAAehxB,KAAKglB,MAAMrZ,KAAM,EAAG,EAAG3L,KAAKglB,OACxFhlB,KAAKglB,MAAM3V,KAA2Bwa,EAAaoH,SAASjxB,KAAKglB,MAAMrZ,KAAM,EAAG,EAAG3L,KAAKglB,OACrEhlB,KAAKglB,MAAM+E,QAAQF,EAAWqH,WAAWlxB,KAAKglB,MAAMrZ,KAAM,EAAG,EAAG3L,KAAKglB,OAG9FtmB,OAAOwmB,EAA4BG,GACtC,MAAO,GAGJ3mB,YAAYwmB,GACf,MAAM2E,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAC/CppB,KAAK2pB,iBACN3pB,KAAKgxB,eAAenH,GACpB7pB,KAAK6qB,oBAAoBhB,KAmB/B,MAAOsH,WAA4BpM,EACrCrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,MAAMktB,EACDtpB,MAAMC,QAAQvC,KAAKglB,MAAMK,UACrBrlB,KAAKglB,MAAMK,SAAmBwG,KAAKvoB,GAAkB,mBAANA,GAChDtD,KAAKglB,MAAMK,SACb3f,EAA6B,GAC7BomB,EAAQ5uB,OAAOwoB,OAAO,GAAI1lB,KAAKglB,MAAM8G,OAAS,IACpD,IAAK,IAAItvB,EAAI,EAAGA,EAAIwD,KAAKglB,MAAMiH,MAAMntB,OAAQtC,IACzCkJ,EAAEzG,KACEsN,GAACgjB,GAAK,CACFjsB,EAAKtD,KAAKglB,MAAMkI,WAAcltB,KAAKglB,MAAMmI,MAAS3wB,EAAIwD,KAAKglB,MAAMmI,OAC5D7qB,MAAMC,QAAQvC,KAAKglB,MAAMoM,iBACrB9uB,MAAMC,QAAQvC,KAAKglB,MAAMoM,gBAAgB50B,IACtCwD,KAAKglB,MAAMoM,gBAAgB50B,GAAG,IAAM,EAAIwD,KAAKglB,MAAMoM,gBAAgB,IAAM,EAC7E,GACRztB,EAAK3D,KAAKglB,MAAMqI,YAAcrtB,KAAKglB,MAAMsI,KAAS/pB,KAAKe,MAAM9H,EAAIwD,KAAKglB,MAAMmI,OACvE7qB,MAAMC,QAAQvC,KAAKglB,MAAMoM,iBACrB9uB,MAAMC,QAAQvC,KAAKglB,MAAMoM,gBAAgB50B,IACtCwD,KAAKglB,MAAMoM,gBAAgB50B,GAAG,IAAM,EAAIwD,KAAKglB,MAAMoM,gBAAgB,IAAM,EAC7E,GACRjH,OACK7nB,MAAMC,QAAQvC,KAAKglB,MAAMqM,WACrB/uB,MAAMC,QAAQvC,KAAKglB,MAAMqM,UAAU70B,IAChCwD,KAAKglB,MAAMqM,UAAU70B,GAAG,IAAM,EAAIwD,KAAKglB,MAAMqM,UAAU,IAAM,EACjE,EACRjH,OACK9nB,MAAMC,QAAQvC,KAAKglB,MAAMqM,WACrB/uB,MAAMC,QAAQvC,KAAKglB,MAAMqM,UAAU70B,IAChCwD,KAAKglB,MAAMqM,UAAU70B,GAAG,IAAM,EAAIwD,KAAKglB,MAAMqM,UAAU,IAAM,EACjE,EACRhH,YACI/nB,MAAMC,QAAQvC,KAAKglB,MAAMsM,iBACrBtxB,KAAKglB,MAAMsM,gBAAgB90B,IAAM,EACjCwD,KAAKglB,MAAMsM,iBAAmB,GAExC1F,EAAS5rB,KAAKglB,MAAMiH,MAAMzvB,GAAIA,EAAGwD,KAAKglB,MAAMiH,MAAOH,KAG7D,OAAOpmB,GC9mBT,MAAO6rB,WAAcnM,EACvB1mB,YAAmBsmB,GACf3S,MAAM2S,GAGFhlB,KAAAwa,QAAkB,GAEnB9b,QACH,QAAuB,IAAnBsB,KAAKglB,MAAMhf,KAAqC,OAAnBhG,KAAKglB,MAAMhf,KAAmC,KAAnBhG,KAAKglB,MAAMhf,IACnE,OAAOqD,QAAQC,UACZ,CACH,MAAMtD,EAAMhG,KAAKglB,MAAMhf,IA2BvB,OA1BgB,IAAIqD,QAAc,CAACC,EAASC,KACxC,IACIL,EAAYukB,cAAcztB,KAAKglB,MAAMhf,KACpC6hB,KAAMvnB,IACH,IAAIwJ,EAAcxJ,EAAOwJ,YACzB,GAAoB,OAAhBA,EAAsB,CACtB,MAAM0E,EAAUT,EAAIyjB,WAAWxrB,GAE/B,GAAoB,QADpB8D,EAAciE,EAAI0jB,qBAAqBjjB,IAInC,OAFAxH,EAAOkB,IAAI,oCAAsCsG,QACjDjF,EAAO,wBAIfvJ,KAAKwa,gBAAkB1Q,YAAwBrL,EAAOiE,OAAOpC,EAAO6D,KAAM,KAC1EmF,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,qBAAuBX,GAClCgC,EAAOhC,KAEb,MAAOA,GACLP,EAAOkB,IAAI,qBAAuBX,GAClCgC,EAAOhC,OAOhB7I,aAAawmB,GAChBllB,KAAK2tB,WAAWzI,EAAUoE,GAAiBtpB,KAAKglB,MAAM0M,YAAa1xB,KAAKwa,SAGrE9b,OAAOwmB,EAA4BG,GACtC,MAAO,IAyGT,MAAOsM,WAAclI,GACvB/qB,YAAmBsmB,GACf3S,MAAM2S,GAUFhlB,KAAAwa,QAAkB,GAPnB9b,YACH,OAC6B,OAAxBsB,KAAKglB,MAAMK,eAA6C,IAAxBrlB,KAAKglB,MAAMK,SAC5CrlB,KAAKglB,MAAMK,SAAW,GAMvB3mB,QACH,QAAuB,IAAnBsB,KAAKglB,MAAM4M,KAAqC,OAAnB5xB,KAAKglB,MAAM4M,KAAmC,KAAnB5xB,KAAKglB,MAAM4M,IACnE,OAAOvoB,QAAQC,UACZ,GAAqB,OAAjBtJ,KAAKwa,cAAqC,IAAjBxa,KAAKwa,SAAuC,KAAjBxa,KAAKwa,QAChE,OAAOnR,QAAQC,UACZ,GAAuB,OAAnBtJ,KAAKglB,MAAMhf,UAAmC,IAAnBhG,KAAKglB,MAAMhf,KAAqC,KAAnBhG,KAAKglB,MAAMhf,IAC1E,OAAOqD,QAAQC,UACZ,GAAItJ,KAAKglB,MAAM6M,WAElB,OADA7xB,KAAKwa,QAAUxa,KAAKglB,MAAMhf,IACnBqD,QAAQC,UACZ,CACH,MAAMtD,EAAMhG,KAAKglB,MAAMhf,IAsBvB,OArBgB,IAAIqD,QAAc,CAACC,EAASC,KACxCL,EAAYukB,cAAcznB,GACzB6hB,KAAMvnB,IACH,IAAIwJ,EAAcxJ,EAAOwJ,YACzB,GAAoB,OAAhBA,EAAsB,CACtB,MAAM0E,EAAUT,EAAIyjB,WAAWxrB,GAE/B,GAAoB,QADpB8D,EAAciE,EAAI0jB,qBAAqBjjB,IAInC,OAFAxH,EAAOkB,IAAI,oCAAsCsG,QACjDjF,EAAO,wBAIfvJ,KAAKwa,gBAAkB1Q,YAAwBrL,EAAOiE,OAAOpC,EAAO6D,KAAM,KAC1EmF,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,eAAiBX,GAC5BgC,EAAOhC,QAOf7I,aAAawmB,GACjB,IAAI5nB,EAAI,GACR,GAAI0C,KAAKglB,MAAM8M,QACXx0B,mEACI0C,KAAKglB,MAAM/b,SACXjJ,KAAKwa,QAAQhb,QAAQ,MAAO,IAAIA,QAAQ,MAAO,uBAEnD,QAAuB,IAAnBQ,KAAKglB,MAAM4M,KAAqC,OAAnB5xB,KAAKglB,MAAM4M,KAAmC,KAAnB5xB,KAAKglB,MAAM4M,IAAY,CAC/E,MAAM3oB,EAAKjJ,KAAKglB,MAAM/b,kCAAoCjJ,KAAKglB,MAAMkB,WACrE5oB,cAAgB2L,mBACZjJ,KAAKglB,MAAMlf,QAAQ9F,KAAKglB,MAAM5H,MAAQ,eACtCpd,KAAKglB,MAAMjf,SAAS/F,KAAKglB,MAAM5H,MAAQ,SACvCyJ,GAAgC7mB,KAAKglB,MAAO,IAAIF,IAAI,CAAC,KAAM,MAAO,OAAQ,QAAS,YAAYkC,gDAE/F/d,iEAAkEjJ,KAAKglB,MAAM4M,wBAEjFt0B,eAAiB0C,KAAKwa,yBAClBxa,KAAKglB,MAAMlf,QAAQ9F,KAAKglB,MAAM5H,MAAQ,eACtCpd,KAAKglB,MAAMjf,SAAS/F,KAAKglB,MAAM5H,MAAQ,SACvCyJ,GAAgC7mB,KAAKglB,MAAO,IAAIF,IAAI,CAAC,MAAO,OAAQ,QAAS,YAAYkC,eAGrG,OAAO1pB,EAGHoB,YAAYmrB,GAChB,MAAMrG,OAA0B,IAAnBxjB,KAAKglB,MAAM4M,KAAqC,OAAnB5xB,KAAKglB,MAAM4M,KAAmC,KAAnB5xB,KAAKglB,MAAM4M,IAC5E,IAAM5xB,KAAKglB,MAAM4M,IACjB/H,EAAOkI,cAAc,CAAC5lB,IAAKnM,KAAKwa,QAASlX,EAAG,EAAGK,EAAG,EAAGmC,MAAO,EAAGC,OAAQ,GAAI/F,KAAKglB,MAAM/b,IAEpFjJ,KAAKglB,MAAM8M,SACbjI,EAAO3F,UAAUV,EAAKxjB,KAAKglB,MAAM1hB,GAAK,EAAGtD,KAAKglB,MAAMrhB,GAAK,EAAG3D,KAAKglB,MAAMlf,MAAO9F,KAAKglB,MAAMjf,QAI1FrH,OAAOwmB,EAA4BG,GACtC,MAAMwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAMpD,YAJ8B,IAA1BppB,KAAKglB,MAAMgN,YAAmD,OAA1BhyB,KAAKglB,MAAMgN,YAAiD,KAA1BhyB,KAAKglB,MAAMgN,aACjFhyB,KAAKwa,QAAUxa,KAAKikB,WAAWiB,EAAUoE,GAAiBtpB,KAAKglB,MAAMgN,aAGrEnI,GACA7pB,KAAKiyB,YAAYpI,GACV,IAEA7pB,KAAKwnB,aAAatC,IAmB/B,MAAOgN,WAAe9M,EACxB1mB,YAAmBsmB,GACf3S,MAAM2S,GAGFhlB,KAAAwa,QAAkB,GAEnB9b,QACH,QAAuB,IAAnBsB,KAAKglB,MAAMhf,KAAqC,OAAnBhG,KAAKglB,MAAMhf,KAAmC,KAAnBhG,KAAKglB,MAAMhf,IACnE,OAAOqD,QAAQC,UACZ,GAAItJ,KAAKglB,MAAM6M,WAClB,OAAOxoB,QAAQC,UAkBf,OAhBgB,IAAID,QAAc,CAACC,EAASC,KACxC,IACIL,EAAYukB,cAAcztB,KAAKglB,MAAMhf,KACpC6hB,KAAMvnB,IACHN,KAAKwa,QAAU5Z,EAAa8sB,WAAWptB,EAAO6D,MAC9CmF,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,sBAAwBX,GACnCgC,EAAOhC,KAEb,MAAOA,GACLP,EAAOkB,IAAI,sBAAwBX,GACnCgC,EAAOhC,MAOhB7I,OAAOwmB,EAA4BG,GACtC,IAAI/nB,EAAI,GAEJA,EADA0C,KAAKglB,MAAM6M,qBACGhL,GAAgC7mB,KAAKglB,MAAO,IAAIF,IAAI,KAAKkC,6BAEzDH,GAAgC7mB,KAAKglB,MAAO,IAAIF,IAAI,CAAC,SAASkC,SAAShnB,KAAKwa,oBAE9F,MAAMqP,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IACpD,OAAIS,GACAA,EAAO6G,oBAAoBpzB,GACpB,IAEAA,GAiBb,MAAO60B,WAAc/M,EACvB1mB,YAAmBsmB,GACf3S,MAAM2S,GAGFhlB,KAAAwa,QAAkB,GAEnB9b,QACH,QAAuB,IAAnBsB,KAAKglB,MAAMhf,KAAqC,OAAnBhG,KAAKglB,MAAMhf,KAAmC,KAAnBhG,KAAKglB,MAAMhf,IACnE,OAAOqD,QAAQC,UACZ,GAAItJ,KAAKglB,MAAM6M,WAClB,OAAOxoB,QAAQC,UA8Cf,OA5CgB,IAAID,QAAc,CAACC,EAASC,KACxC,IACIL,EAAYukB,cAAcztB,KAAKglB,MAAMhf,KACpC6hB,KAAMvnB,IACHN,KAAKwa,QAAU5Z,EAAa8sB,WAAWptB,EAAO6D,MAC9C,MACMiuB,EAAY,iBACZC,EAAYryB,KAAKwa,QAAQja,MAFf,gBAGVonB,EAAiC,GACjC2K,EAAoB,GAC1B,IAAK,IAAI91B,EAAI,EAAGA,EAAI61B,EAAUvzB,OAAQtC,IAAK,CACvC,MAAMI,EAAIw1B,EAAUtQ,KAAKuQ,EAAU71B,IAC/BI,IAAOA,EAAE,GAAI8M,WAAW,WACxBie,EAAS1oB,KACLiK,EAAYukB,cAAc1f,EAAI2P,KAAK1d,KAAKglB,MAAMhf,IAAKpJ,EAAE,KACpDirB,KAAM0K,IAGHF,EAAU71B,GAAK61B,EAAU71B,GAAGgD,QAAQ4yB,iBACjBG,EAAWzoB,oCAAsCrL,EAAOiE,OAAO6vB,EAAWpuB,aAGrGmuB,EAAQrzB,KAAKzC,IAGrB6M,QAAQoe,IAAIE,GACXE,KAAK,KACF7nB,KAAKwa,QAAU6X,EAAU3U,KAAK,IAC9BpU,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,wBAA0BX,GACrCgC,EAAOhC,OAGd2gB,MAAO3gB,IACJP,EAAOkB,IAAI,wBAA0BX,GACrCgC,EAAOhC,KAEb,MAAOA,GACLP,EAAOkB,IAAI,wBAA0BX,GACrCgC,EAAOhC,MAOhB7I,OAAOwmB,EAA4BG,GACtC,IAAI/nB,EAAI,GAEJA,EADA0C,KAAKglB,MAAM6M,kDACgC7xB,KAAKglB,MAAMhf,0BAEzC6gB,GAAgC7mB,KAAKglB,MAAO,IAAIF,IAAI,CAAC,SAASkC,SAAShnB,KAAKwa,kBAE7F,MAAMqP,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IACpD,OAAIS,GACAA,EAAO6G,oBAAoBpzB,GACpB,IAEAA,GAMZ,MAAMk1B,GAAOL,GAgBd,MAAOM,WAAmBrN,EAC5B1mB,YAAmBsmB,GACf3S,MAAM2S,GAGFhlB,KAAAwa,QAAkB,GAEnB9b,QACH,QAAuB,IAAnBsB,KAAKglB,MAAMhf,KAAqC,OAAnBhG,KAAKglB,MAAMhf,KAAmC,KAAnBhG,KAAKglB,MAAMhf,IACnE,OAAOqD,QAAQC,UACZ,GAAItJ,KAAKglB,MAAM6M,WAClB,OAAOxoB,QAAQC,UAkBf,OAhBgB,IAAID,QAAc,CAACC,EAASC,KACxC,IACIL,EAAYukB,cAAcztB,KAAKglB,MAAMhf,KACpC6hB,KAAMvnB,IACHN,KAAKwa,gBAAkBla,EAAOwJ,oCAAsCrL,EAAOiE,OAAOpC,EAAO6D,MACzFmF,MAEH4e,MAAO3gB,IACJP,EAAOkB,IAAI,0BAA4BX,GACvCgC,EAAOhC,KAEb,MAAOA,GACLP,EAAOkB,IAAI,0BAA4BX,GACvCgC,EAAOhC,MAOhB7I,OAAOwmB,EAA4BG,GACtC,IAAI/nB,EAAI,GACJ0C,KAAKglB,MAAM6M,WAGfv0B,mDACI0C,KAAKglB,MAAM0N,yBACX1yB,KAAKglB,MAAM2N,yBACX3yB,KAAKglB,MAAM4N,kBACX5yB,KAAKglB,MAAM6N,WAAa7yB,KAAKglB,MAAM6N,WAAWvjB,IAAIhM,aAAeA,MAAQ,UACzEtD,KAAKglB,MAAM6M,WAAa7xB,KAAKglB,MAAMhf,IAAMhG,KAAKwa,0BAC9Cxa,KAAKglB,MAAM8N,yBACf,MAAMjJ,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IACpD,OAAIS,GACAA,EAAO6G,oBAAoBpzB,GACpB,IAEAA,GCtdZ,MAAMy1B,GAAyC71B,OAAOwoB,OAAO,GAAI6D,GAAmB,CACvFla,MAAM,EACN0a,QAAQ,EACRC,YAAa,QACbjO,UAAW,QAEXjW,MAAO,IACPC,OAAQ,IACRitB,eAAgB,EAChBC,YAAY,EACZC,WAAY,EACZC,WAAY,EACZC,UAAW,EACXC,UAAW,EACXC,aAAa,EACbC,oBAAqB,GACrBC,oBAAqB,IAGnB,MAAOC,WAAqBhK,GAC9B/qB,YAAmBsmB,GACf3S,MAAMnV,OAAOwoB,OAAO,GAAIqN,GAAqB/N,IAG1CtmB,OAAOwmB,EAA4BG,GACtC,MAAMxoB,EAAemD,KAAKikB,WAAWiB,EAAUkE,IACzC9qB,EAAI0B,KAAKglB,MA+Ef,GA1EInoB,EAAEkkB,QAAkBziB,EAAE+0B,UAA4D,GAClFx2B,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,eAAkC,GAClFn2B,EAAEkkB,QAAkBziB,EAAE+0B,UAAqD/0B,EAAEyH,QAC7ElJ,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,eAA2B10B,EAAEyH,QAE7ElJ,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAA4D,GAClFv2B,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,eAAkC,GAClFn2B,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAqD90B,EAAEyH,QAC7ElJ,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,eAA2B10B,EAAEyH,QAG7ElJ,EAAEkkB,OAAa,GAAeziB,EAAE40B,YAChCr2B,EAAEgkB,OAAa,GAAeviB,EAAE40B,WAAyB50B,EAAE00B,gBAC3Dn2B,EAAEkkB,OAAOziB,EAAEwH,OAAmBxH,EAAE40B,YAChCr2B,EAAEgkB,OAAOviB,EAAEwH,OAAmBxH,EAAE40B,WAAyB50B,EAAE00B,gBAE3Dn2B,EAAEkkB,OAAa,EAAGziB,EAAEyH,OAAUzH,EAAE60B,YAChCt2B,EAAEgkB,OAAa,EAAGviB,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,gBAC3Dn2B,EAAEkkB,OAAOziB,EAAEwH,MAAOxH,EAAEyH,OAAUzH,EAAE60B,YAChCt2B,EAAEgkB,OAAOviB,EAAEwH,MAAOxH,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,gBAI3D10B,EAAE20B,aAEFp2B,EAAEkkB,OAAsE,GAAeziB,EAAE40B,YACzFr2B,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,gBAAuC10B,EAAE40B,YACzFr2B,EAAEkkB,OAAsE,EAAGziB,EAAEyH,OAAUzH,EAAE60B,YACzFt2B,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,eAA2B10B,EAAEyH,OAAUzH,EAAE60B,YAEzFt2B,EAAEkkB,OAAOziB,EAAEwH,OAA4ExH,EAAE40B,YACzFr2B,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,gBAAuC10B,EAAE40B,YACzFr2B,EAAEkkB,OAAOziB,EAAEwH,MAAgExH,EAAEyH,OAAUzH,EAAE60B,YACzFt2B,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,eAA2B10B,EAAEyH,OAAUzH,EAAE60B,YAGzFt2B,EAAEkkB,QAAkBziB,EAAE+0B,UAAuF,GAC7Gx2B,EAAEgkB,QAAkBviB,EAAE+0B,WAAkC/0B,EAAE40B,WAAyB50B,EAAE00B,gBACrFn2B,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAuF,GAC7Gv2B,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,WAAkC90B,EAAE40B,WAAyB50B,EAAE00B,gBAErFn2B,EAAEkkB,QAAkBziB,EAAE+0B,UAAsB/0B,EAAEyH,QAC9ClJ,EAAEgkB,QAAkBviB,EAAE+0B,UAAsB/0B,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,gBACrFn2B,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAsB90B,EAAEyH,QAC9ClJ,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAsB90B,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,iBAIrF10B,EAAEg1B,cAEFz2B,EAAEkkB,OAAOziB,EAAEwH,MAAQ,GAAexH,EAAE40B,YACpCr2B,EAAEgkB,OAAOviB,EAAEwH,MAAQ,GAAexH,EAAE40B,WAAyB50B,EAAE00B,gBAC/Dn2B,EAAEkkB,OAAOziB,EAAEwH,MAAQ,EAAGxH,EAAEyH,OAAUzH,EAAE60B,YACpCt2B,EAAEgkB,OAAOviB,EAAEwH,MAAQ,EAAGxH,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,gBAG/Dn2B,EAAEkkB,OAAOziB,EAAEwH,MAAQ,EAAKxH,EAAEi1B,oBAAiC,GAAej1B,EAAE40B,WAAyB50B,EAAEk1B,qBACvG32B,EAAEgkB,OAAOviB,EAAEwH,MAAQ,EAAKxH,EAAEi1B,oBAAiC,GAAej1B,EAAE40B,WAAyB50B,EAAEk1B,qBACvG32B,EAAEkkB,OAAOziB,EAAEwH,MAAQ,EAAKxH,EAAEi1B,oBAAiC,EAAGj1B,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAEk1B,qBACvG32B,EAAEgkB,OAAOviB,EAAEwH,MAAQ,EAAKxH,EAAEi1B,oBAAiC,EAAGj1B,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAEk1B,qBAGvG32B,EAAEkkB,QAAkBziB,EAAE+0B,UAAqD/0B,EAAEyH,OAAS,GACtFlJ,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,eAA2B10B,EAAEyH,OAAS,GACtFlJ,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAqD90B,EAAEyH,OAAS,GACtFlJ,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,eAA2B10B,EAAEyH,OAAS,GAGtFlJ,EAAEkkB,QAAkBziB,EAAE+0B,UAAwB/0B,EAAEk1B,oBAAgCl1B,EAAEyH,OAAS,EAAKzH,EAAEi1B,oBAAiC,GACnI12B,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAEk1B,oBAAgCl1B,EAAEyH,OAAS,EAAKzH,EAAEi1B,oBAAiC,GACnI12B,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAEk1B,oBAAgCl1B,EAAEyH,OAAS,EAAKzH,EAAEi1B,oBAAiC,GACnI12B,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAEk1B,oBAAgCl1B,EAAEyH,OAAS,EAAKzH,EAAEi1B,oBAAiC,IAGnIj1B,EAAEo1B,MAAO,CACT,IAAIpwB,EAAI,EACR,IAAK,MAAMoW,KAAMpb,EAAEo1B,MACfpwB,GAAKoW,EACL7c,EAAEkkB,OAAOzd,GAAehF,EAAE40B,YAC1Br2B,EAAEgkB,OAAOvd,GAAehF,EAAE40B,WAAyB50B,EAAE00B,gBACrDn2B,EAAEkkB,OAAOzd,EAAGhF,EAAEyH,OAAUzH,EAAE60B,YAC1Bt2B,EAAEgkB,OAAOvd,EAAGhF,EAAEyH,OAAUzH,EAAE60B,WAAyB70B,EAAE00B,gBAI7D,GAAI10B,EAAEq1B,MAAO,CACT,IAAIhwB,EAAI,EACR,IAAK,MAAMgW,KAAMrb,EAAEq1B,MACfhwB,GAAKgW,EACL9c,EAAEkkB,QAAkBziB,EAAE+0B,UAAqD1vB,GAC3E9G,EAAEgkB,QAAkBviB,EAAE+0B,UAAwB/0B,EAAE00B,eAA2BrvB,GAC3E9G,EAAEkkB,OAAOziB,EAAEwH,MAASxH,EAAE80B,UAAqDzvB,GAC3E9G,EAAEgkB,OAAOviB,EAAEwH,MAASxH,EAAE80B,UAAwB90B,EAAE00B,eAA2BrvB,GAInF,MAAO,IC/GT,MAAOiwB,GACFl1B,YAAgCm1B,EAA8BC,GACjE,MAAO,CAACC,EAAOC,EAAShM,KACpB6L,EAASE,EAAOC,EAAS,CAAClsB,EAAOmsB,KACzBnsB,EACAkgB,EAASlgB,EAAO,MAEhBgsB,EAASG,EAAYD,EAAS,CAACloB,EAAKlC,IAAQoe,EAASlc,EAAKlC,QAQxE,MAAOsqB,GAIFx1B,WAAWy1B,EAAmBC,GACjC,GAAIF,GAAIG,YACJ,OAAOr0B,KAGX,MAAMs0B,EAAU,IAAInc,IACpB,IAAK,IAAIuJ,KAAMyS,EAAS,CACpB,IAAII,GAAU,EACVC,GAAa,EACb9S,EAAGhY,WAAW,OACdgY,EAAKA,EAAG1T,UAAU,GAClBwmB,GAAa,GAEjB,IAAK,MAAMC,KAAO/tB,QAAQguB,KAAKx1B,MAAM,GACjC,GAAIwiB,EAAGxT,SAAS,MACZ,GAAIumB,EAAI/qB,WAAWgY,EAAG1T,UAAU,EAAG0T,EAAG5iB,OAAS,IAAK,CAChDy1B,GAAU,EACVD,EAAQ9yB,IAAIkgB,EAAI+S,EAAIzmB,UAAU0T,EAAG5iB,OAAS,IAC1C,YAGJ,GAAI21B,IAAQ/S,EAAI,CACZ6S,GAAU,EACVD,EAAQ9yB,IAAIkgB,EAAI+S,EAAIzmB,UAAU0T,EAAG5iB,SACjC,MAIZ,IAAK01B,IAAeD,EAChB,OAAOv0B,KAMf,OAFAo0B,EAAQE,GACRJ,GAAIG,aAAc,EACXr0B,KAGJtB,aAAa3B,EAAc43B,GAE9B,OADAT,GAAIU,QAAQpzB,IAAIzE,EAAM43B,GACf30B,KAGJtB,WAAWs1B,EAAcW,GAC5B,GAAIT,GAAIG,YACJ,OAGJ3tB,QAAQmuB,MAAMC,SACdpuB,QAAQmuB,MAAME,YAAY,QAE1B,IAAIC,EAAY,GAEhBtuB,QAAQmuB,MAAM7qB,GAAG,OAASC,IACtB+qB,GAAa/qB,IAGjBvD,QAAQmuB,MAAM7qB,GAAG,MAAO,KACpB,MAAMirB,EAAQ,CAAC9wB,EAAc+wB,KACZxuB,QAAQyuB,OAAOF,MAAM9wB,GAE9BuC,QAAQ0uB,KAAKF,GAEbxuB,QAAQyuB,OAAOE,KAAK,QAAS,KACzB3uB,QAAQ0uB,KAAKF,MAKzB,IACI,MAAMnB,EAAQzL,KAAKgN,MAAMN,GAGzB,IAAIO,EAAUZ,EACRY,GACExB,GAASA,EAAMyB,YACfD,EAAUrB,GAAIU,QAAQv3B,IAAI02B,EAAMyB,aAIxCD,EAAUA,GAAO,EAAME,EAAKzR,EAAK0R,KAC7BA,EAAG,CAAC/2B,6BAA+Bo1B,GAASA,EAAMyB,WAAc,oBAAqB,SAGjFzB,EAAOC,EAAS,CAAClsB,EAAOxH,KACxBwH,EACAmtB,EAAM71B,OAAO0I,IAAS,GAEtBmtB,EAAM30B,EAAQ,KAGxB,MAAOiH,GACL0tB,EAAM71B,OAAOmI,IAAK,OA/Ff2sB,GAAAU,QAAU,IAAIzc,IACd+b,GAAAG,aAAc,4QClD3B,MAAOsB,GAIFC,iCACH,OAAOD,GAAaE,qBAGjBD,+BAA+B74B,GAClC44B,GAAaE,qBAAuB94B,EAMjC+4B,2BACH,OAAOH,GAAaI,eAGjBD,yBAAyBE,GAC5BL,GAAaI,eAAiBC,EAG1Bt3B,uBAA6BgB,EAAcu2B,4CAC/C,MAAM5rB,EAAOrB,EAAe,QACtBoB,EAAOpB,EAAe,MACtBktB,EAAOltB,EAAe,QAE5B,IAAK,IAAIxM,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI25B,EAAMF,EACV,GAAIE,EAAIC,SAAS,KAAM,CACnB,MAAMC,EAASrtB,EAAe,UAC9BmtB,EAAMA,EAAI32B,QAAQ,MAAOf,EAAOiE,OAAO2zB,EAAOC,YAAY,IAAI92B,QAAQ,MAAO,KAAKA,QAAQ,MAAO,MAErG,IAAI2M,EAAM,GACV,MAAMoqB,EAAclsB,EAAKf,QAAQ6sB,GAE3BK,QAAWN,EAAKO,UAAUrsB,EAAGW,KAAlBmrB,CAAwBK,EAAa,MAEtD,UACUL,EAAKO,UAAUrsB,EAAGyB,UAAlBqqB,CAA6BM,EAAI92B,EAAM,QAC7C,IAAIpB,EAAIo4B,UAAUH,EAAY/2B,QAAQ,MAAO,MACvClB,EAAEoL,WAAW,OAEfpL,EAAI,IAAMA,GAEd6N,EAAM,UAAY7N,EAPtB,cASU43B,EAAKO,UAAUrsB,EAAGulB,MAAlBuG,CAAyBM,GAGnC,MAAO,CAAED,cAAapqB,OAE1B,MAAM,IAAI7K,MAAM,6DAGZ5C,cAAoBgB,EAAci3B,EAAsBC,EAAiBX,4CAC7E,MAAMY,EAAY7tB,EAAe2sB,GAAaE,sBAE9C,IAAIiB,EAAwB,KACxBC,EAAU,KACVR,EAAc,GACdpqB,EAAM,GAEV,IACQ8pB,IACGM,cAAapqB,aAAcwpB,GAAaqB,gBAAgBt3B,EAAMu2B,IAEjE9pB,EAAM,yBAA2B1N,EAAOiE,OAAO9B,EAAaid,aAAane,IAG7Eq3B,QAAgBF,EAAUI,OAAOtB,GAAaI,gBAC9C,MAAMmB,QAAaH,EAAQI,gBACrBD,EAAKE,KACPjrB,EACAjP,OAAOwoB,OAAO,CAAE2R,UAAW,QAAUV,GAAmB,KAE5DG,QAAeI,EAAKI,IAChBp6B,OAAOwoB,OAAO,CACV5f,MAAO,QACPC,OAAQ,QACRwxB,iBAAiB,GAClBX,GAAc,KAlBzB,QAqBI,IACQG,UACMA,EAAQpH,SAEpB,MAAOpoB,IACT,IACI,GAAI0uB,GAAWM,EAAa,CACxB,MAAMnsB,EAAOpB,EAAe,MACtBktB,EAAOltB,EAAe,cACtBktB,EAAKO,UAAUrsB,EAAGotB,OAAlBtB,CAA0BK,IAEtC,MAAOhvB,KAEb,OAAOuvB,IAGJp4B,aAAmBgB,EAAgCi3B,EAAsBC,EAAiBX,4CAC7F,MAAoB,iBAATv2B,EACAi2B,GAAa8B,OAAO/3B,EAAMi3B,EAAiBC,EAAYX,GAEvDN,GAAa8B,aAAa/3B,EAAMi3B,EAAiBC,EAAYX,KAIrEv3B,oBAAoB01B,EAAiBuC,EAAsBC,EAAiBX,GAC/E,OAAOrC,GAAQ8D,KAAKtD,EAAS,CAAC10B,EAAMskB,EAAK0R,KACrCC,GAAagC,MAAMj4B,EAAMi3B,EAAiBC,EAAYX,GACrDpO,KAAKhpB,GAAO62B,EAAG,KAAM72B,IACrBqpB,MAAMpc,GAAO4pB,EAAG5pB,EAAK,SAItBpN,gBAAsBgB,EAAci3B,EAAsBiB,EAAmB3B,4CACjF,MAAMY,EAAY7tB,EAAe2sB,GAAaE,sBAE9C,IAAIiB,EAAwB,KACxBC,EAAU,KACVR,EAAc,GACdpqB,EAAM,GAEV,IACQ8pB,IACGM,cAAapqB,aAAcwpB,GAAaqB,gBAAgBt3B,EAAMu2B,IAEjE9pB,EAAM,yBAA2B1N,EAAOiE,OAAO9B,EAAaid,aAAane,IAG7Eq3B,QAAgBF,EAAUI,OAAOtB,GAAaI,gBAC9C,MAAMmB,QAAaH,EAAQI,gBACrBD,EAAKE,KACPjrB,EACAjP,OAAOwoB,OAAO,CAAE2R,UAAW,QAAUV,GAAmB,WAEtDO,EAAKW,aAAa,SACxBf,QAAeI,EAAKY,WAChB56B,OAAOwoB,OAAO,CACV7e,KAAM,MACNkxB,UAAU,EACVC,gBAAgB,GACjBJ,GAAgB,KAnB3B,QAsBI,IACQb,UACMA,EAAQpH,SAEpB,MAAOpoB,IACT,IACI,GAAI0uB,GAAWM,EAAa,CACxB,MAAMnsB,EAAOpB,EAAe,MACtBktB,EAAOltB,EAAe,cACtBktB,EAAKO,UAAUrsB,EAAGotB,OAAlBtB,CAA0BK,IAEtC,MAAOhvB,KAEb,OAAOuvB,IAGJp4B,eAAqBgB,EAAgCi3B,EAAsBiB,EAAmB3B,4CACjG,MAAoB,iBAATv2B,EACAi2B,GAAasC,SAASv4B,EAAMi3B,EAAiBiB,EAAc3B,GAE3DN,GAAasC,eAAev4B,EAAMi3B,EAAiBiB,EAAc3B,KAIzEv3B,sBAAsB01B,EAAiBuC,EAAsBiB,EAAmB3B,GACnF,OAAOrC,GAAQ8D,KAAKtD,EAAS,CAAC10B,EAAMskB,EAAK0R,KACrCC,GAAauC,QAAQx4B,EAAMi3B,EAAiBiB,EAAc3B,GACzDpO,KAAKhpB,GAAO62B,EAAG,KAAM72B,IACrBqpB,MAAMpc,GAAO4pB,EAAG5pB,EAAK,UA7Kf6pB,GAAAE,qBAAuB,YAWvBF,GAAAI,oBAAsB,cCfnC,MAAOoC,WAAqBpT,EAC9BrmB,YAAmBsmB,GACf3S,MAAM2S,GAGHtmB,YACH,MAAO,GAGJA,SACH,OAAO05B,GAAA,qBAAoCp4B,KAAKglB,MAAMqB,UC6CvD,MAAMgS,GAAuDn7B,OAAOwoB,OAAO,GAAI6D,GAAmB,CACrGO,UAAW,QACXrO,KAAM,sBACN6c,SAAU,EACVvyB,OAAQ,KACRwyB,WAAY,KACZC,YAAa,IACbpb,KAAM,KACNqb,UAAU,EACVC,kBAAkB,EAClBC,WAAY,OAGV,MAAOC,WAAgDnP,GACzD/qB,YAAmBsmB,EAAoB6T,GACnCxmB,MAAMnV,OAAOwoB,OAAO,GAAI2S,GAAyBrT,IADdhlB,KAAA64B,gBAIhCn6B,WACH,OAAO4sB,GAAStrB,MAGbtB,iBACH,OAAO+sB,GAAezrB,MAGnBtB,YACH,OAAOwsB,GAAUlrB,MAGdtB,QACH,OAAOgtB,GAAM1rB,MAGVtB,aACH,OAAOopB,GAA8B9nB,MAGlCtB,OAAOwmB,EAA4BG,GACtC,IAAIwE,EAAoB7pB,KAAKikB,WAAWiB,EAAUkE,IAClD,MAAM0P,EAAmBxxB,QAAQuiB,GAC5BiP,IACDjP,EAAS,IAAIpN,EACbzc,KAAK2tB,WAAWzI,EAAUkE,GAAoBS,GAC9CxX,MAAMiV,aAAapC,IAGvB,IAAI/gB,EAAOnE,KAAKglB,MAAM7gB,MAAQ,GAC1BwH,EAAO3L,KAAKglB,MAAMrZ,KAEtB,MAAMotB,EAAe50B,EACrB,IAAI60B,EACCC,EACAC,EACCC,IACJh1B,OAAM60B,aAAYC,YAAWC,YAAWC,YAAYn5B,KAAKo5B,WAAWj1B,IAEtE,MAAMk1B,EAASr5B,KAAKs5B,eAAen1B,IAI7Bo1B,GAACA,EAADC,GAAKA,GAAMx5B,KAAKy5B,eAAet1B,EAAM+0B,EAAWC,EAAUE,GAEhEl1B,KAAU+0B,IAAY/0B,IAAOk1B,IAASF,SAEpB,IAAdF,EACAttB,EAAOstB,GAEHttB,UAAkCA,EAAO3L,KAAKglB,MAAMrZ,MACpDA,UAAkCA,EAAOotB,IAGjD,IAAIT,OAAoC,IAAxBt4B,KAAKglB,MAAMsT,UAA+C,OAAxBt4B,KAAKglB,MAAMsT,SACzD,EAAI/0B,KAAKe,MAAMtE,KAAKglB,MAAMsT,SAAW,IAAM,EAG/C,OADIA,EAAW,IAAGA,GAAY,GACtBA,GACJ,KAAK,EACDzO,EAAOtL,OAAiB,IAAVhb,KAAKwV,IACnB8Q,EAAOvL,WAAWib,EAAI,GACtB,MACJ,KAAK,EACD1P,EAAOtL,OAAOhb,KAAKwV,IACnB8Q,EAAOvL,WAAWib,GAAKC,GACvB,MACJ,KAAK,EACD3P,EAAOtL,OAAiB,GAAVhb,KAAKwV,IACnB8Q,EAAOvL,UAAU,GAAIkb,GA6B7B,GAzBIx5B,KAAKglB,MAAMyT,UACX5O,EAAOS,aAGPtqB,KAAK05B,kBACL15B,KAAK25B,6BAA6B9P,EAAQ0P,EAAIC,EAAIr1B,EAAM60B,EAAYrtB,GAEpE3L,KAAK45B,cAAc/P,EAAQ0P,EAAIC,EAAIr1B,EAAM60B,EAAYrtB,GAEzD3L,KAAK65B,iBAAiBhQ,EAAQ0P,EAAIC,EAAIr1B,EAAMwH,GAExC3L,KAAKglB,MAAMyT,WACX5O,EAAOW,WACPX,EAAOS,cAGPtqB,KAAKglB,MAAMyT,WACPz4B,KAAKglB,MAAMvJ,OAAMoO,EAAOpO,KAAOzb,KAAKglB,MAAMvJ,MAC9Czb,KAAK85B,WAAWjQ,EAAQ0P,EAAIC,EAAIr1B,EAAMwH,IAGtC3L,KAAKglB,MAAMyT,UACX5O,EAAOW,WAGPsO,EACA,MAAO,GACJ,CACHzmB,MAAMkV,YAAYrC,GAClBllB,KAAK6tB,aAAa3I,EAAUkE,IAC5B,MAAM2B,EAAcwO,GAAMv5B,KAAKglB,MAAM1hB,GAAK,GACpC0nB,EAAcwO,GAAMx5B,KAAKglB,MAAMrhB,GAAK,GAC1C,OAAOmnB,GAAgB9qB,KAAKglB,MAAO6E,EAAQkB,EAAYC,IAOrDtsB,eACNyF,EAAc+0B,EAAmBC,EAAkBE,GAEnD,MAAO,CAEHE,GAAI,EAEJC,GAAI,GAIF96B,eAAeyF,GACrB,MAAO,GAGDzF,WAAWyF,GAGjB,MAAO,CAACA,OAAM+0B,UAAW,GAAIC,SAAU,IAGjCz6B,mBACN,MAAO,GAGDA,oBAGN,MAAO,CAAC,CAAC,CAACqG,OAAQ,EAAGgB,OAFP/F,KAAKglB,MAEgBjf,UAG7BrH,wBAAwByF,EAAcwH,GAC5C,MAAMqZ,EAAQhlB,KAAKglB,MAEnB,MAAO,CAAC+U,GAAI/U,EAAMuT,WAAYyB,GAAIhV,EAAMwT,aAG5CkB,wBACI,OAAO,EAGDh7B,cACNmrB,EAAmB0P,EAAYC,EAC/Br1B,EAAc60B,EAAgCrtB,GAE9C,MAAMsuB,EAAKj6B,KAAKk6B,mBACVC,EAAOn6B,KAAKo6B,oBAGlB,IAAIL,GAACA,EAADC,GAAKA,GAAMh6B,KAAKq6B,wBAAwBl2B,EAAMwH,GAElD,IAAK,IAAInP,EAAI,EAAGA,EAAI2H,EAAKrF,OAAQtC,IAAK,CAClC,MAAM89B,EAAOt6B,KAAK64B,cAAcx7B,IAAI8G,EAAK3H,IACzC,IAAM89B,EACF,MAAM,IAAIh5B,MAAM,yDAEpB,MAAMi5B,EAAUD,EAAKC,QACrB,IAAIC,GAAM,EACN9gB,EAAK,EACT,IAAK,IAAIlT,EAAI,EAAGA,EAAI+zB,EAAQz7B,OAAQ0H,IAAK,CACrC,MAAM3J,EAAI09B,EAAQ/zB,GAClB,OAAQ3J,GACJ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAEzC,CACI,MAAM0H,EAAI01B,EAAGloB,OAAO2F,SAAS7a,EAAG,KAChC,GAAI29B,EAAK,CACL,MAAM3pB,OAAqB,IAAfmoB,EAAyBmB,EAAK,GAAKA,EAAKpoB,OAAO2F,SAASshB,EAAWx8B,GAAI,KACnF,IAAK,MAAMi+B,KAAO5pB,EACdgZ,EAAOyF,KAAKyK,EAAKrgB,EAAIsgB,EAAKS,EAAI11B,OAAQR,EAAGk2B,EAAI10B,QAGrD2T,GAAMnV,EACNi2B,GAAOA,EAEX,MACJ,IAAK,IACDA,GAAM,EACN,MACJ,IAAK,IACDA,GAAM,GAIlBT,GAAMrgB,EAEVmQ,EAAOxa,OACPwa,EAAOa,YAGDhsB,6BACNmrB,EAAmB0P,EAAYC,EAC/Br1B,EAAc60B,EAAgCrtB,GAE9C,MACMpH,EADKvE,KAAKk6B,mBACH,GACPC,EAAOn6B,KAAKo6B,oBAGlB,IAAIL,GAACA,EAADC,GAAKA,GAAMh6B,KAAKq6B,wBAAwBl2B,EAAMwH,GAElD,IAAK,IAAInP,EAAI,EAAGA,EAAI2H,EAAKrF,OAAQtC,IAAK,CAClC,MAAM+9B,EAAWv6B,KAAa64B,cAAcx7B,IAAI8G,EAAK3H,IAAI+9B,QAEzD,IAAI7gB,EAAK,EACT,IAAK,IAAIlT,EAAI,EAAGA,EAAI+zB,EAAQz7B,OAAQ0H,IAAK,CACrC,MAAM3J,EAAI09B,EAAQ/zB,GAClB,OAAQ3J,GACJ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzC,CACI,MAAMgU,EAAKspB,EAAKpoB,OAAO2F,SAAS7a,EAAG,KACnC,IAAK,MAAM49B,KAAO5pB,EACdgZ,EAAOyF,KAAKyK,EAAKrgB,EAAIsgB,EAAKS,EAAI11B,OAAQR,EAAGk2B,EAAI10B,QAIzD,IAAK,IAED2T,GAAU,EAAJnV,GAIlBw1B,GAAMrgB,EAEVmQ,EAAOxa,OACPwa,EAAOa,YAGDhsB,iBAAiBmrB,EAAmB0P,EAAYC,EAAYr1B,EAAcwH,IAG1EjN,WAAWmrB,EAAmB0P,EAAYC,EAAYr1B,EAAcwH,GAC1E,MAAMqZ,EAAQhlB,KAAKglB,MAEnB6E,EAAOnO,UAAY,SACnBmO,EAAOlO,aAAe,aACtBkO,EAAOoH,SAASjM,EAAM0T,iBAAmBv0B,EAAOwH,EAAM4tB,EAAK,EAAGC,EAAKxU,EAAMwT,cCxU1E,MAAMK,GAAgB,IAAI1gB,IAA8C,CAC3E,CAAC,IAAK,CAACjJ,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAQ,EAAGqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,eAC3B,CAAC,IAAK,CAACrrB,MAAO,GAAIqrB,QAAS,iBAIlBG,GAAa,IAAIviB,IAC9B,IAAK,MAAM5Q,KAAKsxB,GAAc54B,UAAWy6B,GAAWl5B,IAAI+F,EAAE,GAAG2H,MAAO3H,EAAE,IAG/D,MAAMozB,GAAe,IAAIxiB,IAAoB,CAChD,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAG,EAAG,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,KACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,KACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN,CAAE,GAAI,MACN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GAAIqrB,QAAS,WAE/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAE/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAE/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAE/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqrB,QAAS,WAC/B,CAAC,IAAQ,CAACrrB,MAAQ,GAAIqr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AI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,KAAQ,OACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GAAI,CAAC,IAAQ,MACf,CAAE,GA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iC,GAAI,IACpFrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAE3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,EAAG,GAC3BrC,EAAOt/B,IAAI8P,EAAK,EAAG6xB,EAAK,E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","file":"red-agate.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react-dom/server\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react-dom/server\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RedAgate\"] = factory(require(\"react-dom/server\"));\n\telse\n\t\troot[\"RedAgate\"] = factory(root[\"ReactDOMServer\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\nmodule.exports = function () { return eval('require'); };\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/**\n * Base64 encoder / decoder.\n */\nexport class Base64 {\n\n    /**\n     * Base64 encoder.\n     * @param message Plaintext message.\n     * @param lineLength The maximum line length of the encoded message. If set, the encoded message is split with a newline character.\n     * @return Base64 encoded message.\n     */\n    public static encode(message: ArrayLike<number>, lineLength?: number): string {\n        // A-Z: 0x00 -> 0x41\n        // a-z: 0x1a -> 0x61\n        // 0-9: 0x34 -> 0x30\n        //   +: 0x3e -> 0x2b\n        //   /: 0x3f -> 0x2f\n\n        // 0-5/6-3/4-8\n        let buf: number[] = [];\n        const n = message.length;\n        let   v = 0, q = 0, r = 0;\n\n        for (let i = 0, m = 0; i < n; i++) {\n            m = i % 3;\n            if (m === 0) {\n                v = message[i];\n                r = (v <<  4) & 0x30;  // 2bit\n                v = (v >>> 2) & 0x3f; // 6bit\n            }\n            else if (m === 1) {\n                v = message[i];\n                q =  (v <<  2) & 0x3c;        // 4bit\n                v = ((v >>> 4) & 0x0f) | r; // 4bit\n                r = q;\n            }\n            else {\n                q = message[i];\n                v = ((q >>> 6) & 0x03) | r; // 2bit\n                if      (v < 0x1a) v += 0x41;\n                else if (v < 0x34) v += 0x47;\n                else if (v < 0x3e) v -= 0x04;\n                else if (v < 0x3f) v  = 0x2b;\n                else               v  = 0x2f;\n                buf.push(v);\n                v = q & 0x3f; // 6bit\n            }\n            if      (v < 0x1a) v += 0x41;\n            else if (v < 0x34) v += 0x47;\n            else if (v < 0x3e) v -= 0x04;\n            else if (v < 0x3f) v  = 0x2b;\n            else               v  = 0x2f;\n            buf.push(v);\n        }\n\n        if (n % 3) {\n            if      (r < 0x1a) r += 0x41;\n            else if (r < 0x34) r += 0x47;\n            else if (r < 0x3e) r -= 0x04;\n            else if (r < 0x3f) r  = 0x2b;\n            else               r  = 0x2f;\n            buf.push(r);\n        }\n\n        while (buf.length % 4) {\n            buf.push(0x3d);\n        }\n\n        if (lineLength && 0 < lineLength) {\n            const s: number[] = [];\n            for (let i = 0; i < buf.length; i += lineLength) {\n                s.push(...buf.slice(i, i + lineLength), 0x0a);\n            }\n            buf = s;\n        }\n\n        let z = \"\";\n\n        for (let i = 0; i < buf.length; i++) {\n            // NOTE: spread operator (...buf) causes stack overflow.\n            z += String.fromCharCode(buf[i]);\n        }\n        return z;\n    }\n\n    /**\n     * Base64 decoder.\n     * @param message Base64 encoded message.\n     * @return Plaintext message.\n     */\n    public static decode(message: string): number[] {\n        const buf: number[] = [];\n        let   i = 0, m = 0, s = 0;\n        const n = message.length;\n        let   v = 0, r = 0;\n\n        for (; i < n; i++) {\n            m = (i + s) % 4;\n            v = message.charCodeAt(i);\n            if      (0x41 <= v && v <= 0x5a) v -= 0x41;\n            else if (0x61 <= v && v <= 0x7a) v -= 0x47;\n            else if (0x30 <= v && v <= 0x39) v += 0x04;\n            else if (v === 0x2b)             v  = 0x3e;\n            else if (v === 0x2f)             v  = 0x3f;\n            else if (v === 0x3d) {\n                v = 0;\n                i = n;\n            } else {\n                s++;\n                continue;\n            }\n            if (m === 0) {\n                r = (v << 2) & 0xfc; // 6bit\n            }\n            else if (m === 1) {\n                buf.push(r | ((v >>> 4) & 0x03)); // 2bit\n                r = (v << 4) & 0xf0; // 4bit\n            }\n            else if (m === 2) {\n                buf.push(r | ((v >>> 2) & 0x0f)); // 4bit\n                r = (v << 6) & 0xc0; // 2bit\n            }\n            else {\n                buf.push(r | (v & 0x3f)); // 6bit\n            }\n        }\n        return buf;\n    }\n\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/**\n * Escape sequences encoder.\n */\nexport class Escape {\n\n    /**\n     * Escape html special characters.\n     * @param s Plaintext.\n     * @return Html escaped text.\n     */\n    public static html(s: string): string {\n        return s\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#39;\");\n    }\n\n    /**\n     * Escape xml special characters.\n     * @param s Plaintext.\n     * @return Xml escaped text.\n     */\n    public static xml(s: string): string {\n        return s\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&apos;\");\n    }\n\n}\n\n\n/**\n * Escape sequences decoder.\n */\nexport class Unescape {\n\n    /**\n     * Unescape html character references.\n     * @param s Html escaped text.\n     * @return Plaintext.\n     */\n    public static html(s: string): string {\n        return s\n            .replace(/&#39;/g, \"'\")\n            .replace(/&#x(?:0{0,2})27;/ig, \"'\")\n            .replace(/&apos;/g, \"'\")\n\n            .replace(/&#34;/g, \"\\\"\")\n            .replace(/&#x(?:0{0,2})22;/ig, \"\\\"\")\n            .replace(/&quot;/g, \"\\\"\")\n\n            .replace(/&#62;/g, \">\")\n            .replace(/&#x(?:0{0,2})3e;/ig, \">\")\n            .replace(/&gt;/g, \">\")\n\n            .replace(/&#60;/g, \"<\")\n            .replace(/&#x(?:0{0,2})3c;/ig, \"<\")\n            .replace(/&lt;/g, \"<\")\n\n            .replace(/&#38;/g, \"&\")\n            .replace(/&#x(?:0{0,2})26;/ig, \"&\")\n            .replace(/&amp;/g, \"&\");\n    }\n\n    /**\n     * Unescape xml character references.\n     * @param s Xml escaped text.\n     * @return Plaintext.\n     */\n    public static xml(s: string): string {\n        return Escape.html(s);\n    }\n\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport class QueryString {\n\n    private static *entries(obj: any) {\n        for (const key of Object.keys(obj)) {\n            yield [key, obj[key]];\n        }\n    }\n\n    public static build(params: any): string {\n        let qs = \"\";\n        let i = 0;\n        for (const [key, value] of this.entries(params)) {\n            qs += `${i++ ? \"&\" : \"\"}${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        }\n        return qs;\n    }\n\n    public static decode(search: string): any {\n        const query = search.substr(1);\n        const result: any = {};\n        query.split(\"&\").forEach((part) => {\n            const item = part.split(\"=\");\n            result[item[0]] = decodeURIComponent(item[1]);\n        });\n        return result;\n    }\n\n}\n","// src/convert/TextEncoding.ts#__encodeToUtf8Impl\n//\n// Original Author:\n// http://qiita.com/ukyo/items/1626defd020b2157e6bf\n// (c) 2012 ukyo (http://qiita.com/ukyo, https://ukyoweb.com)\n\n// src/convert/TextEncoding.ts#__decodeUtf8Impl\n//\n// Original Author:\n// http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\n// utf.js - UTF-8 <=> UTF-16 convertion\n// Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\n// Version: 1.0\n// LastModified: Dec 25 1999\n// This library is free.  You can redistribute it and/or modify it.\n\n// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\ninterface TextEncoder {\n    encoding: string; // readonly\n    encode(input?: string): Uint8Array;\n}\n\ndeclare var TextEncoder: {\n    prototype: TextEncoder;\n    new (utfLabel?: string): TextEncoder;\n};\n\n\ninterface TextDecoder {\n    encoding: string;\n    fatal: boolean;\n    ignoreBOM: boolean;\n    decode(input?: any, options?: object): string;\n}\n\ndeclare var TextDecoder: {\n    prototype: TextDecoder;\n    new (label?: string, options?: object): TextDecoder;\n};\n\n\n\nexport class TextEncoding {\n    private static isNode: boolean;\n    private static isTextEncoder: boolean;\n    private static utf8Encoder: TextEncoder;\n    private static utfDecoder: TextDecoder;\n\n    // tslint:disable-next-line:variable-name\n    private static __encodeToUtf8: (str: string) => Uint8Array;\n\n    // tslint:disable-next-line:variable-name\n    private static __decodeUtf8: (buf: ArrayLike<number>) => string;\n\n    /** static constructor */\n    // tslint:disable-next-line:variable-name\n    private static __ctor = (() => {\n        TextEncoding.isNode = (typeof Buffer !== \"undefined\");\n        TextEncoding.isTextEncoder = (typeof TextEncoder !== \"undefined\");\n\n        if (TextEncoding.isNode) {\n            TextEncoding.__encodeToUtf8 = (str: string) => Buffer.from(str, \"utf8\");\n            TextEncoding.__decodeUtf8 = (buf: ArrayLike<number>) => Buffer.from(Array.isArray(buf) ? buf : Array.from(buf)).toString(\"utf8\");\n        } else if (TextEncoding.isTextEncoder) {\n            TextEncoding.utf8Encoder = new TextEncoder(\"utf8\");\n            TextEncoding.__encodeToUtf8 = (str: string) => TextEncoding.utf8Encoder.encode(str);\n            TextEncoding.utfDecoder = new TextDecoder(\"utf8\");\n            TextEncoding.__decodeUtf8 = (buf: ArrayLike<number>) => TextEncoding.utfDecoder.decode(buf);\n        } else {\n            TextEncoding.__encodeToUtf8 = TextEncoding.__encodeToUtf8Impl;\n            TextEncoding.__decodeUtf8 = TextEncoding.__decodeUtf8Impl;\n        }\n    })();\n\n    public static encodeToUtf8(str: string): Uint8Array {\n        return TextEncoding.__encodeToUtf8(str);\n    }\n\n    public static decodeUtf8(buf: ArrayLike<number>): string {\n        return TextEncoding.__decodeUtf8(buf);\n    }\n\n    private static __encodeToUtf8Impl(str: string): Uint8Array {\n\n        // Original Author:\n        // http://qiita.com/ukyo/items/1626defd020b2157e6bf\n        // (c) 2012 ukyo (http://qiita.com/ukyo, https://ukyoweb.com)\n\n        // NOTE: We have modified from original source.\n\n        const n = str.length;\n        let idx = -1,\n            byteLength = 512,\n            bytes = new Uint8Array(byteLength),\n            i: number, c: number;\n\n        for (i = 0; i < n; ++i) {\n            // surrogate pairs (U+D800..U+DFFF) should be decoded to U+010000..U+10FFFF\n            // before convert to UTF-8.\n            const cp = str.codePointAt(i);\n            if (cp === void 0) {\n                throw new Error(\"Can't convert string to UTF-8. string include unexpected sequence.\");\n            }\n            c = cp;\n            if (c <= 0x7F) {\n                bytes[++idx] = c;\n            } else if (c <= 0x7FF) {\n                bytes[++idx] = 0xC0 | (c >>>  6)         ;\n                bytes[++idx] = 0x80 | (c & 0x3F)         ;\n            } else if (c <= 0xFFFF) {\n                bytes[++idx] = 0xE0 |  (c >>> 12)        ;\n                bytes[++idx] = 0x80 | ((c >>>  6) & 0x3F);\n                bytes[++idx] = 0x80 |  (c & 0x3F)        ;\n            } else if (c <= 0x10FFFF) {\n                // UTF-8 4bytes range is (0x010000..0x1FFFFF) but Unicode codepoint uses <= U+10FFFF.\n                bytes[++idx] = 0xF0 |  (c >>> 18)        ;\n                bytes[++idx] = 0x80 | ((c >>> 12) & 0x3F);\n                bytes[++idx] = 0x80 | ((c >>>  6) & 0x3F);\n                bytes[++idx] = 0x80 |  (c & 0x3F)        ;\n                if (0x010000 <= c) ++i;\n            } else {\n                throw new Error(\"Can't convert string to UTF-8. string include unexpected sequence.\");\n            }\n            if (byteLength - idx <= 4) {\n                // tslint:disable-next-line:variable-name\n                const _bytes = bytes;\n                byteLength *= 2;\n                bytes = new Uint8Array(byteLength);\n                bytes.set(_bytes);\n            }\n        }\n        return bytes.subarray(0, ++idx);\n    }\n\n    private static __decodeUtf8Impl(buf: ArrayLike<number>): string {\n\n        // Original Author:\n        // http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\n        // utf.js - UTF-8 <=> UTF-16 convertion\n        // Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\n        // Version: 1.0\n        // LastModified: Dec 25 1999\n        // This library is free.  You can redistribute it and/or modify it.\n\n        // NOTE: We have modified from original source.\n\n        let   out = \"\", i = 0;\n        const len = buf.length;\n        let c: number, char2: number, char3: number, char4: number;\n\n        while (i < len) {\n            c = buf[i++];\n            switch (c >>> 4) {\n            case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\n                // 0xxx xxxx    ( 7bit)\n                out += String.fromCodePoint(c);\n                break;\n            case 12: case 13:\n                // 110x xxxx,  10xx xxxx    (11bit)\n                char2 = buf[i++];\n                out += String.fromCodePoint(\n                        ((c     & 0x1F) << 6) |\n                         (char2 & 0x3F)\n                        );\n                break;\n            case 14:\n                // 1110 xxxx,  10xx xxxx,  10xx xxxx    (16bit)\n                char2 = buf[i++];\n                char3 = buf[i++];\n                out += String.fromCodePoint(\n                        ((c     & 0x0F) << 12) |\n                        ((char2 & 0x3F) <<  6) |\n                        ((char3 & 0x3F) <<  0)\n                        );\n                break;\n            case 16:\n                // 1111 0xxx,  10xx xxxx,  10xx xxxx,  10xx xxxx                            (21bit)\n                // 1111 10xx,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx                (26bit; invalid Unicode codepoint)\n                // 1111 110x,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx    (31bit; invalid Unicode codepoint)\n                if ((c >>> 3) & 1) {\n                    throw new Error(\"Can't convert UTF-8 to string. UTF-8 include unexpected sequence.\");\n                }\n                char2 = buf[i++];\n                char3 = buf[i++];\n                char4 = buf[i++];\n                out += String.fromCodePoint(\n                        ((c     & 0x07) << 18) |\n                        ((char2 & 0x3F) << 12) |\n                        ((char3 & 0x3F) <<  6) |\n                        ((char4 & 0x3F) <<  0)\n                        );\n                break;\n            }\n        }\n\n        return out;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport class WordWrap {\n\n    public static loose(str: string, charsPerLine: number = 120): string {\n        let r = \"\";\n        let i = 0;\n        for (const c of str) {\n            i++;\n            if (i >= charsPerLine && \" \\f\\t\\v\".indexOf(c) > -1) {\n                r += \"\\n\";\n                i = 0;\n            } else {\n                r += c;\n            }\n        }\n        return r;\n    }\n\n    public static normal(str: string, charsPerLine: number = 120): string {\n        // TODO: not implemented.\n        //       do normal word-wrap.\n        return WordWrap.loose(str, charsPerLine);\n    }\n\n    public static force(str: string, charsPerLine: number = 120): string {\n        // TODO: not implemented.\n        //       do break-word word-wrap.\n        return WordWrap.loose(str, charsPerLine);\n    }\n\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/**\n *\n */\nexport class Integer53 {\n\n    public static get MAX_INT() {\n        return 0x1fffffffffffff; // Number.MAX_SAFE_INTEGER (== pow(2, 53) - 1)\n    }\n\n    public static highestBit(x: number): number {\n        x = Math.abs(x);\n        for (let i = 52; i >= 0; i--) {\n            if (Math.trunc(x / (2 ** i)) > 0) return i;\n        }\n        return -1;\n    }\n\n    /**\n     * 53bits x | y\n     */\n    public static bitOr(x: number, y: number): number {\n        x = Math.abs(x);\n        y = Math.abs(y);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n        const loY = (y & 0xffffffff) >>> 0;\n        const hiY = (y - loY) / 4294967296;\n        return ((hiX | hiY) >>> 0) * 4294967296 + ((loX | loY) >>> 0);\n    }\n\n    /**\n     * 53bits x & y\n     */\n    public static bitAnd(x: number, y: number): number {\n        x = Math.abs(x);\n        y = Math.abs(y);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n        const loY = (y & 0xffffffff) >>> 0;\n        const hiY = (y - loY) / 4294967296;\n        return ((hiX & hiY) >>> 0) * 4294967296 + ((loX & loY) >>> 0);\n    }\n\n    /**\n     * 53bits x ^ y\n     */\n    public static bitXor(x: number, y: number): number {\n        x = Math.abs(x);\n        y = Math.abs(y);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n        const loY = (y & 0xffffffff) >>> 0;\n        const hiY = (y - loY) / 4294967296;\n        return ((hiX ^ hiY) >>> 0) * 4294967296 + ((loX ^ loY) >>> 0);\n    }\n\n    /**\n     * 53bits ~x\n     */\n    public static bitNot(x: number): number {\n        x = Math.abs(x);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n        return (((~hiX) & 0x001fffff) >>> 0) * 4294967296 + ((~loX) >>> 0);\n    }\n\n    /**\n     * 53bits x << s\n     */\n    public static bitLShift(x: number, s: number): number {\n        x = Math.abs(x);\n        if (s >= 0) {\n            if (s <= 52)  return (x % (2 ** (53 - s))) * (2 ** s);\n            else          return 0;\n        } else {\n            if (s >= -52) return Math.trunc(x / (2 ** -s));\n            else          return 0;\n        }\n    }\n\n    /**\n     * 53bits x >>> s\n     */\n    public static bitRShift(x: number, s: number): number {\n        x = Math.abs(x);\n        if (s <= 0) {\n            if (s >= -52) return (x % (2 ** (53 + s))) * (2 ** -s);\n            else          return 0;\n        } else {\n            if (s <= 52)  return Math.trunc(x / (2 ** s));\n            else          return 0;\n        }\n    }\n\n    /**\n     * Slice bits. indexes are LSB first.\n     */\n    public static slice(x: number, start: number, end: number): number {\n        x = Math.abs(x);\n        if (end < 0) end += 53;\n        if (0 < start) {\n            x = Math.trunc(x / (2 ** start));\n            end -= start;\n        }\n        return x % (2 ** end);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\nimport { Integer53 } from \"../types/Integer53\";\n\n\nexport enum StreamSeekOrigin {\n    Start, Current, End\n}\n\n\n/** MSB first */\nexport class BitStreamWriter {\n    public static fromBytes(initialSizeBytes: number, bytes: ArrayLike<number>): BitStreamWriter {\n        const s = new BitStreamWriter(initialSizeBytes);\n        const n = s.byteLength;\n        const d = s.data;\n        if (n < bytes.length) {\n            if (bytes instanceof Uint8Array) {\n                s.data.set(bytes.subarray(0, n));\n            } else {\n                for (let i = 0; i < n; i++) {\n                    d[i] = bytes[i];\n                }\n            }\n        } else {\n            s.data.set(bytes);\n        }\n        s.pos = bytes.length * 8;\n        return s;\n    }\n\n    private data: Uint8Array;\n    private pos = 0;\n\n    public constructor(initialSizeBytes: number, data?: Uint8Array) {\n        if (data) {\n            this.data = data;\n            this.pos  = data.length * 8;\n        } else {\n            this.data = new Uint8Array(initialSizeBytes);\n        }\n    }\n\n    public writeBits8(v: number, bitLength: number): BitStreamWriter {\n        if (0 < bitLength) {\n            const p = Math.floor(this.pos / 8);\n            const m = this.pos % 8;\n\n            const w = v & (0x00ff >>> (8 - bitLength));\n            const s = 8 - m - bitLength;\n\n            this.data[p] &= 0x00ff << (8 - m);\n            if (s >= 0) {\n                this.data[p] |= w << s;\n            } else {\n                this.data[p    ] |= w >>> -s;\n                this.data[p + 1] &= 0x00ff >>> -s;\n                this.data[p + 1] |= w  << (8 + s);\n            }\n\n            this.pos += bitLength;\n        }\n        return this;\n    }\n\n    public writeBits(v: number, bitLength: number): BitStreamWriter {\n        if (0 < bitLength) {\n            let p = Math.floor(this.pos / 8);\n            let m = this.pos % 8;\n            let l = bitLength;\n\n            const q = (l % 8) || 8;\n            const w = Integer53.slice(v, l - q, l);\n            const s = 8 - m - q;\n\n            this.data[p] &= 0x00ff << (8 - m);\n            if (s >= 0) {\n                this.data[p] |= w << s;\n                if (s === 0) p += 1;\n            } else {\n                this.data[p    ] |= w >>> -s;\n                this.data[p + 1] &= 0x00ff >>> -s;\n                this.data[p + 1] |= w  << (8 + s);\n                p += 1;\n            }\n\n            l -= q;\n            m = (m + q) % 8;\n\n            if (m === 0) {\n                // tslint:disable-next-line:ban-comma-operator\n                for (; 0 < l; l -= 8, p++) {\n                    this.data[p] = Integer53.slice(v, l - 8, l);\n                }\n            } else {\n                // tslint:disable-next-line:ban-comma-operator\n                for (; 0 < l; l -= 8, p++) {\n                    const w2 = Integer53.slice(v, l - 8, l);\n                    this.data[p    ] &= 0x00ff << (8 - m);\n                    this.data[p    ] |= w2 >>> m;\n                    this.data[p + 1] &= 0x00ff >>> m;\n                    this.data[p + 1] |= w2  << (8 - m);\n                }\n            }\n\n            this.pos += bitLength;\n        }\n        return this;\n    }\n\n    public writeBitsFromArray(bytes: Uint8Array, bitOffset: number, bitLength: number): BitStreamWriter {\n        if (0 < bitLength) {\n            if ((bitOffset % 8) === 0) {\n                const o = bitOffset / 8;\n                const n = Math.floor(bitLength / 8);\n                const m = bitLength % 8;\n                let i = 0;\n                if ((this.pos % 8) === 0) {\n                    const p = this.pos / 8;\n                    if (0 < n) {\n                        for (; i < n; i++) {\n                            this.data[p + i] = bytes[o + i];\n                        }\n                    }\n                    if (m) {\n                        this.data[p + i] &= 0x00ff >>> m;\n                        this.data[p + i] |= (bytes[o + i] >>> (8 - m)) << (8 - m);\n                    }\n                    this.pos += bitLength;\n                } else {\n                    if (0 < n) {\n                        for (; i < n; i++) {\n                            this.writeBits8(bytes[o + i], 8);\n                        }\n                    }\n                    this.writeBits8(bytes[o + i] >>> (8 - m), m);\n                }\n            } else {\n                const s1 = Math.floor(bitOffset / 8);\n                const e1 = Math.floor((bitOffset + bitLength) / 8);\n                const s2 = bitOffset % 8;\n                const e2 = (bitOffset + bitLength) % 8;\n                if (s1 === e1) {\n                    this.writeBits8(bytes[e1] >>> (8 - e2), bitLength);\n                } else {\n                    this.writeBits8(bytes[s1], 8 - s2);\n                    for (let i = s1 + 1; i < e1; i++) {\n                        this.writeBits8(bytes[i], 8);\n                    }\n                    this.writeBits8(bytes[e1] >>> (8 - e2), e2);\n                }\n            }\n        }\n        return this;\n    }\n\n    public seek(bitOffset: number, offset: StreamSeekOrigin): BitStreamWriter {\n        switch (offset) {\n        case StreamSeekOrigin.Start:\n            this.pos = bitOffset;\n            break;\n        case StreamSeekOrigin.Current:\n            this.pos += bitOffset;\n            break;\n        case StreamSeekOrigin.End:\n            this.pos = this.data.length * 8 + bitOffset;\n            break;\n        }\n        return this;\n    }\n\n    public resize(sizeBytes: number): BitStreamWriter {\n        if (this.data.length > sizeBytes) {\n            this.data = this.data.subarray(0, sizeBytes);\n            this.pos  = Math.min(this.pos, sizeBytes * 8);\n        } else if (this.data.length < sizeBytes) {\n            const d = new Uint8Array(sizeBytes);\n            d.set(this.data, 0);\n            this.data = d;\n        }\n        return this;\n    }\n\n    public writeAlignedSingleByte(v: number): BitStreamWriter {\n        const p = Math.ceil(this.pos / 8);\n        this.data[p] = v & 0x00ff;\n        this.pos = (p + 1) * 8;\n        return this;\n    }\n\n    public writeAlignedBytes(bytes: Uint8Array, byteOffset: number, byteLength: number): BitStreamWriter {\n        const p = Math.ceil(this.pos / 8);\n        for (let i = 0; i < byteLength; i++) {\n            this.data[p + i] = bytes[byteOffset + i];\n        }\n        this.pos = (p + byteLength) * 8;\n        return this;\n    }\n\n    public toBytes(): Uint8Array {\n        return this.data.subarray(0, this.byteLength);\n    }\n\n    public get byteLength(): number {\n        return Math.ceil(this.pos / 8);\n    }\n\n    public get bitLength(): number {\n        return this.pos;\n    }\n\n    public slice(startBit: number, endBit: number): BitStreamWriter {\n        if (endBit < 0) endBit = this.pos + endBit;\n        const r = new BitStreamWriter(Math.ceil((endBit - startBit) / 8));\n        r.writeBitsFromArray(this.data, startBit, endBit - startBit);\n        return r;\n    }\n\n    public setBit(i: number, v: number) {\n        const p = Math.floor(i / 8);\n        const m = i % 8;\n        this.data[p] = (this.data[p] & (~(0x0080 >>> m))) | ((v ? 0x0080 : 0) >>> m);\n    }\n\n    public getBit(i: number): number {\n        const p = Math.floor(i / 8);\n        const m = i % 8;\n        return (this.data[p] & (0x0080 >>> m)) ? 1 : 0;\n    }\n\n    public setByte(i: number, v: number) {\n        this.data[i] = v;\n    }\n\n    public getByte(i: number): number {\n        return this.data[i];\n    }\n\n    public concat(...a: BitStreamWriter[]): BitStreamWriter {\n        return BitStreamWriter.concat(this, ...a);\n    }\n\n    public static concat(...a: BitStreamWriter[]): BitStreamWriter {\n        let n = 0;\n        for (const b of a) {\n            n += b.bitLength;\n        }\n        const r = new BitStreamWriter(Math.ceil(n / 8));\n\n        for (let i = 0; i < a.length; i++) {\n            r.writeBitsFromArray(a[i].data, 0, a[i].bitLength);\n        }\n        return r;\n    }\n }\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport {BitStreamWriter, StreamSeekOrigin} from '../io/BitStream';\n\n\n\nexport class Bitmap {\n    private w: number;\n    private h: number;\n    private widthAligned: number;\n    private buf: BitStreamWriter;\n\n    public constructor(width: number, height: number, src?: Uint8Array) {\n        this.w = width;\n        this.h = height;\n        this.widthAligned = Math.ceil(width / 8) * 8;\n        this.buf = new BitStreamWriter(this.widthAligned * height, src);\n        this.buf.seek(0, StreamSeekOrigin.End);\n    }\n\n    public get width(): number {\n        return this.w;\n    }\n\n    public get height(): number {\n        return this.h;\n    }\n\n    public toBytes(): Uint8Array {\n        return this.buf.toBytes();\n    }\n\n    public set(x: number, y: number, v: number) {\n        this.buf.setBit(y * this.widthAligned + x, v);\n    }\n\n    public get(x: number, y: number): number {\n        return this.buf.getBit(y * this.widthAligned + x);\n    }\n\n    public clear(x: number, y: number, width: number, height: number): Bitmap {\n        x = Math.max(0, x);\n        y = Math.max(0, y);\n        width  = Math.max(0, Math.min(width , Math.max(0, this.w - x)));\n        height = Math.max(0, Math.min(height, Math.max(0, this.h - y)));\n        for (let j = 0; j < height; j++) {\n            const offset = (y + j) * this.widthAligned + x;\n            for (let i = 0; i < width; i++) {\n                this.buf.setBit(offset + i, 0);\n            }\n        }\n        return this;\n    }\n\n    public fill(x: number, y: number, width: number, height: number, v: number): Bitmap {\n        x = Math.max(0, x);\n        y = Math.max(0, y);\n        width  = Math.max(0, Math.min(width , Math.max(0, this.w - x)));\n        height = Math.max(0, Math.min(height, Math.max(0, this.h - y)));\n        for (let j = 0; j < height; j++) {\n            const offset = (y + j) * this.widthAligned + x;\n            for (let i = 0; i < width; i++) {\n                this.buf.setBit(offset + i, v);\n            }\n        }\n        return this;\n    }\n\n    public clearAll(): Bitmap {\n        const length = this.buf.byteLength;\n        for (let i = 0; i < length; i++) {\n            this.buf.setByte(i, 0);\n        }\n        return this;\n    }\n\n/*\n    public trim(x: number, y: number, width: number, height: number): Bitmap {\n        x = Math.max(0, x);\n        y = Math.max(0, y);\n        width  = Math.min(this.w, Math.max(0, width  - x));\n        height = Math.min(this.h, Math.max(0, height - y));\n        for (let j = 0; j < height; j++) {\n        }\n        //this.buf;\n        return this;\n    }\n\n    public copy(destX: number, destY: number, src: Bitmap, srcX: number, srcY: number, srcWidth: number, srcHeight: number): Bitmap {\n        return this;\n    }\n*/\n}\n\n","// Copyright (c) 2018, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nlet isNode = false;\nif (typeof process === 'object') {\n    if (typeof process.versions === 'object') {\n        if (typeof process.versions.node !== 'undefined') {\n            if (typeof (process as any).type !== 'undefined' && (process as any).type === 'renderer') {\n                // electron renderer process\n            } else {\n                isNode = true;\n            }\n        }\n    }\n}\nexport default isNode;\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\nimport { default as isNode } from '../runtime/is-node';\n\n\n\nexport enum LoggerLogLevel {\n    NO_LOG      = 0,\n\n    ERROR       = 1,\n    PRODUCTION  = 1,\n\n    ASSERT      = 2,\n    WARN        = 3,\n    STAGING     = 3,\n\n    INFO        = 4,\n    LOG         = 5,\n    DEVELOPMENT = 5,\n\n    TRACE       = 6,\n    DEBUG       = 6,\n    VERBOSE     = 6\n}\n\n\nexport class Logger {\n    private static con: Console;\n    public static logLevel: LoggerLogLevel;\n\n    /** static constructor */\n    // tslint:disable-next-line:variable-name\n    private static __ctor = (() => {\n        if (isNode) {\n            Logger.con = new console.Console(process.stderr);\n\n            if (process.env.NODE_ENV) {\n                switch (process.env.NODE_ENV) {\n                case \"production\":\n                    Logger.logLevel = LoggerLogLevel.PRODUCTION;\n                    break;\n                case \"staging\":\n                    Logger.logLevel = LoggerLogLevel.STAGING;\n                    break;\n                case \"development\": default:\n                    Logger.logLevel = LoggerLogLevel.DEVELOPMENT;\n                    break;\n                }\n            }\n        } else {\n            Logger.con = console;\n            Logger.logLevel = LoggerLogLevel.DEVELOPMENT;\n        }\n    })();\n\n    public static assert(test?: boolean, message?: string, ...optionalParams: any[]) {\n        if (this.logLevel <= LoggerLogLevel.PRODUCTION) {\n            return this;\n        }\n\n        let succeeded = false;\n        try {\n            succeeded = Boolean(test);\n        } catch (e) {\n            succeeded = false;\n        }\n\n        if (!succeeded) {\n            try {\n                Logger.con.assert(test, message, ...optionalParams);\n            } catch (e) {\n                // node's assert() throws AssertionError.\n                if (this.logLevel <= LoggerLogLevel.STAGING) {\n                    throw e;\n                }\n            }\n\n            if (this.logLevel <= LoggerLogLevel.STAGING) {\n                let m = \"\";\n                try {\n                    m = String(message);\n                } catch (e) {}\n                throw new Error(\"Assertion failed:\" + m);\n            }\n        }\n\n        return this;\n    }\n\n    public static dir(value?: any, ...optionalParams: any[]) {\n        if (this.logLevel <= LoggerLogLevel.DEBUG) {\n            return this;\n        }\n        try {\n            Logger.con.dir(value, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n\n    public static error(message?: any, ...optionalParams: any[]) {\n        if (this.logLevel < LoggerLogLevel.ERROR) {\n            return this;\n        }\n        try {\n            Logger.con.error(message, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n\n    public static info(message?: any, ...optionalParams: any[]) {\n        if (this.logLevel < LoggerLogLevel.INFO) {\n            return this;\n        }\n        try {\n            Logger.con.info(message, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n\n    public static log(message?: any, ...optionalParams: any[]) {\n        if (this.logLevel < LoggerLogLevel.LOG) {\n            return this;\n        }\n        try {\n            Logger.con.log(message, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n\n    public static time(timerName?: string) {\n        if (this.logLevel <= LoggerLogLevel.DEBUG) {\n            return this;\n        }\n        try {\n            Logger.con.time(timerName);\n        } catch (e) {}\n        return this;\n    }\n\n    public static timeEnd(timerName?: string) {\n        if (this.logLevel <= LoggerLogLevel.DEBUG) {\n            return this;\n        }\n        try {\n            Logger.con.timeEnd(timerName);\n        } catch (e) {}\n        return this;\n    }\n\n    public static trace(message?: any, ...optionalParams: any[]) {\n        if (this.logLevel < LoggerLogLevel.TRACE) {\n            return this;\n        }\n        try {\n            Logger.con.trace(message, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n\n    public static warn(message?: any, ...optionalParams: any[]) {\n        if (this.logLevel < LoggerLogLevel.WARN) {\n            return this;\n        }\n        try {\n            Logger.con.warn(message, ...optionalParams);\n        } catch (e) {}\n        return this;\n    }\n}\n","// Copyright (c) 2018, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\nimport { default as isNode }   from './is-node';\n\n// @ts-ignore TS7016 Could not find a declaration file\nimport * as requireDynamicGen_ from './require-cjs';\nconst requireDynamicGen = (requireDynamicGen_ as any).default || requireDynamicGen_;\n\n// tslint:disable-next-line:no-eval\nexport default isNode ? ((requireDynamicGen()) as (id: string) => any) : (id: string) => (void 0 as any);\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\nimport { Logger }                    from \"./Logger\";\nimport { default as isNode }         from '../runtime/is-node';\nimport { default as requireDynamic } from '../runtime/require-dynamic';\n\n\nexport interface FileFetcherConfig {\n    method?: string;\n    headers?: Array<{header: string, value: string}>;\n    data?: ArrayBufferView | Blob | string;\n    user?: string;\n    password?: string;\n}\n\n\n/**\n * Fetching file via HTTP/HTTPS or local file.\n *\n * @static\n */\nexport class FileFetcher {\n    private static fetchLocation_node(uri: string, config?: FileFetcherConfig): Promise<{contentType: string | null, data: ArrayLike<number>}> {\n        const promise: Promise<{contentType: string | null, data: ArrayLike<number>}> =\n            new Promise<{contentType: string | null, data: ArrayLike<number>}>((resolve, reject) => {\n\n            try {\n                const uriLower = uri.toLowerCase();\n                if (uriLower.startsWith(\"http:\") || uriLower.startsWith(\"https:\")) {\n                    // HTTP or HTTPS\n                    const http = requireDynamic(uriLower.startsWith(\"http:\") ? \"http\" : \"https\");\n                    const url = requireDynamic(\"url\");\n\n                    // TODO: set method and options\n                    http.get(uri, (res: any) => {\n                        // DO NOT CALL \"res.setEncoding('binary' or null)\" to receive chunks as Buffer !\n                        if (res.statusCode === 200) {\n                            const contentType = res.headers[\"content-type\"];\n                            const data: Buffer[] = [];\n                            res.on(\"data\", (chunk: Buffer) => {\n                                data.push(chunk);\n                            });\n                            res.on(\"end\", () => {\n                                resolve({contentType, data: Buffer.concat(data)});\n                            });\n                            res.on(\"error\", (e: any) => {\n                                Logger.log(\"FileFetcher#fetchLocation_node:http.get:on-error:\" + e);\n                                reject(e);\n                            });\n                        } else {\n                            Logger.log(\"FileFetcher#fetchLocation_node:http.get:bad-status-code:\" + res.statusCode);\n                            reject(res);\n                        }\n                    });\n                } else if (uri.match(/^[A-Za-z][-+.A-Za-z0-9]*:/) &&\n                    ! uriLower.toLowerCase().startsWith(\"file:\") &&\n                    ! (process.platform === \"win32\" && uri.match(/^[A-Za-z]:/))) {\n                    // unknown URI scheme\n                    reject(uri);\n                } else {\n                    // File\n                    const fs = requireDynamic(\"fs\");\n                    let path = uri;\n                    if (process.platform === \"win32\") {\n                        path = path.replace(/^file:\\/+([A-Za-z])\\//i, \"$1:/\");\n                        path = path.replace(/^\\/+([A-Za-z])\\//, \"$1:/\");\n                    }\n                    path = path.replace(/^file\\:\\/+/i, \"/\");\n                    const data: any[] = [];\n                    fs.createReadStream(path)\n                    .on(\"data\", (chunk: any) => {\n                        data.push(chunk);\n                    })\n                    .on(\"end\", () => {\n                        resolve({contentType: null, data: Buffer.concat(data)});\n                    })\n                    .on(\"error\", (e: any) => {\n                        Logger.log(\"FileFetcher#fetchLocation_node:fs.createReadStream:on-error:\" + e);\n                        reject(e);\n                    });\n                }\n            } catch (e) {\n                Logger.log(\"FileFetcher#fetchLocation_node:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    private static fetchLocation_xhr(uri: string, config?: FileFetcherConfig): Promise<{contentType: string | null, data: ArrayLike<number>}> {\n        const promise: Promise<{contentType: string | null, data: ArrayLike<number>}> =\n            new Promise<{contentType: string | null, data: ArrayLike<number>}>((resolve, reject) => {\n\n            try {\n                const xhr = new XMLHttpRequest();\n                xhr.onload = (e) => {\n                    if (xhr.status === 200 || xhr.status === 304) {\n                        const contentType = xhr.getResponseHeader(\"content-type\");\n                        const arrayBuffer = xhr.response;\n                        if (arrayBuffer) {\n                            resolve({contentType, data: new Uint8Array(arrayBuffer)});\n                        } else {\n                            Logger.log(\"FileFetcher#fetchLocation_xhr:xhr.onload:empty-response:\" + e);\n                            reject(e);\n                        }\n                    } else {\n                        Logger.log(\"FileFetcher#fetchLocation_xhr:xhr.onload:bad-status-code:\" + xhr.status + \":\" + e);\n                        reject(e);\n                    }\n                };\n                xhr.onerror = (e) => {\n                    Logger.log(\"FileFetcher#fetchLocation_xhr:xhr.onerror:\" + e);\n                    reject(e);\n                };\n                xhr.open(\n                    config !== void 0 && config !== null &&\n                        config.method !== void 0 && config.method !== null\n                        ? config.method : \"GET\",\n                    uri, true,\n                    config !== void 0 && config !== null ? config.user : void 0,\n                    config !== void 0 && config !== null ? config.password : void 0\n                    );\n                if (config !== void 0 && config !== null &&\n                    config.headers !== void 0 && config.headers !== null) {\n                    for (const h of config.headers) {\n                        xhr.setRequestHeader(h.header, h.value);\n                    }\n                }\n                xhr.responseType = \"arraybuffer\";\n                xhr.send(\n                    config !== void 0 && config !== null &&\n                        config.data !== void 0 && config.data !== null\n                        ? config.data : void 0\n                    );\n            } catch (e) {\n                Logger.log(\"FileFetcher#fetchLocation_xhr:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    /**\n     * Fetch file from URI location.\n     *\n     * @param  uri   file location's relative/absolute uri.\n     * @return       Promise of fetching file.\n     */\n    public static fetchLocation(uri: string, config?: FileFetcherConfig): Promise<{contentType: string | null, data: ArrayLike<number>}> {\n        if (isNode) {\n            return this.fetchLocation_node(uri, config);\n        } else {\n            return this.fetchLocation_xhr(uri, config);\n        }\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\nimport { Logger }                    from \"./Logger\";\nimport { default as isNode }         from '../runtime/is-node';\nimport { default as requireDynamic } from '../runtime/require-dynamic';\n\n\n\nexport type BinaryType = Buffer | Uint8Array;\n\n\nexport class FileSaver {\n    private static saveTextAs_node(pathOrFileName: string, text: string, encoding: string): Promise<boolean> {\n        const promise = new Promise<boolean>((resolve, reject) => {\n            try {\n                const fs = requireDynamic(\"fs\");\n                fs.writeFile(\n                    pathOrFileName, text,\n                    encoding === \"utf-8\" || encoding === \"UTF-8\" ? \"utf8\" : encoding, (err: any) => {\n                    if (err) {\n                        Logger.log(\"FileSaver#saveTextAs_node:writeFile:\" + err);\n                        reject(err);\n                    } else {\n                        resolve(true);\n                    }\n                });\n            } catch (e) {\n                Logger.log(\"FileSaver#saveTextAs_node:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    private static saveTextAs_html5(pathOrFileName: string, text: string, encoding: string): Promise<boolean> {\n        const promise = new Promise<boolean>((resolve, reject) => {\n            try {\n                if (encoding === \"utf-8\" || encoding === \"UTF-8\") {\n                    const blob = new Blob([text], {type: \"text/plain\"});\n\n                    if (window.navigator.msSaveOrOpenBlob) {\n                        window.navigator.msSaveOrOpenBlob(blob, pathOrFileName);\n                        resolve(true);\n                    } else {\n                        const url = window.URL.createObjectURL(blob);\n                        const a = document.createElement(\"a\");\n                        a.href = url;\n                        (a as any).download = pathOrFileName;\n\n                        const ua = window.navigator.userAgent.toLowerCase();\n                        // const isMSIE    = ua.indexOf('trident/') !== -1;\n                        // const isMSEdge  = ua.indexOf('edge/')    !== -1;\n                        // const isFirefox = ua.indexOf('firefox/') !== -1 && ua.indexOf('edge/') === -1;\n                        const isChrome  = ua.indexOf(\"chrome/\")  !== -1 && ua.indexOf(\"edge/\") === -1;\n\n                        if (! isChrome) document.body.appendChild(a);\n\n                        a.click();\n                        window.setTimeout(() => {\n                            window.URL.revokeObjectURL(url);\n\n                            if (! isChrome) document.body.removeChild(a);\n\n                            resolve(true);\n                        }, 10);\n                    }\n                } else {\n                    Logger.log(\"FileSaver#saveTextAs_html5:unsupported text encoding:\" + encoding);\n                    reject(\"unsupported text encoding\");\n                }\n            } catch (e) {\n                Logger.log(\"FileSaver#saveTextAs_html5:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    private static saveBinaryAs_node(pathOrFileName: string, data: ArrayLike<number>): Promise<boolean> {\n        const promise = new Promise<boolean>((resolve, reject) => {\n            try {\n                const fs = requireDynamic(\"fs\");\n                fs.writeFile(\n                    pathOrFileName, data, (err: any) => {\n                    if (err) {\n                        Logger.log(\"FileSaver#saveBinaryAs_node:writeFile:\" + err);\n                        reject(err);\n                    } else {\n                        resolve(true);\n                    }\n                });\n            } catch (e) {\n                Logger.log(\"FileSaver#saveBinaryAs_node:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    private static saveBinaryAs_html5(pathOrFileName: string, data: BinaryType): Promise<boolean> {\n        const promise = new Promise<boolean>((resolve, reject) => {\n            try {\n                const blob = new Blob([data], {type: \"application/octet-binary\"});\n\n                if (window.navigator.msSaveOrOpenBlob) {\n                    window.navigator.msSaveOrOpenBlob(blob, pathOrFileName);\n                    resolve(true);\n                } else {\n                    const url = window.URL.createObjectURL(blob);\n                    const a = document.createElement(\"a\");\n                    a.href = url;\n                    (a as any).download = pathOrFileName;\n\n                    const ua = window.navigator.userAgent.toLowerCase();\n                    // const isMSIE    = ua.indexOf('trident/') !== -1;\n                    // const isMSEdge  = ua.indexOf('edge/')    !== -1;\n                    // const isFirefox = ua.indexOf('firefox/') !== -1 && ua.indexOf('edge/') === -1;\n                    const isChrome  = ua.indexOf(\"chrome/\")  !== -1 && ua.indexOf(\"edge/\") === -1;\n\n                    if (! isChrome) document.body.appendChild(a);\n\n                    a.click();\n                    window.setTimeout(() => {\n                        window.URL.revokeObjectURL(url);\n\n                        if (! isChrome) document.body.removeChild(a);\n\n                        resolve(true);\n                    }, 10);\n                }\n            } catch (e) {\n                Logger.log(\"FileSaver#saveBinaryAs_html5:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n    public static saveTextAs(pathOrFileName: string, text: string, encoding: string = \"utf-8\"): Promise<boolean> {\n        if (isNode) {\n            return this.saveTextAs_node(pathOrFileName, text, encoding);\n        } else {\n            return this.saveTextAs_html5(pathOrFileName, text, encoding);\n        }\n    }\n\n    public static saveBinaryAs(pathOrFileName: string, data: BinaryType): Promise<boolean> {\n        if (isNode) {\n            return this.saveBinaryAs_node(pathOrFileName, data);\n        } else {\n            return this.saveBinaryAs_html5(pathOrFileName, data);\n        }\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\nimport { Logger } from \"./Logger\";\n\n\nexport class Html5FileFetcher {\n\n    /**\n     * read data from File interface(HTML5 File API).\n     */\n    public static fetch(file: Blob): Promise<{contentType: string , data: ArrayLike<number>}> {\n        const promise: Promise<{contentType: string , data: ArrayLike<number>}> =\n            new Promise<{contentType: string , data: ArrayLike<number>}>((resolve, reject) => {\n\n            try {\n                const reader = new FileReader();\n                reader.onload = (ev) => {\n                    resolve({contentType: file.type, data: new Uint8Array((ev.target as any).result as ArrayBuffer)});\n                };\n                reader.onerror = (ev) => {\n                    Logger.log(\"Html5FileFetcher#fetch:onerror:\" + ev);\n                    reject(ev);\n                };\n                reader.onabort = (ev) => {\n                    Logger.log(\"Html5FileFetcher#fetch:onabort:\" + ev);\n                    reject(ev);\n                };\n\n                reader.readAsArrayBuffer(file);\n            } catch (e) {\n                Logger.log(\"Html5FileFetcher#fetch:\" + e);\n                reject(e);\n            }\n        });\n        return promise;\n    }\n\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport class Uri {\n    public static isAbsolute(uri: string) {\n        const x = uri.toLowerCase();\n        if (x.startsWith('/') || x.startsWith('\\\\') ) {\n            // absolute local directory\n            // or UNC paths (e.g. \\\\\\\\server\\\\path, \\\\\\\\?\\\\long\\\\path)\n            return true;\n        }\n        if (x === '.' || x.startsWith('./') || x.startsWith('.\\\\')) {\n            return false;\n        }\n        if (x === '..' || x.startsWith('../') || x.startsWith('..\\\\')) {\n            return false;\n        }\n        if (x.match(/^([a-z][a-z0-9+\\-.]*):/)) {\n            // url scheme\n            return true;\n        }\n        if (x.match(/^[a-z]:[/\\/]/)) {\n            // windows drive letter + root\n            return true;\n        }\n        return false;\n    }\n\n    public static getDirectory(uri: string) {\n        let p = '';\n        let x = uri;\n        if (x.startsWith('\\\\\\\\?\\\\')) {\n            p += '\\\\\\\\?\\\\';\n            x = x.substring(3);\n        }\n\n        let query = x.indexOf('?');\n        if (query < 0) query = x.length;\n        let hash = x.indexOf('#');\n        if (hash < 0) hash = x.length;\n        x = x.substring(0, Math.min(query, hash));\n\n        if (x.endsWith('/') || x.endsWith('\\\\')) {\n            return p + x;\n        }\n\n        while (x.length > 0) {\n            x = x.substring(0, x.length - 1);\n            if (x.endsWith('/') || x.endsWith('\\\\')) {\n                return p + x;\n            }\n        }\n        return (p + x) || '/';\n    }\n\n    public static join(base: string, needle: string) {\n        if (Uri.isAbsolute(needle)) {\n            return needle;\n        }\n        return Uri.getDirectory(base) + needle;\n    }\n\n    public static getPathExt(path: string): string {\n        return (path.slice((path.lastIndexOf(\".\") - 1 >>> 0) + 2)).toLowerCase();\n    }\n\n    public static pathExtToContentType(pathExt: string): string | null {\n        let contentType: string | null = null;\n\n        switch (pathExt) {\n            case \"jpeg\":\n            case \"jpg\":\n                contentType = \"image/jpeg\";\n                break;\n            case \"png\":\n                contentType = \"image/png\";\n                break;\n            case \"gif\":\n                contentType = \"image/gif\";\n                break;\n            case \"svg\":\n            case \"svgz\":\n                contentType = \"image/svg+xml\";\n                break;\n            case \"tiff\":\n            case \"tif\":\n                contentType = \"image/tiff\";\n                break;\n            case \"jp2\":\n            case \"j2c\":\n                contentType = \"image/jp2\";\n                break;\n\n            case \"css\":\n                contentType = \"text/css\";\n                break;\n            case \"js\":\n                contentType = \"text/javascript\";\n                break;\n            case \"csv\":\n                contentType = \"text/csv\";\n                break;\n            case \"txt\":\n                contentType = \"text/plain\";\n                break;\n            case \"html\":\n            case \"htm\":\n                contentType = \"text/plain\";\n                break;\n        }\n        return contentType;\n    }\n}\n\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { PolynomialRing, Field } from \"./Field\";\nimport { WritableArrayLike }     from \"red-agate-util/modules/types/WritableArrayLike\";\n\n\n/**\n *\n */\nexport class ArrayPolynomialRing<U> implements PolynomialRing<U[], U> {\n\n    // tslint:disable-next-line:variable-name\n    private _zero: any[];\n    // tslint:disable-next-line:variable-name\n    private _one: any[];\n    // tslint:disable-next-line:variable-name\n    private _nan: any[];\n\n    /**\n     *\n     */\n    constructor(public field: Field<U>) {\n        this._zero = [field.ZERO];\n        this._one = [field.ONE];\n        this._nan = [field.NaN];\n    }\n\n    /**\n     *\n     */\n    public listPx(nth: number): U[][] {\n        throw new Error(\"not supported operation\");\n    }\n\n\n    public getAt(x: ArrayLike<U>, index: number): U {\n        return x[index];\n    }\n\n    public setAt(x: U[], index: number, v: U): U[] {\n        x[index] = v;\n        return x;\n    }\n\n    public slice(x: U[], start: number, end: number): U[] {\n        return x.slice(start, end);\n    }\n\n    public map(x: ArrayLike<U>, fn: (x: U) => U): U[] {\n        return this.mapToSelf(Array.from(x), fn);\n    }\n\n    public mapToSelf(x: U[], fn: (x: U) => U): U[] {\n        for (let i = 0; i < x.length; i++) x[i] = fn(x[i]);\n        return x;\n    }\n\n    public newNthPolynomial(n: number): U[] {\n        const r: U[] = [];\n        r.length = n + 1;\n        r.fill(this.field.ZERO);\n        return r;\n    }\n\n\n    /**\n     *\n     */\n    public get ZERO(): U[] {\n        return Array.from(this._zero);\n    }\n\n    /**\n     *\n     */\n    public get ONE(): U[] {\n        return Array.from(this._one);\n    }\n\n    /**\n     *\n     */\n    public get NaN(): U[] {\n        return this._nan;\n    }\n\n    /**\n     *\n     */\n    public normalize(x: ArrayLike<U>): U[] {\n        return (Array.isArray(x) ? x : Array.from(x)).map(v => this.field.normalize(v));\n    }\n\n    /**\n     *\n     */\n    public isNaN(x: ArrayLike<U>): boolean {\n        if (x !== this.NaN) {\n            if (x.length === 1 && x[0] === this.field.NaN) return true;\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     *\n     */\n    public eq(x: ArrayLike<U>, y: ArrayLike<U>): boolean {\n        if (this.isNaN(x) || this.isNaN(y)) return false;\n        const zero = this.field.ZERO;\n        const len = Math.max(x.length, y.length);\n        for (let i = 0; i < len; i++) {\n            if (! this.field.eq(\n                x[i] !== void(0) ? x[i] : zero,\n                y[i] !== void(0) ? y[i] : zero)) return false;\n        }\n        return true;\n    }\n\n    /**\n     *\n     */\n    public noteq(x: ArrayLike<U>, y: ArrayLike<U>): boolean {\n        return !this.eq(x, y);\n    }\n\n    /**\n     *\n     */\n    public neg(x: ArrayLike<U>): U[] {\n        const r: U[] = [];\n        for (let i = 0; i < x.length; i++) {\n            r[i] = this.field.neg(x[i]);\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public add(x: ArrayLike<U>, y: ArrayLike<U>): U[] {\n        const r: U[] = [];\n        const zero = this.field.ZERO;\n        r.length = Math.max(x.length, y.length);\n        for (let i = 0; i < r.length; i++) {\n            r[i] = this.field.add(\n                x[i] !== void(0) ? x[i] : zero,\n                y[i] !== void(0) ? y[i] : zero);\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public sub(x: ArrayLike<U>, y: ArrayLike<U>): U[] {\n        const r: U[] = [];\n        const zero = this.field.ZERO;\n        r.length = Math.max(x.length, y.length);\n        for (let i = 0; i < r.length; i++) {\n            r[i] = this.field.sub(\n                x[i] !== void(0) ? x[i] : zero,\n                y[i] !== void(0) ? y[i] : zero);\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public mul(x: ArrayLike<U>, y: ArrayLike<U>): U[] {\n        const r: U[] = [];\n        const zero = this.field.ZERO;\n        r.length = x.length + y.length - 1;\n        for (let i = 0; i < r.length; i++) {\n            r[i] = zero;\n        }\n        for (let i = 0; i < y.length; i++) {\n            for (let j = 0; j < x.length; j++) {\n                r[j + i] = this.field.add(r[j + i], this.field.mul(x[j], y[i]));\n            }\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public mod(x: WritableArrayLike<U>, y: ArrayLike<U>, extendDividendLength: number = 0): U[] {\n        return this.divmod(x, y, extendDividendLength).r;\n    }\n\n    /**\n     *\n     */\n    public divmod(x: WritableArrayLike<U>, y: ArrayLike<U>, extendDividendLength: number = 0):\n                 {q: U[], r: U[], divisible: boolean} {\n        x = Array.from(x);\n        const zero = this.field.ZERO;\n\n        if (extendDividendLength > 0) {\n            const ext: U[] = [];\n            ext.length = extendDividendLength;\n            for (let i = 0; i < extendDividendLength; i++) {\n                ext[i] = zero;\n            }\n            x = ext.concat(x as U[]);\n        }\n\n        let ylen = y.length;\n        for (let i = 0; i < ylen; i++, ylen--) {\n            if (y[ylen - 1] !== void(0) &&\n                this.field.noteq(y[ylen - 1], zero)) break;\n        }\n        if (ylen === 0) return {q: this.NaN, r: this.NaN, divisible: false};\n\n        const n: number = x.length - ylen + 1;\n        const q: U[] = [];\n        q.length = n;\n        for (let i = 0; i < n; i++) {\n            if (this.field.noteq(x[x.length - 1 - i], zero)) {\n                const c = this.field.divmod(x[x.length - 1 - i], y[ylen - 1]);\n                q[n - 1 - i] = c.q;\n                for (let j = 0; j < ylen - 1; j++) {\n                    x[n - 1 - i + j] = this.field.sub(x[n - 1 - i + j], this.field.mul(y[j], c.q));\n                }\n                x[x.length - 1 - i] = c.r;\n            } else {\n                x[x.length - 1 - i] = zero;\n            }\n        }\n\n        let divisible = true;\n        const r: U[] = [];\n        r.length = ylen - 1;\n        for (let i = 0; i < r.length; i++) {\n            if (x[i]) divisible = false;\n            r[i] = x[i];\n        }\n        return {q, r, divisible};\n    }\n\n    /**\n     *\n     */\n    public pow(a: ArrayLike<U>, x: number): U[] {\n        throw new Error(\"not supported operation\");\n    }\n\n    /**\n     *\n     */\n    public exp(x: number): U[] {\n        throw new Error(\"not supported operation\");\n    }\n}\n\n\n/**\n *\n */\nexport class NumberArrayPolynomialRing extends ArrayPolynomialRing<number> {\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { PolynomialRing } from \"./Field\";\n\n\n/**\n *\n */\nexport class Equation<T, V> {\n\n    constructor(public ring: PolynomialRing<T, V>) {\n    }\n\n    /**\n     * solve a equation.\n     *\n     *                  [0]             [1]                   [n]\n     *\n     *   S0     =     S_0_0 +     S_0_1*x_1 + ... +     S_0_n*x_n = 0\n     *   S1     =     S_1_0 +     S_1_1*x_1 + ... +     S_1_n*x_n = 0\n     *     ...\n     *   S(n-1) = S_(n-1)_0 + S_(n-1)_1*x_1 + ... + S_(n-1)_n*x_n = 0\n     *\n     *\n     * matrix expression:\n     *        [n]          [n-1]            [1]           negate([0])\n     *\n     * |S_0_n      S_0_(n-1)      ...  S_0_1    | |x_n|   |S_0_0    |\n     * | ...                                    | |   | = |         |\n     * |S_(n-1)_n  S_(n-1)_(n-1)  ...  S_(n-1)_1| |x_1|   |S_(n-1)_0|\n     *\n     *\n     * equation[n][n+1: coefficient of x^0,...,x^n]\n     * equation is stored into n+1 x n matrix\n     * [offsetY <=  <= offsetY + n - 1][offsetX <=  <= offsetX + n]\n     *\n     * returns [x_1, x_2, ... , x_n]\n     */\n    public solve(equation: T[], offsetX: number, offsetY: number, n: number): T {\n        const field = this.ring.field;\n\n        for (let i = 0; i < n; i++) {\n            let c = this.ring.getAt(equation[i], n - i);\n            if (field.eq(c, field.ZERO)) {\n                for (let j = i + 1; j < n; j++) {\n                    if (field.noteq(this.ring.getAt(equation[j], n - i), field.ZERO)) {\n                        const r = equation[i];\n                        equation[i] = equation[j];\n                        equation[j] = r;\n                        break;\n                    }\n                }\n                c = this.ring.getAt(equation[i], n - i);\n            }\n            if (field.eq(c, field.ZERO)) continue;\n\n            equation[i] = this.ring.mapToSelf(equation[i], v => field.div(v, c));\n            for (let j = i + 1; j < n; j++) {\n                const m = this.ring.getAt(equation[j], n - i);\n                const r = this.ring.map(equation[i], v => field.mul(v, m));\n                equation[j] = this.ring.sub(equation[j], r);\n            }\n        }\n\n        for (let i = n - 1; i >= 0; i--) {\n            const c = this.ring.getAt(equation[i], n - i);\n            if (field.eq(c, field.ZERO)) continue;\n\n            for (let j = 0; j < i; j++) {\n                const m = this.ring.getAt(equation[j], n - i);\n                const r = this.ring.map(equation[i], v => field.mul(v, m));\n                equation[j] = this.ring.sub(equation[j], r);\n            }\n        }\n\n        const ss = this.ring.newNthPolynomial(n - 1);\n        for (let i = 0; i < n; i++) {\n            if (field.eq(this.ring.getAt(equation[i], n - i), field.ZERO))\n                this.ring.setAt(ss, n - 1 - i, field.NaN);\n            else\n                this.ring.setAt(ss, n - 1 - i, field.neg(this.ring.getAt(equation[i], 0)));\n        }\n        return ss;\n    }\n\n    /**\n     * get determinant of n x n matrix.\n     * the determinant of matrix A is:\n     *\n     *               [n-1]           [n-2]                 [0]\n     *\n     *             | S_0_(n-1)       S_0_(n-2)       ...   S_0_0     |\n     *   det(A)  = | S_1_(n-1)       S_1_(n-2)       ...   S_1_0     |\n     *               ...\n     *             | S_(n-1)_(n-1)   S_(n-1)_(n-2)   ...   S_(n-1)_0 |\n     *\n     * argument matrix layout is:\n     *\n     *   | a  b |  = [[b, a], [d, c]]\n     *   | c  d |\n     *\n     * return value of 2x2 matrix's determinant is (ad - bc)\n     */\n    public det(matrix: T[], offsetX: number, offsetY: number, n: number): V {\n        const field = this.ring.field;\n        if (n <= 0) return field.NaN;\n\n        const fn: (mat: T[], len: number) => V = (mat: T[], len: number) => {\n            if (len < 2) {\n                return this.ring.getAt(mat[0], 0);\n            }\n            if (len === 2) {\n                // ad - bc\n                return field.sub(\n                    field.mul(this.ring.getAt(mat[0], 1), this.ring.getAt(mat[1], 0)),\n                    field.mul(this.ring.getAt(mat[1], 1), this.ring.getAt(mat[0], 0)));\n            }\n            let v = field.ZERO;\n            for (let i = 0; i < len; i++) {\n                const m2: T[] = [];\n                for (let j = 0; j < len; j++) {\n                    if (i === j) continue;\n                    m2.push(this.ring.slice(mat[j], 0, len - 1));\n                }\n                const sign = (len - 1 + len - i) % 2 ? 1 : -1;\n                const d = fn(m2, len - 1);\n                v = field.add(v, field.mul(\n                    this.ring.getAt(mat[i], len - 1),\n                    sign >= 0 ? d : field.neg(d)));\n            }\n            return v;\n        };\n\n        if (offsetX === 0) {\n            if (offsetY === 0) return fn(matrix, n);\n            else return fn(matrix.slice(offsetY), n);\n        }\n\n        const matr: T[] = [];\n        for (let i = 0; i < n; i++) {\n            matr.push(this.ring.slice(matrix[offsetY + i], offsetX, offsetX + n));\n        }\n        return fn(matr, n);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { FiniteField } from \"./Field\";\n\n\n/**\n * GF(2^n) ; Extension Finite Field\n */\nexport class Gf2Ext implements FiniteField<number> {\n    private expDict: number[] = [];\n    private  lnDict: number[] = [this.NaN];\n    private numElements: number;\n    private        mask: number;\n    private      maskLo: number;\n    private      maskHi: number;\n\n    /**\n     *\n     */\n    constructor(private nth: number = 8, private px: number = 0x011d) {\n        let v: number = 1;\n        this.numElements = 2 ** nth; // 1 << nth\n        this.mask = this.numElements - 1;\n\n        this.expDict.length = this.mask;\n        this.lnDict.length  = this.numElements;\n\n        for (let i = 0; i < this.mask; i++) {\n            this.expDict[i] = v;\n            this.lnDict [v] = i;\n            v *= 2;                                 // left shift 1. polynomial multipy by alpha(=2).\n            if (v > this.mask) {                    // (v & ~this.mask)\n                v = ((v ^ px) & this.mask) >>> 0;\n            }\n        }\n    }\n\n    /**\n     * 53bits x & this.mask\n     */\n    private bitMask(x: number): number {\n        x = Math.abs(x);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n        return ((hiX & this.maskHi) >>> 0) * 4294967296 + ((loX & this.maskLo) >>> 0);\n    }\n\n    /**\n     *\n     */\n    public checkGenerationResult(): boolean {\n        for (let i = 1; i < this.numElements; i++) {\n            if (this.lnDict[i] === void(0)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n\n    /**\n     * order of this field\n     */\n    public get MODULO(): number {\n        return this.numElements;\n    }\n\n    /**\n     *\n     */\n    public get ZERO(): number {\n        return 0;\n    }\n\n    /**\n     *\n     */\n    public get ONE(): number {\n        return 1;\n    }\n\n    /**\n     *\n     */\n    public get ALPHA(): number {\n        return 2;\n    }\n\n    /**\n     *\n     */\n    public get NaN(): number {\n        return Number.NaN;\n    }\n\n\n    /**\n     *\n     */\n    public normalize(x: number): number {\n        return (x & this.mask) >>> 0;\n    }\n\n    /**\n     *\n     */\n    public isNaN(x: number): boolean {\n        return Number.isNaN(x);\n    }\n\n    /**\n     *\n     */\n    public eq(x: number, y: number): boolean {\n        return ((x & this.mask) >>> 0) === ((y & this.mask) >>> 0);\n    }\n\n    /**\n     *\n     */\n    public noteq(x: number, y: number): boolean {\n        return ((x & this.mask) >>> 0) !== ((y & this.mask) >>> 0);\n    }\n\n    /**\n     *\n     */\n    public neg(x: number): number {\n        return (x & this.mask) >>> 0;\n    }\n\n    /**\n     *\n     */\n    public inv(x: number): number {\n        x = (x & this.mask) >>> 0;\n        return  (x === 0) ? this.NaN :\n            this.expDict[(this.mask - this.lnDict[x]) % this.mask];\n    }\n\n    /**\n     *\n     */\n    public add(x: number, y: number): number {\n        return ((x ^ y) & this.mask) >>> 0;\n    }\n\n    /**\n     *\n     */\n    public sub(x: number, y: number): number {\n        return ((x ^ y) & this.mask) >>> 0;\n    }\n\n    /**\n     *\n     */\n    public mul(x: number, y: number): number {\n        x = (x & this.mask) >>> 0;\n        y = (y & this.mask) >>> 0;\n        if (x === 0 || y === 0) return 0;\n        return this.expDict[(this.lnDict[x] + this.lnDict[y]) % this.mask];\n    }\n\n    /**\n     *\n     */\n    public div(x: number, y: number): number {\n        x = (x & this.mask) >>> 0;\n        y = (y & this.mask) >>> 0;\n        if (y === 0) return this.NaN;\n        if (x === 0) return 0;\n        return this.expDict[\n            (this.lnDict[x] + ((this.mask - this.lnDict[y]) % this.mask))\n            % this.mask];\n    }\n\n    /**\n     *\n     */\n    public mod(x: number, y: number): number {\n        return (((y & this.mask) >>> 0) === 0) ? this.NaN : 0;\n    }\n\n    /**\n     *\n     */\n    public divmod(x: number, y: number): {q: number, r: number, divisible: boolean} {\n        return (((y & this.mask) >>> 0) === 0) ? {\n            q: this.NaN,\n            r: this.NaN,\n            divisible: false\n        } : {\n            q: this.div(x, y),\n            r: 0,\n            divisible: true\n        };\n    }\n\n    /**\n     *\n     */\n    public pow(a: number, x: number): number {\n        a = this.normalize(a);\n        x = x % this.mask;\n        if (a === 0) {\n            return (x === 0) ? 1 : 0;\n        }\n        return (x >= 0)\n            ? this.exp(this.ln(a) * x)\n            : this.inv(this.exp(this.ln(a) * -x));\n    }\n\n    /**\n     *\n     */\n    public log(a: number, x: number): number {\n        // y = log(a,pow(a,y))\n\n//        // log(a,x) = ln(x) / ln(a)\n//        let p = this.ln(x);\n//        let q = this.ln(a);\n//        return this.div(p, q); // don't work\n\n        const logDict: number[] = [this.NaN];\n        for (let y = 0; y < this.mask; y++) {\n            const v = this.pow(a, y);\n            if (logDict[v] === void(0)) logDict[v] = y;\n        }\n        const r = logDict[(x & this.mask) >>> 0];\n        return r !== void(0) ? r : this.NaN;\n    }\n\n    /**\n     *\n     */\n    public exp(x: number): number {\n        return (x >= 0)\n            ? this.expDict[x % this.mask]\n            : this.inv(this.expDict[-x % this.mask]);\n    }\n\n    /**\n     *\n     */\n    public ln(x: number): number {\n        return this.lnDict[(x & this.mask) >>> 0];\n    }\n}\n\n\n\n/**\n *\n */\nexport class Gf2e8Field extends Gf2Ext {\n    /**\n     *\n     */\n    constructor(px: number = 0x011d) {\n        super(8, px);\n    }\n}\n\n\n/**\n *\n */\nexport class Gf2e6Field extends Gf2Ext {\n    /**\n     *\n     */\n    constructor(px: number = 0x0043) {\n        super(6, px);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { FiniteField } from \"./Field\";\n\n\n/**\n * GF(p) ; Prime Finite Field\n */\nexport class GfPrime implements FiniteField<number> {\n    private expDict: number[] = [];\n    private  lnDict: number[] = [this.NaN];\n\n    /**\n     *\n     */\n    constructor(private prime: number, private alpha: number = 3) {\n        let v: number = 1;\n        for (let i = 0; i < prime - 1; i++) {\n            this.expDict[i] = v;\n            this.lnDict [v] = i;\n            v = (v * alpha) % prime;\n        }\n    }\n\n    /**\n     *\n     */\n    public checkGenerationResult(): boolean {\n        for (let i = 1; i < this.prime; i++) {\n            if (this.lnDict[i] === void(0)) return false;\n        }\n        return true;\n    }\n\n\n    /**\n     * order of this field\n     */\n    public get MODULO(): number {\n        return this.prime;\n    }\n\n    /**\n     *\n     */\n    public get ZERO(): number {\n        return 0;\n    }\n\n    /**\n     *\n     */\n    public get ONE(): number {\n        return 1;\n    }\n\n    /**\n     *\n     */\n    public get ALPHA(): number {\n        return this.alpha;\n    }\n\n    /**\n     *\n     */\n    public get NaN(): number {\n        return Number.NaN;\n    }\n\n    /**\n     *\n     */\n    public normalize(x: number): number {\n        return (x < 0 ? this.prime - (-x % this.prime) : x) % this.prime;\n    }\n\n    /**\n     *\n     */\n    public isNaN(x: number): boolean {\n        return Number.isNaN(x);\n    }\n\n    /**\n     *\n     */\n    public eq(x: number, y: number): boolean {\n        return this.normalize(x) === this.normalize(y);\n    }\n\n    /**\n     *\n     */\n    public noteq(x: number, y: number): boolean {\n        return this.normalize(x) !== this.normalize(y);\n    }\n\n    /**\n     *\n     */\n    public neg(x: number): number {\n        return (this.prime - (x % this.prime)) % this.prime;\n    }\n\n    /**\n     *\n     */\n    public inv(x: number): number {\n        x = this.normalize(x);\n        return (x === 0) ? this.NaN\n          : this.expDict[(this.prime - 1 - this.ln(x)) % (this.prime - 1)];\n    }\n\n    /**\n     *\n     */\n    public inv_withoutTable(x: number): number {\n        x = this.normalize(x);\n        if (x === 0) return this.NaN;\n        let v: number = 1; // make  1/x (mod P)\n        for (let i = 0; i < this.prime; i++) {\n            if ((v % x) === 0) return (v / x) % this.prime;\n            v = v + this.prime;\n        }\n        return this.NaN;\n    }\n\n    /**\n     *\n     */\n    public add(x: number, y: number): number {\n        return (this.normalize(x) + this.normalize(y)) % this.prime;\n    }\n\n    /**\n     *\n     */\n    public sub(x: number, y: number): number {\n        return this.normalize(this.normalize(x) - this.normalize(y));\n    }\n\n    /**\n     *\n     */\n    public mul(x: number, y: number): number {\n        return (this.normalize(x) * this.normalize(y)) % this.prime;\n    }\n\n    /**\n     *\n     */\n    public div(x: number, y: number): number {\n        return (this.normalize(x) * this.inv(y)) % this.prime;\n    }\n\n    /**\n     *\n     */\n    public mod(x: number, y: number): number {\n        return ((y % this.prime) === 0) ? this.NaN : 0;\n    }\n\n    /**\n     *\n     */\n    public divmod(x: number, y: number): {q: number, r: number, divisible: boolean} {\n        return ((y % this.prime) === 0) ? {\n            q: this.NaN,\n            r: this.NaN,\n            divisible: false\n        } : {\n            q: this.div(x, y),\n            r: 0,\n            divisible: true\n        };\n    }\n\n    /**\n     *\n     */\n    public pow(a: number, x: number): number {\n        a = this.normalize(a);\n        x = x % (this.prime - 1);\n        if (a === 0) {\n            return (x === 0) ? 1 : 0;\n        }\n        return (x >= 0)\n            ? this.exp(this.ln(a) * x)\n            : this.inv(this.exp(this.ln(a) * -x));\n    }\n\n    /**\n     *\n     */\n    public pow_withoutTable(a: number, x: number): number {\n        a = this.normalize(a);\n        x = x % (this.prime - 1);\n        if (a === 0) {\n            return (x === 0) ? 1 : 0;\n        }\n        return (x >= 0)\n            ? this.exp_withoutTable(this.ln_withoutTable(a) * x)\n            : this.inv_withoutTable(this.exp_withoutTable(this.ln(a) * -x));\n    }\n\n    /**\n     *\n     */\n    public log(a: number, x: number): number {\n        // y = log(a,pow(a,y))\n        const logDict: number[] = [this.NaN];\n        for (let y = 0; y < this.prime - 1; y++) {\n            const v = this.pow(a, y);\n            if (logDict[v] === void(0)) logDict[v] = y;\n        }\n\n        const r = logDict[this.normalize(x)];\n        return r !== void(0) ? r : this.NaN;\n    }\n\n    /**\n     *\n     */\n    public log_withoutTable(a: number, x: number): number {\n        // log(a,x) = ln(x) / ln(a)\n        let p = this.ln_withoutTable(x);\n        const q = this.ln_withoutTable(a);\n        if (this.isNaN(p) || this.isNaN(q)) return this.NaN;\n        for (let i = 0; i < this.prime; i++) {\n            if ((p % q) === 0) return (p / q) % this.prime;\n            p = p + this.prime - 1; // on GF(P):  alpha^x = alpha^(x + P - 1)\n        }\n        return this.NaN;\n    }\n\n    /**\n     *\n     */\n    public exp(x: number): number {\n        return (x >= 0)\n            ? this.expDict[x % (this.prime - 1)]\n            : this.inv(this.expDict[-x % (this.prime - 1)]);\n    }\n\n    /**\n     *\n     */\n    public exp_withoutTable(x: number): number {\n        return (x >= 0)\n            ? Math.pow(this.alpha, x % (this.prime - 1)) % this.prime\n            : this.inv_withoutTable(Math.pow(this.alpha, -x % (this.prime - 1)));\n    }\n\n    /**\n     *\n     */\n    public ln(x: number): number {\n        return this.lnDict[this.normalize(x)];\n    }\n\n    /**\n     *\n     */\n    public ln_withoutTable(x: number): number {\n        x = this.normalize(x);\n        if (x === 0) return this.NaN;\n        let v: number = 1;\n        for (let i = 0; i < this.prime - 1; i++) {\n            if (x === v) return i;\n            v = (v * this.alpha) % this.prime;\n        }\n        return this.NaN;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { PolynomialRing }    from \"./Field\";\nimport { Integer53 }         from \"red-agate-util/modules/types/Integer53\";\nimport { Gf2Ext }            from \"./Gf2Ext\";\nimport { GfPrime }           from \"./GfPrime\";\nimport { WritableArrayLike } from \"red-agate-util/modules/types/WritableArrayLike\";\n\n\n/**\n *\n */\nexport class Gf2PrimeFieldHelper {\n\n    public static listPx(nth: number, listAll: boolean = false): number[] {\n        // GF(p^m)      's primitive polynomials P(X) are:\n        // x^(p^m-1)-1  's factor that degree of m irreducible polynomial\n        // (p:prime, m:degree of field extension)\n        const numElements = 2 ** nth; // 1 << nth\n        const mask = numElements - 1;\n\n        const zx: number[] = [];\n        const pxs: number[] = [];\n        zx[mask] = 1;\n        zx[0] = 1;\n\n        const n = 2 ** (nth + 1);\n        for (let i = 2; i < n; i++) {\n            const result = Gf2PrimeFieldHelper.polyDiv(zx, Gf2PrimeFieldHelper.bitToPoly(i));\n            if (result.divisible && (pxs.length === 0 ||\n                    pxs.every((px) => ! Gf2PrimeFieldHelper.bitPolyDiv(i, px).divisible)))\n                pxs.push(i);\n        }\n\n        if (listAll) return pxs;\n        else return pxs.filter(v => Boolean(Integer53.bitRShift(v, nth) & 1)).filter((v) => {\n            const gf = new Gf2Ext(nth, v);\n            return gf.checkGenerationResult();\n        });\n    }\n\n    /**\n     *\n     */\n    public static bitToPoly(x: number): number[] {\n        const r: number[] = [];\n        x = Math.abs(x);\n        const loX = (x & 0xffffffff) >>> 0;\n        const hiX = (x - loX) / 4294967296;\n\n        for (let i = 0; i < 32; i++) {\n            r[i] = ((loX & (1 << i)) >>> 0) ? 1 : 0;\n        }\n        for (let i = 0; i < 21; i++) {\n            r[32 + i] = ((hiX & (1 << i)) >>> 0) ? 1 : 0;\n        }\n        for (let i = 52; i > 0; i--) {\n            if (r[i]) {\n                r.length = i + 1;\n                return r;\n            }\n        }\n        r.length = 1;\n        return r;\n    }\n\n    /**\n     *\n     */\n    public static polyToBit(x: ArrayLike<number>): number {\n        let r: number = 0;\n        const n: number = Math.min(53, x.length);\n        for (let i = 0; i < n; i++) {\n            if (x[i]) r += 2 ** i;\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public static polyAdd(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        // GF2 prime finite field's calculation.\n        const r: number[] = [];\n        r.length = Math.max(x.length, y.length);\n        for (let i = 0; i < r.length; i++) {\n            r[i] = (x[i] !== void(0) ? x[i] : 0) ^ (y[i] !== void(0) ? y[i] : 0);\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public static polySub(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        // GF2 prime finite field's calculation.\n        return this.polyAdd(x, y);\n    }\n\n    /**\n     *\n     */\n    public static bitPolyAdd(x: number, y: number): number {\n        // GF2 prime finite field's calculation.\n        return Integer53.bitXor(x, y);\n    }\n\n    /**\n     *\n     */\n    public static bitPolySub(x: number, y: number): number {\n        // GF2 prime finite field's calculation.\n        return Integer53.bitXor(x, y);\n    }\n\n    /**\n     *\n     */\n    public static polyMul(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        // GF2 prime finite field's calculation.\n        const r: number[] = [];\n        r.length = x.length + y.length - 1;\n        for (let i = 0; i < y.length; i++) {\n            for (let j = 0; j < x.length; j++) {\n                // r[j + i] is undefined but bitwise operators implicitly cast NaN as 0.\n                r[j + i] ^= x[j] & y[i];\n            }\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public static bitPolyMul(x: number, y: number): number {\n        // GF2 prime finite field's calculation.\n        let r = 0;\n        for (let i = 0; i < 53; i++) {\n            r = Integer53.bitXor(r, x * (Integer53.bitRShift(y, i) & 1) * (2 ** i));\n        }\n        return r;\n    }\n\n    /**\n     *\n     */\n    public static polyDiv(\n            x: WritableArrayLike<number>, y: ArrayLike<number>, extendDividendLength: number = 0):\n            {q: number[], r: number[], divisible: boolean} {\n        // GF2 prime finite field's calculation.\n        x = Array.from(x);\n        if (extendDividendLength > 0) {\n            const ext: number[] = [];\n            ext.length = extendDividendLength;\n            for (let i = 0; i < extendDividendLength; i++) {\n                ext[i] = 0;\n            }\n            x = ext.concat(x as number[]);\n        }\n\n        let ylen = y.length;\n        for (let i = 0; i < ylen; i++, ylen--) {\n            if (y[ylen - 1]) break;\n        }\n        if (ylen === 0) return {q: [Number.NaN], r: [Number.NaN], divisible: false};\n\n        const n: number = x.length - ylen + 1;\n        const q: number[] = [];\n        q.length = n;\n        for (let i = 0; i < n; i++) {\n            if (x[x.length - 1 - i]) {\n                q[n - 1 - i] = 1;\n                for (let j = 0; j < ylen; j++) {\n                    x[n - 1 - i + j] ^= y[j];\n                }\n            } else {\n                x[x.length - 1 - i] = 0;\n            }\n        }\n\n        let divisible = true;\n        const r: number[] = [];\n        r.length = ylen - 1;\n        for (let i = 0; i < r.length; i++) {\n            if (x[i]) divisible = false;\n            r[i] = x[i];\n        }\n        return {q, r, divisible};\n    }\n\n    /**\n     *\n     */\n    public static bitPolyDiv(x: number, y: number, extendDividendLength: number = 0):\n            {q: number, r: number, divisible: boolean} {\n        // GF2 prime finite field's calculation.\n        if (extendDividendLength)\n            x = Integer53.bitLShift(x, extendDividendLength);\n        let ylen = 53;\n        for (let i = 0; i < 53; i++, ylen--) {\n            if (Integer53.bitRShift(y, 52 - i)) break;\n        }\n        if (ylen === 0) return {q: Number.NaN, r: Number.NaN, divisible: false};\n\n        const n: number = 53 - ylen + 1;\n        let q: number = 0;\n\n        for (let i = 0, m = 2 ** 52; i < n; i++, m /= 2) {\n            if (Math.trunc(x / m) & 1) {\n                const w = 2 ** (n - 1 - i);\n                q += w;\n                x = Integer53.bitXor(x, y * w);\n            }\n        }\n        return {q, r: x, divisible: x === 0};\n    }\n\n    /**\n     *\n     */\n    public static polyIsZero(x: ArrayLike<number>): boolean {\n        const n: number = Math.min(52, x.length);\n        for (let i = 0; i < n; i++) {\n            if (x[i]) return true;\n        }\n        return false;\n    }\n}\n\n\nexport class Gf2PrimeBitPolynomialRing implements PolynomialRing<number, number> {\n\n    // tslint:disable-next-line:variable-name\n    private _field: GfPrime;\n\n\n    public get field(): GfPrime {\n        if (this._field) return this._field;\n        this._field = new GfPrime(2);\n        return this._field;\n    }\n\n\n    public listPx(nth: number, listAll: boolean = false): number[] {\n        return Gf2PrimeFieldHelper.listPx(nth, listAll);\n    }\n\n\n    public getAt(x: number, index: number): number {\n        return Integer53.bitRShift(x, index) & 1;\n    }\n\n    public setAt(x: number, index: number, v: number): number {\n        return Integer53.bitNot(Integer53.bitLShift((v & 1) ? 0 : 1, index));\n    }\n\n    public slice(x: number, start: number, end: number): number {\n        return Integer53.bitAnd(\n            Integer53.bitRShift(Integer53.MAX_INT, end - start),\n            Integer53.bitRShift(x, start));\n    }\n\n    public map(x: number, fn: (x: number) => number): number {\n        return this.mapToSelf(x, fn);\n    }\n\n    public mapToSelf(x: number, fn: (x: number) => number): number {\n        for (let i = 0; i < 53; i++) x = this.setAt(x, i, fn(this.getAt(x, i)));\n        return x;\n    }\n\n    public newNthPolynomial(n: number): number {\n        return 0;\n    }\n\n\n    /**\n     * additive identity element\n     */\n    public get ZERO(): number {\n        return 0;\n    }\n\n    /**\n     * multiplicative identity element\n     */\n    public get ONE(): number {\n        return 1;\n    }\n\n    /**\n     * NaN value\n     */\n    public get NaN(): number {\n        return Number.NaN;\n    }\n\n\n    /**\n     * normalize a value\n     */\n    public normalize(x: number): number {\n        return x;\n    }\n\n    /**\n     * check value is NaN\n     */\n    public isNaN(x: number): boolean {\n        return Number.isNaN(x);\n    }\n\n\n    /**\n     * compare element and return true if x equals to y\n     * eq(v,v)     -> true\n     * eq(NaN,NaN) -> false\n     */\n    public eq(x: number, y: number): boolean {\n        return x === y;\n    }\n\n    /**\n     * compare element and return false if x equals to y\n     */\n    public noteq(x: number, y: number): boolean {\n        return x !== y;\n    }\n\n\n    /**\n     * negate; additive inverse (-x)\n     */\n    public neg(x: number): number {\n        return x;\n    }\n\n\n    /**\n     * addition (x+y)\n     */\n    public add(x: number, y: number): number {\n        return Integer53.bitXor(x, y);\n    }\n\n    /**\n     * subtraction (x-y)\n     */\n    public sub(x: number, y: number): number {\n        return Integer53.bitXor(x, y);\n    }\n\n    /**\n     * multiplication (x*y)\n     */\n    public mul(x: number, y: number): number {\n        return Gf2PrimeFieldHelper.bitPolyMul(x, y);\n    }\n\n    /**\n     * modulation (x%y)\n     */\n    public mod(x: number, y: number, extendDividendLength: number = 0): number {\n        return Gf2PrimeFieldHelper.bitPolyDiv(x, y, extendDividendLength).r;\n    }\n\n    /**\n     * division (x/y)\n     *             ? = div(x,ZERO) ; depends on field definition\n     * mul(x,inv(y)) = div(x,y)    ;  when  y != ZERO\n     */\n    public divmod(x: number, y: number, extendDividendLength: number = 0):\n            {q: number, r: number, divisible: boolean} {\n        return Gf2PrimeFieldHelper.bitPolyDiv(x, y, extendDividendLength);\n    }\n\n\n    /**\n     * exponentiation (a^x)\n     *   y = pow(a,x)\n     *   x = log(a,y)\n     * ONE = pow(a,0)\n     *   a = pow(a,1)\n     */\n    public pow(a: number, x: number): number {\n        throw new Error(\"not supported operation\");\n    }\n\n    /**\n     * pow(ALPHA,x) = exp(x)\n     *          ONE = exp(0)\n     *        ALPHA = exp(1)\n     */\n    public exp(x: number): number {\n        throw new Error(\"not supported operation\");\n    }\n}\n\n\nexport class Gf2PrimeArrayPolynomialRing implements PolynomialRing<number[], number> {\n\n    // tslint:disable-next-line:variable-name\n    private _field: GfPrime;\n    // tslint:disable-next-line:variable-name\n    private _nan: number[];\n\n    /**\n     *\n     */\n    constructor() {\n        this._nan = [Number.NaN];\n    }\n\n\n    public get field(): GfPrime {\n        if (this._field) return this._field;\n        this._field = new GfPrime(2);\n        return this._field;\n    }\n\n\n    public listPx(nth: number, listAll: boolean = false): number[][] {\n        return Gf2PrimeFieldHelper.listPx(nth, listAll).map(x => Gf2PrimeFieldHelper.bitToPoly(x));\n    }\n\n\n    public getAt(x: ArrayLike<number>, index: number): number {\n        return x[index];\n    }\n\n    public setAt(x: number[], index: number, v: number): number[] {\n        x[index] = v;\n        return x;\n    }\n\n    public slice(x: number[], start: number, end: number): number[] {\n        return x.slice(start, end);\n    }\n\n    public map(x: ArrayLike<number>, fn: (x: number) => number): number[] {\n        return this.mapToSelf(Array.from(x), fn);\n    }\n\n    public mapToSelf(x: number[], fn: (x: number) => number): number[] {\n        for (let i = 0; i < x.length; i++) x[i] = fn(x[i]);\n        return x;\n    }\n\n    public newNthPolynomial(n: number): number[] {\n        const r: number[] = [];\n        r.length = n + 1;\n        r.fill(0);\n        return r;\n    }\n\n\n    /**\n     * additive identity element\n     */\n    public get ZERO(): number[] {\n        return [0];\n    }\n\n    /**\n     * multiplicative identity element\n     */\n    public get ONE(): number[] {\n        throw [1];\n    }\n\n    /**\n     * NaN value\n     */\n    public get NaN(): number[] {\n        return this._nan;\n    }\n\n\n    /**\n     * normalize a value\n     */\n    public normalize(x: ArrayLike<number>): number[] {\n        return (Array.isArray(x) ? x : Array.from(x)).map(v => Boolean(v & 1) ? 1 : 0);\n    }\n\n    /**\n     * check value is NaN\n     */\n    public isNaN(x: ArrayLike<number>): boolean {\n        if (x !== this.NaN) {\n            if (x.length === 1 && x[0] === Number.NaN) return true;\n            return false;\n        }\n        return true;\n    }\n\n\n    /**\n     * compare element and return true if x equals to y\n     * eq(v,v)     -> true\n     * eq(NaN,NaN) -> false\n     */\n    public eq(x: ArrayLike<number>, y: ArrayLike<number>): boolean {\n        if (this.isNaN(x) || this.isNaN(y)) return false;\n        const len = Math.max(x.length, y.length);\n        for (let i = 0; i < len; i++) {\n            if ((x[i] !== void(0) ? (Boolean(x[i] & 1) ? 1 : 0) : 0) !==\n                (y[i] !== void(0) ? (Boolean(y[i] & 1) ? 1 : 0) : 0)) return false;\n        }\n        return true;\n    }\n\n    /**\n     * compare element and return false if x equals to y\n     */\n    public noteq(x: ArrayLike<number>, y: ArrayLike<number>): boolean {\n        return !this.eq(x, y);\n    }\n\n\n    /**\n     * negate; additive inverse (-x)\n     */\n    public neg(x: ArrayLike<number>): number[] {\n        return Array.from(x);\n    }\n\n\n    /**\n     * addition (x+y)\n     */\n    public add(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        return Gf2PrimeFieldHelper.polyAdd(x, y);\n    }\n\n    /**\n     * subtraction (x-y)\n     */\n    public sub(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        return Gf2PrimeFieldHelper.polySub(x, y);\n    }\n\n    /**\n     * multiplication (x*y)\n     */\n    public mul(x: ArrayLike<number>, y: ArrayLike<number>): number[] {\n        return Gf2PrimeFieldHelper.polyMul(x, y);\n    }\n\n    /**\n     * modulation (x%y)\n     */\n    public mod(x: WritableArrayLike<number>, y: ArrayLike<number>, extendDividendLength: number = 0): number[] {\n        return Gf2PrimeFieldHelper.polyDiv(x, y, extendDividendLength).r;\n    }\n\n    /**\n     * division (x/y)\n     *             ? = div(x,ZERO) ; depends on field definition\n     * mul(x,inv(y)) = div(x,y)    ;  when  y != ZERO\n     */\n    public divmod(x: WritableArrayLike<number>, y: ArrayLike<number>, extendDividendLength: number = 0):\n            {q: number[], r: number[], divisible: boolean} {\n        return Gf2PrimeFieldHelper.polyDiv(x, y, extendDividendLength);\n    }\n\n\n    /**\n     * exponentiation (a^x)\n     *   y = pow(a,x)\n     *   x = log(a,y)\n     * ONE = pow(a,0)\n     *   a = pow(a,1)\n     */\n    public pow(a: ArrayLike<number>, x: number): number[] {\n        throw new Error(\"not supported operation\");\n    }\n\n    /**\n     * pow(ALPHA,x) = exp(x)\n     *          ONE = exp(0)\n     *        ALPHA = exp(1)\n     */\n    public exp(x: number): number[] {\n        throw new Error(\"not supported operation\");\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { Field } from \"./Field\";\n\n\n/**\n * GF(p) ; Real Number Field\n */\nexport class RealField implements Field<number> {\n\n    /**\n     *\n     */\n    public get ZERO(): number {\n        return 0;\n    }\n\n    /**\n     *\n     */\n    public get ONE(): number {\n        return 1;\n    }\n\n    /**\n     *\n     */\n    public get ALPHA(): number {\n        return Math.E;\n    }\n\n    /**\n     *\n     */\n    public get NaN(): number {\n        return Number.NaN;\n    }\n\n    /**\n     *\n     */\n    public normalize(x: number): number {\n        return x;\n    }\n\n    /**\n     *\n     */\n    public isNaN(x: number): boolean {\n        return Number.isNaN(x);\n    }\n\n    /**\n     *\n     */\n    public eq(x: number, y: number): boolean {\n        return x === y;\n    }\n\n    /**\n     *\n     */\n    public noteq(x: number, y: number): boolean {\n        return x !== y;\n    }\n\n    /**\n     *\n     */\n    public neg(x: number): number {\n        return -x;\n    }\n\n    /**\n     *\n     */\n    public inv(x: number): number {\n        return 1 / x;\n    }\n\n    /**\n     *\n     */\n    public add(x: number, y: number): number {\n        return x + y;\n    }\n\n    /**\n     *\n     */\n    public sub(x: number, y: number): number {\n        return x - y;\n    }\n\n    /**\n     *\n     */\n    public mul(x: number, y: number): number {\n        return x * y;\n    }\n\n    /**\n     *\n     */\n    public div(x: number, y: number): number {\n        return x / y;\n    }\n\n    /**\n     *\n     */\n    public mod(x: number, y: number): number {\n        return x % y;\n    }\n\n    /**\n     *\n     */\n    public divmod(x: number, y: number): {q: number, r: number, divisible: boolean} {\n        return (y === 0) ? {\n            q: this.NaN,\n            r: this.NaN,\n            divisible: false\n        } : {\n            q: Math.sign(x) * (Math.abs(x) - Math.abs(x % y)) / y,\n            r: x % y,\n            divisible: (x % y) === 0\n        };\n    }\n\n    /**\n     *\n     */\n    public pow(a: number, x: number): number {\n        return a ** x;\n    }\n\n    /**\n     *\n     */\n    public log(a: number, x: number): number {\n        return Math.log(x) / Math.log(a);\n    }\n\n    /**\n     *\n     */\n    public exp(x: number): number {\n        return Math.exp(x);\n    }\n\n    /**\n     *\n     */\n    public ln(x: number): number {\n        return Math.log(x);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { Integer53 }           from 'red-agate-util/modules/types/Integer53';\nimport { ArrayPolynomialRing } from \"../math/ArrayPolynomialRing\";\nimport { Gf2Ext }              from \"../math/Gf2Ext\";\nimport { Gf2PrimeFieldHelper } from \"../math/Gf2PrimeHelper\";\nimport { Equation }            from \"../math/Equation\";\n\n\n/**\n * BCH code encoder / decoder.\n *\n * Generate error correction redundant code, Correct errors from redundant code.\n */\nexport class BCH {\n\n    /**\n     *\n     */\n    constructor(public field: Gf2Ext, gx: number, public aDegree: number = 1) {\n        this.gx = gx;\n    }\n\n    /**\n     *\n     */\n    // tslint:disable-next-line:variable-name\n    private _gx: number;\n\n    /**\n     *\n     */\n    // tslint:disable-next-line:variable-name\n    private _gxLength: number;\n\n    /**\n     *\n     */\n    public set gx(fx: number) {\n        this._gx = fx;\n        this._gxLength = Integer53.highestBit(fx) + 1;\n    }\n\n    /**\n     *\n     */\n    public get gx(): number {\n        return this._gx;\n    }\n\n    /**\n     *\n     */\n    public get gxLength(): number {\n        return this._gxLength;\n    }\n\n\n    /**\n     * list generator polynomials.\n     *\n     * generator polynominal that correct t places of error is:\n     * G(X) = (x-a^1)(x-a^2) ... (x-a^2t)F(x)\n     *      = P_i1(x)P_i2(x) ... P_iq(x)\n     *\n     * a      : generator element of GF(2^m)\n     * P_i(x) : one of GF(2) m_th or lower order minimal prime polynomials\n     *\n     * -> substitute a^j for each P_i(x) and get roots of P_i(x).\n     * -> P_i(x) = (x-a^j_1)(x-a^j_2)...(x-a^j_n) = 0\n     */\n    public static getGx(field: Gf2Ext, numCorrect: number, aDegree: number = 1): number {\n        const nth = Math.log2(field.MODULO);\n        const pxs = Gf2PrimeFieldHelper.listPx(nth, true);\n        const roots: number[] = [];\n\n        const c = Math.min(2 * numCorrect, field.MODULO - 1);\n        for (let i = 0; i < field.MODULO - 1; i++) {\n            for (let j = 0; j < pxs.length; j++) {\n                const px = pxs[j];\n                let v = px & 1;\n                for (let k = 1; k <= nth; k++) {\n                    v = field.add(v, (Integer53.bitRShift(px, k) & 1) ? field.exp(k * i) : 0);\n                }\n                if (v === 0) {\n                    roots[i] = px;\n                }\n            }\n        }\n\n        let gx = roots[aDegree];\n        for (let i = 1; i < c; i++) {\n            let d = false;\n            const r = roots[i + aDegree];\n            for (let j = i - 1; j >= 0; j--) {\n                if (r === roots[j + aDegree]) {\n                    d = true;\n                    break;\n                }\n            }\n            if (d) continue;\n            gx = Gf2PrimeFieldHelper.bitPolyMul(gx, r);\n        }\n        return gx;\n    }\n\n\n    /**\n     *\n     */\n    public encode(message: number): number {\n        return Gf2PrimeFieldHelper.bitPolyDiv(message, this._gx, this._gxLength - 1).r;\n    }\n\n\n    /**\n     *\n     */\n    public decode(received: number, maxErrors: number): number {\n        // calculate syndromes\n        const receivedLength = this.field.MODULO - 1;\n        let hasError = false;\n        const ss: number[] = [];\n        ss.length = maxErrors * 2;\n\n        for (let i = 0; i < ss.length; i++) {\n            let v = (received & 1) * this.field.ONE;\n            for (let j = 1; j < receivedLength; j++) {\n                const a = this.field.exp((this.aDegree + i) * j);\n                v = this.field.add((Integer53.bitRShift(received, j) & 1) * a, v);\n            }\n            ss[i] = v;\n            hasError = hasError || this.field.noteq(v, this.field.ZERO);\n        }\n        if (! hasError)\n            return Integer53.bitRShift(received, this._gxLength - 1);\n\n        const equ = new Equation<number[], number>(new ArrayPolynomialRing(this.field));\n\n        // calculate number of errors\n        // det|S_(k-1)| = 0;\n        //\n        //                 [k-1]     [k-2]            [0]\n        //\n        //             |ss_(k-1)  ss_(k-2)   ... ss_0    |\n        // |S_(k-1)| = | ...                             |\n        //             |ss_(2k-2) ss_(2k-3)  ... ss_(k-1)|\n        //\n        // number of errors = k-1\n        let errors = Math.floor(ss.length / 2);\n        const mat: number[][] = [];\n        for (; errors > 0; errors--) {\n            mat.length = 0;\n            for (let i = 0; i < errors; i++) {\n                mat[i] = ss.slice(i, i + errors);\n            }\n            if (this.field.noteq(equ.det(mat, 0, 0, mat.length), this.field.ZERO)) break;\n        }\n        if (errors === 0) return Integer53.bitRShift(received, this._gxLength - 1);\n\n        // calculate error locations\n        //\n        //       [k]     [k-1]            [1]              negate([0])\n        //\n        // |ss_(k-1)  ss_(k-2)   ... ss_0    | |l_0    |   |ss_k     |\n        // | ...                             | |       | = |         |\n        // |ss_(2k-2) ss_(2k-3)  ... ss_(k-1)| |l_(k-1)|   |ss_(2k-1)|\n        //\n        // error locations polynominal is:\n        // l(x) = 1 + l_0*x^1 + l_1*x^2 + ... + l_(k-1)*x^k\n        //\n        // error locations are where   l(a^(-(m_i))) = 0 ; (0 <= i <= k-1).\n        for (let i = 0; i < errors; i++) {\n            mat[i] = [this.field.neg(ss[errors + i])].concat(mat[i]);\n        }\n\n        const lx: number[] = [this.field.ONE].concat(equ.solve(mat, 0, 0, errors).reverse());\n        const locations: number[] = [];\n        for (let i = 0; i < this.field.MODULO - 1; i++) {\n            let v: number = lx[0];\n            for (let j = 1; j < lx.length; j++) {\n                const a = this.field.exp((this.aDegree + i) * j);\n                v = this.field.add(this.field.mul(lx[j], a), v);\n            }\n            if (this.field.eq(this.field.ZERO, v)) {\n                locations.push(this.field.MODULO - 1 - i - this.aDegree);\n            }\n        }\n\n        // correct errors\n        // solve equation to let syndromes zero.\n        // reverse bit of error locations.\n        //\n        // corrected(x) = received(x) + e(x)\n        let ex = 0;\n        for (let i = 0; i < errors; i++) {\n            ex += 2 ** locations[i];\n        }\n        received = Integer53.bitXor(received, ex);\n\n        return Integer53.bitRShift(received, this._gxLength - 1);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/**\n *\n */\nexport class CRC32 {\n    private table: number[] = [];\n\n    /**\n     *\n     */\n    constructor(public reversedGx: number = 0x0edb88320) {\n        for (let i = 0; i < 256; i++) {\n            let c = i;\n            for (let j = 0; j < 8; j++) {\n                c = (c & 1) ? (reversedGx ^ (c >>> 1)) : (c >>> 1);\n            }\n            this.table[i] = c;\n        }\n    }\n\n\n    /**\n     *\n     */\n    public calc(message: ArrayLike<number>): number {\n        let c = 0x0ffffffff;\n        for (let i = 0; i < message.length; i++) {\n            c = this.table[(c ^ message[i]) & 0x00ff] ^ (c >>> 8);\n        }\n        return c ^ 0x0ffffffff;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { WritableArrayLike }   from \"red-agate-util/modules/types/WritableArrayLike\";\nimport { FiniteField }         from \"../math/Field\";\nimport { ArrayPolynomialRing } from \"../math/ArrayPolynomialRing\";\nimport { Gf2Ext }              from \"../math/Gf2Ext\";\nimport { Equation }            from \"../math/Equation\";\n\n\n\n/**\n * Reed-Solomon code encoder / decoder.\n *\n * Generate error correction redundant code, Correct errors from redundant code.\n */\nexport class ReedSolomon<U> {\n\n    /**\n     *\n     */\n    private poly: ArrayPolynomialRing<U>;\n\n\n    /**\n     *\n     */\n    constructor(public field: FiniteField<U>, public gx: U[], public aDegree: number = 0) {\n        this.poly = new ArrayPolynomialRing(field);\n    }\n\n\n    /**\n     * list generator polynomials.\n     *\n     * generator polynominal that correct (n-1)/2 places of error is:\n     * G(X) = (x-a^0)(x-a^1) ... (x-a^n)\n     */\n    public static listGx<F>(field: FiniteField<F>, gxList: F[][] | undefined, nth: number, aDegree: number = 0): F[][] {\n        const poly = new ArrayPolynomialRing(field);\n        const gxs: F[][] = gxList || [];\n        let   u: F[] = [field.exp(aDegree), field.ONE];\n        const v: F[] = [field.exp(aDegree + 1), field.ONE];\n\n        if (gxs.length === 0) {\n            gxs.push(u);\n        } else {\n            u = gxs[gxs.length - 1];\n            v[0] = field.exp(aDegree + gxs.length);\n        }\n\n        for (let i = gxs.length + 1; i <= nth; i++) {\n            u = poly.mul(u, v);\n            gxs.push(u);\n            v[0] = field.exp(aDegree + i);\n        }\n        return gxs;\n    }\n\n\n    /**\n     * list generator polynomials.\n     *\n     * generator polynominal that correct (n-1)/2 places of error is:\n     * G(X) = (x-a^0)(x-a^1) ... (x-a^n)\n     */\n    public static getGx<F>(field: FiniteField<F>, nth: number, aDegree: number = 0): F[] {\n        const poly = new ArrayPolynomialRing(field);\n        let   u: F[] = [field.exp(aDegree), field.ONE];\n        const v: F[] = [field.exp(aDegree + 1), field.ONE];\n\n        for (let i = 2; i <= nth; i++) {\n            u = poly.mul(u, v);\n            v[0] = field.exp(aDegree + i);\n        }\n        return u;\n    }\n\n\n    /**\n     *\n     */\n    public encode(message: ArrayLike<U>): U[] {\n        return this.poly.divmod(message, this.gx, this.gx.length - 1).r;\n    }\n\n\n    /**\n     *\n     */\n    public decode(received: WritableArrayLike<U>, maxErrors: number = 0): U[] {\n        // calculate syndromes\n        let hasError = false;\n        const ss: U[] = [];\n        ss.length = this.gx.length - 1;\n        if (ss.length <= maxErrors * 2) ss.length = maxErrors * 2;\n\n        for (let i = 0; i < ss.length; i++) {\n            let v = received[0];\n            for (let j = 1; j < received.length; j++) {\n                const a = this.field.exp((this.aDegree + i) * j);\n                v = this.field.add(this.field.mul(received[j], a), v);\n            }\n            ss[i] = v;\n            hasError = hasError || this.field.noteq(v, this.field.ZERO);\n        }\n        if (! hasError)\n            return Array.prototype.slice.call(received, this.gx.length - 1);\n\n        const field = this.poly.field as FiniteField<U>;\n        const equ = new Equation<U[], U>(this.poly);\n\n        // calculate number of errors\n        // det|S_(k-1)| = 0;\n        //\n        //                 [k-1]     [k-2]            [0]\n        //\n        //             |ss_(k-1)  ss_(k-2)   ... ss_0    |\n        // |S_(k-1)| = | ...                             |\n        //             |ss_(2k-2) ss_(2k-3)  ... ss_(k-1)|\n        //\n        // number of errors = k-1\n        let errors = Math.floor(ss.length / 2);\n        let mat: U[][] = [];\n        for (; errors > 0; errors--) {\n            mat.length = 0;\n            for (let i = 0; i < errors; i++) {\n                mat[i] = ss.slice(i, i + errors);\n            }\n            if (field.noteq(equ.det(mat, 0, 0, mat.length), field.ZERO)) break;\n        }\n        if (errors === 0) return Array.prototype.slice.call(received, this.gx.length - 1);\n\n        // calculate error locations\n        //\n        //       [k]     [k-1]            [1]              negate([0])\n        //\n        // |ss_(k-1)  ss_(k-2)   ... ss_0    | |l_0    |   |ss_k     |\n        // | ...                             | |       | = |         |\n        // |ss_(2k-2) ss_(2k-3)  ... ss_(k-1)| |l_(k-1)|   |ss_(2k-1)|\n        //\n        // error locations polynominal is:\n        // l(x) = 1 + l_0*x^1 + l_1*x^2 + ... + l_(k-1)*x^k\n        //\n        // error locations are where   l(a^(-(m_i))) = 0 ; (0 <= i <= k-1).\n        for (let i = 0; i < errors; i++) {\n            mat[i] = [field.neg(ss[errors + i])].concat(mat[i]);\n        }\n\n        const lx: U[] = [field.ONE].concat(equ.solve(mat, 0, 0, errors).reverse());\n        const locations: number[] = [];\n        for (let i = 0; i < field.MODULO - 1; i++) {\n            let v: U = lx[0];\n            for (let j = 1; j < lx.length; j++) {\n                const a = field.exp((this.aDegree + i) * j);\n                v = field.add(field.mul(lx[j], a), v);\n            }\n            if (field.eq(field.ZERO, v)) {\n                locations.push(field.MODULO - 1 - i - this.aDegree);\n            }\n        }\n\n        // correct errors\n        // solve equation to let syndromes zero.\n        //\n        //                [k]               [k-1]                [1]              negate([0])\n        //\n        // |a^(m_(k-1)*   0 )  a^(m_k-2) *    0 )  ... a^(m_0*   0 )| |e_(k-1)|   |ss_0    |\n        // | ...                                                    | |       | = |        |\n        // |a^(m_(k-1)*(k-1))  a^(m_k-2) * (k-1))  ... a^(m_0*(k-1))| |e_0    |   |ss_(k-1)|\n        //\n        // errors polynominal is:\n        // e(x) = e_0*x^m_0 + e_1*x^m_1 + e_(k-1)*x^m(k-1)\n        //\n        // corrected(x) = received(x) + e(x)\n        mat = [];\n        for (let i = 0; i < errors; i++) {\n            mat[i] = [field.neg(ss[i])];\n            for (let j = 0; j < locations.length; j++) {\n                mat[i].push(field.exp((this.aDegree + i) * locations[j]));\n            }\n        }\n        const ex = equ.solve(mat, 0, 0, errors);\n        for (let i = 0; i < errors; i++) {\n            received[locations[i]] = field.add(received[locations[i]], ex[i]);\n        }\n\n        return Array.prototype.slice.call(received, this.gx.length - 1);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport class WebColor {\n    private static colorNames = new Map<string, {r: number, g: number, b: number}>([\n        [\"red\"                 , {r: 255, g:   0, b:   0}],\n        [\"darkred\"             , {r: 139, g:   0, b:   0}],\n        [\"maroon\"              , {r: 128, g:   0, b:   0}],\n        [\"brown\"               , {r: 165, g:  42, b:  42}],\n        [\"firebrick\"           , {r: 178, g:  34, b:  34}],\n        [\"sienna\"              , {r: 160, g:  82, b:  45}],\n        [\"saddlebrown\"         , {r: 139, g:  69, b:  19}],\n        [\"peru\"                , {r: 205, g: 133, b:  63}],\n        [\"indianred\"           , {r: 205, g:  92, b:  92}],\n        [\"rosybrown\"           , {r: 188, g: 143, b: 143}],\n        [\"lightcoral\"          , {r: 240, g: 128, b: 128}],\n        [\"salmon\"              , {r: 250, g: 128, b: 114}],\n        [\"darksalmon\"          , {r: 233, g: 150, b: 122}],\n        [\"coral\"               , {r: 255, g: 127, b:  80}],\n        [\"tomato\"              , {r: 255, g:  99, b:  71}],\n        [\"sandybrown\"          , {r: 244, g: 164, b:  96}],\n        [\"lightsalmon\"         , {r: 255, g: 160, b: 122}],\n        [\"chocolate\"           , {r: 210, g: 105, b:  30}],\n        [\"orangered\"           , {r: 255, g:  69, b:   0}],\n        [\"orange\"              , {r: 255, g: 165, b:   0}],\n        [\"darkorange\"          , {r: 255, g: 140, b:   0}],\n        [\"tan\"                 , {r: 210, g: 180, b: 140}],\n        [\"peachpuff\"           , {r: 255, g: 218, b: 185}],\n        [\"bisque\"              , {r: 255, g: 228, b: 196}],\n        [\"moccasin\"            , {r: 255, g: 228, b: 181}],\n        [\"navajowhite\"         , {r: 255, g: 222, b: 173}],\n        [\"wheat\"               , {r: 245, g: 222, b: 179}],\n        [\"burlywood\"           , {r: 222, g: 184, b: 135}],\n        [\"darkgoldenrod\"       , {r: 184, g: 134, b:  11}],\n        [\"goldenrod\"           , {r: 218, g: 165, b:  32}],\n        [\"gold\"                , {r: 255, g: 215, b:   0}],\n        [\"yellow\"              , {r: 255, g: 255, b:   0}],\n        [\"lightgoldenrodyellow\", {r: 250, g: 250, b: 210}],\n        [\"palegoldenrod\"       , {r: 238, g: 232, b: 170}],\n        [\"khaki\"               , {r: 240, g: 230, b: 140}],\n        [\"darkkhaki\"           , {r: 189, g: 183, b: 107}],\n        [\"blanchedalmond\"      , {r: 255, g: 235, b: 205}],\n        [\"lightyellow\"         , {r: 255, g: 255, b: 224}],\n        [\"cornsilk\"            , {r: 255, g: 248, b: 220}],\n        [\"antiquewhite\"        , {r: 250, g: 235, b: 215}],\n        [\"papayawhip\"          , {r: 255, g: 239, b: 213}],\n        [\"papayawhite\"         , {r: 255, g: 239, b: 213}],\n        [\"lemonchiffon\"        , {r: 255, g: 250, b: 205}],\n        [\"beige\"               , {r: 245, g: 245, b: 220}],\n        [\"oldlace\"             , {r: 253, g: 245, b: 230}],\n        [\"lightcyan\"           , {r: 224, g: 255, b: 255}],\n        [\"aliceblue\"           , {r: 240, g: 248, b: 255}],\n        [\"whitesmoke\"          , {r: 245, g: 245, b: 245}],\n        [\"lavenderblush\"       , {r: 255, g: 240, b: 245}],\n        [\"floralwhite\"         , {r: 255, g: 250, b: 240}],\n        [\"mintcream\"           , {r: 245, g: 255, b: 250}],\n        [\"ghostwhite\"          , {r: 248, g: 248, b: 255}],\n        [\"honeydew\"            , {r: 240, g: 255, b: 240}],\n        [\"seashell\"            , {r: 255, g: 245, b: 238}],\n        [\"ivory\"               , {r: 255, g: 255, b: 240}],\n        [\"azure\"               , {r: 240, g: 255, b: 255}],\n        [\"snow\"                , {r: 255, g: 250, b: 250}],\n        [\"white\"               , {r: 255, g: 255, b: 255}],\n        [\"gainsboro\"           , {r: 220, g: 220, b: 220}],\n        [\"lightgrey\"           , {r: 211, g: 211, b: 211}],\n        [\"silver\"              , {r: 192, g: 192, b: 192}],\n        [\"darkgray\"            , {r: 169, g: 169, b: 169}],\n        [\"lightslategray\"      , {r: 119, g: 136, b: 153}],\n        [\"slategray\"           , {r: 112, g: 128, b: 144}],\n        [\"gray\"                , {r: 128, g: 128, b: 128}],\n        [\"dimgray\"             , {r: 105, g: 105, b: 105}],\n        [\"darkslategray\"       , {r:  47, g:  79, b:  79}],\n        [\"black\"               , {r:   0, g:   0, b:   0}],\n        [\"lawngreen\"           , {r: 124, g: 252, b:   0}],\n        [\"greenyellow\"         , {r: 173, g: 255, b:  47}],\n        [\"chartreuse\"          , {r: 127, g: 255, b:   0}],\n        [\"lime\"                , {r:   0, g: 255, b:   0}],\n        [\"limegreen\"           , {r:  50, g: 205, b:  50}],\n        [\"yellowgreen\"         , {r: 154, g: 205, b:  50}],\n        [\"olive\"               , {r: 128, g: 128, b:   0}],\n        [\"olivedrab\"           , {r: 107, g: 142, b:  35}],\n        [\"darkolivegreen\"      , {r:  85, g: 107, b:  47}],\n        [\"forestgreen\"         , {r:  34, g: 139, b:  34}],\n        [\"darkgreen\"           , {r:   0, g: 100, b:   0}],\n        [\"green\"               , {r:   0, g: 128, b:   0}],\n        [\"seagreen\"            , {r:  46, g: 139, b:  87}],\n        [\"mediumseagreen\"      , {r:  60, g: 179, b: 113}],\n        [\"darkseagreen\"        , {r: 143, g: 188, b: 143}],\n        [\"lightgreen\"          , {r: 144, g: 238, b: 144}],\n        [\"palegreen\"           , {r: 152, g: 251, b: 152}],\n        [\"springgreen\"         , {r:   0, g: 255, b: 127}],\n        [\"mediumspringgreen\"   , {r:   0, g: 250, b: 154}],\n        [\"teal\"                , {r:   0, g: 128, b: 128}],\n        [\"darkcyan\"            , {r:   0, g: 139, b: 139}],\n        [\"lightseagreen\"       , {r:  51, g: 153, b: 153}],\n        [\"mediumaquamarine\"    , {r: 102, g: 205, b: 170}],\n        [\"cadetblue\"           , {r:  95, g: 158, b: 160}],\n        [\"steelblue\"           , {r:  70, g: 130, b: 180}],\n        [\"aquamarine\"          , {r: 127, g: 255, b: 212}],\n        [\"powderblue\"          , {r: 176, g: 224, b: 230}],\n        [\"paleturquoise\"       , {r: 175, g: 238, b: 238}],\n        [\"lightblue\"           , {r: 173, g: 216, b: 230}],\n        [\"lightsteelblue\"      , {r: 176, g: 196, b: 222}],\n        [\"skyblue\"             , {r: 135, g: 206, b: 235}],\n        [\"lightskyblue\"        , {r: 135, g: 206, b: 250}],\n        [\"mediumturquoise\"     , {r:  72, g: 209, b: 204}],\n        [\"turquoise\"           , {r:  64, g: 224, b: 208}],\n        [\"darkturquoise\"       , {r:   0, g: 206, b: 209}],\n        [\"aqua\"                , {r:   0, g: 255, b: 255}],\n        [\"cyan\"                , {r:   0, g: 255, b: 255}],\n        [\"deepskyblue\"         , {r:   0, g: 191, b: 255}],\n        [\"dodgerblue\"          , {r:  30, g: 144, b: 255}],\n        [\"cornflowerblue\"      , {r: 100, g: 149, b: 237}],\n        [\"royalblue\"           , {r:  65, g: 105, b: 225}],\n        [\"blue\"                , {r:   0, g:   0, b: 255}],\n        [\"mediumblue\"          , {r:   0, g:   0, b: 205}],\n        [\"navy\"                , {r:   0, g:   0, b: 128}],\n        [\"darkblue\"            , {r:   0, g:   0, b: 139}],\n        [\"midnightblue\"        , {r:  25, g:  25, b: 112}],\n        [\"darkslateblue\"       , {r:  72, g:  61, b: 139}],\n        [\"mediumslateblue\"     , {r: 123, g: 104, b: 238}],\n        [\"slateblue\"           , {r: 106, g:  90, b: 205}],\n        [\"darkorchid\"          , {r: 153, g:  50, b: 204}],\n        [\"darkviolet\"          , {r: 148, g:   0, b: 211}],\n        [\"blueviolet\"          , {r: 138, g:  43, b: 226}],\n        [\"mediumorchid\"        , {r: 186, g:  85, b: 211}],\n        [\"plum\"                , {r: 221, g: 160, b: 221}],\n        [\"lavender\"            , {r: 230, g: 230, b: 250}],\n        [\"thistle\"             , {r: 216, g: 191, b: 216}],\n        [\"orchid\"              , {r: 218, g: 112, b: 214}],\n        [\"magenta\"             , {r: 255, g:   0, b: 255}],\n        [\"fuchsia\"             , {r: 255, g:   0, b: 255}],\n        [\"violet\"              , {r: 238, g: 130, b: 238}],\n        [\"indigo\"              , {r:  75, g:   0, b: 130}],\n        [\"darkmagenta\"         , {r: 139, g:   0, b: 139}],\n        [\"purple\"              , {r: 128, g:   0, b: 128}],\n        [\"mediumpurple\"        , {r: 147, g: 112, b: 219}],\n        [\"mediumvioletred\"     , {r: 199, g:  21, b: 133}],\n        [\"deeppink\"            , {r: 255, g:  20, b: 147}],\n        [\"hotpink\"             , {r: 255, g: 105, b: 180}],\n        [\"crimson\"             , {r: 220, g:  20, b:  60}],\n        [\"palevioletred\"       , {r: 219, g: 112, b: 147}],\n        [\"lightpink\"           , {r: 255, g: 182, b: 193}],\n        [\"pink\"                , {r: 255, g: 192, b: 203}],\n        [\"mistyrose\"           , {r: 255, g: 228, b: 225}]\n    ]);\n\n    /**\n     * red\n     */\n    // tslint:disable-next-line:variable-name\n    private _r: number = 0;\n\n    /**\n     * green\n     */\n    // tslint:disable-next-line:variable-name\n    private _g: number = 0;\n\n    /**\n     * blue\n     */\n    // tslint:disable-next-line:variable-name\n    private _b: number = 0;\n\n    /**\n     * alpha channel\n     */\n    // tslint:disable-next-line:variable-name\n    private _a: number = 1;\n\n    private static cutoff255(x: number) {\n        if (x < 0) return 0;\n        if (x > 255) return 255;\n        return x;\n    }\n\n    private static cutoff1(x: number) {\n        if (x < 0) return 0;\n        if (x > 1) return 1;\n        return x;\n    }\n\n    // tslint:disable-next-line:variable-name\n    constructor(name_or_code?: string | {r: number, g: number, b: number, a?: number} | {h: number, s: number, l: number, a?: number}) {\n        if (! name_or_code) return;\n\n        let rgba: {r: number, g: number, b: number, a: number} = {r: 0, g: 0, b: 0, a: 1};\n\n        if (typeof name_or_code === \"object\") {\n            if (name_or_code.hasOwnProperty(\"r\")) {\n                const c2 = name_or_code as {r: number, g: number, b: number, a?: number};\n                rgba = {\n                    r: WebColor.cutoff255(c2.r),\n                    g: WebColor.cutoff255(c2.g),\n                    b: WebColor.cutoff255(c2.b),\n                    a: WebColor.cutoff1(c2.a || 1)\n                };\n            } else if (name_or_code.hasOwnProperty(\"h\")) {\n                const hsla = name_or_code as {h: number, s: number, l: number, a?: number};\n                rgba = WebColor.hslToRgb(hsla.h, hsla.s, hsla.l, hsla.a || 1);\n            }\n        } else if (typeof name_or_code === \"string\") {\n            let c: {r: number, g: number, b: number, a?: number} | {h: number, s: number, l: number, a?: number} | boolean;\n\n            // tslint:disable-next-line:no-conditional-assignment\n            if (c = (WebColor.isCode(name_or_code) || WebColor.isName(name_or_code) || WebColor.isRgb(name_or_code))) {\n                const c2 = c as {r: number, g: number, b: number, a: number};\n                rgba = c2;\n            }\n            // tslint:disable-next-line:no-conditional-assignment\n            else if (c = WebColor.isHsl(name_or_code)) {\n                const hsla = c as {h: number, s: number, l: number, a?: number};\n                rgba = WebColor.hslToRgb(hsla.h, hsla.s, hsla.l, hsla.a);\n            }\n        }\n\n        this._r = rgba.r;\n        this._g = rgba.g;\n        this._b = rgba.b;\n        this._a = rgba.a;\n    }\n    public static isRgb(str: string): {r: number, g: number, b: number, a: number} | boolean {\n        let r: number, g: number, b: number, a = 1;\n        let match: RegExpMatchArray | null;\n\n        // tslint:disable-next-line:no-conditional-assignment\n        if (match = str.match(/^\\s*rgb(a?)\\(\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*(?:,\\s*((?:[01]?\\.)?\\d+)\\s*)?\\)\\s*$/)) {\n            r = WebColor.cutoff255(match[2].endsWith(\"%\") ? Math.round(Number.parseFloat(match[2]) / 100 * 255) : Number.parseInt(match[2], 10));\n            g = WebColor.cutoff255(match[3].endsWith(\"%\") ? Math.round(Number.parseFloat(match[3]) / 100 * 255) : Number.parseInt(match[3], 10));\n            b = WebColor.cutoff255(match[4].endsWith(\"%\") ? Math.round(Number.parseFloat(match[4]) / 100 * 255) : Number.parseInt(match[4], 10));\n            if (match[1] === \"a\") {\n                a = WebColor.cutoff1(Number.parseFloat(match[5]));\n            }\n            return {r, g, b, a};\n        }\n        return false;\n    }\n    public static isHsl(str: string): {h: number, s: number, l: number, a: number} | boolean {\n        let h: number, s: number, l: number, a = 1;\n        let match: RegExpMatchArray | null;\n\n        // tslint:disable-next-line:no-conditional-assignment\n        if (match = str.match(/^\\s*hsl(a?)\\(\\s*(-?(?:\\d+\\.)?\\d+)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*((?:[01]?\\.)?\\d+)\\s*\\)\\s*$/)) {\n            h = Number.parseFloat(match[2]) % 360;\n            if (h < 0) h = 360 - h;\n            s = WebColor.cutoff1(match[3].endsWith(\"%\") ? Math.round(Number.parseFloat(match[3]) / 100) : Number.parseFloat(match[3]));\n            l = WebColor.cutoff1(match[4].endsWith(\"%\") ? Math.round(Number.parseFloat(match[4]) / 100) : Number.parseFloat(match[4]));\n            if (match[1] === \"a\") {\n                a = WebColor.cutoff1(Number.parseFloat(match[5]));\n            }\n            return {h, s, l, a};\n        }\n        return false;\n    }\n    public static isCode(str: string): {r: number, g: number, b: number, a: number} | boolean {\n        let   r: number, g: number, b: number;\n        const a = 1;\n        let match: RegExpMatchArray | null;\n\n        // tslint:disable-next-line:no-conditional-assignment\n        if (match = str.match(/^\\s*#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])\\s*$/)) {\n            r = Number.parseInt(`${match[1]}${match[1]}`, 16);\n            g = Number.parseInt(`${match[2]}${match[2]}`, 16);\n            b = Number.parseInt(`${match[3]}${match[3]}`, 16);\n            return {r, g, b, a};\n        }\n        // tslint:disable-next-line:no-conditional-assignment\n        else if (match = str.match(/^\\s*#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})\\s*$/)) {\n            r = Number.parseInt(match[1], 16);\n            g = Number.parseInt(match[2], 16);\n            b = Number.parseInt(match[3], 16);\n            return {r, g, b, a};\n        }\n        return false;\n    }\n    public static isName(str: string): {r: number, g: number, b: number, a: number} | boolean {\n        if (WebColor.colorNames.has(str)) {\n            const c = WebColor.colorNames.get(str) as {r: number, g: number, b: number, a: number};\n            return {r: c.r, g: c.g, b: c.b, a: 1};\n        }\n        return false;\n    }\n    public static fromRgba(r: number, g: number, b: number, a: number = 1): WebColor {\n        const c = new WebColor();\n        c._r = WebColor.cutoff255(r);\n        c._g = WebColor.cutoff255(g);\n        c._b = WebColor.cutoff255(b);\n        c._a = WebColor.cutoff1(a);\n        return c;\n    }\n    private static hueToRgb(m1: number, m2: number, h: number): number {\n        if (h < 0) h += 1;\n        if (h > 1) h -= 1;\n        if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n        if (h * 2 < 1) return m2;\n        if (h * 3 < 2) return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n        return m1;\n    }\n    public static hslToRgb(h: number, s: number, l: number, a: number = 1): {r: number, g: number, b: number, a: number} {\n        // tslint:disable-next-line:ban-comma-operator\n        h = h % 360, s = WebColor.cutoff1(s), l = WebColor.cutoff1(l);\n        if (h < 0) h = 360 - h;\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n              m1 = l * 2 - m2;\n        return {\n            r: WebColor.hueToRgb(m1, m2, h + 1 / 3),\n            g: WebColor.hueToRgb(m1, m2, h),\n            b: WebColor.hueToRgb(m1, m2, h - 1 / 3),\n            a: WebColor.cutoff1(a)\n        };\n    }\n    public static fromHsla(h: number, s: number, l: number, a: number = 1): WebColor {\n        // tslint:disable-next-line:ban-comma-operator\n        h = h % 360, s = WebColor.cutoff1(s), l = WebColor.cutoff1(l);\n        if (h < 0) h = 360 - h;\n        const  c = new WebColor();\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n              m1 = l * 2 - m2;\n        c._r = WebColor.hueToRgb(m1, m2, h + 1 / 3);\n        c._g = WebColor.hueToRgb(m1, m2, h);\n        c._b = WebColor.hueToRgb(m1, m2, h - 1 / 3);\n        c._a = WebColor.cutoff1(a);\n        return c;\n    }\n    public static fromGray(gray: number, a: number = 1): WebColor {\n        const c = new WebColor();\n        c._r = WebColor.cutoff255(gray);\n        c._g = WebColor.cutoff255(gray);\n        c._b = WebColor.cutoff255(gray);\n        c._a = WebColor.cutoff1(a);\n        return c;\n    }\n    public get r(): number {\n        return this._r;\n    }\n    public get g(): number {\n        return this._g;\n    }\n    public get b(): number {\n        return this._b;\n    }\n    public get a(): number {\n        return this._a;\n    }\n    public toString(): string {\n        if (this._a !== 1) return this.toRgbaString();\n        else               return this.toCode();\n    }\n    public toCode(): string {\n        return \"#\" +\n            `0${this._r.toString(16)}`.slice(-2) +\n            `0${this._g.toString(16)}`.slice(-2) +\n            `0${this._b.toString(16)}`.slice(-2);\n    }\n    public toRgbString(): string {\n        return `rgb(${this._r},${this._g},${this._b})`;\n    }\n    public toRgbaString(): string {\n        return `rgb(${this._r},${this._g},${this._b},${this._a})`;\n    }\n    public toHsla(): {h: number, s: number, l: number, a: number} {\n        const r = this._r / 255, g = this._g / 255, b = this._b / 255;\n        const max = Math.max(g, b),\n              min = Math.min(g, b);\n        let   h = 0, s = 0;\n        const l = (max + min) / 2, c = max - min;\n        if (max !== min) {\n            if      (max === r) h = (g - b) / c;\n            else if (max === g) h = (b - r) / c + 2;\n            else                h = (r - g) / c + 4;\n            h = h * 60 + (h < 0 ? 360 : 0);\n            s = c / (l < 0.5 ? max + min : 2 - max - min);\n        }\n        return {h, s, l, a: this._a};\n    }\n    public toHslString(): string {\n        const c = this.toHsla();\n        return `hsl(${c.h},${c.s}%,${c.l}%)`;\n    }\n    public toHslaString(): string {\n        const c = this.toHsla();\n        return `hsl(${c.h},${c.s}%,${c.l}%,${this._a})`;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { NumberPrecision } from \"red-agate-util/modules/convert/NumberPrecision\";\n\n\nconst dp = NumberPrecision.decimalPlaces(6);\n\n\nexport class Point2D {\n    constructor(public x: number, public y: number) {\n    }\n    public toString(): string {\n        return `${this.x},${this.y}`;\n    }\n}\n\n\nexport class Vector2D {\n    constructor(public x: number, public y: number) {\n    }\n    public static fromPoints(p1: Point2D, p2: Point2D): Vector2D {\n        return new Vector2D(p2.x - p1.x, p2.y - p1.y);\n    }\n    public isZero(): boolean {\n        return this.x === 0 && this.y === 0;\n    }\n    public getLength(): number {\n        return Math.sqrt(this.x ** 2 + this.y ** 2);\n    }\n    /** returns 0..2*PI */\n    public getAngle(): number {\n        let angle = Math.acos(this.x / Math.sqrt(this.x ** 2 + this.y ** 2)); // returns 0..PI\n        if (0 > this.y) {\n            // 180deg < angle < 360deg\n            angle = Math.PI * 2 - angle;\n        }\n        return angle;\n    }\n    /** returns 0..PI */\n    public static getAngle(v1: Vector2D, v2: Vector2D): number {\n        const vlen1 = Math.sqrt(v1.x ** 2 + v1.y ** 2);\n        const vlen2 = Math.sqrt(v2.x ** 2 + v2.y ** 2);\n        return Math.acos((v1.x * v2.x + v1.y * v2.y) / (vlen1 * vlen2));\n    }\n    public toString(): string {\n        return `${this.x},${this.y}`;\n    }\n}\n\n\nexport class Rect2D {\n    constructor(public x: number, public y: number, public w: number, public h: number) {\n    }\n}\n\n\nexport class TransferMatrix2D {\n    // [m11 m21 dx]\n    // [m12 m22 dy]\n    // [  0   0  1]\n    public m11: number = 1;\n    public m21: number = 0;\n    public dx: number = 0;\n    public m12: number = 0;\n    public m22: number = 1;\n    public dy: number = 0;\n\n    constructor(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number);\n    constructor(src?: TransferMatrix2D);\n    // tslint:disable-next-line:variable-name\n    constructor(m11_or_src: any, m12?: number, m21?: number, m22?: number, dx?: number, dy?: number) {\n        if (! m11_or_src) return;\n        if (typeof m11_or_src === \"object\") {\n            this.m11 = m11_or_src.m11 || this.m11;\n            this.m12 = m11_or_src.m12 || this.m12;\n            this.m21 = m11_or_src.m21 || this.m21;\n            this.m22 = m11_or_src.m22 || this.m22;\n            this.dx  = m11_or_src.dx  || this.dx;\n            this.dy  = m11_or_src.dy  || this.dy;\n        } else {\n            this.m11 = m11_or_src || this.m11;\n            this.m12 = m12 || this.m12;\n            this.m21 = m21 || this.m21;\n            this.m22 = m22 || this.m22;\n            this.dx  = dx  || this.dx;\n            this.dy  = dy  || this.dy;\n        }\n    }\n    public toString(): string {\n        return `${this.m11} ${this.m12} ${this.m21} ${this.m22} ${this.dx} ${this.dy}`;\n    }\n    public isIdentity(): boolean {\n        return this.m11 === 1 && this.m21 === 0 && this.dx === 0 &&\n            this.m12 === 0 && this.m22 === 1 && this.dy === 0;\n    }\n\n    public scale(x: number, y: number): TransferMatrix2D {\n        return this.concat(new TransferMatrix2D(x, 0, 0, y, 0, 0));\n    }\n    public translate(x: number, y: number): TransferMatrix2D {\n        return this.concat(new TransferMatrix2D(1, 0, 0, 1, x, y));\n    }\n    public rotate(angle: number): TransferMatrix2D {\n        return this.concat(new TransferMatrix2D(\n            Math.cos(angle), Math.sin(angle), -Math.sin(angle), Math.cos(angle), 0, 0));\n    }\n    public skewX(angle: number): TransferMatrix2D {\n        return this.concat(new TransferMatrix2D(1, 0, Math.tan(angle), 1, 0, 0));\n    }\n    public skewY(angle: number): TransferMatrix2D {\n        return this.concat(new TransferMatrix2D(1, Math.tan(angle), 0, 1, 0, 0));\n    }\n    public concat(mat: TransferMatrix2D): TransferMatrix2D {\n        // [m11' m21' dx']   [m11*n11 + m21*n12, m11*n21 + m21*n22, m11*tx + m21*ty + dx]   [m11 m21 dx]   [n11 n21 tx]\n        // [m12' m22' dy'] = [m12*n11 + m22*n12, m12*n21 + m22*n22, m12*tx + m22*ty + dy] = [m12 m22 dy] * [n12 n22 ty]\n        // [  0    0   1 ]   [                0,                 0,                    1]   [  0   0  1]   [  0   0  1]\n        return new TransferMatrix2D(\n            this.m11 * mat.m11 + this.m21 * mat.m12,             // m11\n            this.m12 * mat.m11 + this.m22 * mat.m12,             // m12\n            this.m11 * mat.m21 + this.m21 * mat.m22,             // m21\n            this.m12 * mat.m21 + this.m22 * mat.m22,             // m22\n            this.m11 * mat.dx  + this.m21 * mat.dy + this.dx,    // dx\n            this.m12 * mat.dx  + this.m22 * mat.dy + this.dy     // dy\n        );\n    }\n\n    public transfer(p: Point2D): Point2D;\n    public transfer(x: number, y: number): number[];\n    // tslint:disable-next-line:variable-name\n    public transfer(x_or_p: any, y?: number): any {\n        // [x']   [m11 m21 dx]   [x]\n        // [y'] = [m12 m22 dy] * [y]\n        // [1 ]   [  0   0  1]   [1]\n        if (typeof x_or_p === \"object\")\n            return new Point2D(\n                dp(this.m11 * x_or_p.x + this.m21 * x_or_p.y + this.dx),\n                dp(this.m12 * x_or_p.x + this.m22 * x_or_p.y + this.dy)\n                );\n        else\n            return [\n                dp(this.m11 * x_or_p + this.m21 * (y as number) + this.dx),\n                dp(this.m12 * x_or_p + this.m22 * (y as number) + this.dy)\n                ];\n    }\n\n    //        [m11, m21, dx]\n    // A    = [m12, m22, dy]\n    //        [  0,   0,  1]\n    //\n    //        [ m22,  -m21,  m21* dy- dx*m22]\n    // A^-1 = [-m12,   m11,   dx*m12-m11* dy]\n    //        [   0,     0,  m11*m22-m21*m12]\n    public getInverse(): TransferMatrix2D {\n        return new TransferMatrix2D(\n             this.m22,\n            -this.m12,\n            -this.m21,\n             this.m11,\n            this.m21 * this.dy  - this.dx  * this.m22,\n            this.dx  * this.m12 - this.m11 * this.dy\n        );\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/**\n * Number precision / significant figure\n */\nexport class NumberPrecision {\n    public static decimalPlaces(n: number): (v: number) => number {\n        return (v: number) => {\n            return Number(v.toFixed(n));\n        };\n    }\n\n    public static precision(n: number): (v: number) => number {\n        return (v: number) => {\n            return Number(v.toPrecision(n));\n        };\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { TextEncoding }          from \"red-agate-util/modules/convert/TextEncoding\";\nimport { Base64 }                from \"red-agate-util/modules/convert/Base64\";\nimport { Escape }                from \"red-agate-util/modules/convert/Escape\";\nimport { WordWrap }              from \"red-agate-util/modules/convert/WordWrap\";\nimport { WebColor }              from \"./WebColor\";\nimport { VectorCanvas2DGradient,\n         VectorCanvas2DPattern,\n         VectorCanvas2D }        from \"./VectorCanvas2D\";\nimport { Point2D,\n         Vector2D,\n         Rect2D,\n         TransferMatrix2D }      from \"./TransferMatrix2D\";\n\n\nexport interface SvgCanvas2DAsset {\n    toDef(): string;\n}\n\n\nexport interface SvgTextAttributes {\n    /**\n     * author's computation of the total sum of all of the advance values\n     *  that correspond to character data within this element,\n     *  including the advance value on the glyph\n     */\n    textLength?: number;\n    /** 'spacing' | 'spacingAndGlyphs' */\n    lengthAdjust?: \"spacing\" | \"spacingAndGlyphs\";\n    /** line break on newline(0x0a) */\n    multiline?: boolean;\n    /**\n     * length from baseline to next baseline.\n     *  if writingMode is horizontal then add y coodinate.\n     *  if writingMode is vertical then add x coodinate.\n     */\n    lineHeight?: number;\n    /** rotation about the current text position (degree) */\n    rotate?: number;\n    /** 'lr-tb' | 'rl-tb' | 'tb-rl' | 'lr' | 'rl' | 'tb' */\n    writingMode?: \"lr-tb\" | \"rl-tb\" | \"tb-rl\" | \"lr\" | \"rl\" | \"tb\";\n    /** 'auto' | 0 | 90 | 180 | 270 */\n    glyphOrientationVertical?: \"auto\" | number;\n    /** 0 | 90 | 180 | 270 */\n    glyphOrientationHorizontal?: number;\n    /** 'ltr' | 'rtl'  */\n    direction?: \"ltr\" | \"rtl\";\n    /** 'normal' | 'embed' | 'bidi-override' */\n    unicodeBidi?: \"normal\" | \"embed\" | \"bidi-override\";\n    /** 'none' | [ 'underline' || 'overline' || 'line-through' ] */\n    textDecoration?: string;\n    /** use textPath */\n    textPath?: boolean;\n    /**  */\n    textPathOffset?: number;\n    /** 'auto' | length */\n    kerning?: \"auto\" | number;\n    /** 'normal' | length */\n    letterSpacing?: \"normal\" | number;\n    /** 'normal' | length */\n    wordSpacing?: \"normal\" | number;\n}\n\n\nexport class SvgCanvasImageData {\n    constructor(\n        public url: string,\n        public x: number, public y: number,\n        public width: number, public height: number) {\n    }\n}\n\n\nexport abstract class SvgCanvas2DGradient {\n}\n\n\nexport class SvgCanvas2DLinerGradient extends SvgCanvas2DGradient implements VectorCanvas2DGradient, SvgCanvas2DAsset {\n    private content: string;\n    constructor(\n        private id: string,\n        private x0: number, private y0: number, private x1: number, private y1: number) {\n        super();\n        this.content = `<linearGradient id=\"${id}\" gradientUnits=\"userSpaceOnUse\" x1=\"${x0}\" y1=\"${y0}\" x2=\"${x1}\" y2=\"${y1}\" >\\n`;\n    }\n    public addColorStop(offset: number, color: string, opacity: number = 1): void {\n        this.content += `<stop offset=\"${offset}\" stop-color=\"${color}\" stop-opacity=\"${opacity}\" />\\n`;\n    }\n    public toDef(): string {\n        return this.content + \"</linearGradient>\";\n    }\n    public toString(): string {\n        return `url(#${this.id})`;\n    }\n}\n\n\nexport class SvgCanvas2DRadialGradient extends SvgCanvas2DGradient implements VectorCanvas2DGradient, SvgCanvas2DAsset {\n    private content: string;\n    /** fr is ignored. fr is always 0. */\n    constructor(\n        private id: string,\n        private cx: number, private cy: number, private r: number,\n        private fx: number, private fy: number) {\n        super();\n        this.content = `<radialGradient id=\"${id}\" gradientUnits=\"userSpaceOnUse\" cx=\"${cx}\" cy=\"${cy}\" r=\"${r}\" fx=\"${fx}\" fy=\"${fy}\" >\\n`;\n    }\n    public addColorStop(offset: number, color: string, opacity: number = 1): void {\n        this.content += `<stop offset=\"${offset}\" stop-color=\"${color}\" stop-opacity=\"${opacity}\" />\\n`;\n    }\n    public toDef() {\n        return this.content + \"</radialGradient>\";\n    }\n    public toString() {\n        return `url(#${this.id})`;\n    }\n}\n\n\nexport class SvgCanvas2DPattern implements VectorCanvas2DPattern, SvgCanvas2DAsset {\n    constructor(\n        private id: string,\n        private imageData: SvgCanvasImageData) {\n    }\n    public toDef() {\n        const content =\n            `<image x=\"0\" y=\"0\" width=\"${this.imageData.width}\" height=\"${this.imageData.height}\" \\n` +\n            `xlink:href=\"${this.imageData.url}\" />`;\n        return `<pattern id=\"${this.id}\"  patternUnits=\"userSpaceOnUse\" patternContentUnits=\"userSpaceOnUse\" ` +\n            `x=\"${this.imageData.x}\" y=\"${this.imageData.y}\" ` +\n            `width=\"${this.imageData.width}\" height=\"${this.imageData.height}\">${content}</pattern>`;\n    }\n    public toString() {\n        return `url(#${this.id})`;\n    }\n}\n\n\n/**\n * canvas: source-over|source-in|source-out|source-atop|\n *         destination-over|destination-in|destination-out|destination-atop|\n *         lighter|copy|xor\n *    svg: over|in|out|atop|xor|arithmetic\n */\nexport type GlobalCompositeOperationValue =\n    \"source-over\" | \"source-in\" | \"source-out\" | \"source-atop\" |\n    \"destination-over\" | \"destination-in\" | \"destination-out\" | \"destination-atop\" |\n    \"lighter\" | \"copy\" | \"xor\" |\n    \"over\" | \"in\" | \"out\" | \"atop\" | \"arithmetic\";\n\n/**\n * text-anchor\n * canvas:start|end|left|right|center\n *    svg:start|middle|end\n */\nexport type TextAlignValue =\n    \"start\" | \"end\" | \"left\" | \"right\" | \"center\" | \"middle\";\n\n/**\n * dominant-baseline\n * canvas:top|hanging|middle|alphabetic|ideographic|bottom\n *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\n *        ('auto' is default. 'auto's effective value is depends on writing mode. if mode is horizontal then it is alphabetic. else then it is central)\n *\n * --------------------  text-before-edge (em square's edge)\n * --                --  hanging\n * --  X        X    --  mathematical\n *     X\n *     X        X\n * --  XXXX     X    --  central (em square's central), nearby of x-height(alphabetic lower case height)\n * --  X   X    X    --  middle (1/2 x-height)\n * --  X   X    X    --  alphabetic\n *            pp\n * -----------^^-------  ideographic, text-after-edge (em square's edge)\n */\nexport type TextBaselineValue =\n    \"top\" | \"hanging\" | \"middle\" | \"alphabetic\" | \"ideographic\" | \"bottom\" |\n    \"auto\" | \"use-script\" | \"no-change\" | \"reset-size\" |\n    \"mathematical\" | \"central\" | \"text-after-edge\" | \"text-before-edge\";\n\n/**\n * stroke-linecap\n * butt|round|square\n */\nexport type LineCapValue = \"butt\" | \"round\" | \"square\";\n\n/**\n * stroke-linejoin\n * miter|round|bevel\n */\nexport type LineJoinValue = \"miter\" | \"round\" | \"bevel\";\n\n\nclass SvgCanvasGraphicState {\n    public globalAlpha: number = 1;\n\n    /**\n     * canvas: source-over|source-in|source-out|source-atop|\n     *         destination-over|destination-in|destination-out|destination-atop|\n     *         lighter|copy|xor\n     *    svg: over|in|out|atop|xor|arithmetic\n     */\n    public globalCompositeOperation: GlobalCompositeOperationValue = \"source-over\";\n\n    public shadowBlur: number = 0;\n    /**\n     * canvas   : <'web-color'>|#000|#000000|rgb(0,0,0)|rgba(0,0,0,0)\n     * SvgCanvas: rgb(0,0,0)|rgba(0,0,0,0)\n     */\n    public shadowColor: string = \"rgba(0,0,0,1)\";\n    public shadowOffsetX: number = 0;\n    public shadowOffsetY: number = 0;\n\n    public filterIdUrl: string | null = null;\n\n    /**\n     * canvas: \"italic bold 26px 'Times New Roman'\"\n     *    svg: font-family =\"Times New Roman\"\n     *         font-style  =normal|italic|oblique\n     *         font-variant=normal|small-caps\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\n     *         font-size-adjust=<number>|none\n     *         font        =[[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>]\n     */\n    public font: string = \"normal 12px 'Times New Roman'\";\n    /**\n     * text-anchor\n     * canvas:start|end|left|right|center\n     *    svg:start|middle|end\n     */\n    public textAlign: TextAlignValue = \"start\";\n    /**\n     * dominant-baseline\n     * default is 'auto'.\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\n     *        ('alphabetic' is default)\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\n     *        ('auto' is default. 'auto's effective value is depends on writing mode. if mode is horizontal then it is alphabetic. else then it is central)\n     */\n    public textBaseline: TextBaselineValue = \"auto\";\n\n    /**\n     * stroke-linecap\n     * butt|round|square\n     */\n    public lineCap: LineCapValue = \"butt\";\n    public lineDashOffset: number = 0;\n    /**\n     * stroke-linejoin\n     * miter|round|bevel\n     */\n    public lineJoin: LineJoinValue = \"miter\";\n    public lineWidth: number = 1;\n    public miterLimit: number = 4;\n\n    public strokeStyle: string = \"black\";\n    public fillStyle: string = \"black\";\n\n    public ctm: TransferMatrix2D = new TransferMatrix2D();\n    public currentPoint: Point2D | null = null;\n    public currentPointOnCtm: Point2D | null = null;\n    public subpath: Array<string | number | Point2D> = [];\n\n    public lineDash: number[] = [];\n    public clipPath: string = \"\";\n\n    constructor(src?: SvgCanvasGraphicState) {\n        if (! src) return;\n        for (const key in this) {\n            if (this.hasOwnProperty(key) && src.hasOwnProperty(key)) {\n                (this as any)[key] = (src as any)[key];\n            }\n        }\n        this.subpath = Array.from(this.subpath);\n    }\n}\n\n\n/**\n * subset of CanvasRenderingContext2D\n */\nexport class SvgCanvas implements VectorCanvas2D {\n    public get globalAlpha(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].globalAlpha;\n    }\n    public set globalAlpha(value: number) {\n        this.graphicsStack[this.graphicsStack.length - 1].globalAlpha = value;\n    }\n\n    public get globalCompositeOperation(): GlobalCompositeOperationValue {\n        return this.graphicsStack[this.graphicsStack.length - 1].globalCompositeOperation;\n    }\n    public set globalCompositeOperation(value: GlobalCompositeOperationValue) {\n        this.filterIdUrl = null;\n        this.graphicsStack[this.graphicsStack.length - 1].globalCompositeOperation = value;\n    }\n\n    public get shadowBlur(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowBlur;\n    }\n    public set shadowBlur(value: number) {\n        this.filterIdUrl = null;\n        this.graphicsStack[this.graphicsStack.length - 1].shadowBlur = value;\n    }\n    public get shadowColor(): string {\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowColor;\n    }\n    public set shadowColor(value: string) {\n        this.filterIdUrl = null;\n        this.graphicsStack[this.graphicsStack.length - 1].shadowColor = value;\n    }\n    public get shadowOffsetX(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetX;\n    }\n    public set shadowOffsetX(value: number) {\n        this.filterIdUrl = null;\n        this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetX = value;\n    }\n    public get shadowOffsetY(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetY;\n    }\n    public set shadowOffsetY(value: number) {\n        this.filterIdUrl = null;\n        this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetY = value;\n    }\n    private get filterIdUrl(): string | null {\n        return this.graphicsStack[this.graphicsStack.length - 1].filterIdUrl;\n    }\n    private set filterIdUrl(value: string | null) {\n        this.graphicsStack[this.graphicsStack.length - 1].filterIdUrl = value;\n    }\n\n    /**\n     * canvas: \"italic bold 26px 'Times New Roman'\"\n     *    svg: font-family =\"Times New Roman\"\n     *         font-style  =normal|italic|oblique\n     *         font-variant=normal|small-caps\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\n     *         font-size-adjust=<number>|none\n     *         font        =[[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>]\n     */\n    public get font(): string {\n        return this.graphicsStack[this.graphicsStack.length - 1].font;\n    }\n    /**\n     * canvas: \"italic bold 26px 'Times New Roman'\"\n     *         [<font-style>||<font-variant>||<font-weight>||<font-stretch>]?<font-size>[/<line-height>]?<font-family>\n     *\n     *    svg: font-family =\"Times New Roman\"\n     *         font-style  =normal|italic|oblique\n     *         font-variant=normal|small-caps\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\n     *         font-size-adjust=<number>|none\n     *         font        =[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>\n     */\n    public set font(value: string) {\n        this.graphicsStack[this.graphicsStack.length - 1].font = value;\n    }\n    /**\n     * text-anchor\n     * canvas:start|end|left|right|center\n     *    svg:start|middle|end\n     */\n    public get textAlign(): TextAlignValue {\n        return this.graphicsStack[this.graphicsStack.length - 1].textAlign;\n    }\n    /**\n     * text-anchor\n     * canvas:start|end|left|right|center\n     *    svg:start|middle|end\n     */\n    public set textAlign(value: TextAlignValue) {\n        this.graphicsStack[this.graphicsStack.length - 1].textAlign = value;\n    }\n    /**\n     * dominant-baseline\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\n     */\n    public get textBaseline(): TextBaselineValue {\n        return this.graphicsStack[this.graphicsStack.length - 1].textBaseline;\n    }\n    /**\n     * dominant-baseline\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\n     */\n    public set textBaseline(value: TextBaselineValue) {\n        this.graphicsStack[this.graphicsStack.length - 1].textBaseline = value;\n    }\n\n    /**\n     * stroke-linecap\n     * butt|round|square\n     */\n    public get lineCap(): LineCapValue {\n        return this.graphicsStack[this.graphicsStack.length - 1].lineCap;\n    }\n    /**\n     * stroke-linecap\n     * butt|round|square\n     */\n    public set lineCap(value: LineCapValue) {\n        this.graphicsStack[this.graphicsStack.length - 1].lineCap = value;\n    }\n    public get lineDashOffset(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].lineDashOffset;\n    }\n    public set lineDashOffset(value: number) {\n        this.graphicsStack[this.graphicsStack.length - 1].lineDashOffset = value;\n    }\n    /**\n     * stroke-linejoin\n     * miter|round|bevel\n     */\n    public get lineJoin(): LineJoinValue {\n        return this.graphicsStack[this.graphicsStack.length - 1].lineJoin;\n    }\n    /**\n     * stroke-linejoin\n     * miter|round|bevel\n     */\n    public set lineJoin(value: LineJoinValue) {\n        this.graphicsStack[this.graphicsStack.length - 1].lineJoin = value;\n    }\n    public get lineWidth(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].lineWidth;\n    }\n    public set lineWidth(value: number) {\n        this.graphicsStack[this.graphicsStack.length - 1].lineWidth = value;\n    }\n    public get miterLimit(): number {\n        return this.graphicsStack[this.graphicsStack.length - 1].miterLimit;\n    }\n    public set miterLimit(value: number) {\n        this.graphicsStack[this.graphicsStack.length - 1].miterLimit = value;\n    }\n\n    public get strokeStyle(): string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern {\n        return this.graphicsStack[this.graphicsStack.length - 1].strokeStyle;\n    }\n    public set strokeStyle(value: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern) {\n        this.graphicsStack[this.graphicsStack.length - 1].strokeStyle = value.toString();\n    }\n    public get fillStyle(): string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern {\n        return this.graphicsStack[this.graphicsStack.length - 1].fillStyle;\n    }\n    public set fillStyle(value: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern) {\n        this.graphicsStack[this.graphicsStack.length - 1].fillStyle = value.toString();\n    }\n\n    private get ctm(): TransferMatrix2D {\n        return this.graphicsStack[this.graphicsStack.length - 1].ctm;\n    }\n    private set ctm(value: TransferMatrix2D) {\n        this.graphicsStack[this.graphicsStack.length - 1].ctm = value;\n    }\n    private get currentPoint(): Point2D | null {\n        return this.graphicsStack[this.graphicsStack.length - 1].currentPoint;\n    }\n    private set currentPoint(value: Point2D | null) {\n        this.graphicsStack[this.graphicsStack.length - 1].currentPoint = value;\n    }\n    private get currentPointOnCtm(): Point2D | null {\n        return this.graphicsStack[this.graphicsStack.length - 1].currentPointOnCtm;\n    }\n    private set currentPointOnCtm(value: Point2D | null) {\n        this.graphicsStack[this.graphicsStack.length - 1].currentPointOnCtm = value;\n    }\n    private get subpath(): Array<string | number | Point2D> {\n        return this.graphicsStack[this.graphicsStack.length - 1].subpath;\n    }\n    private set subpath(value: Array<string | number | Point2D>) {\n        this.graphicsStack[this.graphicsStack.length - 1].subpath = value;\n    }\n\n    private get lineDash(): number[] {\n        return this.graphicsStack[this.graphicsStack.length - 1].lineDash;\n    }\n    private set lineDash(value: number[]) {\n        this.graphicsStack[this.graphicsStack.length - 1].lineDash = value;\n    }\n    private get clipPath(): string {\n        return this.graphicsStack[this.graphicsStack.length - 1].clipPath;\n    }\n    private set clipPath(value: string) {\n        this.graphicsStack[this.graphicsStack.length - 1].clipPath = value;\n    }\n\n    private get subpathIsEmptyOrClosed(): boolean {\n        return this.subpath.length === 0 || this.subpath[this.subpath.length - 1] === \"Z\";\n    }\n\n    private graphicsStack: SvgCanvasGraphicState[] = [];\n    private assets: Array<SvgCanvas2DAsset | string> = [];\n    private content = \"\";\n    private contentSaved = \"\";\n    private idCount = 0;\n    private template: string | null = null;\n\n    constructor() {\n        this.graphicsStack.push(new SvgCanvasGraphicState());\n    }\n\n    public static fromTemplate(template: string): SvgCanvas {\n        const c = new SvgCanvas();\n        c.template = template;\n        c.idCount = new Date().getTime();\n        return c;\n    }\n\n    public render(viewbox: Rect2D, unit: string = \"mm\"): string {\n        const svgns = `xmlns=\"http://www.w3.org/2000/svg\"`;\n        const xlinkns = `xmlns:xlink=\"http://www.w3.org/1999/xlink\"`;\n        const vbox = `viewBox=\"${viewbox.x} ${viewbox.y} ${viewbox.w} ${viewbox.h}\"`;\n        const defs = `<defs>\\n${\n                this.assets.map(x => typeof x === \"string\" ? x : x.toDef()).join(\"\\n\")\n            }</defs>`;\n\n        if (! this.template) {\n            return `<svg ${svgns} ${xlinkns} version=\"1.1\" width=\"${viewbox.w}${unit}\" height=\"${viewbox.h}${unit}\" ${vbox}>\\n${\n                defs}\\n${this.contentSaved}${this.content}</svg>`;\n        } else {\n            let tmpl = this.template.replace(/<\\/svg>\\s*$/, '');\n\n            {\n                const re = /(<svg[^>]*?)\\s+?width\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\n                if (re.test(tmpl)) {\n                    tmpl = tmpl.replace(re, `$1 width=\"${viewbox.w}${unit}\"$2`);\n                } else {\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg width=\"${viewbox.w}${unit}\" `);\n                }\n            }\n            {\n                const re = /(<svg[^>]*?)\\s+?height\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\n                if (re.test(tmpl)) {\n                    tmpl = tmpl.replace(re, `$1 height=\"${viewbox.h}${unit}\"$2`);\n                } else {\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg height=\"${viewbox.h}${unit}\" `);\n                }\n            }\n            {\n                const re = /(<svg[^>]*?)\\s+?viewBox\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\n                if (re.test(tmpl)) {\n                    tmpl = tmpl.replace(re, `$1 ${vbox}$2`);\n                } else {\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg ${vbox} `);\n                }\n            }\n\n            if (! tmpl.match(/<svg[^>]*?\\s+?xmlns:xlink\\s*?=/)) {\n                tmpl = tmpl.replace(/<svg\\s/, `<svg ${xlinkns} `);\n            }\n            if (! tmpl.match(/<svg[^>]*?\\s+?xmlns\\s*?=/)) {\n                tmpl = tmpl.replace(/<svg\\s/, `<svg ${svgns} `);\n            }\n\n            return `${tmpl}\\n${defs}\\n${this.contentSaved}${this.content}</svg>`;\n        }\n    }\n\n    public toDataUrl(viewbox: Rect2D, unit: string = \"mm\", lineLength: number = 120): string {\n        return \"data:image/svg+xml;base64,\" +\n            Base64.encode(TextEncoding.encodeToUtf8(this.render(viewbox, unit)), lineLength);\n    }\n\n    /** postscript gsave */\n    public save(): void {\n        const s = new SvgCanvasGraphicState(this.graphicsStack[this.graphicsStack.length - 1]);\n        this.graphicsStack.push(s);\n    }\n    /** postscript grestore */\n    public restore(restorePath: boolean = false): void {\n        if (restorePath) {\n            if (0 < this.graphicsStack.length) this.graphicsStack.pop();\n        } else {\n            if (0 < this.graphicsStack.length) {\n                const subpath = this.subpath;\n                const cpt = this.currentPoint;\n                const cptoctm = this.currentPointOnCtm;\n\n                this.graphicsStack.pop();\n\n                this.subpath = subpath;\n                this.currentPoint = cpt;\n                this.currentPointOnCtm = cptoctm;\n            }\n        }\n    }\n\n    /** postscript x y scale */\n    public scale(x: number, y: number): void {\n        if (this.currentPointOnCtm !== null) {\n            const tm = new TransferMatrix2D().scale(x, y);\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\n        }\n        this.ctm = this.ctm.scale(x, y);\n    }\n    /** postscript x y translate */\n    public translate(x: number, y: number): void {\n        if (this.currentPointOnCtm !== null) {\n            const tm = new TransferMatrix2D().translate(x, y);\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\n        }\n        this.ctm = this.ctm.translate(x, y);\n    }\n    /** postscript (angle*180/PI) rotate */\n    public rotate(angle: number): void {\n        if (this.currentPointOnCtm !== null) {\n            const tm = new TransferMatrix2D().rotate(angle);\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\n        }\n        this.ctm = this.ctm.rotate(angle);\n    }\n    /** postscript [m11 m12 m21 m22 dx dy] concat */\n    public transform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void {\n        const tm = new TransferMatrix2D(m11, m12, m21, m22, dx, dy);\n        if (this.currentPointOnCtm !== null)\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\n        this.ctm = this.ctm.concat(tm);\n    }\n    /** postscript [m11 m12 m21 m22 dx dy] setmatrix */\n    public setTransform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void {\n        this.currentPointOnCtm = null;\n        this.ctm = new TransferMatrix2D(m11, m12, m21, m22, dx, dy);\n    }\n\n    /** postscript newpath */\n    public beginPath(): void {\n        this.subpath = [];\n        this.currentPoint = null;\n        this.currentPointOnCtm = null;\n    }\n    /** postscript closepath */\n    public closePath(): void {\n        this.subpath.push(\"Z\");\n        this.currentPoint = null;\n        this.currentPointOnCtm = null;\n    }\n\n    /** postscript x y moveto */\n    public moveTo(x: number, y: number): void {\n        const p = new Point2D(x, y);\n        this.subpath.push(\"M\", this.ctm.transfer(p));\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\n        this.currentPointOnCtm = p;\n    }\n    /** postscript x y lineto */\n    public lineTo(x: number, y: number, ...extra: number[]): void {\n        let p = new Point2D(x, y);\n        this.subpath.push(\"L\", this.ctm.transfer(p));\n        if (extra && extra.length % 4 === 0) {\n            for (let i = 0; i < extra.length; i += 2) {\n                if (extra.length <= (i + 1)) break;\n                p = new Point2D(extra[i], extra[i + 1]);\n                this.subpath.push(this.ctm.transfer(p));\n            }\n        }\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\n        this.currentPointOnCtm = p;\n    }\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, ...extra: number[]): void {\n        let p = new Point2D(x, y);\n        this.subpath.push(\"Q\",\n            this.ctm.transfer(new Point2D(cpx, cpy)),\n            this.ctm.transfer(p));\n        if (extra && extra.length % 4 === 0) {\n            for (let i = 0; i < extra.length; i += 2) {\n                if (extra.length <= (i + 1)) break;\n                p = new Point2D(extra[i], extra[i + 1]);\n                this.subpath.push(this.ctm.transfer(p));\n            }\n        }\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\n        this.currentPointOnCtm = p;\n    }\n    /** postscript cp1x cp1y cp2x cp2y x y curveto */\n    public bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, ...extra: number[]): void {\n        let p = new Point2D(x, y);\n        this.subpath.push(\"C\",\n            this.ctm.transfer(new Point2D(cp1x, cp1y)),\n            this.ctm.transfer(new Point2D(cp2x, cp2y)),\n            this.ctm.transfer(p));\n        if (extra && extra.length % 6 === 0) {\n            for (let i = 0; i < extra.length; i += 2) {\n                p = new Point2D(extra[i], extra[i + 1]);\n                this.subpath.push(this.ctm.transfer(p));\n            }\n        }\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\n        this.currentPointOnCtm = p;\n    }\n\n    /**\n     * postscript arc / arcn\n     * anticlockwise= true: x y startAngle endAngle arc\n     * anticlockwise=false: x y startAngle endAngle arcn\n     * center: (x,y)\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean = false): void {\n        const entired = Math.abs(endAngle - startAngle) >= (2 * Math.PI);\n\n        if (Math.abs(startAngle) > (2 * Math.PI)) startAngle = startAngle % (2 * Math.PI);\n        if (startAngle < 0)                       startAngle = (2 * Math.PI) + startAngle;\n        if (Math.abs(endAngle)   > (2 * Math.PI)) endAngle   = endAngle   % (2 * Math.PI);\n        if (endAngle   < 0)                       endAngle   = (2 * Math.PI) + endAngle  ;\n\n        if (entired) {\n            endAngle = startAngle + (2 * Math.PI);\n        } else {\n            if (anticlockwise) {\n                [startAngle, endAngle] = [endAngle, startAngle];\n            }\n            if (endAngle < startAngle) {\n                endAngle = endAngle + (2 * Math.PI);\n            }\n        }\n        let angle = endAngle - startAngle;\n        let r = 0;\n        const PI_2 = Math.PI / 2;\n\n        // approximate the arc by a Bezier curve.\n        const k0 = (4 * (Math.sqrt(2) - 1)) / 3; // 0.55228474983...\n        const tm0 = new TransferMatrix2D().translate(x, y).scale(radius, radius);\n\n        let points: Point2D[] = [];\n\n        // tslint:disable-next-line:ban-comma-operator\n        for (; PI_2 < angle; r += PI_2, angle -= PI_2) {\n            const tm = tm0.rotate(startAngle + r);\n\n            if (points.length === 0)\n                points.push(tm.transfer(new Point2D(1, 0)));\n\n            points.push(tm.transfer(new Point2D( 1, k0)));\n            points.push(tm.transfer(new Point2D(k0,  1)));\n            points.push(tm.transfer(new Point2D( 0,  1)));\n        }\n\n        const k1 = (4 * Math.tan(angle / 4)) / 3;\n        {\n            const tm = tm0.rotate(startAngle + r);\n\n            if (points.length === 0)\n                points.push(tm.transfer(new Point2D(1, 0)));\n\n            points.push(tm.transfer(new Point2D(1, k1)));\n            points.push(tm.transfer(\n                new Point2D(\n                    Math.cos(angle) + k1 * Math.sin(angle),\n                    Math.sin(angle) - k1 * Math.cos(angle))));\n            points.push(tm.transfer(\n                new Point2D(\n                    Math.cos(angle),\n                    Math.sin(angle))));\n        }\n        if (anticlockwise) points = points.reverse();\n\n        const p = points[points.length - 1];\n        points = points.map(pt => this.ctm.transfer(pt));\n        this.subpath.push(this.subpathIsEmptyOrClosed ? \"M\" : \"L\", points.shift() as Point2D, \"C\");\n        this.subpath.push(...points);\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\n        this.currentPointOnCtm = p;\n    }\n\n    /** postscript x1 y1 x2 y2 arcto */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void {\n        const p0 = this.currentPointOnCtm;\n        if (p0 === null) {\n            return;\n        }\n\n        const p1 = new Point2D(x1, y1);\n        const p2 = new Point2D(x2, y2);\n\n        const v1 = Vector2D.fromPoints(p0, p1);\n        const v2 = Vector2D.fromPoints(p1, p2);\n\n        if ((v1.x === 0 && v2.x === 0) || (v1.y === 0 && v2.y === 0) ||\n            v1.isZero() || v2.isZero()) {\n            this.subpath.push(\"L\", this.ctm.transfer(p1), this.ctm.transfer(p2));\n            this.currentPointOnCtm = p2;\n            return;\n        }\n\n        const arcAngle = Vector2D.getAngle(v1, v2);\n        if (arcAngle === 0 || arcAngle === Math.PI) {\n            this.subpath.push(\"L\", this.ctm.transfer(p1), this.ctm.transfer(p2));\n            this.currentPointOnCtm = p2;\n            return;\n        }\n        const linesAngle = Math.PI - arcAngle;\n\n        const a = radius / Math.sin(linesAngle / 2);\n        const b = Math.abs(Math.cos(linesAngle / 2) * a);\n\n        let vang1 = Vector2D.fromPoints(p1, p0).getAngle();\n        let vang2 = v2.getAngle();\n\n        const cp1 = new Point2D(\n            b * Math.cos(vang1) + p1.x,\n            b * Math.sin(vang1) + p1.y);\n        const cp2 = new Point2D(\n            b * Math.cos(vang2) + p1.x,\n            b * Math.sin(vang2) + p1.y);\n        if (Math.abs(vang2 - vang1) > Math.PI) {\n            if (vang2 > vang1) vang1 += Math.PI * 2;\n            else               vang2 += Math.PI * 2;\n        }\n        const center = new Point2D(\n            a * Math.cos((vang1 + vang2) / 2) + p1.x,\n            a * Math.sin((vang1 + vang2) / 2) + p1.y);\n\n        const vcp1 = Vector2D.fromPoints(center, cp1);\n        const vcp2 = Vector2D.fromPoints(center, cp2);\n        let angcp1 = vcp1.getAngle();\n        let angcp2 = vcp2.getAngle();\n        if (Math.abs(angcp2 - angcp1) > Math.PI) {\n            if (angcp2 > angcp1) angcp1 += Math.PI * 2;\n            else                 angcp2 += Math.PI * 2;\n        }\n\n        // this.subpath.push(\"L\", this.ctm.transfer(cp1), this.ctm.transfer(center), this.ctm.transfer(cp2)); // debug\n        this.arc(center.x, center.y, radius, angcp1, angcp2, angcp1 >= angcp2);\n        this.lineTo(x2, y2);\n    }\n\n    public circle(x: number, y: number, radius: number, anticlockwise: boolean = true): void {\n        if (! this.subpathIsEmptyOrClosed) this.closePath();\n        this.arc(x, y, radius, 0, 2 * Math.PI, anticlockwise);\n        this.closePath();\n    }\n\n    public rect(x: number, y: number, w: number, h: number, anticlockwise: boolean = true): void {\n        if (anticlockwise) {\n            this.subpath.push(\n                \"M\", this.ctm.transfer(new Point2D(x, y)), \"L\",\n                this.ctm.transfer(new Point2D(x, y + h)), this.ctm.transfer(new Point2D(x + w, y + h)),\n                this.ctm.transfer(new Point2D(x + w, y)), \"Z\"\n                );\n        } else {\n            this.subpath.push(\n                \"M\", this.ctm.transfer(new Point2D(x, y)), \"L\",\n                this.ctm.transfer(new Point2D(x + w, y)), this.ctm.transfer(new Point2D(x + w, y + h)),\n                this.ctm.transfer(new Point2D(x, y + h)), \"Z\"\n                );\n        }\n        this.currentPoint = null;\n        this.currentPointOnCtm = null;\n    }\n\n    public roundRect(x: number, y: number, w: number, h: number, radius: number, anticlockwise: boolean = true): void {\n        if (anticlockwise) {\n            this.moveTo(x        , y + h / 2);\n            this. arcTo(x        , y + h    , x + w / 2, y + h    , radius);\n            this. arcTo(x + w    , y + h    , x + w    , y + h / 2, radius);\n            this. arcTo(x + w    , y        , x + w / 2, y        , radius);\n            this. arcTo(x        , y        , x        , y + h / 2, radius);\n        } else {\n            this.moveTo(x + w / 2, y        );\n            this. arcTo(x + w    , y        , x + w    , y + h / 2, radius);\n            this. arcTo(x + w    , y + h    , x + w / 2, y + h    , radius);\n            this. arcTo(x        , y + h    , x        , y + h / 2, radius);\n            this. arcTo(x        , y        , x + w / 2, y        , radius);\n        }\n        this.closePath();\n    }\n\n    private getInheritedStyle(style: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern):\n            {style: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern, alpha: number} {\n\n        let found: RegExpMatchArray | null;\n        const styleStr = style.toString();\n        let alpha = this.globalAlpha;\n\n        let color: {r: number, g: number, b: number, a: number} | {h: number, s: number, l: number, a: number} | boolean;\n\n        // tslint:disable-next-line:no-conditional-assignment\n        if (color = WebColor.isRgb(styleStr)) {\n            const rgba = color as {r: number, g: number, b: number, a: number};\n            alpha *= rgba.a;\n            style = `rgb(${rgba.r},${rgba.g},${rgba.b})`;\n        }\n        // tslint:disable-next-line:no-conditional-assignment\n        else if (color = WebColor.isHsl(styleStr)) {\n            const hsla = color as {h: number, s: number, l: number, a: number};\n            alpha *= hsla.a;\n            style = `hsl(${hsla.h},${hsla.s * 100}%,${hsla.l * 100}%)`;\n        }\n        else if (! this.ctm.isIdentity()) {\n            // tslint:disable-next-line:no-conditional-assignment\n            if (found = styleStr.match(/^url\\(\\#lgrad-(.+)\\)$/)) {\n                this.assets.push(\n                    `<linearGradient id=\"lgrad-${++this.idCount}\" xlink:href=\"#lgrad-${found[1]}\" ` +\n                    `gradientTransform=\"matrix(${this.ctm.toString()})\" />`);\n                style = `url(#lgrad-${this.idCount})`;\n            }\n            // tslint:disable-next-line:no-conditional-assignment\n            else if (found = styleStr.match(/^url\\(\\#rgrad-(.+)\\)$/)) {\n                this.assets.push(\n                    `<radialGradient id=\"rgrad-${++this.idCount}\" xlink:href=\"#rgrad-${found[1]}\" ` +\n                    `gradientTransform=\"matrix(${this.ctm.toString()})\" />`);\n                style = `url(#rgrad-${this.idCount})`;\n            }\n            // tslint:disable-next-line:no-conditional-assignment\n            else if (found = styleStr.match(/^url\\(\\#pat-(.+)\\)$/)) {\n                this.assets.push(\n                    `<pattern id=\"pat-${++this.idCount}\" xlink:href=\"#pat-${found[1]}\" ` +\n                    `patternTransform=\"matrix(${this.ctm.toString()})\" />`);\n                style = `url(#pat-${this.idCount})`;\n            }\n        }\n        return {style, alpha};\n    }\n\n    private getStrokeAttrs(): string {\n        const styleAndAlpha = this.getInheritedStyle(this.strokeStyle);\n        return `stroke=\"${styleAndAlpha.style}\" stroke-width=\"${this.lineWidth}\" ` +\n            `stroke-linecap=\"${this.lineCap}\" stroke-linejoin=\"${this.lineJoin}\" stroke-miterlimit=\"${this.miterLimit}\" ` +\n            (this.getLineDash().length > 0 ?\n                `stroke-dasharray=\"${this.getLineDash().join(\",\")}\" stroke-dashoffset=\"${this.lineDashOffset}\" ` : \"\") +\n            `stroke-opacity=\"${styleAndAlpha.alpha}\" `;\n    }\n    private getFillAttrs(fillRule: string): string {\n        const styleAndAlpha = this.getInheritedStyle(this.fillStyle);\n        return `fill=\"${styleAndAlpha.style}\" fill-rule=\"${fillRule}\" fill-opacity=\"${styleAndAlpha.alpha}\" `;\n    }\n\n    private getFilterAttrs(): string {\n        if (this.filterIdUrl === \"\") {\n            // do nothing.\n        } else if (this.filterIdUrl === null) {\n            if (0 < this.shadowBlur || (\n                this.globalCompositeOperation &&\n                this.globalCompositeOperation !== \"source-over\")) {\n\n                let content = \"\";\n                let merge   = \"\";\n\n                if (0 < this.shadowBlur) {\n                    content +=\n                        `<feGaussianBlur stdDeviation=\"${this.shadowBlur}\" result=\"blur\" />\\n` +\n                        `<feOffset in=\"blur\" dx=\"${this.shadowOffsetX}\" dy=\"${this.shadowOffsetY}\" result=\"offsetBlur\" />\\n`;\n                    if (this.shadowColor === null) {\n                        merge +=\n                            `<feMergeNode in=\"offsetBlur\" />`;\n                    } else {\n                        const c = new WebColor(this.shadowColor);\n                        content +=\n                            `<feColorMatrix in=\"offsetBlur\" type=\"matrix\" values=\"` +\n                            ` 1 1 1 0 0 ` +\n                            ` 1 1 1 0 0 ` +\n                            ` 1 1 1 0 0 ` +\n                            ` 0 0 0 1 0 \" result=\"color1\" />\\n` +\n                            `<feColorMatrix in=\"color1\" type=\"matrix\" values=\"` +\n                            ` ${c.r / 255} 0 0 0 0 ` +\n                            ` 0 ${c.g / 255} 0 0 0 ` +\n                            ` 0 0 ${c.b / 255} 0 0 ` +\n                            ` 0 0 0 ${c.a} 0 \" result=\"color2\" />\\n`;\n                        merge +=\n                            `<feMergeNode in=\"color2\" />\\n`;\n                    }\n                }\n                if (this.globalCompositeOperation && this.globalCompositeOperation !== \"source-over\") {\n                    let op = this.globalCompositeOperation;\n                    let reverse = false;\n                    switch (op) {\n                        case \"destination-in\":\n                            reverse = true;\n                        case \"source-in\":\n                            op = \"in\";\n                            break;\n                        case \"destination-out\":\n                            reverse = true;\n                        case \"source-out\":\n                            op = \"out\";\n                            break;\n                        case \"destination-atop\":\n                            reverse = true;\n                        case \"source-atop\":\n                            op = \"atop\";\n                            break;\n                        case \"xor\":\n                            op = \"xor\";\n                            break;\n                        case \"destination-over\":\n                            reverse = true;\n                        default: // lighter|copy|arithmetic\n                            op = \"over\";\n                            break;\n                    }\n                    content +=\n                        `<feComposite in${reverse ? \"2\" : \"\"}=\"SourceGraphic\" ` +\n                        `in${reverse ? \"\" : \"2\"}=\"BackgroundImage\" operator=\"${op}\" result=\"comp\"/>\\n`;\n                    merge   += `<feMergeNode in=\"comp\" />\\n`;\n                } else {\n                    merge   += `<feMergeNode in=\"SourceGraphic\" />\\n`;\n                }\n\n                this.assets.push(\n                    `<filter id=\"filter-${++this.idCount}\" filterUnits=\"userSpaceOnUse\">\\n` +\n                    `${content}<feMerge>\\n${merge}</feMerge>\\n</filter>`);\n\n                this.filterIdUrl = `url(#filter-${this.idCount})`;\n                return `filter=\"${this.filterIdUrl}\" `;\n            } else {\n                this.filterIdUrl = \"\";\n            }\n        } else if (this.filterIdUrl !== \"\") {\n            return `filter=\"${this.filterIdUrl}\" `;\n        }\n        return \"\";\n    }\n\n    private getMultilineTextHeight(c: SvgTextAttributes) {\n        if ((c.multiline) &&\n            typeof this.font === 'string' &&\n            (c.lineHeight === void 0 || c.lineHeight === null)) {\n\n            const re = new RegExp(\n                '^\\\\s*(?:normal|italic|oblique)?\\s*' +\n                '(?:normal|small-caps)?\\\\s*' +\n                '(?:normal|bold|lighter|bolder|100|200|300|400|500|600|700|800|900)??\\\\s*' +\n                '(?:([0-9.]+)(px|pt|mm|cm|in|pc)?)(?:\\\\/(?:([0-9.]+|normal)(px|pt|mm|cm|in|em|%)?))?');\n\n            const x = re.exec(this.font);\n            if (x) {\n                // px\n                let fontSizePx = Number(x[1]);\n                switch (x[2]) {\n                    case 'pt':\n                        // 1pt === 1/72in === (1/72)*96px\n                        fontSizePx = (fontSizePx / 72.0) * 96.0;\n                        break;\n                    case 'pc':\n                        fontSizePx = (fontSizePx / 72.0) * 96.0 / 12.0;\n                        break;\n                    case 'mm':\n                        // 1mm === 1/25.4in === (1/25.4)*96px\n                        fontSizePx = (fontSizePx / 25.4) * 96.0;\n                        break;\n                    case 'cm':\n                        fontSizePx = (fontSizePx / 25.4) * 96.0 * 100.0;\n                        break;\n                    case 'in':\n                        // 1in === 96px\n                        fontSizePx = fontSizePx * 96.0;\n                        break;\n                }\n\n                let lineHeight = fontSizePx;\n                if (x[3]) {\n                    lineHeight = Number(x[3]) || 1.3;\n                    switch (x[4]) {\n                        case 'px':\n                            break;\n                        case 'pt':\n                            // 1pt === 1/72in === (1/72)*96px\n                            lineHeight = (lineHeight / 72.0) * 96.0;\n                            break;\n                        case 'pc':\n                            lineHeight = (lineHeight / 72.0) * 96.0 / 12.0;\n                            break;\n                        case 'mm':\n                            // 1mm === 1/25.4in === (1/25.4)*96px\n                            lineHeight = (lineHeight / 25.4) * 96.0;\n                            break;\n                        case 'cm':\n                            lineHeight = (lineHeight / 25.4) * 96.0 * 100.0;\n                            break;\n                        case 'in':\n                            // 1in === 96px\n                            lineHeight = lineHeight * 96.0;\n                            break;\n                        case '%':\n                            lineHeight = lineHeight / 100 * fontSizePx;\n                            break;\n                        default:\n                            lineHeight = lineHeight * fontSizePx;\n                            break;\n                    }\n                }\n                c.lineHeight = lineHeight;\n            }\n        }\n        return c;\n    }\n\n    private getTextAttributes(maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): string {\n        let textAlign: TextAlignValue;\n        switch (this.textAlign) {\n        case \"left\":\n            textAlign = \"start\";\n            break;\n        case \"right\":\n            textAlign = \"end\";\n            break;\n        case \"center\":\n            textAlign = \"middle\";\n            break;\n        default:\n            textAlign = this.textAlign;\n            break;\n        }\n\n        let textBaseline: TextBaselineValue;\n        switch (this.textBaseline) {\n        case \"top\":\n            textBaseline = \"text-before-edge\";\n            break;\n        case \"bottom\":\n            textBaseline = \"text-after-edge\";\n            break;\n        default:\n            textBaseline = this.textBaseline;\n            break;\n        }\n\n        let a = ` style=\"font:${Escape.xml(this.font)};\" text-anchor=\"${textAlign}\" dominant-baseline=\"${textBaseline}\"`;\n\n        if (maxWidthOrExtraAttrs === void 0 || maxWidthOrExtraAttrs === null) {\n            return a;\n        } else if (typeof maxWidthOrExtraAttrs === \"number\") {\n            a += ` textLength=\"${maxWidthOrExtraAttrs}\"`;\n            return a;\n        }\n\n        const c = this.getMultilineTextHeight(maxWidthOrExtraAttrs);\n\n        if (c.textLength                 !== void 0 && c.textLength                 !== null) a += ` textLength=\"${c.textLength}\"`;\n        if (c.lengthAdjust               !== void 0 && c.lengthAdjust               !== null) a += ` lengthAdjust=\"${c.lengthAdjust}\"`;\n        if (c.rotate                     !== void 0 && c.rotate                     !== null) a += ` rotate=\"${c.rotate}\"`;\n        if (c.writingMode                !== void 0 && c.writingMode                !== null) a += ` writing-mode=\"${c.writingMode}\"`;\n        if (c.glyphOrientationVertical   !== void 0 && c.glyphOrientationVertical   !== null) a += ` glyph-orientation-vertical=\"${c.glyphOrientationVertical}\"`;\n        if (c.glyphOrientationHorizontal !== void 0 && c.glyphOrientationHorizontal !== null) a += ` glyph-orientation-horizontal=\"${c.glyphOrientationHorizontal}\"`;\n        if (c.direction                  !== void 0 && c.direction                  !== null) a += ` direction=\"${c.direction}\"`;\n        if (c.unicodeBidi                !== void 0 && c.unicodeBidi                !== null) a += ` unicode-bidi=\"${c.unicodeBidi}\"`;\n        if (c.textDecoration             !== void 0 && c.textDecoration             !== null) a += ` text-decoration=\"${c.textDecoration}\"`;\n        if (c.kerning                    !== void 0 && c.kerning                    !== null) a += ` kerning=\"${c.kerning}\"`;\n        if (c.letterSpacing              !== void 0 && c.letterSpacing              !== null) a += ` letter-spacing=\"${c.letterSpacing}\"`;\n        if (c.wordSpacing                !== void 0 && c.wordSpacing                !== null) a += ` word-spacing=\"${c.wordSpacing}\"`;\n\n        return a;\n    }\n    private getTextPath(maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): {id: string, offset?: number} | null {\n        if (maxWidthOrExtraAttrs !== void 0 && maxWidthOrExtraAttrs !== null && typeof maxWidthOrExtraAttrs === \"object\") {\n            if (maxWidthOrExtraAttrs.textPath) {\n                const inv = this.ctm.getInverse();\n                const subpath: Array<string | number | Point2D> = [];\n                for (const v of this.subpath) {\n                    if (v instanceof Point2D) {\n                        subpath.push(inv.transfer(v));\n                    } else {\n                        subpath.push(v);\n                    }\n                }\n\n                const id = `path-${++this.idCount}`;\n                this.assets.push(`<path id=\"${id}\" d=\"${WordWrap.loose(subpath.join(\" \"))}\" />\\n`);\n                this.subpath = [];\n                this.currentPoint = null;\n                this.currentPointOnCtm = null;\n\n                const r: {id: string, offset?: number} = {id: `#${id}`};\n\n                if (maxWidthOrExtraAttrs.textPathOffset !== void 0 && maxWidthOrExtraAttrs.textPathOffset !== null) {\n                    r.offset = maxWidthOrExtraAttrs.textPathOffset;\n                }\n                return r;\n            }\n        }\n        return null;\n    }\n    private convertToMultiline(text: string, x: number, y: number, maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): string {\n        if (maxWidthOrExtraAttrs !== void 0 && maxWidthOrExtraAttrs !== null && typeof maxWidthOrExtraAttrs === \"object\") {\n            if (maxWidthOrExtraAttrs.multiline && !maxWidthOrExtraAttrs.textPath) {\n                const h = maxWidthOrExtraAttrs.lineHeight || 12;\n                const s = text.replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\n                const a = Escape.xml(s).split(\"\\n\");\n                switch (maxWidthOrExtraAttrs.writingMode) {\n                    case \"tb\": case \"tb-rl\":\n                        return `<tspan>${a.join(`</tspan><tspan dx=\"${-h}\" y=\"${y}\">`)}</tspan>`;\n                    default:\n                        return `<tspan>${a.join(`</tspan><tspan x=\"${x}\" dy=\"${h}\">`)}</tspan>`;\n                }\n            }\n        }\n        return `<tspan x=\"${x}\" y=\"${y}\">${Escape.xml(text)}</tspan>`;\n    }\n\n    public stroke(): void {\n        this.content +=\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\n    }\n    public strokeRect(x: number, y: number, w: number, h: number): void {\n        this.content +=\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\n            \"/></g>\\n\";\n    }\n    public strokeText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\n        this.content +=\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<text` +\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\n    }\n\n    /**\n     * fillRule: nonzero|evenodd\n     */\n    public fill(fillRule: string = \"nonzero\"): void {\n        this.content +=\n            `<g stroke=\"none\" ${this.getFillAttrs(fillRule)}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\n    }\n    public fillRect(x: number, y: number, w: number, h: number): void {\n        this.content +=\n            `<g stroke=\"none\" ${this.getFillAttrs(\"nonzero\")}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\n            \"/></g>\\n\";\n    }\n    public fillText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\n        this.content +=\n            `<g stroke=\"none\" ${this.getFillAttrs(\"nonzero\")}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<text` +\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\n    }\n\n    /**\n     * fillRule: nonzero|evenodd\n     */\n    public fillStroke(fillRule: string = \"nonzero\"): void {\n        this.content +=\n            `<g ${this.getFillAttrs(fillRule)}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\n    }\n    public fillStrokeRect(x: number, y: number, w: number, h: number): void {\n        this.content +=\n            `<g ${this.getFillAttrs(\"nonzero\")}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\n            \"/></g>\\n\";\n    }\n    public fillStrokeText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\n        this.content +=\n            `<g ${this.getFillAttrs(\"nonzero\")}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\n            `>\\n<text` +\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\n    }\n\n    public getLineDash(): number[] {\n        return this.lineDash;\n    }\n    public setLineDash(segments: number[]): void {\n        this.lineDash = segments;\n    }\n\n    /**\n     * fillRule: nonzero|evenodd\n     */\n    public clip(fillRule: string = \"nonzero\"): void {\n        const a =\n            `<clipPath id=\"clip-${++this.idCount}\" fill-rule=\"${fillRule}\" >` +\n            `<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" /></clipPath>`;\n        this.assets.push(a);\n        this.clipPath = `url(#clip-${this.idCount})`;\n    }\n\n    public registerImage(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData, id?: string): string {\n        const img = imageData = this.convertImageToSvgImageData(imageData);\n        const imgId = (id === null || id === void 0) ? `img-${++this.idCount}_w${img.width}_h${img.height}` : id;\n        const a =\n            `<image id=\"${imgId}\" \\n` +\n            `x=\"${0}\" y=\"${0}\" width=\"${1}\" height=\"${1}\" ` +\n            `preserveAspectRatio=\"none\" ` +\n            `xlink:href=\"${img.url}\" />`;\n        this.assets.push(a);\n        return `#${imgId}`;\n    }\n\n    public registerCustomFilter(id: string, markup: string): void {\n        this.assets.push(markup);\n        this.filterIdUrl = `url(#${id})`;\n    }\n\n    public registerCustomAsset(markup: string | SvgCanvas2DAsset): void {\n        this.assets.push(markup);\n    }\n    public appendCustomContent(markup: string): void {\n        this.content += `<g transform=\"matrix(${this.ctm.toString()})\">${markup}</g>\\n`;\n    }\n\n    public createLinearGradient(x0: number, y0: number, x1: number, y1: number): SvgCanvas2DLinerGradient {\n        const a = new SvgCanvas2DLinerGradient(`lgrad-${++this.idCount}`, x0, y0, x1, y1);\n        this.assets.push(a);\n        return a;\n    }\n    /** fr is ignored. fr is always 0. */\n    public createRadialGradient(cx: number, cy: number, r: number, fx: number, fy: number, fr?: number): SvgCanvas2DRadialGradient {\n        const a = new SvgCanvas2DRadialGradient(`rgrad-${++this.idCount}`, cx, cy, r, fx, fy);\n        this.assets.push(a);\n        return a;\n    }\n\n    public createPattern(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData, repetition?: string): SvgCanvas2DPattern {\n        const a = new SvgCanvas2DPattern(`pat-${++this.idCount}`, this.convertImageToSvgImageData(imageData));\n        this.assets.push(a);\n        return a;\n    }\n    public beginPattern(): void {\n        this.contentSaved = this.content;\n        this.content = \"\";\n        const s = new SvgCanvasGraphicState();\n        this.graphicsStack.push(s);\n    }\n    public endPattern(x: number, y: number, width: number, height: number): string {\n        const id = ++this.idCount;\n        const a =\n            `<pattern id=\"pat-${id}\" patternUnits=\"userSpaceOnUse\" patternContentUnits=\"userSpaceOnUse\" ` +\n            `x=\"${x}\" y=\"${y}\" width=\"${width}\" height=\"${height}\">\\n${this.content}</pattern>`;\n        this.assets.push(a);\n        this.content = this.contentSaved;\n        this.contentSaved = \"\";\n        this.restore();\n        return `url(#pat-${id})`;\n    }\n\n    private convertImageToSvgImageData(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData): SvgCanvasImageData {\n        let img: SvgCanvasImageData;\n        if (typeof HTMLImageElement !== \"undefined\" && imageData instanceof HTMLImageElement) {\n            const c = document.createElement(\"canvas\");\n            c.width = imageData.width;\n            c.height = imageData.height;\n            const ctx = c.getContext(\"2d\");\n            if (ctx === null) {\n                throw new Error(\"SvgCanvas#convertImageToSvgImageData: Can't get context from Canvas.\");\n            }\n            ctx.drawImage(imageData, 0, 0);\n            img = new SvgCanvasImageData(c.toDataURL(), 0, 0, c.width, c.height);\n        } else if (typeof HTMLCanvasElement !== \"undefined\" && imageData instanceof HTMLCanvasElement) {\n            img = new SvgCanvasImageData(imageData.toDataURL(), 0, 0, imageData.width, imageData.height);\n        } else {\n            img = imageData as SvgCanvasImageData;\n        }\n        return img;\n    }\n\n    public drawImage(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData | string,\n                     canvasOffsetX: number, canvasOffsetY: number,\n                     canvasImageWidth: number, canvasImageHeight: number): void {\n        let img: SvgCanvasImageData;\n        if (typeof imageData === \"string\")\n            img = new SvgCanvasImageData(imageData, 0, 0, canvasImageWidth, canvasImageHeight);\n        else\n            img = this.convertImageToSvgImageData(imageData);\n\n        if (img.url.startsWith(\"#\")) {\n            const tm = this.ctm.translate(canvasOffsetX, canvasOffsetY).scale(canvasImageWidth, canvasImageHeight);\n            this.content +=\n                `<g><use x=\"0\" y=\"0\" ` +\n                `transform=\"matrix(${tm.toString()})\" ` +\n                `\\nxlink:href=\"${img.url}\" /></g>\\n`;\n        } else {\n            this.content +=\n                `<g><image x=\"${canvasOffsetX}\" y=\"${canvasOffsetY}\" ` +\n                `width=\"${canvasImageWidth}\" height=\"${canvasImageHeight}\" ` +\n                `preserveAspectRatio=\"none\" ` +\n                `transform=\"matrix(${this.ctm.toString()})\" ` +\n                `\\nxlink:href=\"${img.url}\" /></g>\\n`;\n        }\n    }\n\n    public beginGroup(): void {\n        this.content += \"<g>\";\n    }\n    public endGroup(): void {\n        this.content += \"</g>\";\n    }\n\n\n    // tslint:disable-next-line:variable-name\n    private _fontHeightRatio = 1.25;\n    public get fontHeightRatio(): number {\n        return this._fontHeightRatio;\n    }\n    public set fontHeightRatio(value: number) {\n        this._fontHeightRatio = value;\n    }\n    public measureText(text: string): { width: number; } {\n        const re = this.font.match(/(\\d+(?:.\\d+)?)(px|pt|in|mm|em|rem|%)/);\n        let scale = 1;\n        let size = 12;\n        if (re) {\n            // 96px === 1in (not 72px === 1in)\n            // 72pt === 1in\n            //  1mm === 1/25.4in\n            switch (re[2]) {\n            case \"pt\": // pt -> px\n                scale = 96 / 72;\n                break;\n            case \"in\": // in -> px\n                scale = 96;\n                break;\n            case \"mm\": // mm -> px\n                scale = 96 * (1 / 25.4);\n                break;\n            case \"em\": case \"rem\":\n                scale = 12;\n                break;\n            case \"%\":\n                scale = 1 / 100;\n                break;\n            }\n            size = Number.parseFloat(re[1]);\n        }\n        return { width: Math.round(scale * size * Array.from(text\n            .replace(/[\\u200B-\\u200D\\uFEFF\\u200E\\u200F]/g, '')\n            .normalize('NFKC')).length / this.fontHeightRatio)\n        };\n    }\n\n    public clearRect(x: number, y: number, w: number, h: number): void {\n        this.save();\n        this.fillStyle = 'white';\n        this.fillRect(x, y, w, h);\n        this.restore();\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { Escape } from 'red-agate-util/modules/convert/Escape';\n\n\n\nexport interface RedAgateElement<P> {\n    type: string | ComponentClass<P>;\n    props: P;\n    nodeId: number | null;\n    children: RedAgateNode[];\n    component: Component<P> | null;\n}\n\n/*\nexport interface RedAgatePortal {\n    key: RedAgateKey | null;\n    children: RedAgateNode;\n}\n*/\n\n/* export type RedAgateKey = string | number; */\nexport type RedAgateText = string | number;\nexport type RedAgateChild = RedAgateElement<any> | RedAgateText;\n\n// Should be Array<RedAgateNode> but type aliases cannot be recursive\nexport type RedAgateFragment = {} | Array<RedAgateChild | any[] | boolean>;\nexport type RedAgateNode = RedAgateChild | RedAgateFragment /*| RedAgatePortal*/ | string | number | boolean | null | undefined;\n\nexport interface ComponentProps {\n    /** 'id' attribute of the html|xml element. */\n    id?: string;\n    /** name of RedAgateNode. */\n    ref?: string;\n    /** collection of descendant named 'ref's. */\n    refs?: { [refName: string]: RedAgateElement<any> };\n    /** auto numbered unique id of the html|xml element. if 'id' is not present, use this. */\n    __nodeId?: number;\n    // key?: RedAgateKey;\n\n    /** 'class' attribute of the html|xml element. */\n    styleClass?: object | string;\n    /** synonym of 'styleClass'. 'class' attribute of the html|xml element. */\n    className?: object | string;\n    /** synonym of 'styleClass'. 'class' attribute of the html|xml element. */\n    'class'?: object | string;\n\n    /** 'style' attribute of the html|xml element. */\n    style?: object | string;\n\n    children?: RedAgateNode | RedAgateNode[];\n    dangerouslySetInnerHTML?: {__html: string};\n    setInnerText?: {__text: string};\n\n    accesskey?: string;\n    contenteditable?: 'true' | 'false';\n    contextmenu?: string;\n    dir?: string;\n    draggable?: 'true' | 'false' | 'auto';\n    dropzone?: 'copy' | 'move' | 'link';\n    hidden?: true;\n    lang?: string;\n    spellcheck?: 'true' | 'false';\n    tabindex?: string | number;\n    title?: string;\n    translate?: 'yes' | 'no';\n}\n\nexport interface ComponentClass<P extends ComponentProps> {\n    // tslint:disable-next-line:callable-types\n    new (props?: P): Component<P>;\n}\n\nexport interface Component<P extends ComponentProps> {\n    earlyConstruct?(): void;\n    transform?(): RedAgateNode;\n    defer?(): Promise<any>;\n    beforeRender?(contexts: Map<string, any>): void;\n    render?(contexts: Map<string, any>, children: string): string;\n    afterRender?(contexts: Map<string, any>): void;\n}\n\nexport type ComponentFactory<P extends ComponentProps> =\n    ComponentClass<P> |\n    string;\n\n\n\n// tslint:disable-next-line\nexport declare namespace JSX {\n    interface IntrinsicElements {\n        [elemName: string]: any;\n    }\n\n    interface ElementClass extends Component<any> {\n    }\n\n    interface Element extends RedAgateElement<any> {\n    }\n\n    interface ElementAttributesProperty {\n        props: any; // specify the property name to use\n    }\n\n    interface ElementChildrenAttribute {\n        children: {};  // specify children name to use\n    }\n}\n\n\n\nconst HTML_NO_CLOSE_TAGS = new Set([\n    'area', 'base', 'br', 'col', 'command', 'embed', 'hr',\n    'img', 'input', 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr',\n]);\n\n\n\nexport abstract class RedAgateComponent<P extends ComponentProps> implements Component<P> {\n\n    private savedContexts: Map<string, any>;\n\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    public constructor(public props: P = {} as P) {\n        this.savedContexts = new Map<string, any>();\n    }\n\n    public abstract transform(): RedAgateNode;\n\n    public defer() {\n        return Promise.resolve();\n    }\n\n    protected setContext(contexts: Map<string, any>, key: string, value: any) {\n        if (this.savedContexts.has(key)) {\n            throw new Error(`RedAgateComponent#setContext: the key '${key}' has already set by myself.`);\n        }\n        if (contexts.has(key)) {\n            contexts.set(key, contexts.get(key));\n        }\n        contexts.set(key, value);\n    }\n\n    protected unsetContext(contexts: Map<string, any>, key: string) {\n        contexts.delete(key);\n        if (this.savedContexts.has(key)) {\n            contexts.set(key, this.savedContexts.get(key));\n            this.savedContexts.delete(key);\n        }\n    }\n\n    protected getContext(contexts: Map<string, any>, key: string) {\n        return contexts.get(key);\n    }\n}\n\n\n\nexport abstract class RedAgatePhantomComponent<P extends ComponentProps> extends RedAgateComponent<P> {\n    public transform() {\n        return (\n            (this.props.children !== null && this.props.children !== void 0) ?\n            this.props.children : []\n        );\n    }\n}\n\n\n\nclass RedAgateSimpleComponent<P extends ComponentProps> extends RedAgateComponent<P> {\n    public constructor(private fn: (props: P) => RedAgateNode, props: P) {\n        super(props);\n    }\n\n    public transform(): RedAgateNode {\n        return this.fn(this.props);\n    }\n}\n\n\n\nfunction getPromises(promises: Array<Promise<any>>, element: RedAgateNode) {\n    if (element === null || element === void 0) {\n        return promises;\n    }\n\n    if (Array.isArray(element)) {\n        element.forEach(x => getPromises(promises, x));\n        return promises;\n    }\n    if (typeof element !== 'object') {\n        return promises;\n    }\n\n    if ((element as any).component && (element as any).component.defer) {\n        const el = element as RedAgateElement<any>;\n        const p = (el as any).component.defer();\n        if (p) promises.push(p);\n    }\n    if ((element as any).children) {\n        getPromises(promises, (element as any).children);\n    }\n\n    return promises;\n}\n\n\n\nfunction buildElementProps<P extends ComponentProps>(props: P, children: RedAgateNode[]) {\n    if (children) {\n        if (children.length === 1) {\n            props.children = children[0];\n        } else if (children.length > 1) {\n            props.children = children;\n        }\n\n        let refs = {};\n        let hasRefs = false;\n        for (const c of children) {\n            if (c === null || c === void 0) {\n                // do nothing\n            } else if (Array.isArray(c)) {\n                // do nothing\n            } else if (typeof c !== 'object') {\n                // do nothing\n            } else {\n                if ((c as RedAgateElement<P>).props) {\n                    const p = (c as RedAgateElement<P>).props;\n                    if (typeof p.refs === 'object') {\n                        hasRefs = true;\n                        refs = Object.assign(refs, p.refs);\n                    }\n                    if (typeof p.ref === 'string') {\n                        hasRefs = true;\n                        refs[p.ref] = c;\n                    }\n                }\n            }\n        }\n        if (hasRefs) {\n            props.refs = refs;\n        }\n    }\n    return props;\n}\n\nexport function createElement<P extends ComponentProps>(\n    type: ComponentFactory<P>, props: P | null | undefined,\n    ...children: RedAgateNode[]): RedAgateElement<P> {\n\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    props = buildElementProps(props || ({} as P), children);\n\n    if (typeof type === 'function') {\n        return {\n            type,\n            props,\n            nodeId: null,\n            children,\n            // ES6 arrow function have no prototype.\n            component: type.prototype && type.prototype.earlyConstruct && type.prototype.transform ?\n                new type(props) :\n                null,\n        };\n    }\n    if (typeof type === 'string') {\n        return {\n            type,\n            props,\n            nodeId: null,\n            children,\n            component: null,\n        };\n    }\n\n    throw new Error('createElement receives invalid parameter type.');\n}\n\nexport function cloneElement(el: RedAgateElement<any>): RedAgateElement<any> {\n    let props = Object.assign({}, el.props || {});\n    delete props.__nodeId;\n\n    const children = (Array.isArray(el.children) ? el.children.slice(0) : el.children);\n    props = buildElementProps(props, children);\n\n    return {\n        type: el.type,\n        props,\n        nodeId: null,\n        children,\n        component: null,\n    };\n}\n\nexport function createElementFromComponentInstance<P extends ComponentProps>(c: RedAgateComponent<P>): RedAgateElement<P> {\n    return {\n        type: (c.constructor as any),\n        props: c.props,\n        nodeId: null,\n        children: (Array.isArray(c.props.children) ? c.props.children : []),\n        component: c,\n    };\n}\n\n\n\nexport interface TransformContext {\n    counter: number;\n}\n\nfunction constructComponent(el: RedAgateElement<any>, transformContext: TransformContext) {\n    if (el.nodeId === null || el.nodeId === void 0) {\n        el.nodeId = transformContext.counter++;\n        el.props.__nodeId = el.nodeId;\n    }\n    if (el.component === null || el.component === void 0) {\n        if (typeof el.type === 'function') {\n            // ES6 arrow function have no prototype.\n            el.component = (el.type.prototype && el.type.prototype.transform) ?\n                new el.type(el.props) :\n                new RedAgateSimpleComponent(el.type as any, el.props);\n        }\n    }\n    return el;\n}\n\nfunction duplicateElement(el: RedAgateElement<any>): RedAgateElement<any> {\n    return {\n        type: el.type,\n        props: el.props,\n        nodeId: el.nodeId,\n        children: (Array.isArray(el.children) ? el.children.slice(0) : el.children),\n        component: el.component,\n    };\n}\n\nexport function transform(element: RedAgateNode, transformContext?: TransformContext): RedAgateNode {\n    if (!transformContext) {\n        transformContext = { counter: 0 };\n    }\n    if (element === null || element === void 0) {\n        return element;\n    } else if (Array.isArray(element)) {\n        return (element\n            .map(x => transform(x, transformContext))\n            .filter(x => x !== null && x !== void 0)\n        );\n    } else if (typeof element !== 'object') {\n        return element;\n    }\n\n    const el = duplicateElement(constructComponent(element as RedAgateElement<any>, transformContext));\n\n    if (el.component && el.component.transform) {\n        const z = el.component.transform();\n\n        if (z === null || z === void 0) {\n            el.children = [];\n        } else if (Array.isArray(z)) {\n            el.children = z;\n        } else if (typeof z !== 'object') {\n            el.children = [z];\n        } else {\n            el.children = [z];\n        }\n    } else if (! el.children) {\n        el.children = [];\n    }\n\n    el.children = el.children\n        .map(x => transform(x, transformContext))\n        .filter(x => x !== null && x !== void 0);\n\n    return el;\n}\n\n\nfunction camelToKebabCase(s: string): string {\n    return s.replace(/([a-z0-9])([A-Z])/g, (match, p1, p2) => `${p1}-${p2.toLowerCase()}`);\n}\n\nexport function elementStyleRenderer(style: object | string) {\n    return typeof style === 'string' ? style :\n        Object.getOwnPropertyNames(style)\n            .filter(x => style[x] !== null && style[x] !== void 0)\n            .map(x => `${Escape.html(camelToKebabCase(x))}:${Escape.html(style[x])};`)\n            .join('');\n}\n\nexport function htmlAttributesRenderer(props: any, omitKeys?: Set<string>, whiteListKeys?: Set<string>): {attrs: string, children: string} {\n    let attrs = '';\n    let children = '';\n\n    const formatArrayProp = (prop: string | string[]) => {\n        if (Array.isArray(prop)) {\n            return (prop.map((x) => Escape.html(x.toString()))\n                .filter(x => x !== null && x !== void 0)\n                .join(' '));\n        } else {\n            if (prop === null || prop === void 0) {\n                return '';\n            } else switch (typeof prop) {\n                case 'function': case 'object': case 'symbol':\n                    return '';\n                default:\n                    return String(prop);\n            }\n        }\n    };\n\n    for (const key of Object.getOwnPropertyNames(props)) {\n        switch (key) {\n            case 'styleClass': case 'className': case 'class':\n                attrs += ` class=\"${formatArrayProp(props[key])}\"`;\n                break;\n\n            case 'style':\n                attrs += ` style=\"${elementStyleRenderer(props.style)}\"`;\n                break;\n\n            case 'children': case '__nodeId':\n                break;\n\n            case 'dangerouslySetInnerHTML':\n                children += props[key].__html;\n                break;\n\n            case 'setInnerText':\n                children += Escape.html(props[key].__text).replace(/\\r?\\n/g, '<br/>').replace(/\\r/g, '<br/>');\n                break;\n\n            default:\n                if (omitKeys && omitKeys.has(key)) {\n                    // no output\n                } else if (whiteListKeys && !whiteListKeys.has(key) && key !== 'id') {\n                    // no output\n                } else if (props[key] === null || props[key] === void 0 || props[key] === false) {\n                    // no output\n                } else if (props[key] === true) {\n                    attrs += ` ${Escape.html(key)}`;\n                } else {\n                    attrs += ` ${Escape.html(key)}=\"${formatArrayProp(props[key])}\"`;\n                }\n        }\n    }\n    return {attrs, children};\n}\n\nexport function htmlRenderer(element: RedAgateNode, contexts: Map<string, any>): string {\n    if (element === null || element === void 0) {\n        return '';\n    }\n\n    if (Array.isArray(element)) {\n        return element.map(x => htmlRenderer(x, contexts)).join('');\n    }\n    if (typeof element !== 'object') {\n        return Escape.html(element.toString());\n    }\n    if (!(element as any).props) {\n        return Escape.html(element.toString());\n    }\n\n    const el = element as RedAgateElement<any>;\n    // tslint:disable-next-line:prefer-const\n    let {attrs, children} = htmlAttributesRenderer(el.props);\n\n    if (el.component && el.component.beforeRender) {\n        el.component.beforeRender(contexts);\n    }\n\n    if (el.children !== null && el.children !== void 0) {\n        children += el.children.map(x => htmlRenderer(x, contexts)).join('');\n    }\n\n    let r = '';\n\n    if (el.component && el.component.render) {\n        r = el.component.render(contexts, children);\n    } else if (typeof el.type === 'string') {\n        const type = Escape.html(el.type);\n        if ((children === '' || children === null || children === void 0) && HTML_NO_CLOSE_TAGS.has(type)) {\n            r = `<${type}${attrs}/>`;\n        } else {\n            r = `<${type}${attrs}>${children}</${type}>`;\n        }\n    } else {\n        r = children;\n    }\n\n    if (el.component && el.component.afterRender) {\n        el.component.afterRender(contexts);\n    }\n\n    return r;\n}\n\nexport function renderAsHtml(element: RedAgateNode): Promise<string> {\n    const contexts = new Map<string, any>();\n    const transformContext = { counter: 0 };\n    const z = transform(element, transformContext);\n\n    return (\n        Promise.all(getPromises([], z))\n            .then(d => htmlRenderer(z, contexts))\n    );\n}\n\nexport function renderAsHtml_noDefer(element: RedAgateNode): string {\n    const contexts = new Map<string, any>();\n    const transformContext = { counter: 0 };\n    const z = transform(element, transformContext);\n\n    return htmlRenderer(z, contexts);\n}\n\n\n\nexport function render(\n    element: RedAgateNode, container: HTMLElement,\n    callback?: (html: string | null, error: any | null) => void): void {\n\n    renderAsHtml(element)\n    .then(html => {\n        container.innerHTML = html;\n        if (callback) callback(html, null);\n    })\n    .catch(error => {\n        if (callback) callback(null, error);\n    });\n}\n\n\n\nexport function renderOnAwsLambda(\n    element: RedAgateNode,\n    callback: (error: any | null, result: any | null) => void): void {\n\n    renderAsHtml(element)\n    .then(html => {\n        callback(null, html);\n    })\n    .catch(error => {\n        callback(error, null);\n    });\n}\n\n\n\nexport interface ExpressRequest {\n}\n\nexport interface ExpressResponse {\n    status(code: number): ExpressResponse;\n    set(field: string, value?: string): ExpressResponse;\n    send(content: any): ExpressResponse;\n}\n\nexport function renderOnExpress(\n    element: RedAgateNode,\n    req: ExpressRequest, res: ExpressResponse, headers?: Array<[string, string | null | undefined]>): void {\n\n    renderAsHtml(element)\n    .then(content => {\n        if (headers) {\n            headers.forEach((x) => res.set(x[0], typeof x[1] === 'string' ? x[1] as string : void 0));\n        }\n        res.send(content);\n    })\n    .catch(error => {\n        console.error(JSON.stringify(error));\n        res.status(500).send('');\n    });\n}\n\n\n\nexport interface FragmentProps extends ComponentProps {\n}\n\nexport class Fragment extends RedAgatePhantomComponent<FragmentProps> {\n    public constructor(props: FragmentProps) {\n        super(props);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport class Query<T> {\n    public constructor(public data: T[]) {\n    }\n\n    public orderBy(condition: Array<string | string[/* colName: string, ('asc' | 'desc') */]> | ((a: T, b: T) => number)): Query<T> {\n        let fn: (a: T, b: T) => number;\n        if (Array.isArray(condition)) {\n            fn = (x: T, y: T) => {\n                for (const c of condition) {\n                    if (typeof c === 'string') {\n                        if (x[c] > y[c]) return 1;\n                        if (x[c] < y[c]) return -1;\n                    } else {\n                        const desc = c[1] === 'desc' ? -1 : 1;\n                        if (x[c[0]] > y[c[0]]) return 1 * desc;\n                        if (x[c[0]] < y[c[0]]) return -1 * desc;\n                    }\n                }\n                return 0;\n            };\n        } else {\n            fn = condition;\n        }\n        return new Query(this.data.slice(0).sort(fn));\n    }\n\n    public groupBy(condition: string[/* colName: string */] | ((a: T, b: T, index: number, array: T[]) => boolean)): Query<T[]> {\n        let fn: (a: T, b: T, index: number, array: T[]) => boolean;\n        if (Array.isArray(condition)) {\n            fn = (x: T, y: T) => {\n                for (const c of condition) {\n                    if (x[c] !== y[c]) return false;\n                }\n                return true;\n            };\n        } else{\n            fn = condition;\n        }\n        const r: T[][] = [];\n        let start = 0;\n        let i = 1;\n        for (; i < this.data.length; i++) {\n            if (! fn(this.data[start], this.data[i], i, this.data)) {\n                r.push(this.data.slice(start, i));\n                start = i;\n            }\n        }\n        r.push(this.data.slice(start, i));\n        return new Query(r);\n    }\n\n    public groupEvery(n: number | {single: number, first?: number, intermediate: number, last?: number}): Query<T[]> {\n        if (typeof n === 'number') {\n            return this.groupBy((a, b, index, array) => {\n                if ((index % n) === 0) return false;\n                return true;\n            });\n        } else {\n            const w = Object.assign({first: n.intermediate, last: n.intermediate}, n);\n            const r = this.groupBy((a, b, index, array) => {\n                if (w.single >= array.length) {\n                    if ((index % w.single) === 0) return false;\n                    return true;\n                } else if (index <= w.first) {\n                    if ((index % w.first) === 0) return false;\n                    return true;\n                } else {\n                    if (((index - w.first) % w.intermediate) === 0) return false;\n                    return true;\n                }\n            });\n            if (r.data.length === 1) {\n                if (w.single < r.data[0].length) {\n                    r.data.push([]);\n                }\n            } else {\n                if (w.first < r.data[0].length) {\n                    // case of w.first === 0\n                    r.data.unshift([]);\n                }\n            }\n            if (r.data.length > 1) {\n                if (r.data[r.data.length - 1].length > w.last) {\n                    r.data.push([]);\n                }\n            }\n            return r;\n        }\n    }\n\n    public where(fn: (value: T, index: number, array: T[]) => boolean): Query<T> {\n        return new Query(this.data.filter(fn));\n    }\n\n    public select(): T[];\n    public select<R>(fn: (value: T, index: number, array: T[]) => R): R[];\n    public select<R>(fn?: (value: T, index: number, array: T[]) => R): Array<R | T> {\n        return fn ? this.data.map(fn) : this.data as any;\n    }\n}\n\n\n\nexport function query<T>(data: T[]): Query<T> {\n    return new Query<T>(data);\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate         from '../red-agate';\nimport { WebColor }          from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue } from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }            from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\n\n\n\nexport const CONTEXT_SVG_CANVAS = 'CONTEXT_SVG_CANVAS';\nexport const CONTEXT_SVG_PATH   = 'CONTEXT_SVG_PATH';\nexport const CONTEXT_ASSET_     = 'CONTEXT_ASSET_';\n\n\n\nexport interface ShapeBaseProps extends RedAgate.ComponentProps {\n    x?: number;\n    y?: number;\n    margin?: number;\n}\n\nexport interface ShapeProps extends ShapeBaseProps {\n    fill?: boolean;\n    stroke?: boolean;\n    fillColor?: string | WebColor;\n    strokeColor?: string | WebColor;\n    lineCap?: \"butt\" | \"round\" | \"square\";\n    lineJoin?: \"miter\" | \"round\" | \"bevel\";\n    lineWidth?: number;\n    miterLimit?: number;\n    lineDash?: number[];\n    lineDashOffset?: number;\n}\n\nexport interface AmbientProps extends ShapeProps {\n    scaleX?: number;\n    scaleY?: number;\n    rotationDeg?: number;\n    tm?: number[];\n}\n\n\n\nexport const shapePropsDefault: ShapeProps = {\n    x: 0,\n    y: 0,\n    margin: 0,\n};\n\nexport abstract class Shape<T extends ShapeProps> extends RedAgate.RedAgatePhantomComponent<T> {\n    protected isAmbient = false;\n    protected isPathFragment = false;\n    protected isGroup = true;\n\n    public constructor(props: T) {\n        super(props);\n    }\n\n    protected initializeCanvas(canvas: SvgCanvas) {\n        if (this.props.fill || this.isAmbient) {\n            if (this.props.fillColor !== void 0 && this.props.fillColor !== null)\n                canvas.fillStyle = this.props.fillColor.toString();\n        }\n        if (this.props.stroke || this.isAmbient) {\n            if (this.props.strokeColor !== void 0 && this.props.strokeColor !== null)\n                canvas.strokeStyle = this.props.strokeColor.toString();\n            if (this.props.lineCap !== void 0 && this.props.lineCap !== null)\n                canvas.lineCap = this.props.lineCap;\n            if (this.props.lineJoin !== void 0 && this.props.lineJoin !== null)\n                canvas.lineJoin = this.props.lineJoin;\n            if (this.props.lineWidth !== void 0 && this.props.lineWidth !== null)\n                canvas.lineWidth = this.props.lineWidth;\n            if (this.props.miterLimit !== void 0 && this.props.miterLimit !== null)\n                canvas.miterLimit = this.props.miterLimit;\n            if (this.props.lineDash !== void 0 && this.props.lineDash !== null)\n                canvas.setLineDash(this.props.lineDash);\n            if (this.props.lineDashOffset !== void 0 && this.props.lineDashOffset !== null)\n                canvas.lineDashOffset = this.props.lineDashOffset;\n        }\n        if (this.isAmbient) {\n            const ambientProps = this.props as AmbientProps;\n            if (ambientProps.margin || ambientProps.x || ambientProps.y) {\n                canvas.translate(\n                    (ambientProps.margin || 0) + (ambientProps.x || 0),\n                    (ambientProps.margin || 0) + (ambientProps.y || 0)\n                    );\n            }\n            if (ambientProps.scaleX !== void 0 && ambientProps.scaleX !== null) {\n                canvas.scale(ambientProps.scaleX, 1);\n            }\n            if (ambientProps.scaleY !== void 0 && ambientProps.scaleY !== null) {\n                canvas.scale(1, ambientProps.scaleY);\n            }\n            if (ambientProps.rotationDeg !== void 0 && ambientProps.rotationDeg !== null) {\n                canvas.rotate(ambientProps.rotationDeg * Math.PI / 180);\n            }\n            if (ambientProps.tm !== void 0 && ambientProps.tm !== null && ambientProps.tm.length >= 6) {\n                canvas.transform(\n                    ambientProps.tm[0],\n                    ambientProps.tm[1],\n                    ambientProps.tm[2],\n                    ambientProps.tm[3],\n                    ambientProps.tm[4],\n                    ambientProps.tm[5]\n                    );\n            }\n        }\n    }\n\n    protected setGraphicState(canvas: SvgCanvas) {\n        if (this.isGroup) {\n            canvas.beginGroup();\n        }\n        canvas.save();\n        canvas.translate(\n            (this.props.margin as number) + (this.props.x as number),\n            (this.props.margin as number) + (this.props.y as number)\n        );\n        this.initializeCanvas(canvas);\n    }\n\n    protected restoreGraphicState(canvas: SvgCanvas) {\n        canvas.restore();\n        if (this.isGroup) {\n            canvas.endGroup();\n        }\n    }\n\n    protected fillStrokePaths(canvas: SvgCanvas) {\n        if (this.props.fill && this.props.stroke) {\n            canvas.fillStroke();\n        }\n        else if (this.props.fill)   canvas.fill();\n        else if (this.props.stroke) canvas.stroke();\n        if (this.props.fill || this.props.stroke) {\n            canvas.beginPath();\n        }\n    }\n\n    public beforeRender(contexts: Map<string, any>) {\n        this.isPathFragment = this.getContext(contexts, CONTEXT_SVG_PATH) || false;\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (canvas) {\n            if (!this.isPathFragment) {\n                this.setGraphicState(canvas);\n            }\n        }\n    }\n\n    public afterRender(contexts: Map<string, any>) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (canvas) {\n            if (!this.isPathFragment) {\n                this.fillStrokePaths(canvas);\n                this.restoreGraphicState(canvas);\n            }\n        }\n    }\n}\n\n\n\nexport interface ImagingShapeBasePropsMixin {\n    asImgTag?: boolean;\n    asElementStyle?: boolean;\n    asDataUrl?: boolean;\n    unit?: string;\n}\n\nexport interface ImagingShapeBaseProps extends ShapeBaseProps, ImagingShapeBasePropsMixin {\n}\n\nexport interface ImagingShapeProps extends ShapeProps, ImagingShapeBasePropsMixin {\n}\n\nexport function renderSvgCanvas(props: ImagingShapeBaseProps, canvas: SvgCanvas, imageWidth: number, imageHeight: number): string {\n    if (props.asImgTag) {\n        return (\n            `<img style=\"width:${\n                imageWidth}${props.unit};height:${\n                    imageHeight}${props.unit};\" src=\"${\n                canvas.toDataUrl(new Rect2D(0, 0, imageWidth, imageHeight), props.unit, 120)}\"${\n                RedAgate.htmlAttributesRenderer(props, void 0, new Set([])).attrs}></img>`\n        );\n    } else if (props.asElementStyle) {\n        return `${\n            props.style ? RedAgate.elementStyleRenderer(props.style) : ''}${\n            RedAgate.elementStyleRenderer({'background-image': `url(\"${\n                canvas.toDataUrl(new Rect2D(0, 0, imageWidth, imageHeight), props.unit, 0)}\")`})\n        }`;\n    } else if (props.asDataUrl) {\n        return canvas.toDataUrl(new Rect2D(0, 0, imageWidth, imageHeight), props.unit, 0);\n    } else {\n        return canvas.render(new Rect2D(0, 0, imageWidth, imageHeight), props.unit);\n    }\n}\n\nexport function toImgTag(component: RedAgate.RedAgatePhantomComponent<ImagingShapeBaseProps>): string {\n    const propsNew = Object.assign({}, component.props);\n    propsNew.asImgTag = true;\n    propsNew.asElementStyle = false;\n    propsNew.asDataUrl = false;\n    const propsSaved = component.props;\n\n    component.props = propsNew;\n    const r = RedAgate.renderAsHtml_noDefer(RedAgate.createElementFromComponentInstance(component));\n    component.props = propsSaved;\n    return r;\n}\n\nexport function toElementStyle(component: RedAgate.RedAgatePhantomComponent<ImagingShapeBaseProps>): string {\n    const propsNew = Object.assign({}, component.props);\n    propsNew.asImgTag = false;\n    propsNew.asElementStyle = true;\n    propsNew.asDataUrl = false;\n    const propsSaved = component.props;\n\n    component.props = propsNew;\n    const r = RedAgate.renderAsHtml_noDefer(RedAgate.createElementFromComponentInstance(component));\n    component.props = propsSaved;\n    return r;\n}\n\nexport function toDataUrl(component: RedAgate.RedAgatePhantomComponent<ImagingShapeBaseProps>): string {\n    const propsNew = Object.assign({}, component.props);\n    propsNew.asImgTag = false;\n    propsNew.asElementStyle = false;\n    propsNew.asDataUrl = true;\n    const propsSaved = component.props;\n\n    component.props = propsNew;\n    const r = RedAgate.renderAsHtml_noDefer(RedAgate.createElementFromComponentInstance(component));\n    component.props = propsSaved;\n    return r;\n}\n\nexport function toSvg(component: RedAgate.RedAgatePhantomComponent<ImagingShapeBaseProps>): string {\n    const propsNew = Object.assign({}, component.props);\n    propsNew.asImgTag = false;\n    propsNew.asElementStyle = false;\n    propsNew.asDataUrl = false;\n    const propsSaved = component.props;\n\n    component.props = propsNew;\n    const r = RedAgate.renderAsHtml_noDefer(RedAgate.createElementFromComponentInstance(component));\n    component.props = propsSaved;\n    return r;\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate from './red-agate';\n\n\n\n// TODO: S formal argument type do not be applied to actual argument type on TSC 2.6.2.\n//       so set S to any.\nexport type RepeatRepeater<S> = (times: number, scope: /*S*/any) => RedAgate.RedAgateNode;\n\nexport interface RepeatProps<S> extends RedAgate.ComponentProps {\n    times: number;\n    scope?: S;\n    children?: RepeatRepeater<S> | RedAgate.RedAgateNode | RedAgate.RedAgateNode[];\n}\n\nexport class Repeat<S> extends RedAgate.RedAgateComponent<RepeatProps<S>> {\n    public constructor(props: RepeatProps<S>) {\n        super(props);\n    }\n\n    public transform(): RedAgate.RedAgateNode {\n        const repeater: RepeatRepeater<S> =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        const a: RedAgate.RedAgateNode[] = [];\n        const scope = Object.assign({}, this.props.scope || {});\n        for (let i = 0; i < this.props.times; i++) {\n            a.push(repeater(i, scope));\n        }\n        return a;\n    }\n}\n\n\n// TODO: T and S formal argument types do not be applied to actual argument types on TSC 2.6.2.\n//       so set T and S to any.\nexport type ForEachRepeater<T, S> = (v: /*T*/any, i: number, items: /*T*/any[], scope: /*S*/any) => RedAgate.RedAgateNode;\n\nexport interface ForEachProps<T, S> extends RedAgate.ComponentProps {\n    items: T[];\n    scope?: S;\n    children?: ForEachRepeater<T, S> | RedAgate.RedAgateNode | RedAgate.RedAgateNode[];\n}\n\nexport class ForEach<T, S> extends RedAgate.RedAgateComponent<ForEachProps<T, S>> {\n    public constructor(props: ForEachProps<T, S>) {\n        super(props);\n    }\n\n    public transform() {\n        const repeater: ForEachRepeater<T, S> =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        const a: RedAgate.RedAgateNode[] = [];\n        const scope = Object.assign({}, this.props.scope || {});\n        for (let i = 0; i < this.props.items.length; i++) {\n            a.push(repeater(this.props.items[i], i, this.props.items, scope));\n        }\n        return a;\n    }\n}\n\n\n\nexport interface IfProps extends RedAgate.ComponentProps {\n    condition: boolean;\n}\n\nexport class If extends RedAgate.RedAgateComponent<IfProps> {\n    public constructor(props: IfProps) {\n        super(props);\n    }\n\n    public transform() {\n        if (this.props.condition) return this.props.children;\n        else return [];\n    }\n}\n\n\n\nexport interface DoProps extends RedAgate.ComponentProps {\n}\n\nexport class Do extends RedAgate.RedAgateComponent<DoProps> {\n    public constructor(props: DoProps) {\n        super(props);\n        const fn: () => void =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        fn();\n    }\n\n    public earlyConstruct() {}\n\n    public transform() {\n        return [];\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return ``;\n    }\n}\n\n\n\nexport interface FacetProps extends RedAgate.FragmentProps {\n}\n\nexport class Facet extends RedAgate.Fragment {\n    public constructor(props: FacetProps) {\n        super(props);\n    }\n}\n\nexport type TemplateProps = FacetProps;\nexport const Template = Facet;\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/** @jsx RedAgate.createElement */\nimport * as RedAgate from './red-agate';\n\n\n\nexport interface HtmlProps extends RedAgate.ComponentProps {\n    [attrName: string]: any;\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Html4_01_Strict extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Html4_01_Transitional extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Html4_01_Frameset extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Frameset//EN\" \"http://www.w3.org/TR/html4/frameset.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Xhtml1_0_Strict extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Xhtml1_0_Transitional extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\n// tslint:disable-next-line:class-name\nexport class Xhtml1_0_Frameset extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Frameset//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\"><html${\n            x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\nexport class Html5 extends RedAgate.RedAgatePhantomComponent<HtmlProps> {\n    public constructor(props: HtmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const x = RedAgate.htmlAttributesRenderer(this.props);\n        return `<!DOCTYPE html><html${x.attrs}>${x.children}${children}</html>`;\n    }\n}\n\n\n\nexport interface XmlProps extends RedAgate.ComponentProps {\n    version?: string;\n    encoding?: string;\n}\n\nexport class Xml extends RedAgate.RedAgatePhantomComponent<XmlProps> {\n    public constructor(props: XmlProps) {\n        super(props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return `<?xml version=\"${typeof this.props.version === 'string' ? this.props.version : '1.0'}\" encoding=\"${\n            typeof this.props.encoding === 'string' ? this.props.encoding : 'UTF-8'}\"?>${children}`;\n    }\n}\n\n\n\nexport interface HtmlImpositionProps<T, S> extends RedAgate.ComponentProps {\n    items: T[];\n    scope?: S;\n    paperWidth: number;\n    paperHeight: number;\n    cols: number;\n    rows: number;\n}\n\nexport class HtmlImposition<T, S> extends RedAgate.RedAgateComponent<HtmlImpositionProps<T, S>> {\n    public constructor(props: HtmlImpositionProps<T, S>) {\n        super(props);\n    }\n\n    public transform() {\n        const repeater: (v: T, i: number, items: T[], scope: any) => RedAgate.RedAgateNode =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        const a: RedAgate.RedAgateNode[] = [];\n        const scope = Object.assign({}, this.props.scope || {});\n        for (let i = 0; i < this.props.items.length; i++) {\n            a.push(\n                <div style={{\n                    position: 'absolute',\n                    left: (this.props.paperWidth  / this.props.cols) * (i % this.props.cols),\n                    top:  (this.props.paperHeight / this.props.rows) * (Math.floor(i / this.props.cols))\n                }}\n                >{repeater(this.props.items[i], i, this.props.items, scope)}</div>\n            );\n        }\n        return a;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\n/** @jsx RedAgate.createElement */\nimport * as RedAgate          from './red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { TextEncoding }       from 'red-agate-util/modules/convert/TextEncoding';\nimport { FileFetcher }        from 'red-agate-util/modules/io/FileFetcher';\nimport { Logger }             from 'red-agate-util/modules/io/Logger';\nimport { ShapeBaseProps,\n         ShapeProps,\n         shapePropsDefault,\n         Shape,\n         AmbientProps,\n         ImagingShapeBasePropsMixin,\n         renderSvgCanvas,\n         toImgTag,\n         toElementStyle,\n         toDataUrl,\n         toSvg,\n         CONTEXT_SVG_CANVAS,\n         CONTEXT_SVG_PATH }   from './tags/Shape';\n\n\n\nexport interface SvgProps extends ShapeBaseProps, ImagingShapeBasePropsMixin {\n    width: number;\n    height: number;\n    unit?: string;\n    alt?: string;\n    template?: string;\n    templateUrl?: string;\n}\n\nexport class Svg extends RedAgate.RedAgatePhantomComponent<SvgProps> {\n    public constructor(props: SvgProps) {\n        super(props);\n        if (props.template) {\n            this.template = props.template;\n        }\n    }\n\n    private template: string | null = null;\n\n    public defer() {\n        if (this.template !== null) {\n            return Promise.resolve();\n        } else if (this.props.templateUrl === void 0 || this.props.templateUrl === null || this.props.templateUrl === '') {\n            return Promise.resolve();\n        } else {\n            const url = this.props.templateUrl;\n            const promise = new Promise<void>((resolve, reject) => {\n                try {\n                    FileFetcher.fetchLocation(url)\n                    .then((result) => {\n                        this.template = TextEncoding.decodeUtf8(result.data);\n                        resolve();\n                    })\n                    .catch((e) => {\n                        Logger.log(\"Svg#defer:catch:\" + e);\n                        reject(e);\n                    });\n                } catch (e) {\n                    Logger.log(\"Svg#defer:catch:\" + e);\n                    reject(e);\n                }\n            });\n            return promise;\n        }\n    }\n\n    public toImgTag(): string {\n        return toImgTag(this);\n    }\n\n    public toElementStyle(): string {\n        return toElementStyle(this);\n    }\n\n    public toDataUrl(): string {\n        return toDataUrl(this);\n    }\n\n    public toSvg(): string {\n        return toSvg(this);\n    }\n\n    public toRendered(): string {\n        return RedAgate.renderAsHtml_noDefer(this);\n    }\n\n    public beforeRender(contexts: Map<string, any>) {\n        this.setContext(contexts, CONTEXT_SVG_CANVAS,\n            this.template === null ? new SvgCanvas() : SvgCanvas.fromTemplate(this.template)\n        );\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        return renderSvgCanvas(this.props, canvas, this.props.width, this.props.height);\n    }\n\n    public afterRender(contexts: Map<string, any>) {\n        this.unsetContext(contexts, CONTEXT_SVG_CANVAS);\n    }\n}\n\n\n\nexport const ambientPropsDefault: AmbientProps = Object.assign({}, shapePropsDefault, {\n});\n\nexport class Ambient extends Shape<AmbientProps> {\n    public constructor(props: AmbientProps) {\n        super(Object.assign({}, ambientPropsDefault, props));\n        this.isAmbient = true;\n        this.isGroup = false;\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return ``;\n    }\n}\n\n\n\nexport interface ArcProps extends ShapeProps {\n    r: number;\n    startDeg: number;\n    endDeg: number;\n    anticlockwise?: boolean;\n}\n\nexport const arcPropsDefault: ArcProps = Object.assign({}, shapePropsDefault, {\n    r: 1,\n    startDeg: 0,\n    endDeg: 180,\n    anticlockwise: true\n});\n\nexport class Arc extends Shape<ArcProps> {\n    public constructor(props: ArcProps) {\n        super(Object.assign({}, arcPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.arc(\n            this.props.r,\n            this.props.r,\n            this.props.r,\n            this.props.startDeg / 180 * Math.PI, this.props.endDeg / 180 * Math.PI,\n            this.props.anticlockwise\n            );\n        return ``;\n    }\n}\n\n\n\nexport type CanvasRenderFn = (canvas: SvgCanvas) => void;\n\nexport interface CanvasProps extends ShapeProps {\n    children?: CanvasRenderFn | RedAgate.RedAgateNode | RedAgate.RedAgateNode[];\n}\n\nexport const canvasPropsDefault: CanvasProps = Object.assign({}, shapePropsDefault, {\n});\n\nexport class Canvas extends Shape<CanvasProps> {\n    public constructor(props: CanvasProps) {\n        super(Object.assign({}, canvasPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        const fn: CanvasRenderFn =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        fn(canvas);\n        return ``;\n    }\n}\n\n\n\nexport interface CircleProps extends ShapeProps {\n    r: number;\n    anticlockwise?: boolean;\n}\n\nexport const circlePropsDefault: CircleProps = Object.assign({}, shapePropsDefault, {\n    r: 1,\n    anticlockwise: true\n});\n\nexport class Circle extends Shape<CircleProps> {\n    public constructor(props: CircleProps) {\n        super(Object.assign({}, circlePropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.arc(\n            this.props.r,\n            this.props.r,\n            this.props.r,\n            0, 2 * Math.PI,\n            this.props.anticlockwise\n            );\n        canvas.closePath();\n        return ``;\n    }\n}\n\n\n\nexport interface CurveProps extends ShapeProps {\n    move?: boolean;\n    points: number[];\n}\n\nexport const curvePropsDefault: CurveProps = Object.assign({}, shapePropsDefault, {\n    move: true,\n    points: []\n});\n\nexport class Curve extends Shape<CurveProps> {\n    public constructor(props: CurveProps) {\n        super(Object.assign({}, curvePropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (this.props.move) canvas.moveTo(this.props.points[0], this.props.points[1]);\n        for (let i = this.props.move ? 2 : 0; i < this.props.points.length; i += 6) {\n            canvas.bezierCurveTo(\n                this.props.points[i + 0],\n                this.props.points[i + 1],\n                this.props.points[i + 2],\n                this.props.points[i + 3],\n                this.props.points[i + 4],\n                this.props.points[i + 5]\n                );\n        }\n        return ``;\n    }\n}\n\n\n\nexport interface GridLineProps extends ShapeProps {\n    startX?: number;\n    endX?: number;\n    startY?: number;\n    endY?: number;\n    gridSize?: number;\n    bleed?: number;\n}\nexport interface GridLinePropsNoUndefined extends ShapeProps {\n    startX: number;\n    endX: number;\n    startY: number;\n    endY: number;\n    gridSize: number;\n    bleed: number;\n}\n\nexport const gridLinePropsDefault: GridLinePropsNoUndefined = Object.assign({}, shapePropsDefault, {\n    lineWidth: 0.1,\n    fill: false,\n    stroke: true,\n    strokeColor: \"#ccc\",\n    startX: 0,\n    endX: 210,\n    startY: 0,\n    endY: 296,\n    gridSize: 5,\n    bleed: 13\n});\n\nexport class GridLine extends Shape<GridLineProps> {\n    public constructor(props: GridLineProps) {\n        super(Object.assign({}, gridLinePropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const props = this.props as GridLinePropsNoUndefined;\n\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        const m1 = Math.ceil(props.bleed / props.gridSize) * props.gridSize;\n        const mX = Math.ceil((props.endX - props.startX + props.bleed) / props.gridSize) * props.gridSize;\n        const mY = Math.ceil((props.endY - props.startY + props.bleed) / props.gridSize) * props.gridSize;\n\n        for (let dx = props.startX - m1; dx <= mX; dx += props.gridSize) {\n            canvas.moveTo(props.startX + dx, props.startY - m1);\n            canvas.lineTo(props.startX + dx, props.startY + mY);\n        }\n        for (let dy = props.startY - m1; dy <= mY; dy += props.gridSize) {\n            canvas.moveTo(props.startX - m1, props.startY + dy);\n            canvas.lineTo(props.startX + mX, props.startY + dy);\n        }\n\n        canvas.rect(props.startX || 0, props.startY || 0, props.endX - props.startX, props.endY - props.startY);\n        return ``;\n    }\n}\n\n\n\nexport interface GroupProps extends ShapeProps {\n    scaleX?: number;\n    scaleY?: number;\n    rotationDeg?: number;\n    tm?: number[];\n}\n\nexport class Group extends Shape<GroupProps> {\n    public constructor(props: GroupProps) {\n        super(Object.assign({}, {}, props));\n        this.isAmbient = true;\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return ``;\n    }\n}\n\n\n\nexport interface LineProps extends ShapeProps {\n    move?: boolean;\n    points: number[];\n}\n\nexport const linePropsDefault: LineProps = Object.assign({}, shapePropsDefault, {\n    move: true,\n    points: []\n});\n\nexport class Line extends Shape<LineProps> {\n    public constructor(props: LineProps) {\n        super(Object.assign({}, linePropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (this.props.move) canvas.moveTo(this.props.points[0], this.props.points[1]);\n        for (let i = this.props.move ? 2 : 0; i < this.props.points.length; i += 2) {\n            canvas.lineTo(this.props.points[i], this.props.points[i + 1]);\n        }\n        return ``;\n    }\n}\n\n\n\nexport interface PathProps extends ShapeProps {\n    close?: boolean;\n    clip?: boolean;\n    width?: number;\n    height?: number;\n}\n\nexport const pathPropsDefault: PathProps = Object.assign({}, shapePropsDefault, {\n    close: false,\n    clip: false,\n    width: 10,\n    height: 10,\n    paths: []\n});\n\nexport class Path extends Shape<PathProps> {\n    public constructor(props: PathProps) {\n        super(Object.assign({}, pathPropsDefault, props));\n    }\n\n    public beforeRender(contexts: Map<string, any>) {\n        this.setContext(contexts, CONTEXT_SVG_PATH, true);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return ``;\n    }\n\n    public afterRender(contexts: Map<string, any>) {\n        this.unsetContext(contexts, CONTEXT_SVG_PATH);\n    }\n}\n\n\n\nexport interface PieProps extends ShapeProps {\n    r: number;\n    startDeg: number;\n    endDeg: number;\n    anticlockwise?: boolean;\n}\n\nexport const piePropsDefault: PieProps = Object.assign({}, shapePropsDefault, {\n    r: 1,\n    startDeg: 0,\n    endDeg: 180,\n    anticlockwise: true\n});\n\nexport class Pie extends Shape<PieProps> {\n    public constructor(props: PieProps) {\n        super(Object.assign({}, piePropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.moveTo(this.props.r, this.props.r);\n        canvas.arc(\n            this.props.r,\n            this.props.r,\n            this.props.r,\n            this.props.startDeg / 180 * Math.PI, this.props.endDeg / 180 * Math.PI,\n            this.props.anticlockwise\n            );\n        canvas.closePath();\n        return ``;\n    }\n}\n\n\n\nexport interface PolygonProps extends ShapeProps {\n    points: number[];\n}\n\nexport const polygonPropsDefault: PolygonProps = Object.assign({}, shapePropsDefault, {\n    points: []\n});\n\nexport class Polygon extends Shape<PolygonProps> {\n    public constructor(props: PolygonProps) {\n        super(Object.assign({}, polygonPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.moveTo(this.props.points[0], this.props.points[1]);\n        for (let i = 2; i < this.props.points.length; i += 2) {\n            canvas.lineTo(this.props.points[i], this.props.points[i + 1]);\n        }\n        canvas.closePath();\n        return ``;\n    }\n}\n\n\n\nexport interface RectProps extends ShapeProps {\n    width: number;\n    height: number;\n}\n\nexport const rectPropsDefault: RectProps = Object.assign({}, shapePropsDefault, {\n    width: 10,\n    height: 10\n});\n\nexport class Rect extends Shape<RectProps> {\n    public constructor(props: RectProps) {\n        super(Object.assign({}, rectPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.rect(0, 0, this.props.width, this.props.height);\n        return ``;\n    }\n}\n\n\n\nexport interface RoundRectProps extends ShapeProps {\n    width: number;\n    height: number;\n    r: number;\n}\n\nexport const roundRectPropsDefault: RoundRectProps = Object.assign({}, shapePropsDefault, {\n    width: 10,\n    height: 10,\n    r: 1\n});\n\nexport class RoundRect extends Shape<RoundRectProps> {\n    public constructor(props: RoundRectProps) {\n        super(Object.assign({}, roundRectPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.roundRect(0, 0, this.props.width, this.props.height, this.props.r);\n        return ``;\n    }\n}\n\n\n\nexport interface SvgAssetFragmentProps extends ShapeProps {\n}\n\nexport const svgAssetFragmentPropsDefault: SvgFragmentProps = Object.assign({}, shapePropsDefault, {\n});\n\nexport class SvgAssetFragment extends Shape<SvgAssetFragmentProps> {\n    public constructor(props: CanvasProps) {\n        super(Object.assign({}, canvasPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.registerCustomAsset(children);\n        return ``;\n    }\n}\n\n\n\nexport interface SvgFragmentProps extends ShapeProps {\n}\n\nexport const svgFragmentPropsDefault: SvgFragmentProps = Object.assign({}, shapePropsDefault, {\n});\n\nexport class SvgFragment extends Shape<SvgFragmentProps> {\n    public constructor(props: CanvasProps) {\n        super(Object.assign({}, canvasPropsDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        canvas.appendCustomContent(children);\n        return ``;\n    }\n}\n\n\n\nexport interface TextProps extends ShapeProps, SvgTextAttributes {\n    font?: string;\n    textAlign?: TextAlignValue;\n    textBaseline?: TextBaselineValue;\n    text: string;\n}\n\nexport const textPropsDefault: TextProps = Object.assign({}, shapePropsDefault, {\n    text: \"\"\n}) as any;\n\nexport class Text extends Shape<TextProps> {\n    public constructor(props: TextProps) {\n        super(Object.assign({}, textPropsDefault, props));\n    }\n\n    protected fillStrokeText(canvas: SvgCanvas) {\n        if (this.props.font)         canvas.font         = this.props.font;\n        if (this.props.textAlign)    canvas.textAlign    = this.props.textAlign;\n        if (this.props.textBaseline) canvas.textBaseline = this.props.textBaseline;\n\n        if      (this.props.fill && this.props.stroke) canvas.fillStrokeText(this.props.text, 0, 0, this.props);\n        else if (this.props.fill                     ) canvas.      fillText(this.props.text, 0, 0, this.props);\n        else if (                   this.props.stroke) canvas.    strokeText(this.props.text, 0, 0, this.props);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return ``;\n    }\n\n    public afterRender(contexts: Map<string, any>) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (!this.isPathFragment) {\n            this.fillStrokeText(canvas);\n            this.restoreGraphicState(canvas);\n        }\n    }\n}\n\n\n\nexport interface SvgImpositionProps<T, S> extends RedAgate.ComponentProps {\n    items: T[];\n    scope?: S;\n    paperWidth: number;\n    paperHeight: number;\n    cols: number;\n    rows: number;\n    itemRotationDeg?: number | number[/* i */];\n    itemTranslation?: number[/* x, y */] | number[/* i */][/* x, y */];\n    itemScale?: number[/* x, y */] | number[/* i */][/* x, y */];\n}\n\nexport class SvgImposition<T, S> extends RedAgate.RedAgateComponent<SvgImpositionProps<T, S>> {\n    public constructor(props: SvgImpositionProps<T, S>) {\n        super(props);\n    }\n\n    public transform() {\n        const repeater: (v: T, i: number, items: T[], scope: any) => RedAgate.RedAgateNode =\n            (Array.isArray(this.props.children) ?\n                (this.props.children as any[]).find(x => typeof x === 'function') :\n                this.props.children) as any;\n        const a: RedAgate.RedAgateNode[] = [];\n        const scope = Object.assign({}, this.props.scope || {});\n        for (let i = 0; i < this.props.items.length; i++) {\n            a.push(\n                <Group\n                    x={((this.props.paperWidth  / this.props.cols) * (i % this.props.cols)) +\n                        (Array.isArray(this.props.itemTranslation) ?\n                            (Array.isArray(this.props.itemTranslation[i]) ?\n                                this.props.itemTranslation[i][0] || 0 : this.props.itemTranslation[0] || 0) :\n                            0)}\n                    y={((this.props.paperHeight / this.props.rows) * (Math.floor(i / this.props.cols))) +\n                        (Array.isArray(this.props.itemTranslation) ?\n                            (Array.isArray(this.props.itemTranslation[i]) ?\n                                this.props.itemTranslation[i][1] || 0 : this.props.itemTranslation[1] || 0) :\n                            0)}\n                    scaleX={\n                        (Array.isArray(this.props.itemScale) ?\n                            (Array.isArray(this.props.itemScale[i]) ?\n                                this.props.itemScale[i][0] || 1 : this.props.itemScale[0] || 1) :\n                            1)}\n                    scaleY={\n                        (Array.isArray(this.props.itemScale) ?\n                            (Array.isArray(this.props.itemScale[i]) ?\n                                this.props.itemScale[i][1] || 1 : this.props.itemScale[1] || 1) :\n                            1)}\n                    rotationDeg={\n                        Array.isArray(this.props.itemRotationDeg) ?\n                            this.props.itemRotationDeg[i] || 0 :\n                            this.props.itemRotationDeg || 0\n                    }\n                >{repeater(this.props.items[i], i, this.props.items, scope)}</Group>\n            );\n        }\n        return a;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate         from './red-agate';\nimport { ShapeProps,\n         Shape,\n         CONTEXT_SVG_CANVAS,\n         CONTEXT_ASSET_ }    from './tags/Shape';\nimport { Base64 }            from 'red-agate-util/modules/convert/Base64';\nimport { TextEncoding }      from 'red-agate-util/modules/convert/TextEncoding';\nimport { FileFetcher }       from 'red-agate-util/modules/io/FileFetcher';\nimport { Logger }            from 'red-agate-util/modules/io/Logger';\nimport { Uri }               from 'red-agate-util/modules/io/Uri';\nimport { SvgCanvas }         from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\n\n\n\nexport interface AssetProps extends RedAgate.ComponentProps {\n    src: string;\n    contextName: string;\n}\n\nexport class Asset extends RedAgate.RedAgatePhantomComponent<AssetProps> {\n    public constructor(props: AssetProps) {\n        super(props);\n    }\n\n    private content: string = '';\n\n    public defer() {\n        if (this.props.src === void 0 || this.props.src === null || this.props.src === '') {\n            return Promise.resolve();\n        } else {\n            const src = this.props.src;\n            const promise = new Promise<void>((resolve, reject) => {\n                try {\n                    FileFetcher.fetchLocation(this.props.src)\n                    .then((result) => {\n                        let contentType = result.contentType;\n                        if (contentType === null) {\n                            const pathExt = Uri.getPathExt(src);\n                            contentType = Uri.pathExtToContentType(pathExt);\n                            if (contentType === null) {\n                                Logger.log(\"Asset#defer:unknown content-type:\" + pathExt);\n                                reject(\"unknown content-type\");\n                                return;\n                            }\n                        }\n                        this.content = `data:${contentType};base64,` + Base64.encode(result.data, 120);\n                        resolve();\n                    })\n                    .catch((e) => {\n                        Logger.log(\"Asset#defer:catch:\" + e);\n                        reject(e);\n                    });\n                } catch (e) {\n                    Logger.log(\"Asset#defer:catch:\" + e);\n                    reject(e);\n                }\n            });\n            return promise;\n        }\n    }\n\n    public beforeRender(contexts: Map<string, any>) {\n        this.setContext(contexts, CONTEXT_ASSET_ + this.props.contextName, this.content);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        return '';\n    }\n}\n\n\n\nexport interface ImageInstantProps extends ShapeProps {\n    use?: undefined;\n    srcContext?: undefined;\n\n    noDownload?: true;\n\n    src: string;\n    unit?: string;\n    width: number;\n    height: number;\n    asAsset?: false;\n\n    alt?: string;\n    ismap?: true;\n    longdesc?: string;\n    sizes?: string;\n    usemap?: string;\n}\n\nexport interface ImageInstantFromCtxProps extends ShapeProps {\n    use?: undefined;\n    srcContext: string;\n\n    noDownload?: true;\n\n    src?: undefined;\n    unit?: string;\n    width: number;\n    height: number;\n    asAsset?: false;\n\n    alt?: string;\n    ismap?: true;\n    longdesc?: string;\n    sizes?: string;\n    usemap?: string;\n}\n\nexport interface ImageAssetProps extends ShapeProps {\n    id: string;\n    use?: undefined;\n    srcContext?: undefined;\n\n    noDownload?: undefined;\n\n    src: string;\n    unit?: string;\n    width?: undefined;\n    height?: undefined;\n    asAsset: true;\n\n    alt?: string;\n    ismap?: true;\n    longdesc?: string;\n    sizes?: string;\n    usemap?: string;\n}\n\nexport interface ImageAssetFromCtxProps extends ShapeProps {\n    id: string;\n    use?: undefined;\n    srcContext: string;\n\n    noDownload?: undefined;\n\n    src?: undefined;\n    unit?: string;\n    width?: undefined;\n    height?: undefined;\n    asAsset: true;\n\n    alt?: string;\n    ismap?: true;\n    longdesc?: string;\n    sizes?: string;\n    usemap?: string;\n}\n\nexport interface ImageRefProps extends ShapeProps {\n    use: string;\n    srcContext?: undefined;\n\n    noDownload?: undefined;\n\n    src?: undefined;\n    unit?: string;\n    width: number;\n    height: number;\n    asAsset?: false;\n\n    alt?: string;\n    ismap?: true;\n    longdesc?: string;\n    sizes?: string;\n    usemap?: string;\n}\n\nexport type ImageProps = ImageInstantProps | ImageInstantFromCtxProps | ImageAssetProps | ImageAssetFromCtxProps | ImageRefProps;\n\nexport class Image extends Shape<ImageProps> {\n    public constructor(props: ImageProps) {\n        super(props);\n    }\n\n    public transform() {\n        return (\n            (this.props.children !== null && this.props.children !== void 0) ?\n            this.props.children : []\n        );\n    }\n\n    private content: string = '';\n\n    public defer() {\n        if (this.props.use !== void 0 && this.props.use !== null && this.props.use !== \"\") {\n            return Promise.resolve();\n        } else if (this.content !== null && this.content !== void 0 && this.content !== \"\") {\n            return Promise.resolve();\n        } else if (this.props.src === null || this.props.src === void 0 || this.props.src === \"\") {\n            return Promise.resolve();\n        } else if (this.props.noDownload) {\n            this.content = this.props.src;\n            return Promise.resolve();\n        } else {\n            const src = this.props.src;\n            const promise = new Promise<void>((resolve, reject) => {\n                FileFetcher.fetchLocation(src)\n                .then((result) => {\n                    let contentType = result.contentType;\n                    if (contentType === null) {\n                        const pathExt = Uri.getPathExt(src);\n                        contentType = Uri.pathExtToContentType(pathExt);\n                        if (contentType === null) {\n                            Logger.log(\"Image#defer:unknown content-type:\" + pathExt);\n                            reject(\"unknown content-type\");\n                            return;\n                        }\n                    }\n                    this.content = `data:${contentType};base64,` + Base64.encode(result.data, 120);\n                    resolve();\n                })\n                .catch((e) => {\n                    Logger.log(\"Image#defer:\" + e);\n                    reject(e);\n                });\n            });\n            return promise;\n        }\n    }\n\n    private renderAsHtml(contexts: Map<string, any>): string {\n        let r = '';\n        if (this.props.asAsset) {\n            r = `<script>(Function(\"return this\")())['#img_asset_mb3vhWjBUxDX__${\n                this.props.id}']=\"${\n                this.content.replace(/\\r/g, '').replace(/\\n/g, '')}\";</script>`;\n        } else {\n            if (this.props.use !== void 0 && this.props.use !== null && this.props.use !== \"\") {\n                const id = this.props.id || `__img_node_id_mb3vhWjBUxDX_${this.props.__nodeId}`;\n                r = `<img id=\"${id}\" style=\"width:${\n                    this.props.width}${this.props.unit || 'px'};height:${\n                    this.props.height}${this.props.unit || 'px'};\"${\n                    RedAgate.htmlAttributesRenderer(this.props, new Set(['id', 'src', 'unit', 'width', 'height'])).attrs\n                    }></img><script>document.getElementById(\"${\n                    id}\").src=(Function(\"return this\")())['#img_asset_mb3vhWjBUxDX__${this.props.use}'];</script>`;\n            } else {\n                r = `<img src=\"${this.content}\" style=\"width:${\n                    this.props.width}${this.props.unit || 'px'};height:${\n                    this.props.height}${this.props.unit || 'px'};\"${\n                    RedAgate.htmlAttributesRenderer(this.props, new Set(['src', 'unit', 'width', 'height'])).attrs}></img>`;\n            }\n        }\n        return r;\n    }\n\n    private renderAsSvg(canvas: SvgCanvas): void {\n        const img = (this.props.use !== void 0 && this.props.use !== null && this.props.use !== \"\") ?\n            \"#\" + this.props.use :\n            canvas.registerImage({url: this.content, x: 0, y: 0, width: 1, height: 1}, this.props.id);\n\n        if (! this.props.asAsset) {\n            canvas.drawImage(img, this.props.x || 0, this.props.y || 0, this.props.width, this.props.height);\n        }\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n\n        if (this.props.srcContext !== void 0 && this.props.srcContext !== null && this.props.srcContext !== \"\") {\n            this.content = this.getContext(contexts, CONTEXT_ASSET_ + this.props.srcContext);\n        }\n\n        if (canvas) {\n            this.renderAsSvg(canvas);\n            return '';\n        } else {\n            return this.renderAsHtml(contexts);\n        }\n    }\n}\n\n\n\nexport interface ScriptProps extends RedAgate.ComponentProps {\n    noDownload?: true;\n\n    src: string;\n    text?: string;\n    type?: string;\n\n    async?: true;\n    defer?: true;\n    crossorigin?: 'anonymous' | 'use-credentials';\n}\n\nexport class Script extends RedAgate.RedAgatePhantomComponent<ScriptProps> {\n    public constructor(props: ScriptProps) {\n        super(props);\n    }\n\n    private content: string = '';\n\n    public defer() {\n        if (this.props.src === void 0 || this.props.src === null || this.props.src === '') {\n            return Promise.resolve();\n        } else if (this.props.noDownload) {\n            return Promise.resolve();\n        } else {\n            const promise = new Promise<void>((resolve, reject) => {\n                try {\n                    FileFetcher.fetchLocation(this.props.src)\n                    .then((result) => {\n                        this.content = TextEncoding.decodeUtf8(result.data);\n                        resolve();\n                    })\n                    .catch((e) => {\n                        Logger.log(\"Script#defer:catch:\" + e);\n                        reject(e);\n                    });\n                } catch (e) {\n                    Logger.log(\"Script#defer:catch:\" + e);\n                    reject(e);\n                }\n            });\n            return promise;\n        }\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        let r = '';\n        if (this.props.noDownload) {\n            r = `<script${RedAgate.htmlAttributesRenderer(this.props, new Set([])).attrs}></script>`;\n        } else {\n            r = `<script${RedAgate.htmlAttributesRenderer(this.props, new Set(['src'])).attrs}>${this.content}</script>`;\n        }\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (canvas) {\n            canvas.registerCustomAsset(r);\n            return '';\n        } else {\n            return r;\n        }\n    }\n}\n\n\n\nexport interface StyleProps extends RedAgate.ComponentProps {\n    noDownload?: true;\n\n    src: string;\n    type?: string;\n    media?: string;\n    nonce?: string;\n    title?: string;\n}\n\nexport class Style extends RedAgate.RedAgatePhantomComponent<StyleProps> {\n    public constructor(props: StyleProps) {\n        super(props);\n    }\n\n    private content: string = '';\n\n    public defer() {\n        if (this.props.src === void 0 || this.props.src === null || this.props.src === '') {\n            return Promise.resolve();\n        } else if (this.props.noDownload) {\n            return Promise.resolve();\n        } else {\n            const promise = new Promise<void>((resolve, reject) => {\n                try {\n                    FileFetcher.fetchLocation(this.props.src)\n                    .then((result) => {\n                        this.content = TextEncoding.decodeUtf8(result.data);\n                        const reSplit = /(url\\(.+?\\))/;\n                        const reReplace = /^url\\((.+?)\\)$/;\n                        const fragments = this.content.split(reSplit);\n                        const promises: Array<Promise<void>> = [];\n                        const indexes: number[] = [];\n                        for (let i = 0; i < fragments.length; i++) {\n                            const m = reReplace.exec(fragments[i]);\n                            if (m && !(m[1]).startsWith('data:')) {\n                                promises.push(\n                                    FileFetcher.fetchLocation(Uri.join(this.props.src, m[1]))\n                                    .then((fmntResult) => {\n                                        // Warning: Don't insert newlines to base64 encoded font!\n                                        // Fonts will not rendered if you insert it.\n                                        fragments[i] = fragments[i].replace(reReplace,\n                                            `url(${`data:${fmntResult.contentType};charset=utf-8;base64,` + Base64.encode(fmntResult.data)})`);\n                                    })\n                                );\n                                indexes.push(i);\n                            }\n                        }\n                        Promise.all(promises)\n                        .then(() => {\n                            this.content = fragments.join('');\n                            resolve();\n                        })\n                        .catch((e) => {\n                            Logger.log(\"Style#defer:catch(1):\" + e);\n                            reject(e);\n                        });\n                    })\n                    .catch((e) => {\n                        Logger.log(\"Style#defer:catch(2):\" + e);\n                        reject(e);\n                    });\n                } catch (e) {\n                    Logger.log(\"Style#defer:catch(3):\" + e);\n                    reject(e);\n                }\n            });\n            return promise;\n        }\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        let r = '';\n        if (this.props.noDownload) {\n            r = `<style type=\"text/css\">@import url(\"${this.props.src}\");</style>`;\n        } else {\n            r = `<style${RedAgate.htmlAttributesRenderer(this.props, new Set(['src'])).attrs}>${this.content}</style>`;\n        }\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (canvas) {\n            canvas.registerCustomAsset(r);\n            return '';\n        } else {\n            return r;\n        }\n    }\n}\n\nexport type FontProps = StyleProps;\nexport const Font = Style;\n\n\n\nexport interface SingleFontProps extends RedAgate.ComponentProps {\n    noDownload?: true;\n\n    fontFamily: string;\n    localNames?: string[];\n    fontStyle: \"normal\" | \"italic\" | \"oblique\";\n    fontWeight: 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | \"normal\" | \"bold\" | \"lighter\" | \"bolder\" ;\n    src: string;\n    unicodeRange: string;\n    format: \"woff\" | \"woff2\" | \"truetype\" | \"opentype\" | \"embedded-opentype\" | \"svg\";\n}\n\nexport class SingleFont extends RedAgate.RedAgatePhantomComponent<SingleFontProps> {\n    public constructor(props: SingleFontProps) {\n        super(props);\n    }\n\n    private content: string = '';\n\n    public defer() {\n        if (this.props.src === void 0 || this.props.src === null || this.props.src === '') {\n            return Promise.resolve();\n        } else if (this.props.noDownload) {\n            return Promise.resolve();\n        } else {\n            const promise = new Promise<void>((resolve, reject) => {\n                try {\n                    FileFetcher.fetchLocation(this.props.src)\n                    .then((result) => {\n                        this.content = `data:${result.contentType};charset=utf-8;base64,` + Base64.encode(result.data);\n                        resolve();\n                    })\n                    .catch((e) => {\n                        Logger.log(\"SingleFont#defer:catch:\" + e);\n                        reject(e);\n                    });\n                } catch (e) {\n                    Logger.log(\"SingleFont#defer:catch:\" + e);\n                    reject(e);\n                }\n            });\n            return promise;\n        }\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        let r = '';\n        if (this.props.noDownload) {\n        } else {\n        }\n        r = `<style type=\"text/css\">@font-face{font-family:${\n            this.props.fontFamily};font-style:${\n            this.props.fontStyle};font-weight:${\n            this.props.fontWeight};src:${\n            this.props.localNames ? this.props.localNames.map(x => ` local(${x})`) : ''} url(${\n            this.props.noDownload ? this.props.src : this.content});unicode-range:${\n            this.props.unicodeRange};}</style>`;\n        const canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        if (canvas) {\n            canvas.registerCustomAsset(r);\n            return '';\n        } else {\n            return r;\n        }\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { SvgCanvas }          from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { ShapeProps,\n         shapePropsDefault,\n         Shape,\n         CONTEXT_SVG_CANVAS } from './tags/Shape';\n\n\n\nexport interface PrinterMarksProps extends ShapeProps {\n    width: number;\n    height: number;\n    cropMarkLength?: number;\n    bleedMarks?: boolean;\n    northBleed?: number;\n    southBleed?: number;\n    eastBleed?: number;\n    westBleed?: number;\n    centerMarks?: boolean;\n    centerMarkArmLength?: number;\n    centerMarkArmMargin?: number;\n    hFold?: number[];\n    vFold?: number[];\n}\n\nexport const printerMarksDefault: PrinterMarksProps = Object.assign({}, shapePropsDefault, {\n    fill: false,\n    stroke: true,\n    strokeColor: \"black\",\n    lineWidth: 0.105834, // 0.3pt === 0.105834mm\n\n    width: 210,\n    height: 297,\n    cropMarkLength: 9,\n    bleedMarks: true,\n    northBleed: 3,\n    southBleed: 3,\n    eastBleed: 3,\n    westBleed: 3,\n    centerMarks: true,\n    centerMarkArmLength: 15,\n    centerMarkArmMargin: 3,\n});\n\nexport class PrinterMarks extends Shape<PrinterMarksProps> {\n    public constructor(props: PrinterMarksProps) {\n        super(Object.assign({}, printerMarksDefault, props));\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        const c: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        const p = this.props;\n\n        // Crop Marks\n        {\n            // H\n            c.moveTo(        - (p.westBleed as number)                               ,        0);\n            c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number),        0);\n            c.moveTo(        - (p.westBleed as number)                               , p.height);\n            c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number), p.height);\n\n            c.moveTo(p.width + (p.eastBleed as number)                               ,        0);\n            c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number),        0);\n            c.moveTo(p.width + (p.eastBleed as number)                               , p.height);\n            c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number), p.height);\n\n            // V\n            c.moveTo(      0,          - (p.northBleed as number)                               );\n            c.lineTo(      0,          - (p.northBleed as number) - (p.cropMarkLength as number));\n            c.moveTo(p.width,          - (p.northBleed as number)                               );\n            c.lineTo(p.width,          - (p.northBleed as number) - (p.cropMarkLength as number));\n\n            c.moveTo(      0, p.height + (p.southBleed as number)                               );\n            c.lineTo(      0, p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n            c.moveTo(p.width, p.height + (p.southBleed as number)                               );\n            c.lineTo(p.width, p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n        }\n\n        // Bleed Marks\n        if (p.bleedMarks) {\n            // H\n            c.moveTo(                                                               0,          - (p.northBleed as number));\n            c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number),          - (p.northBleed as number));\n            c.moveTo(                                                               0, p.height + (p.southBleed as number));\n            c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number), p.height + (p.southBleed as number));\n\n            c.moveTo(p.width                                                         ,          - (p.northBleed as number));\n            c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number),          - (p.northBleed as number));\n            c.moveTo(p.width                                                         , p.height + (p.southBleed as number));\n            c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number), p.height + (p.southBleed as number));\n\n            // V\n            c.moveTo(        - (p.westBleed as number),                                                                  0);\n            c.lineTo(        - (p.westBleed as number),          - (p.northBleed as number) - (p.cropMarkLength as number));\n            c.moveTo(p.width + (p.eastBleed as number),                                                                  0);\n            c.lineTo(p.width + (p.eastBleed as number),          - (p.northBleed as number) - (p.cropMarkLength as number));\n\n            c.moveTo(        - (p.westBleed as number), p.height                                                          );\n            c.lineTo(        - (p.westBleed as number), p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n            c.moveTo(p.width + (p.eastBleed as number), p.height                                                          );\n            c.lineTo(p.width + (p.eastBleed as number), p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n        }\n\n        // Center Marks\n        if (p.centerMarks) {\n            // H\n            c.moveTo(p.width / 2,          - (p.northBleed as number)                               );\n            c.lineTo(p.width / 2,          - (p.northBleed as number) - (p.cropMarkLength as number));\n            c.moveTo(p.width / 2, p.height + (p.southBleed as number)                               );\n            c.lineTo(p.width / 2, p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n\n            // H arms\n            c.moveTo(p.width / 2 - (p.centerMarkArmLength as number) / 2,          - (p.northBleed as number) - (p.centerMarkArmMargin as number));\n            c.lineTo(p.width / 2 + (p.centerMarkArmLength as number) / 2,          - (p.northBleed as number) - (p.centerMarkArmMargin as number));\n            c.moveTo(p.width / 2 - (p.centerMarkArmLength as number) / 2, p.height + (p.southBleed as number) + (p.centerMarkArmMargin as number));\n            c.lineTo(p.width / 2 + (p.centerMarkArmLength as number) / 2, p.height + (p.southBleed as number) + (p.centerMarkArmMargin as number));\n\n            // V\n            c.moveTo(        - (p.westBleed as number)                               , p.height / 2);\n            c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number), p.height / 2);\n            c.moveTo(p.width + (p.eastBleed as number)                               , p.height / 2);\n            c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number), p.height / 2);\n\n            // V arms\n            c.moveTo(        - (p.westBleed as number) - (p.centerMarkArmMargin as number), p.height / 2 - (p.centerMarkArmLength as number) / 2);\n            c.lineTo(        - (p.westBleed as number) - (p.centerMarkArmMargin as number), p.height / 2 + (p.centerMarkArmLength as number) / 2);\n            c.moveTo(p.width + (p.eastBleed as number) + (p.centerMarkArmMargin as number), p.height / 2 - (p.centerMarkArmLength as number) / 2);\n            c.lineTo(p.width + (p.eastBleed as number) + (p.centerMarkArmMargin as number), p.height / 2 + (p.centerMarkArmLength as number) / 2);\n        }\n\n        if (p.hFold) {\n            let x = 0;\n            for (const dx of p.hFold) {\n                x += dx;\n                c.moveTo(x,          - (p.northBleed as number)                               );\n                c.lineTo(x,          - (p.northBleed as number) - (p.cropMarkLength as number));\n                c.moveTo(x, p.height + (p.southBleed as number)                               );\n                c.lineTo(x, p.height + (p.southBleed as number) + (p.cropMarkLength as number));\n            }\n        }\n\n        if (p.vFold) {\n            let y = 0;\n            for (const dy of p.vFold) {\n                y += dy;\n                c.moveTo(        - (p.westBleed as number)                               , y);\n                c.lineTo(        - (p.westBleed as number) - (p.cropMarkLength as number), y);\n                c.moveTo(p.width + (p.eastBleed as number)                               , y);\n                c.lineTo(p.width + (p.eastBleed as number) + (p.cropMarkLength as number), y);\n            }\n        }\n\n        return ``;\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport interface AwsLambdaClientContextClientInfo {\n    installation_id: string;\n    app_title: string;\n    app_version_name: string;\n    app_version_code: string;\n    app_package_name: string;\n}\n\nexport interface AwsLambdaClientContextEnvInfo {\n    platform_version: string;\n    platform: string;\n    make: string;\n    model: string;\n    locale: string;\n}\n\nexport interface AwsLambdaClientContext {\n    client: AwsLambdaClientContextClientInfo;\n    Custom: any | null;\n    env: AwsLambdaClientContextEnvInfo;\n}\n\nexport interface LambdaContext {\n    callbackWaitsForEmptyEventLoop: boolean;\n    functionName: string;\n    functionVersion: string;\n    invokedFunctionArn: string;\n    memoryLimitInMB: number;\n    awsRequestId: string;\n    logGroupName: string;\n    logStreamName: string;\n    identity: string | null;\n    clientContext: AwsLambdaClientContext | null;\n}\nexport type AwsLambdaContext = LambdaContext;\n\nexport type Lambda<T= any, R= any, E= any> = (event: T, context: LambdaContext, callback: (error: E | null, result: R | null) => void) => void;\nexport type AwsLambda = Lambda;\n\n\nexport class Lambdas {\n    public static pipe<T1, R1, E1, R2, E2>(handler1: Lambda<T1, R1, E1>, handler2: Lambda<R1, R2, E2>): Lambda<T1, R2, E1 | E2> {\n        return (event, context, callback) => {\n            handler1(event, context, (error, evt2) => {\n                if (error) {\n                    callback(error, null);\n                } else {\n                    handler2(evt2 as R1, context, (err, res) => callback(err, res));\n                }\n            });\n        };\n    }\n}\n\n\nexport class App {\n    private static lambdas = new Map<string, Lambda>();\n    private static suppressRun = false;\n\n    public static cli(options: string[], handler: (opts: Map<string, string>) => void) {\n        if (App.suppressRun) {\n            return this;\n        }\n\n        const optsMap = new Map<string, string>();\n        for (let op of options) {\n            let matched = false;\n            let isOptional = false;\n            if (op.startsWith('?')) {\n                op = op.substring(1);\n                isOptional = true;\n            }\n            for (const arg of process.argv.slice(2)) {\n                if (op.endsWith('*')) {\n                    if (arg.startsWith(op.substring(0, op.length - 1))) {\n                        matched = true;\n                        optsMap.set(op, arg.substring(op.length - 1));\n                        break;\n                    }\n                } else {\n                    if (arg === op) {\n                        matched = true;\n                        optsMap.set(op, arg.substring(op.length));\n                        break;\n                    }\n                }\n            }\n            if (!isOptional && !matched) {\n                return this;\n            }\n        }\n\n        handler(optsMap);\n        App.suppressRun = true;\n        return this;\n    }\n\n    public static route(name: string, lambda: Lambda) {\n        App.lambdas.set(name, lambda);\n        return this;\n    }\n\n    public static run(context: any, lambda?: Lambda) {\n        if (App.suppressRun) {\n            return;\n        }\n\n        process.stdin.resume();\n        process.stdin.setEncoding('utf8');\n\n        let inputData = '';\n\n        process.stdin.on('data', (chunk) => {\n            inputData += chunk;\n        });\n\n        process.stdin.on('end', () => {\n            const write = (data: string, exitCode: number) => {\n                const done = process.stdout.write(data);\n                if (done) {\n                    process.exit(exitCode);\n                } else {\n                    process.stdout.once('drain', () => {\n                        process.exit(exitCode);\n                    });\n                }\n            };\n\n            try {\n                const event = JSON.parse(inputData);\n\n                // tslint:disable-next-line:variable-name\n                let lambda_ = lambda;\n                if (! lambda_) {\n                    if (event && event.eventName) {\n                        lambda_ = App.lambdas.get(event.eventName);\n                    }\n                }\n\n                lambda_ = lambda_ || ((evt, ctx, cb) => {\n                    cb({message: `Error: event name ${(event && event.eventName) || ''} is not found.`}, null);\n                });\n\n                lambda_(event, context, (error, result) => {\n                    if (error) {\n                        write(String(error), -1);\n                    } else {\n                        write(result, 0);\n                    }\n                });\n            } catch (e) {\n                write(String(e), -1);\n            }\n        });\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { Base64 }                    from 'red-agate-util/modules/convert/Base64';\nimport { TextEncoding }              from 'red-agate-util/modules/convert/TextEncoding';\nimport { default as requireDynamic } from 'red-agate-util/modules/runtime/require-dynamic';\nimport { Lambda, Lambdas }           from './app';\n\n\n\nexport class HtmlRenderer {\n    // tslint:disable-next-line:variable-name\n    private static _rendererPackageName = 'puppeteer';\n\n    public static get rendererPackageName(): string {\n        return HtmlRenderer._rendererPackageName;\n    }\n\n    public static set rendererPackageName(name: string) {\n        HtmlRenderer._rendererPackageName = name;\n    }\n\n    // tslint:disable-next-line:variable-name\n    private static _launchOptions: any = void 0;\n\n    public static get launchOptions(): any {\n        return HtmlRenderer._launchOptions;\n    }\n\n    public static set launchOptions(opts: any) {\n        HtmlRenderer._launchOptions = opts;\n    }\n\n    private static async writeToTempFile(html: string, tmpPath: string) {\n        const path = requireDynamic('path');\n        const fs   = requireDynamic('fs');\n        const util = requireDynamic('util');\n\n        for (let i = 0; i < 3; i++) {\n            let tmp = tmpPath;\n            if (tmp.includes('*')) {\n                const crypto = requireDynamic('crypto');\n                tmp = tmp.replace(/\\*/g, Base64.encode(crypto.randomBytes(6)).replace(/\\+/g, 'A').replace(/\\//g, 'B'));\n            }\n            let url = '';\n            const tmpFullPath = path.resolve(tmp);\n\n            const fd = await util.promisify(fs.open)(tmpFullPath, 'ax');\n\n            try {\n                await util.promisify(fs.writeFile)(fd, html, 'utf8');\n                let p = encodeURI(tmpFullPath.replace(/\\\\/g, '/'));\n                if (! p.startsWith('/')) {\n                    // Windows absolute paths except UNC paths.\n                    p = '/' + p;\n                }\n                url = 'file://' + p;\n            } finally {\n                await util.promisify(fs.close)(fd);\n            }\n\n            return { tmpFullPath, url };\n        }\n        throw new Error(\"HtmlRenderer#writeToTempFile: Can't create a temp file.\");\n    }\n\n    private static async _toPdf(html: string, navigateOptions: any, pdfOptions: any, tmpPath?: string): Promise<Buffer> {\n        const puppeteer = requireDynamic(HtmlRenderer._rendererPackageName);\n\n        let buffer: Buffer | null = null;\n        let browser = null;\n        let tmpFullPath = '';\n        let url = '';\n\n        try {\n            if (tmpPath) {\n                ({ tmpFullPath, url } = await HtmlRenderer.writeToTempFile(html, tmpPath));\n            } else {\n                url = 'data:text/html;base64,' + Base64.encode(TextEncoding.encodeToUtf8(html));\n            }\n\n            browser = await puppeteer.launch(HtmlRenderer._launchOptions);\n            const page = await browser.newPage();\n            await page.goto(\n                url,\n                Object.assign({ waitUntil: 'load' }, navigateOptions || {}),\n            );\n            buffer = await page.pdf(\n                Object.assign({\n                    width: '210mm',\n                    height: '297mm',\n                    printBackground: true,\n                }, pdfOptions || {})\n            );\n        } finally {\n            try {\n                if (browser) {\n                    await browser.close();\n                }\n            } catch (e) {}\n            try {\n                if (tmpPath && tmpFullPath) {\n                    const fs   = requireDynamic('fs');\n                    const util = requireDynamic('util');\n                    await util.promisify(fs.unlink)(tmpFullPath);\n                }\n            } catch (e) {}\n        }\n        return buffer as Buffer;\n    }\n\n    public static async toPdf(html: string | Promise<string>, navigateOptions: any, pdfOptions: any, tmpPath?: string): Promise<Buffer> {\n        if (typeof html === 'string') {\n            return HtmlRenderer._toPdf(html, navigateOptions, pdfOptions, tmpPath);\n        } else {\n            return HtmlRenderer._toPdf(await html, navigateOptions, pdfOptions, tmpPath);\n        }\n    }\n\n    public static toPdfHandler(handler: Lambda, navigateOptions: any, pdfOptions: any, tmpPath?: string): Lambda {\n        return Lambdas.pipe(handler, (html, ctx, cb) => {\n            HtmlRenderer.toPdf(html, navigateOptions, pdfOptions, tmpPath)\n            .then(buf => cb(null, buf))\n            .catch(err => cb(err, null));\n        });\n    }\n\n    private static async _toImage(html: string, navigateOptions: any, imageOptions: any, tmpPath?: string): Promise<Buffer> {\n        const puppeteer = requireDynamic(HtmlRenderer._rendererPackageName);\n\n        let buffer: Buffer | null = null;\n        let browser = null;\n        let tmpFullPath = '';\n        let url = '';\n\n        try {\n            if (tmpPath) {\n                ({ tmpFullPath, url } = await HtmlRenderer.writeToTempFile(html, tmpPath));\n            } else {\n                url = 'data:text/html;base64,' + Base64.encode(TextEncoding.encodeToUtf8(html));\n            }\n\n            browser = await puppeteer.launch(HtmlRenderer._launchOptions);\n            const page = await browser.newPage();\n            await page.goto(\n                url,\n                Object.assign({ waitUntil: 'load' }, navigateOptions || {}),\n            );\n            await page.emulateMedia('print');\n            buffer = await page.screenshot(\n                Object.assign({\n                    type: 'png',\n                    fullPage: true,\n                    omitBackground: false,\n                }, imageOptions || {})\n            );\n        } finally {\n            try {\n                if (browser) {\n                    await browser.close();\n                }\n            } catch (e) {}\n            try {\n                if (tmpPath && tmpFullPath) {\n                    const fs   = requireDynamic('fs');\n                    const util = requireDynamic('util');\n                    await util.promisify(fs.unlink)(tmpFullPath);\n                }\n            } catch (e) {}\n        }\n        return buffer as Buffer;\n    }\n\n    public static async toImage(html: string | Promise<string>, navigateOptions: any, imageOptions: any, tmpPath?: string): Promise<Buffer> {\n        if (typeof html === 'string') {\n            return HtmlRenderer._toImage(html, navigateOptions, imageOptions, tmpPath);\n        } else {\n            return HtmlRenderer._toImage(await html, navigateOptions, imageOptions, tmpPath);\n        }\n    }\n\n    public static toImageHandler(handler: Lambda, navigateOptions: any, imageOptions: any, tmpPath?: string): Lambda {\n        return Lambdas.pipe(handler, (html, ctx, cb) => {\n            HtmlRenderer.toImage(html, navigateOptions, imageOptions, tmpPath)\n            .then(buf => cb(null, buf))\n            .catch(err => cb(err, null));\n        });\n    }\n}\n\n","\nimport * as RedAgate from 'red-agate/modules/red-agate';\nimport * as React from 'react';\nimport * as ReactDOMServer from 'react-dom/server';\n\n\n\nexport interface ReactHostProps<P> extends RedAgate.ComponentProps {\n    element: React.ReactElement<P>;\n}\n\nexport class ReactHost<P> extends RedAgate.RedAgateComponent<ReactHostProps<P>> {\n    public constructor(props: ReactHostProps<P>) {\n        super(props);\n    }\n\n    public transform() {\n        return [];\n    }\n\n    public render() {\n        return ReactDOMServer.renderToStaticMarkup(this.props.element);\n    }\n}\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { ShapeProps,\n         shapePropsDefault,\n         Shape,\n         ImagingShapeBasePropsMixin,\n         renderSvgCanvas,\n         toImgTag,\n         toElementStyle,\n         toDataUrl,\n         toSvg,\n         CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\n\n\n\nexport interface BarcodeBaseProps extends ShapeProps, ImagingShapeBasePropsMixin {\n    fillColor?: string | WebColor;\n    font?: string;\n\n    rotation?: number;\n    height?: number;\n    quietWidth?: number;\n    quietHeight?: number;\n    unit?: string;\n    drawText?: boolean;\n    useRawDataAsText?: boolean;\n    textHeight?: number;\n\n    data?: string;\n    text?: string;\n\n    asDataUrl?: boolean;\n    asImgTag?: boolean;\n}\n\nexport interface BarcodeBasePropsNoUndefined extends ShapeProps, ImagingShapeBasePropsMixin {\n    fillColor: string | WebColor;\n    font: string;\n\n    rotation: number;\n    height: number;\n    quietWidth: number;\n    quietHeight: number;\n    unit?: string;\n    drawText: boolean;\n    useRawDataAsText: boolean;\n    textHeight: number;\n\n    data?: string;\n    text?: string;\n\n    asDataUrl?: boolean;\n    asImgTag?: boolean;\n}\n\nexport const barcodeBasePropsDefault: BarcodeBasePropsNoUndefined = Object.assign({}, shapePropsDefault, {\n    fillColor: \"black\",\n    font: \"normal 3.5px 'OCRB'\", // \"initial user coordinate\" 1px == \"viewport coordinate\" 1mm\n    rotation: 0,\n    height: 6.35,\n    quietWidth: 2.54,\n    quietHeight: 0.66,\n    unit: \"mm\",\n    drawText: true,\n    useRawDataAsText: false,\n    textHeight: 3.55\n});\n\nexport class BarcodeBase<T extends BarcodeBaseProps> extends Shape<T> {\n    public constructor(props: T, protected charactersMap: Map<string, {index: number, pattern: string}>) {\n        super(Object.assign({}, barcodeBasePropsDefault, props as any));\n    }\n\n    public toImgTag(): string {\n        return toImgTag(this);\n    }\n\n    public toElementStyle(): string {\n        return toElementStyle(this);\n    }\n\n    public toDataUrl(): string {\n        return toDataUrl(this);\n    }\n\n    public toSvg(): string {\n        return toSvg(this);\n    }\n\n    public toRendered(): string {\n        return RedAgate.renderAsHtml_noDefer(this);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        let canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        const contextHasCanvas = Boolean(canvas);\n        if (!contextHasCanvas) {\n            canvas = new SvgCanvas();\n            this.setContext(contexts, CONTEXT_SVG_CANVAS, canvas);\n            super.beforeRender(contexts);\n        }\n\n        let data = this.props.data || \"\";\n        let text = this.props.text;\n\n        const originalData = data;\n        let heightData: string | undefined,\n             labelText: string | undefined,\n             startChar: string,\n              stopChar: string;\n        ({data, heightData, labelText, startChar, stopChar} = this.encodeData(data));\n\n        const cdChar = this.calcCheckDigit(data);\n\n        // tw: total width (quiet + data + start + stop + cd)\n        // th: total height (quiet + bar + text)\n        const {tw, th} = this.calcSymbolSize(data, startChar, stopChar, cdChar);\n\n        data = `${startChar}${data}${cdChar}${stopChar}`;\n\n        if (labelText !== void 0) {\n            text = labelText;\n        } else {\n            if (text === void 0 || text === null) text = this.props.text;\n            if (text === void 0 || text === null) text = originalData;\n        }\n\n        let rotation = (this.props.rotation === void 0 || this.props.rotation === null) ?\n            0 : Math.floor(this.props.rotation / 90) % 4;\n\n        if (rotation < 0) rotation += 4;\n        switch (rotation) {\n            case 1:\n                canvas.rotate(Math.PI * 1.5);\n                canvas.translate(-tw, 0);\n                break;\n            case 2:\n                canvas.rotate(Math.PI);\n                canvas.translate(-tw, -th);\n                break;\n            case 3:\n                canvas.rotate(Math.PI * 0.5);\n                canvas.translate(0, -th);\n                break;\n        }\n\n        if (this.props.drawText) {\n            canvas.beginGroup();\n        }\n\n        if (this.isHeightModulated) {\n            this.renderHeightModulatedBarData(canvas, tw, th, data, heightData, text);\n        } else {\n            this.renderBarData(canvas, tw, th, data, heightData, text);\n        }\n        this.renderAdditional(canvas, tw, th, data, text);\n\n        if (this.props.drawText) {\n            canvas.endGroup();\n            canvas.beginGroup();\n        }\n\n        if (this.props.drawText) {\n            if (this.props.font) canvas.font = this.props.font;\n            this.renderText(canvas, tw, th, data, text);\n        }\n\n        if (this.props.drawText) {\n            canvas.endGroup();\n        }\n\n        if (contextHasCanvas) {\n            return ``;\n        } else {\n            super.afterRender(contexts);\n            this.unsetContext(contexts, CONTEXT_SVG_CANVAS);\n            const imageWidth  = tw + (this.props.x || 0);\n            const imageHeight = th + (this.props.y || 0);\n            return renderSvgCanvas(this.props, canvas, imageWidth, imageHeight);\n        }\n    }\n\n\n    // total width (quiet + data + start + stop + cd)\n    // total height (quiet + bar + text)\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw: 0,\n            // total height (quiet + bar + text)\n            th: 0\n        };\n    }\n\n    protected calcCheckDigit(data: string): string {\n        return \"\";\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        return {data, startChar: \"\", stopChar: \"\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        return [];\n    }\n\n    protected getBarSpaceHeight(): Array<Array<{offset: number, height: number}>> {\n        const props = this.props as BarcodeBasePropsNoUndefined;\n\n        return [[{offset: 0, height: props.height}]];\n    }\n\n    protected getRenderStartCoodinate(data: string, text: string): {rx: number, ry: number} {\n        const props = this.props as BarcodeBasePropsNoUndefined;\n\n        return {rx: props.quietWidth, ry: props.quietHeight};\n    }\n\n    protected get isHeightModulated(): boolean {\n        return false;\n    }\n\n    protected renderBarData(\n        canvas: SvgCanvas, tw: number, th: number,\n        data: string, heightData: string | undefined, text: string) {\n\n        const bw = this.getBarSpaceWidth();\n        const vseg = this.getBarSpaceHeight();\n\n        // tslint:disable-next-line:prefer-const\n        let {rx, ry} = this.getRenderStartCoodinate(data, text);\n\n        for (let i = 0; i < data.length; i++) {\n            const cmap = this.charactersMap.get(data[i]);\n            if (! cmap) {\n                throw new Error(\"BarcodeBase#renderBarData: character is out of range.\");\n            }\n            const pattern = cmap.pattern;\n            let bar = true;\n            let dx = 0;\n            for (let j = 0; j < pattern.length; j++) {\n                const c = pattern[j];\n                switch (c) {\n                    case \"0\": case \"1\": case \"2\": case \"3\": case \"4\":\n                    case \"5\": case \"6\": case \"7\": case \"8\": case \"9\":\n                        // \"0\" is character gap\n                        {\n                            const w = bw[Number.parseInt(c, 10)];\n                            if (bar) {\n                                const ss = (heightData === void 0) ? vseg[0] : vseg[Number.parseInt(heightData[i], 10)];\n                                for (const seg of ss) {\n                                    canvas.rect(rx + dx, ry + seg.offset, w, seg.height);\n                                }\n                            }\n                            dx += w;\n                            bar = !bar;\n                        }\n                        break;\n                    case \"+\":\n                        bar = true;\n                        break;\n                    case \"-\":\n                        bar = false;\n                        break;\n                }\n            }\n            rx += dx;\n        }\n        canvas.fill();\n        canvas.beginPath();\n    }\n\n    protected renderHeightModulatedBarData(\n        canvas: SvgCanvas, tw: number, th: number,\n        data: string, heightData: string | undefined, text: string) {\n\n        const bw = this.getBarSpaceWidth();\n        const w = bw[1];\n        const vseg = this.getBarSpaceHeight();\n\n        // tslint:disable-next-line:prefer-const\n        let {rx, ry} = this.getRenderStartCoodinate(data, text);\n\n        for (let i = 0; i < data.length; i++) {\n            const pattern = (this as any).charactersMap.get(data[i]).pattern;\n            const bar = true;\n            let dx = 0;\n            for (let j = 0; j < pattern.length; j++) {\n                const c = pattern[j];\n                switch (c) {\n                    case \"1\": case \"2\": case \"3\": case \"4\":\n                    case \"5\": case \"6\": case \"7\": case \"8\": case \"9\":\n                        {\n                            const ss = vseg[Number.parseInt(c, 10)];\n                            for (const seg of ss) {\n                                canvas.rect(rx + dx, ry + seg.offset, w, seg.height);\n                            }\n                        }\n                        // FALL THRU\n                    case \"0\":\n                        // \"0\" is space\n                        dx += w * 2;\n                        break;\n                }\n            }\n            rx += dx;\n        }\n        canvas.fill();\n        canvas.beginPath();\n    }\n\n    protected renderAdditional(canvas: SvgCanvas, tw: number, th: number, data: string, text: string) {\n    }\n\n    protected renderText(canvas: SvgCanvas, tw: number, th: number, data: string, text: string) {\n        const props = this.props as BarcodeBasePropsNoUndefined;\n\n        canvas.textAlign = \"center\";\n        canvas.textBaseline = \"alphabetic\";\n        canvas.fillText(props.useRawDataAsText ? data : text, tw / 2, th - props.quietHeight);\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string}>([\n    [\"0\", {index:  0, pattern: \"1112212110\"}],\n    [\"1\", {index:  1, pattern: \"2112111120\"}],\n    [\"2\", {index:  2, pattern: \"1122111120\"}],\n    [\"3\", {index:  3, pattern: \"2122111110\"}],\n    [\"4\", {index:  4, pattern: \"1112211120\"}],\n    [\"5\", {index:  5, pattern: \"2112211110\"}],\n    [\"6\", {index:  6, pattern: \"1122211110\"}],\n    [\"7\", {index:  7, pattern: \"1112112120\"}],\n    [\"8\", {index:  8, pattern: \"2112112110\"}],\n    [\"9\", {index:  9, pattern: \"1122112110\"}],\n    [\"A\", {index: 10, pattern: \"2111121120\"}],\n    [\"B\", {index: 11, pattern: \"1121121120\"}],\n    [\"C\", {index: 12, pattern: \"2121121110\"}],\n    [\"D\", {index: 13, pattern: \"1111221120\"}],\n    [\"E\", {index: 14, pattern: \"2111221110\"}],\n    [\"F\", {index: 15, pattern: \"1121221110\"}],\n    [\"G\", {index: 16, pattern: \"1111122120\"}],\n    [\"H\", {index: 17, pattern: \"2111122110\"}],\n    [\"I\", {index: 18, pattern: \"1121122110\"}],\n    [\"J\", {index: 19, pattern: \"1111222110\"}],\n    [\"K\", {index: 20, pattern: \"2111111220\"}],\n    [\"L\", {index: 21, pattern: \"1121111220\"}],\n    [\"M\", {index: 22, pattern: \"2121111210\"}],\n    [\"N\", {index: 23, pattern: \"1111211220\"}],\n    [\"O\", {index: 24, pattern: \"2111211210\"}],\n    [\"P\", {index: 25, pattern: \"1121211210\"}],\n    [\"Q\", {index: 26, pattern: \"1111112220\"}],\n    [\"R\", {index: 27, pattern: \"2111112210\"}],\n    [\"S\", {index: 28, pattern: \"1121112210\"}],\n    [\"T\", {index: 29, pattern: \"1111212210\"}],\n    [\"U\", {index: 30, pattern: \"2211111120\"}],\n    [\"V\", {index: 31, pattern: \"1221111120\"}],\n    [\"W\", {index: 32, pattern: \"2221111110\"}],\n    [\"X\", {index: 33, pattern: \"1211211120\"}],\n    [\"Y\", {index: 34, pattern: \"2211211110\"}],\n    [\"Z\", {index: 35, pattern: \"1221211110\"}],\n    [\"-\", {index: 36, pattern: \"1211112120\"}],\n    [\".\", {index: 37, pattern: \"2211112110\"}],\n    [\" \", {index: 38, pattern: \"1221112110\"}],\n    [\"$\", {index: 39, pattern: \"1212121110\"}],\n    [\"/\", {index: 40, pattern: \"1212111210\"}],\n    [\"+\", {index: 41, pattern: \"1211121210\"}],\n    [\"%\", {index: 42, pattern: \"1112121210\"}],\n    [\"*\", {index: 43, pattern: \"1211212110\"}]\n]);\n\n\nexport const reverseMap = new Map<number, string>();\nfor (const e of charactersMap.entries()) reverseMap.set(e[1].index, e[0]);\n\n\nexport const fullAsciiMap = new Map<number, string>([\n    [  0, \"%U\"], // NUL\n    [  1, \"$A\"], // SOH\n    [  2, \"$B\"], // STX\n    [  3, \"$C\"], // ETX\n    [  4, \"$D\"], // EOT\n    [  5, \"$E\"], // ENQ\n    [  6, \"$F\"], // ACK\n    [  7, \"$G\"], // BEL\n    [  8, \"$H\"], // BS\n    [  9, \"$I\"], // HT\n    [  0, \"$J\"], // LF\n    [ 11, \"$K\"], // VT\n    [ 12, \"$L\"], // FF\n    [ 13, \"$M\"], // CR\n    [ 14, \"$N\"], // SO\n    [ 15, \"$O\"], // SI\n    [ 16, \"$P\"], // DLE\n    [ 17, \"$Q\"], // DC1\n    [ 18, \"$R\"], // DC2\n    [ 19, \"$S\"], // DC3\n    [ 20, \"$T\"], // DC4\n    [ 21, \"$U\"], // NAK\n    [ 22, \"$V\"], // SYN\n    [ 23, \"$W\"], // ETB\n    [ 24, \"$X\"], // CAN\n    [ 25, \"$Y\"], // EM\n    [ 26, \"$Z\"], // SUB\n    [ 27, \"%A\"], // ESC\n    [ 28, \"%B\"], // FS\n    [ 29, \"%C\"], // GS\n    [ 30, \"%D\"], // RS\n    [ 31, \"%E\"], // US\n    [ 32, \" \" ], // SP\n    [ 33, \"/A\"], // !\n    [ 34, \"/B\"], // \"\n    [ 35, \"/C\"], // #\n    [ 36, \"/D\"], // $\n    [ 37, \"/E\"], // %\n    [ 38, \"/F\"], // &\n    [ 39, \"/G\"], // '\n    [ 40, \"/H\"], // (\n    [ 41, \"/I\"], // )\n    [ 42, \"/J\"], // *\n    [ 43, \"/K\"], // +\n    [ 44, \"/L\"], // ,\n    [ 45, \"-\" ], // -\n    [ 46, \".\" ], // .\n    [ 47, \"/\" ], // /\n    [ 48, \"0\" ], // 0\n    [ 49, \"1\" ], // 1\n    [ 50, \"2\" ], // 2\n    [ 51, \"3\" ], // 3\n    [ 52, \"4\" ], // 4\n    [ 53, \"5\" ], // 5\n    [ 54, \"6\" ], // 6\n    [ 55, \"7\" ], // 7\n    [ 56, \"8\" ], // 8\n    [ 57, \"9\" ], // 9\n    [ 58, \"/Z\"], // :\n    [ 59, \"%F\"], // ;\n    [ 60, \"%G\"], // <\n    [ 61, \"%H\"], // =\n    [ 62, \"%I\"], // >\n    [ 63, \"%J\"], // ?\n    [ 64, \"%V\"], // @\n    [ 65, \"A\" ], // A\n    [ 66, \"B\" ], // B\n    [ 67, \"C\" ], // C\n    [ 68, \"D\" ], // D\n    [ 69, \"E\" ], // E\n    [ 70, \"F\" ], // F\n    [ 71, \"G\" ], // G\n    [ 72, \"H\" ], // H\n    [ 73, \"I\" ], // I\n    [ 74, \"J\" ], // J\n    [ 75, \"K\" ], // K\n    [ 76, \"L\" ], // L\n    [ 77, \"M\" ], // M\n    [ 78, \"N\" ], // N\n    [ 79, \"O\" ], // O\n    [ 80, \"P\" ], // P\n    [ 81, \"Q\" ], // Q\n    [ 82, \"R\" ], // R\n    [ 83, \"S\" ], // S\n    [ 84, \"T\" ], // T\n    [ 85, \"U\" ], // U\n    [ 86, \"V\" ], // V\n    [ 87, \"W\" ], // W\n    [ 88, \"X\" ], // X\n    [ 89, \"Y\" ], // Y\n    [ 90, \"Z\" ], // Z\n    [ 91, \"%K\"], // [\n    [ 92, \"%L\"], // backslash\n    [ 93, \"%M\"], // ]\n    [ 94, \"%N\"], // ^\n    [ 95, \"%O\"], // _\n    [ 96, \"%W\"], // `\n    [ 97, \"+A\"], // a\n    [ 98, \"+B\"], // b\n    [ 99, \"+C\"], // c\n    [100, \"+D\"], // d\n    [101, \"+E\"], // e\n    [102, \"+F\"], // f\n    [103, \"+G\"], // g\n    [104, \"+H\"], // h\n    [105, \"+I\"], // i\n    [106, \"+J\"], // j\n    [107, \"+K\"], // k\n    [108, \"+L\"], // l\n    [109, \"+M\"], // m\n    [110, \"+N\"], // n\n    [111, \"+O\"], // o\n    [112, \"+P\"], // p\n    [113, \"+Q\"], // q\n    [114, \"+R\"], // r\n    [115, \"+S\"], // s\n    [116, \"+T\"], // t\n    [117, \"+U\"], // u\n    [118, \"+V\"], // v\n    [119, \"+W\"], // w\n    [120, \"+X\"], // x\n    [121, \"+Y\"], // y\n    [122, \"+Z\"], // z\n    [123, \"%P\"], // {\n    [124, \"%Q\"], // |\n    [125, \"%R\"], // }\n    [126, \"%S\"], // ~\n    [127, \"%T\"]  // DEL\n]);\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap,\n         reverseMap,\n         fullAsciiMap }       from './data/Code39.data';\n\n\n\nexport interface Code39Props extends BarcodeBaseProps {\n    addCheckDigit?: boolean;\n    fullAscii?: boolean;\n    narrowWidth?: number;\n    wideWidth?: number;\n    charGapWidth?: number;\n}\n\nexport interface Code39PropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    addCheckDigit: boolean;\n    fullAscii: boolean;\n    narrowWidth: number;\n    wideWidth: number;\n    charGapWidth?: number;\n}\n\nexport const code39PropsDefault: Code39PropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    addCheckDigit: true,\n    fullAscii: false,\n    narrowWidth: 0.33,\n    wideWidth: 0.66,\n    charGapWidth: void 0\n});\n\nexport class Code39 extends BarcodeBase<Code39Props> {\n    public constructor(props: Code39Props) {\n        super(Object.assign({}, code39PropsDefault, props), charactersMap);\n    }\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n        const props = this.props as Code39PropsNoUndefined;\n\n        const gw = props.charGapWidth || props.narrowWidth;\n        // module width (bar + space + gap)\n        const mw = props.narrowWidth * 6 + props.wideWidth * 3 + gw;\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw: props.quietWidth  * 2 + mw * (data.length + 2 + (props.addCheckDigit ? 1 : 0)) - gw,\n            // total height (quiet + bar + text)\n            th: props.quietHeight * 2 + props.height + (props.drawText ? props.textHeight : 0)\n        };\n    }\n\n    protected calcCheckDigit(data: string): string {\n        let cdChar = \"\";\n        if (this.props.addCheckDigit) {\n            let cd = 0;\n            for (let i = 0; i < data.length; i++) {\n                const v = charactersMap.get(data[i]);\n                if (v === void 0) {\n                    throw new Error(\"code39: character is out of range.\");\n                }\n                cd = (cd + v.index) % 43;\n            }\n            const cdch = reverseMap.get(cd);\n            if (cdch === void 0) {\n                throw new Error(\"code39 (trace): checkdigit is out of range.\");\n            }\n            cdChar = cdch;\n        }\n        return cdChar;\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        let d = data;\n        if (this.props.fullAscii) {\n            d = \"\";\n            for (let i = 0; i < data.length; i++) {\n                const c = fullAsciiMap.get(data.charCodeAt(i));\n                if (c === void 0) {\n                    throw new Error(\"code39 fullascii: character is out of range.\");\n                }\n                d += c;\n            }\n        }\n        return {data: d, startChar: \"*\", stopChar: \"*\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as Code39PropsNoUndefined;\n\n        const gw = props.charGapWidth || props.narrowWidth;\n        return [gw, props.narrowWidth, props.wideWidth];\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string}>([\n    [\"\\x00\", {index:   0, pattern: \"212222\"}],\n    [\"\\x01\", {index:   1, pattern: \"222122\"}],\n    [\"\\x02\", {index:   2, pattern: \"222221\"}],\n    [\"\\x03\", {index:   3, pattern: \"121223\"}],\n    [\"\\x04\", {index:   4, pattern: \"121322\"}],\n    [\"\\x05\", {index:   5, pattern: \"131222\"}],\n    [\"\\x06\", {index:   6, pattern: \"122213\"}],\n    [\"\\x07\", {index:   7, pattern: \"122312\"}],\n    [\"\\x08\", {index:   8, pattern: \"132212\"}],\n    [\"\\x09\", {index:   9, pattern: \"221213\"}],\n    [\"\\x0A\", {index:  10, pattern: \"221312\"}],\n    [\"\\x0B\", {index:  11, pattern: \"231212\"}],\n    [\"\\x0C\", {index:  12, pattern: \"112232\"}],\n    [\"\\x0D\", {index:  13, pattern: \"122132\"}],\n    [\"\\x0E\", {index:  14, pattern: \"122231\"}],\n    [\"\\x0F\", {index:  15, pattern: \"113222\"}],\n\n    [\"\\x10\", {index:  16, pattern: \"123122\"}],\n    [\"\\x11\", {index:  17, pattern: \"123221\"}],\n    [\"\\x12\", {index:  18, pattern: \"223211\"}],\n    [\"\\x13\", {index:  19, pattern: \"221132\"}],\n    [\"\\x14\", {index:  20, pattern: \"221231\"}],\n    [\"\\x15\", {index:  21, pattern: \"213212\"}],\n    [\"\\x16\", {index:  22, pattern: \"223112\"}],\n    [\"\\x17\", {index:  23, pattern: \"312131\"}],\n    [\"\\x18\", {index:  24, pattern: \"311222\"}],\n    [\"\\x19\", {index:  25, pattern: \"321122\"}],\n    [\"\\x1A\", {index:  26, pattern: \"321221\"}],\n    [\"\\x1B\", {index:  27, pattern: \"312212\"}],\n    [\"\\x1C\", {index:  28, pattern: \"322112\"}],\n    [\"\\x1D\", {index:  29, pattern: \"322211\"}],\n    [\"\\x1E\", {index:  30, pattern: \"212123\"}],\n    [\"\\x1F\", {index:  31, pattern: \"212321\"}],\n\n    [\"\\x20\", {index:  32, pattern: \"232121\"}],\n    [\"\\x21\", {index:  33, pattern: \"111323\"}],\n    [\"\\x22\", {index:  34, pattern: \"131123\"}],\n    [\"\\x23\", {index:  35, pattern: \"131321\"}],\n    [\"\\x24\", {index:  36, pattern: \"112313\"}],\n    [\"\\x25\", {index:  37, pattern: \"132113\"}],\n    [\"\\x26\", {index:  38, pattern: \"132311\"}],\n    [\"\\x27\", {index:  39, pattern: \"211313\"}],\n    [\"\\x28\", {index:  40, pattern: \"231113\"}],\n    [\"\\x29\", {index:  41, pattern: \"231311\"}],\n    [\"\\x2A\", {index:  42, pattern: \"112133\"}],\n    [\"\\x2B\", {index:  43, pattern: \"112331\"}],\n    [\"\\x2C\", {index:  44, pattern: \"132131\"}],\n    [\"\\x2D\", {index:  45, pattern: \"113123\"}],\n    [\"\\x2E\", {index:  46, pattern: \"113321\"}],\n    [\"\\x2F\", {index:  47, pattern: \"133121\"}],\n\n    [\"\\x30\", {index:  48, pattern: \"313121\"}],\n    [\"\\x31\", {index:  49, pattern: \"211331\"}],\n    [\"\\x32\", {index:  50, pattern: \"231131\"}],\n    [\"\\x33\", {index:  51, pattern: \"213113\"}],\n    [\"\\x34\", {index:  52, pattern: \"213311\"}],\n    [\"\\x35\", {index:  53, pattern: \"213131\"}],\n    [\"\\x36\", {index:  54, pattern: \"311123\"}],\n    [\"\\x37\", {index:  55, pattern: \"311321\"}],\n    [\"\\x38\", {index:  56, pattern: \"331121\"}],\n    [\"\\x39\", {index:  57, pattern: \"312113\"}],\n    [\"\\x3A\", {index:  58, pattern: \"312311\"}],\n    [\"\\x3B\", {index:  59, pattern: \"332111\"}],\n    [\"\\x3C\", {index:  60, pattern: \"314111\"}],\n    [\"\\x3D\", {index:  61, pattern: \"221411\"}],\n    [\"\\x3E\", {index:  62, pattern: \"431111\"}],\n    [\"\\x3F\", {index:  63, pattern: \"111224\"}],\n\n    [\"\\x40\", {index:  64, pattern: \"111422\"}],\n    [\"\\x41\", {index:  65, pattern: \"121124\"}],\n    [\"\\x42\", {index:  66, pattern: \"121421\"}],\n    [\"\\x43\", {index:  67, pattern: \"141122\"}],\n    [\"\\x44\", {index:  68, pattern: \"141221\"}],\n    [\"\\x45\", {index:  69, pattern: \"112214\"}],\n    [\"\\x46\", {index:  70, pattern: \"112412\"}],\n    [\"\\x47\", {index:  71, pattern: \"122114\"}],\n    [\"\\x48\", {index:  72, pattern: \"122411\"}],\n    [\"\\x49\", {index:  73, pattern: \"142112\"}],\n    [\"\\x4A\", {index:  74, pattern: \"142211\"}],\n    [\"\\x4B\", {index:  75, pattern: \"241211\"}],\n    [\"\\x4C\", {index:  76, pattern: \"221114\"}],\n    [\"\\x4D\", {index:  77, pattern: \"413111\"}],\n    [\"\\x4E\", {index:  78, pattern: \"241112\"}],\n    [\"\\x4F\", {index:  79, pattern: \"134111\"}],\n\n    [\"\\x50\", {index:  80, pattern: \"111242\"}],\n    [\"\\x51\", {index:  81, pattern: \"121142\"}],\n    [\"\\x52\", {index:  82, pattern: \"121241\"}],\n    [\"\\x53\", {index:  83, pattern: \"114212\"}],\n    [\"\\x54\", {index:  84, pattern: \"124112\"}],\n    [\"\\x55\", {index:  85, pattern: \"124211\"}],\n    [\"\\x56\", {index:  86, pattern: \"411212\"}],\n    [\"\\x57\", {index:  87, pattern: \"421112\"}],\n    [\"\\x58\", {index:  88, pattern: \"421211\"}],\n    [\"\\x59\", {index:  89, pattern: \"212141\"}],\n    [\"\\x5A\", {index:  90, pattern: \"214121\"}],\n    [\"\\x5B\", {index:  91, pattern: \"412121\"}],\n    [\"\\x5C\", {index:  92, pattern: \"111143\"}],\n    [\"\\x5D\", {index:  93, pattern: \"111341\"}],\n    [\"\\x5E\", {index:  94, pattern: \"131141\"}],\n    [\"\\x5F\", {index:  95, pattern: \"114113\"}],\n\n    [\"\\x60\", {index:  96, pattern: \"114311\"}],\n    [\"\\x61\", {index:  97, pattern: \"411113\"}],\n    [\"\\x62\", {index:  98, pattern: \"411311\"}],\n    [\"\\x63\", {index:  99, pattern: \"113141\"}],\n    [\"\\x64\", {index: 100, pattern: \"114131\"}],\n    [\"\\x65\", {index: 101, pattern: \"311141\"}],\n    [\"\\x66\", {index: 102, pattern: \"411131\"}], // FNC1\n    [\"\\x67\", {index: 103, pattern: \"211412\"}], // start A\n    [\"\\x68\", {index: 104, pattern: \"211214\"}], // start B\n    [\"\\x69\", {index: 105, pattern: \"211232\"}], // start C\n    [\"\\x6A\", {index: 106, pattern: \"2331112\"}] // stop\n]);\n\n\nexport const fullAsciiMap = new Map<number, Array<string | null>>([\n    [  0, [\"\\x40\", null  ]], // NUL\n    [  1, [\"\\x41\", null  ]], // SOH\n    [  2, [\"\\x42\", null  ]], // STX\n    [  3, [\"\\x43\", null  ]], // ETX\n    [  4, [\"\\x44\", null  ]], // EOT\n    [  5, [\"\\x45\", null  ]], // ENQ\n    [  6, [\"\\x46\", null  ]], // ACK\n    [  7, [\"\\x47\", null  ]], // BEL\n    [  8, [\"\\x48\", null  ]], // BS\n    [  9, [\"\\x49\", null  ]], // HT\n    [  0, [\"\\x4A\", null  ]], // LF\n    [ 11, [\"\\x4B\", null  ]], // VT\n    [ 12, [\"\\x4C\", null  ]], // FF\n    [ 13, [\"\\x4D\", null  ]], // CR\n    [ 14, [\"\\x4E\", null  ]], // SO\n    [ 15, [\"\\x4F\", null  ]], // SI\n    [ 16, [\"\\x50\", null  ]], // DLE\n    [ 17, [\"\\x51\", null  ]], // DC1\n    [ 18, [\"\\x52\", null  ]], // DC2\n    [ 19, [\"\\x53\", null  ]], // DC3\n    [ 20, [\"\\x54\", null  ]], // DC4\n    [ 21, [\"\\x55\", null  ]], // NAK\n    [ 22, [\"\\x56\", null  ]], // SYN\n    [ 23, [\"\\x57\", null  ]], // ETB\n    [ 24, [\"\\x58\", null  ]], // CAN\n    [ 25, [\"\\x59\", null  ]], // EM\n    [ 26, [\"\\x5A\", null  ]], // SUB\n    [ 27, [\"\\x5B\", null  ]], // ESC\n    [ 28, [\"\\x5C\", null  ]], // FS\n    [ 29, [\"\\x5D\", null  ]], // GS\n    [ 30, [\"\\x5E\", null  ]], // RS\n    [ 31, [\"\\x5F\", null  ]], // US\n    [ 32, [\"\\x00\", \"\\x00\"]], // SP\n    [ 33, [\"\\x01\", \"\\x01\"]], // !\n    [ 34, [\"\\x02\", \"\\x02\"]], // \"\n    [ 35, [\"\\x03\", \"\\x03\"]], // #\n    [ 36, [\"\\x04\", \"\\x04\"]], // $\n    [ 37, [\"\\x05\", \"\\x05\"]], // %\n    [ 38, [\"\\x06\", \"\\x06\"]], // &\n    [ 39, [\"\\x07\", \"\\x07\"]], // '\n    [ 40, [\"\\x08\", \"\\x08\"]], // (\n    [ 41, [\"\\x09\", \"\\x09\"]], // )\n    [ 42, [\"\\x0A\", \"\\x0A\"]], // *\n    [ 43, [\"\\x0B\", \"\\x0B\"]], // +\n    [ 44, [\"\\x0C\", \"\\x0C\"]], // ,\n    [ 45, [\"\\x0D\", \"\\x0D\"]], // -\n    [ 46, [\"\\x0E\", \"\\x0E\"]], // .\n    [ 47, [\"\\x0F\", \"\\x0F\"]], // /\n    [ 48, [\"\\x10\", \"\\x10\"]], // 0\n    [ 49, [\"\\x11\", \"\\x11\"]], // 1\n    [ 50, [\"\\x12\", \"\\x12\"]], // 2\n    [ 51, [\"\\x13\", \"\\x13\"]], // 3\n    [ 52, [\"\\x14\", \"\\x14\"]], // 4\n    [ 53, [\"\\x15\", \"\\x15\"]], // 5\n    [ 54, [\"\\x16\", \"\\x16\"]], // 6\n    [ 55, [\"\\x17\", \"\\x17\"]], // 7\n    [ 56, [\"\\x18\", \"\\x18\"]], // 8\n    [ 57, [\"\\x19\", \"\\x19\"]], // 9\n    [ 58, [\"\\x1A\", \"\\x1A\"]], // :\n    [ 59, [\"\\x1B\", \"\\x1B\"]], // ;\n    [ 60, [\"\\x1C\", \"\\x1C\"]], // <\n    [ 61, [\"\\x1D\", \"\\x1D\"]], // =\n    [ 62, [\"\\x1E\", \"\\x1E\"]], // >\n    [ 63, [\"\\x1F\", \"\\x1F\"]], // ?\n    [ 64, [\"\\x20\", \"\\x20\"]], // @\n    [ 65, [\"\\x21\", \"\\x21\"]], // A\n    [ 66, [\"\\x22\", \"\\x22\"]], // B\n    [ 67, [\"\\x23\", \"\\x23\"]], // C\n    [ 68, [\"\\x24\", \"\\x24\"]], // D\n    [ 69, [\"\\x25\", \"\\x25\"]], // E\n    [ 70, [\"\\x26\", \"\\x26\"]], // F\n    [ 71, [\"\\x27\", \"\\x27\"]], // G\n    [ 72, [\"\\x28\", \"\\x28\"]], // H\n    [ 73, [\"\\x29\", \"\\x29\"]], // I\n    [ 74, [\"\\x2A\", \"\\x2A\"]], // J\n    [ 75, [\"\\x2B\", \"\\x2B\"]], // K\n    [ 76, [\"\\x2C\", \"\\x2C\"]], // L\n    [ 77, [\"\\x2D\", \"\\x2D\"]], // M\n    [ 78, [\"\\x2E\", \"\\x2E\"]], // N\n    [ 79, [\"\\x2F\", \"\\x2F\"]], // O\n    [ 80, [\"\\x30\", \"\\x30\"]], // P\n    [ 81, [\"\\x31\", \"\\x31\"]], // Q\n    [ 82, [\"\\x32\", \"\\x32\"]], // R\n    [ 83, [\"\\x33\", \"\\x33\"]], // S\n    [ 84, [\"\\x34\", \"\\x34\"]], // T\n    [ 85, [\"\\x35\", \"\\x35\"]], // U\n    [ 86, [\"\\x36\", \"\\x36\"]], // V\n    [ 87, [\"\\x37\", \"\\x37\"]], // W\n    [ 88, [\"\\x38\", \"\\x38\"]], // X\n    [ 89, [\"\\x39\", \"\\x39\"]], // Y\n    [ 90, [\"\\x3A\", \"\\x3A\"]], // Z\n    [ 91, [\"\\x3B\", \"\\x3B\"]], // [\n    [ 92, [\"\\x3C\", \"\\x3C\"]], // backslash\n    [ 93, [\"\\x3D\", \"\\x3D\"]], // ]\n    [ 94, [\"\\x3E\", \"\\x3E\"]], // ^\n    [ 95, [\"\\x3F\", \"\\x3F\"]], // _\n    [ 96, [null  , \"\\x40\"]], // `\n    [ 97, [null  , \"\\x41\"]], // a\n    [ 98, [null  , \"\\x42\"]], // b\n    [ 99, [null  , \"\\x43\"]], // c\n    [100, [null  , \"\\x44\"]], // d\n    [101, [null  , \"\\x45\"]], // e\n    [102, [null  , \"\\x46\"]], // f\n    [103, [null  , \"\\x47\"]], // g\n    [104, [null  , \"\\x48\"]], // h\n    [105, [null  , \"\\x49\"]], // i\n    [106, [null  , \"\\x4A\"]], // j\n    [107, [null  , \"\\x4B\"]], // k\n    [108, [null  , \"\\x4C\"]], // l\n    [109, [null  , \"\\x4D\"]], // m\n    [110, [null  , \"\\x4E\"]], // n\n    [111, [null  , \"\\x4F\"]], // o\n    [112, [null  , \"\\x50\"]], // p\n    [113, [null  , \"\\x51\"]], // q\n    [114, [null  , \"\\x52\"]], // r\n    [115, [null  , \"\\x53\"]], // s\n    [116, [null  , \"\\x54\"]], // t\n    [117, [null  , \"\\x55\"]], // u\n    [118, [null  , \"\\x56\"]], // v\n    [119, [null  , \"\\x57\"]], // w\n    [120, [null  , \"\\x58\"]], // x\n    [121, [null  , \"\\x59\"]], // y\n    [122, [null  , \"\\x5A\"]], // z\n    [123, [null  , \"\\x5B\"]], // {\n    [124, [null  , \"\\x5C\"]], // |\n    [125, [null  , \"\\x5D\"]], // }\n    [126, [null  , \"\\x5E\"]], // ~\n    [127, [null  , \"\\x5F\"]], // DEL\n\n    [128, [\"\\x66\", \"\\x66\", \"\\x66\"]], // FNC1\n    [129, [\"\\x61\", \"\\x61\", null  ]], // FNC2\n    [130, [\"\\x60\", \"\\x60\", null  ]], // FNC3\n    [131, [\"\\x65\", \"\\x64\", null  ]], // FNC4\n    [132, [null  , \"\\x65\", \"\\x65\"]], // CODE A\n    [133, [\"\\x64\", null  , \"\\x64\"]], // CODE B\n    [134, [\"\\x63\", \"\\x63\", null  ]], // CODE C\n    [135, [null  , \"\\x62\", null  ]], // SHIFT A\n    [135, [\"\\x62\", null  , null  ]], // SHIFT B\n]);\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap,\n         fullAsciiMap }       from './data/Code128.data';\n\n\n\nexport interface Code128Props extends BarcodeBaseProps {\n    elementWidth?: number;\n    useLatin1?: boolean;\n    raw?: boolean;\n}\n\nexport interface Code128PropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    elementWidth: number;\n    useLatin1: boolean;\n    raw: boolean;\n}\n\nexport const code128PropsDefault: Code128PropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    elementWidth: 0.33,\n    useLatin1: false,\n    raw: false\n});\n\nexport class Code128 extends BarcodeBase<Code128Props> {\n    public constructor(props: Code128Props) {\n        super(Object.assign({}, code128PropsDefault, props), charactersMap);\n    }\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n        const props = this.props as Code128PropsNoUndefined;\n\n        // module width (bar + space + gap)\n        const mw = props.elementWidth * 11;\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw: props.quietWidth  * 2 + mw * data.length + props.elementWidth * 13,\n            // total height (quiet + bar + text)\n            th: props.quietHeight * 2 + props.height + (props.drawText ? props.textHeight : 0)\n        };\n    }\n\n    protected calcMod103Checksum(data: string): number {\n        let v = charactersMap.get(data[0]);\n        if (v === void 0) {\n            throw new Error(\"code128: character is out of range.\");\n        }\n        let s = v.index % 103;\n        for (let i = 1; i < data.length; i++) {\n            v = charactersMap.get(data[i]);\n            if (v === void 0) {\n                throw new Error(\"code128: character is out of range.\");\n            }\n            s = (s + v.index * i) % 103;\n        }\n        return s;\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        if (this.props.raw) {\n            return {data, startChar: \"\", stopChar: \"\\x6A\"};\n        }\n\n        let d = \"\";\n        let cLimit = 4;\n        let mode: number | null = null; // 0: A, 1: B, 2: C\n        let scanned = 0;\n\n        const detC = (i: number) => {\n            let j = i + 1;\n            let continuing = 1;\n            for (; j < data.length; j++) {\n                const c2 = data.charCodeAt(j);\n                if (0x30 <= c2 && c2 <= 0x39) {\n                    continuing++;\n                } else if (c2 === 0x80) {\n                    if (continuing % 2) break;\n                } else {\n                    break;\n                }\n            }\n            if (j >= data.length && j - i >= 4) {\n                return true;\n            } else {\n                return (j - i >= cLimit) ? true : false;\n            }\n        };\n\n        const encodeC = (i: number) => {\n            // code C\n            d += mode === null ? \"\\x69\" : \"\\x63\"; // start / change mode\n            let j = i, v = 0, continuing = 0;\n\n            for (; j < data.length; j++) {\n                let c2 = data.charCodeAt(j);\n                if (0x30 <= c2 && c2 <= 0x39) {\n                    v = v * 10 + (c2 - 0x30);\n                    continuing++;\n                    if (continuing % 2 === 0) {\n                        d += String.fromCharCode(v);\n                        v = 0;\n                    }\n                } else {\n                    if (this.props.useLatin1 && c2 > 127) {\n                        c2 -= 128;\n                    }\n                    if (c2 === 0x80) {\n                        if (continuing % 2) {\n                            break;\n                        } else {\n                            d += \"\\x66\"; // FNC1\n                        }\n                    } else {\n                        break;\n                    }\n                }\n            }\n            if (j < data.length || continuing % 2) {\n                mode = detAB(j);\n                d += mode === 0 ? \"\\x65\" : \"\\x64\";\n            }\n            if (continuing % 2) {\n                const z = fullAsciiMap.get(0x30 + v);\n                if (z === void 0) {\n                    throw new Error(\"code128: character is out of range.\");\n                }\n                if (mode === null) {\n                    throw new Error(\"code128: mode === null. Assertion failed.\");\n                }\n                d += z[mode];\n            }\n            return j;\n        };\n\n        const detAB = (i: number) => {\n            let cA = 0, cB = 0;\n            let j = Math.max(i, scanned);\n\n            for (; j < data.length; j++) {\n                let c2 = data.charCodeAt(j);\n                if (this.props.useLatin1 && c2 > 127) {\n                    c2 -= 128;\n                }\n                const z = fullAsciiMap.get(c2);\n                if (z === void 0) {\n                    throw new Error(\"code128: character is out of range.\");\n                }\n                const bA = z[0];\n                const bB = z[1];\n                if (bA === void 0 || bB === void 0) {\n                    break;\n                }\n            }\n            const N = Math.min(data.length, j + 6);\n            for (; j < N; j++) {\n                let c2 = data.charCodeAt(j);\n                if (this.props.useLatin1 && c2 > 127) {\n                    c2 -= 128;\n                }\n                const z = fullAsciiMap.get(c2);\n                if (z === void 0) {\n                    throw new Error(\"code128: character is out of range.\");\n                }\n                const bA = z[0];\n                if (bA === void 0) cA++;\n                const bB = z[1];\n                if (bB === void 0) cB++;\n            }\n            scanned = j;\n\n            const mode2 = mode === null ? 1 : mode;\n            if      (cA < cB) return (cB - cA) < 2 ? mode2 : 0;\n            else if (cA > cB) return (cA - cB) < 2 ? mode2 : 1;\n            else              return mode2;\n        };\n\n        for (let i = 0; i < data.length; ) {\n            const ci = data.charCodeAt(i);\n            let done = false, latin1 = false;\n\n            if ((0x30 <= ci && ci <= 0x39) ||\n                (!this.props.useLatin1 && ci === 0x80) ||\n                (this.props.useLatin1 && ci === 0x100)) {\n\n                if (detC(i)) {\n                    i = encodeC(i);\n                    done = true;\n                }\n                cLimit = 6;\n            }\n\n            if (! done) {\n                let c2 = data.charCodeAt(i);\n                if (this.props.useLatin1 && c2 > 127) {\n                    c2 -= 128;\n                    if (128 <= c2 && c2 <= 135) {\n                        // FNC1-4, CODE A-C, SHIFT A-B\n                        if (c2 === 131) {\n                            latin1 = true; // escape FNC4\n                        }\n                    } else {\n                        latin1 = true;\n                    }\n                }\n                const z = fullAsciiMap.get(c2);\n                if (z === void 0) {\n                    throw new Error(\"code128: character is out of range.\");\n                }\n                let b = mode !== null ? z[mode] : void 0;\n                if (b === void 0) {\n                    const newMode = detAB(i);\n                    if (mode === newMode) {\n                        d += \"\\x62\"; // shift\n                        b = z[(mode + 1) % 2];\n                    } else {\n                        if (mode === null) d += mode === 0 ? \"\\x67\" : \"\\x68\"; // start\n                        else               d += mode === 0 ? \"\\x64\" : \"\\x65\"; // change mode\n                        mode = newMode;\n                        b = z[mode];\n                    }\n                }\n                if (b === null) {\n                    throw new Error(\"code128: character is out of range.\");\n                }\n                if (latin1) {\n                    const fnc4 = fullAsciiMap.get(131);\n                    if (fnc4 === void 0) {\n                        throw new Error(\"code128: character is out of range.\");\n                    }\n                    if (mode === null) {\n                        throw new Error(\"code128: mode === null. Assertion failed.\");\n                    }\n                    d += fnc4[mode]; // FNC4\n                }\n                d += b;\n                i++;\n            }\n        }\n\n        d += String.fromCharCode(this.calcMod103Checksum(d));\n        return {data: d, startChar: \"\", stopChar: \"\\x6A\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as Code128PropsNoUndefined;\n\n        const w = props.elementWidth;\n        return [0, w, w * 2, w * 3, w * 4];\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string}>([\n    // left even(G)\n    [\"\\x00\", {index:   0, pattern: \"-1123\"}],\n    [\"\\x01\", {index:   1, pattern: \"-1222\"}],\n    [\"\\x02\", {index:   2, pattern: \"-2212\"}],\n    [\"\\x03\", {index:   3, pattern: \"-1141\"}],\n    [\"\\x04\", {index:   4, pattern: \"-2311\"}],\n    [\"\\x05\", {index:   5, pattern: \"-1321\"}],\n    [\"\\x06\", {index:   6, pattern: \"-4111\"}],\n    [\"\\x07\", {index:   7, pattern: \"-2131\"}],\n    [\"\\x08\", {index:   8, pattern: \"-3121\"}],\n    [\"\\x09\", {index:   9, pattern: \"-2113\"}],\n\n    // left odd(L)\n    [\"\\x10\", {index:  10, pattern: \"-3211\"}],\n    [\"\\x11\", {index:  11, pattern: \"-2221\"}],\n    [\"\\x12\", {index:  12, pattern: \"-2122\"}],\n    [\"\\x13\", {index:  13, pattern: \"-1411\"}],\n    [\"\\x14\", {index:  14, pattern: \"-1132\"}],\n    [\"\\x15\", {index:  15, pattern: \"-1231\"}],\n    [\"\\x16\", {index:  16, pattern: \"-1114\"}],\n    [\"\\x17\", {index:  17, pattern: \"-1312\"}],\n    [\"\\x18\", {index:  18, pattern: \"-1213\"}],\n    [\"\\x19\", {index:  19, pattern: \"-3112\"}],\n\n    // right even(R)\n    [\"\\x20\", {index:  20, pattern: \"3211\"}],\n    [\"\\x21\", {index:  21, pattern: \"2221\"}],\n    [\"\\x22\", {index:  22, pattern: \"2122\"}],\n    [\"\\x23\", {index:  23, pattern: \"1411\"}],\n    [\"\\x24\", {index:  24, pattern: \"1132\"}],\n    [\"\\x25\", {index:  25, pattern: \"1231\"}],\n    [\"\\x26\", {index:  26, pattern: \"1114\"}],\n    [\"\\x27\", {index:  27, pattern: \"1312\"}],\n    [\"\\x28\", {index:  28, pattern: \"1213\"}],\n    [\"\\x29\", {index:  29, pattern: \"3112\"}],\n\n    // left even-odd (even(G):0, odd(L):1)\n    [\"\\x30\", {index:  30, pattern: \"111111\"}],\n    [\"\\x31\", {index:  31, pattern: \"110100\"}],\n    [\"\\x32\", {index:  32, pattern: \"110010\"}],\n    [\"\\x33\", {index:  33, pattern: \"110001\"}],\n    [\"\\x34\", {index:  34, pattern: \"101100\"}],\n    [\"\\x35\", {index:  35, pattern: \"100110\"}],\n    [\"\\x36\", {index:  36, pattern: \"100011\"}],\n    [\"\\x37\", {index:  37, pattern: \"101010\"}],\n    [\"\\x38\", {index:  38, pattern: \"101001\"}],\n    [\"\\x39\", {index:  39, pattern: \"100101\"}],\n\n    // left guard bar\n    [\"\\x40\", {index:  40, pattern: \"111\"}],\n    // center bar\n    [\"\\x50\", {index:  50, pattern: \"-11111\"}],\n    // right guard bar\n    [\"\\x60\", {index:  60, pattern: \"111\"}],\n\n    // EAN-5 checksum (even(G):0, odd(L):1)\n    [\"\\x70\", {index:  70, pattern: \"00111\"}],\n    [\"\\x71\", {index:  71, pattern: \"01011\"}],\n    [\"\\x72\", {index:  72, pattern: \"01101\"}],\n    [\"\\x73\", {index:  73, pattern: \"01110\"}],\n    [\"\\x74\", {index:  74, pattern: \"10011\"}],\n    [\"\\x75\", {index:  75, pattern: \"11001\"}],\n    [\"\\x76\", {index:  76, pattern: \"11100\"}],\n    [\"\\x77\", {index:  77, pattern: \"10101\"}],\n    [\"\\x78\", {index:  78, pattern: \"10110\"}],\n    [\"\\x79\", {index:  79, pattern: \"11010\"}],\n\n    // EAN-2 checksum (even(G):0, odd(L):1)\n    [\"\\x80\", {index:  80, pattern: \"11\"}],\n    [\"\\x81\", {index:  81, pattern: \"10\"}],\n    [\"\\x82\", {index:  82, pattern: \"01\"}],\n    [\"\\x83\", {index:  83, pattern: \"00\"}],\n\n    // EAN-5/2 start\n    [\"\\x90\", {index:  90, pattern: \"-1112\"}],\n    // EAN-5/2 character separator\n    [\"\\x91\", {index:  91, pattern: \"-11\"}],\n\n    // UPC-E start\n    [\"\\x92\", {index:  92, pattern: \"112\"}],\n    // UPC-E stop\n    [\"\\x93\", {index:  93, pattern: \"-111111\"}],\n\n    // UPC-E Number system 0 even-odd (even(G):0, odd(L):1)\n    [\"\\xA0\", {index: 100, pattern: \"000111\"}],\n    [\"\\xA1\", {index: 101, pattern: \"001011\"}],\n    [\"\\xA2\", {index: 102, pattern: \"001101\"}],\n    [\"\\xA3\", {index: 103, pattern: \"001110\"}],\n    [\"\\xA4\", {index: 104, pattern: \"010011\"}],\n    [\"\\xA5\", {index: 105, pattern: \"011001\"}],\n    [\"\\xA6\", {index: 106, pattern: \"011100\"}],\n    [\"\\xA7\", {index: 107, pattern: \"010101\"}],\n    [\"\\xA8\", {index: 108, pattern: \"010110\"}],\n    [\"\\xA9\", {index: 109, pattern: \"011010\"}],\n\n    // UPC-E Number system 1 even-odd (even(G):0, odd(L):1)\n    [\"\\xB0\", {index: 110, pattern: \"111000\"}],\n    [\"\\xB1\", {index: 111, pattern: \"110100\"}],\n    [\"\\xB2\", {index: 112, pattern: \"110010\"}],\n    [\"\\xB3\", {index: 113, pattern: \"110001\"}],\n    [\"\\xB4\", {index: 114, pattern: \"101100\"}],\n    [\"\\xB5\", {index: 115, pattern: \"100110\"}],\n    [\"\\xB6\", {index: 116, pattern: \"100011\"}],\n    [\"\\xB7\", {index: 117, pattern: \"101010\"}],\n    [\"\\xB8\", {index: 118, pattern: \"101001\"}],\n    [\"\\xB9\", {index: 119, pattern: \"100101\"}],\n]);\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap }      from './data/Ean.data';\n\n\n\nexport type EanTypesEnum = \"ean-2\" | \"ean-5\" | \"ean-8\" | \"ean-13\" | \"upc-a\" | \"upc-e\";\n\nexport interface EanProps extends BarcodeBaseProps {\n    smallFont?: string;\n    elementWidth?: number;\n    guardExtHeight?: number;\n}\n\nexport interface EanPropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    smallFont: string;\n    elementWidth: number;\n    guardExtHeight: number;\n}\n\nexport const eanPropsDefault: EanPropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    smallFont: \"normal 3.0px 'OCRB'\", // \"initial user coordinate\" 1px == \"viewport coordinate\" 1mm\n    elementWidth: 0.33,\n    guardExtHeight: 2\n});\n\nexport class EanBase extends BarcodeBase<EanProps> {\n    public constructor(props: EanProps) {\n        super(Object.assign({}, eanPropsDefault, props), charactersMap);\n    }\n\n    protected get eanTypes(): EanTypesEnum {\n        throw new Error(\"EAN#eanTypes: abstract property\");\n    }\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n\n        const props = this.props as EanPropsNoUndefined;\n\n        let len: number;\n        let guard = 0;\n        switch (this.eanTypes) {\n        case \"ean-13\": case \"upc-a\":\n            len = 12;\n            guard = 11;\n            break;\n        case \"ean-8\":\n            len = 8;\n            guard = 11;\n            break;\n        case \"ean-5\":\n            len = 5;\n            guard = 13; // start + character separator\n            break;\n        case \"upc-e\":\n            len = 6;\n            guard = 10;\n            break;\n        case \"ean-2\":\n            len = 2;\n            guard = 7; // start + character separator\n            break;\n        default:\n            throw new Error(\"bad data length\");\n        }\n\n        return {\n            // total width (quiet + data + cd + guard bar + center bar)\n            tw: props.quietWidth  * 2 + props.elementWidth * (7 * len + guard),\n            // total height (quiet + bar + text)\n            th: props.quietHeight * 2 + props.height + (props.drawText ? props.textHeight : 0)\n        };\n    }\n\n    protected calcEanMod10W3Checksum(data: string): number {\n        let odd = 0, even = 0;\n        for (let i = 0; i < data.length; i++) {\n            // most right -> odd\n            const z = this.charactersMap.get(data[data.length - 1 - i]);\n            if (z === void 0) {\n                throw new Error(\"EAN: character is out of range.\");\n            }\n            if ((i + 1) % 2) {\n                odd  = (odd  + z.index) % 10;\n            } else {\n                even = (even + z.index) % 10;\n            }\n        }\n        return (10 - ((odd * 3 + even) % 10)) % 10;\n    }\n\n    protected calcEan5Checksum(data: string): number {\n        let s = 0;\n        for (let i = 0; i < data.length; i++) {\n            s = (s + Number.parseInt(data[i], 10) * (i % 2 ? 3 : 9)) % 10;\n        }\n        return s;\n    }\n\n    protected calcEan2Checksum(data: string): number {\n        return Number.parseInt(data, 10) % 4;\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        let originalData = data;\n        let d = \"\";\n        let hd: string | undefined = void 0;\n        let text: string;\n\n        if (this.eanTypes === \"upc-a\" || this.eanTypes === \"upc-e\") {\n            switch (data.length) {\n            case 12: case 11: // UPC-A\n                data = \"0\" + data;\n                break;\n            }\n\n            if (this.eanTypes === \"upc-e\") {\n                let ma: RegExpMatchArray | null;\n                switch (data.length) {\n                case 13: case 12:\n                    {\n                        originalData = data.slice(0, 12);\n\n                        // tslint:disable-next-line:no-conditional-assignment\n                        if (ma = data.match(/^0([01])([0-9]{5})0{4}([5-9])/)) {\n                            // [01]XXXXX-0000[5-9] -> [01]XXXXX[5-9]\n                            data = `${ma[1]}${ma[2]}${ma[3]}`;\n                        }\n                        // tslint:disable-next-line:no-conditional-assignment\n                        else if (ma = data.match(/^0([01])([0-9]{4})0{5}([0-9])/)) {\n                            // [01]XXXX0-0000N     -> [01]XXXXN4\n                            data = `${ma[1]}${ma[2]}${ma[3]}4`;\n                        }\n                        // tslint:disable-next-line:no-conditional-assignment\n                        else if (ma = data.match(/^0([01])([0-9]{3})0{5}([0-9]{2})/)) {\n                            // [01]XXX00-000NN     -> [01]XXXNN3\n                            data = `${ma[1]}${ma[2]}${ma[3]}3`;\n                        }\n                        // tslint:disable-next-line:no-conditional-assignment\n                        else if (ma = data.match(/^0([01])([0-9]{2})([0-2])0{4}([0-9]{3})/)) {\n                            // [01]XX[0-2]00-00NNN -> [01]XXNNN[0-2]\n                            data = `${ma[1]}${ma[2]}${ma[4]}${ma[3]}`;\n                        }\n                        else {\n                            throw new Error(\"EAN: bad data format\");\n                        }\n\n                        const cd = this.calcEanMod10W3Checksum(originalData);\n                        originalData += cd;\n                        data += cd;\n                    }\n                    break;\n                case 8: case 7:\n                    {\n                        if (!data.match(/^[01]/)) {\n                            throw new Error(\"EAN: bad data format\");\n                        }\n\n                        switch (data[6]) {\n                        case \"0\": case \"1\": case \"2\":\n                            // [01]XX[0-2]00-00NNN <- [01]XXNNN[0-2]\n                            originalData = `0${data[0]}${data.slice(1, 3)}${data.slice(6, 7)}0000${data.slice(3, 6)}`;\n                            break;\n                        case \"3\":\n                            // [01]XXX00-000NN     <- [01]XXXNN3\n                            originalData = `0${data[0]}${data.slice(1, 4)}00000${data.slice(4, 6)}`;\n                            break;\n                        case \"4\":\n                            // [01]XXXX0-0000N     <- [01]XXXXN4\n                            originalData = `0${data[0]}${data.slice(1, 5)}00000${data.slice(5, 6)}`;\n                            break;\n                        case \"5\": case \"6\": case \"7\": case \"8\": case \"9\":\n                            // [01]XXXXX-0000[5-9] <- [01]XXXXX[5-9]\n                            originalData = `0${data[0]}${data.slice(1, 6)}0000${data.slice(6, 7)}`;\n                            break;\n                        default:\n                            throw new Error(\"EAN: bad data format\");\n                        }\n\n                        const cd = this.calcEanMod10W3Checksum(originalData);\n                        originalData += cd;\n                        data = data.slice(0, 7) + cd;\n                    }\n                    break;\n                }\n            }\n        }\n\n        switch (this.eanTypes) {\n        case \"ean-13\": case \"upc-a\":\n            {\n                hd = \"\";\n                text = data.slice(0, 12);\n                d += \"\\x40\";\n                hd += \"1\";\n                const z = this.charactersMap.get(String.fromCharCode(0x30 + Number.parseInt(data[0], 10)));\n                if (z === void 0) {\n                    throw new Error(\"EAN: character is out of range.\");\n                }\n                const eo = z.pattern;\n                for (let i = 1; i < 7; i++) {\n                    const p = Number.parseInt(eo[i - 1], 10);\n                    d += String.fromCharCode(p * 0x10 + Number.parseInt(data[i], 10));\n                    if (this.eanTypes === \"upc-a\" && i === 1) hd += \"1\";\n                    else                                      hd += \"0\";\n                }\n                d += \"\\x50\";\n                hd += \"1\";\n                for (let i = 7; i < 12; i++) {\n                    d += String.fromCharCode(0x20 + Number.parseInt(data[i], 10));\n                    hd += \"0\";\n                }\n                const cd = this.calcEanMod10W3Checksum(text);\n                text += String.fromCharCode(0x30 + cd);\n                d += String.fromCharCode(0x20 + cd);\n                if (this.eanTypes === \"upc-a\") hd += \"1\";\n                else                           hd += \"0\";\n                d += \"\\x60\";\n                hd += \"1\";\n            }\n            break;\n        case \"ean-8\":\n            {\n                hd = \"\";\n                text = data.slice(0, 7);\n                d += \"\\x40\";\n                hd += \"1\";\n                for (let i = 0; i < 4; i++) {\n                    d += String.fromCharCode(0x10 + Number.parseInt(data[i], 10));\n                    hd += \"0\";\n                }\n                d += \"\\x50\";\n                hd += \"1\";\n                for (let i = 4; i < 7; i++) {\n                    d += String.fromCharCode(0x20 + Number.parseInt(data[i], 10));\n                    hd += \"0\";\n                }\n                const cd = this.calcEanMod10W3Checksum(text);\n                text += String.fromCharCode(0x30 + cd);\n                d += String.fromCharCode(0x20 + cd);\n                hd += \"0\";\n                d += \"\\x60\";\n                hd += \"1\";\n            }\n            break;\n        case \"upc-e\":\n            {\n                hd = \"\";\n                text = data;\n                d += \"\\x92\";\n                hd += \"1\";\n                const z = this.charactersMap.get(String.fromCharCode(\n                    (data[0] === \"0\" ? 0xa0 : 0xb0) + Number.parseInt(data[7], 10)));\n                if (z === void 0) {\n                    throw new Error(\"EAN: character is out of range.\");\n                }\n                const eo = z.pattern;\n                for (let i = 1; i < 7; i++) {\n                    const p = Number.parseInt(eo[i - 1], 10);\n                    d += String.fromCharCode(p * 0x10 + Number.parseInt(data[i], 10));\n                    hd += \"0\";\n                }\n                d += \"\\x93\";\n                hd += \"1\";\n            }\n            break;\n        case \"ean-5\":\n            {\n                text = data.slice(0, 5);\n                d += \"\\x90\";\n                const z = this.charactersMap.get(String.fromCharCode(0x70 + this.calcEan5Checksum(data)));\n                if (z === void 0) {\n                    throw new Error(\"EAN: character is out of range.\");\n                }\n                const eo = z.pattern;\n                for (let i = 0; i < 5; i++) {\n                    const p = Number.parseInt(eo[i], 10);\n                    if (i > 0) d += \"\\x91\";\n                    d += String.fromCharCode(p * 0x10 + Number.parseInt(data[i], 10));\n                }\n            }\n            break;\n        case \"ean-2\":\n            {\n                text = data.slice(0, 2);\n                d += \"\\x90\";\n                const z = this.charactersMap.get(String.fromCharCode(0x80 + this.calcEan2Checksum(data)));\n                if (z === void 0) {\n                    throw new Error(\"EAN: character is out of range.\");\n                }\n                const eo = z.pattern;\n                for (let i = 0; i < 2; i++) {\n                    const p = Number.parseInt(eo[i], 10);\n                    if (i > 0) d += \"\\x91\";\n                    d += String.fromCharCode(p * 0x10 + Number.parseInt(data[i], 10));\n                }\n            }\n            break;\n        default:\n            throw new Error(\"EAN: bad data length\");\n        }\n        return {data: d, heightData: hd, labelText: text, startChar: \"\", stopChar: \"\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as EanPropsNoUndefined;\n\n        const w = props.elementWidth;\n        return [0, w, w * 2, w * 3, w * 4];\n    }\n\n    protected getBarSpaceHeight(): Array<Array<{offset: number, height: number}>> {\n        const props = this.props as EanPropsNoUndefined;\n\n        const h  = props.height        ;\n        const gh = props.guardExtHeight;\n        return [\n            [{offset: 0, height: h}],\n            [{offset: 0, height: h + gh}]\n        ];\n    }\n\n    protected getRenderStartCoodinate(data: string, text: string): {rx: number, ry: number} {\n        const props = this.props as EanPropsNoUndefined;\n\n        const qw = props.quietWidth ;\n        const qh = props.quietHeight;\n\n        switch (this.eanTypes) {\n        case \"ean-13\": case \"ean-8\": case \"upc-a\": case \"upc-e\":\n            {\n                return {rx: qw, ry: qh};\n            }\n        case \"ean-5\": case \"ean-2\":\n            {\n                return {rx: qw, ry: qh + (props.drawText ? props.textHeight : 0)};\n            }\n        default:\n            throw new Error(\"EAN: bad data length\");\n        }\n    }\n\n    protected renderText(canvas: SvgCanvas, tw: number, th: number, data: string, text: string) {\n        const props = this.props as EanPropsNoUndefined;\n\n        switch (this.eanTypes) {\n        case \"ean-13\":\n            if (props.guardExtHeight > 0) {\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.textAlign = \"start\";\n                canvas.fillText(text.slice( 0,  1), props.quietWidth - props.elementWidth * 14, th - props.quietHeight);\n                canvas.textAlign = \"center\";\n                canvas.fillText(text.slice( 1,  7), props.quietWidth + props.elementWidth * 24, th - props.quietHeight);\n                canvas.fillText(text.slice( 7, 13), props.quietWidth + props.elementWidth * 71, th - props.quietHeight);\n            } else {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text, tw / 2, th - props.quietHeight);\n            }\n            break;\n        case \"upc-a\":\n            if (props.guardExtHeight > 0) {\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.font = props.smallFont || canvas.font;\n                canvas.textAlign = \"start\";\n                canvas.fillText(text.slice( 1,  2), props.quietWidth - props.elementWidth * 12, th - props.quietHeight - props.textHeight * 0.2);\n                canvas.font = props.font || canvas.font;\n                canvas.textAlign = \"center\";\n                canvas.fillText(text.slice( 2,  7), props.quietWidth + props.elementWidth * 27.5, th - props.quietHeight);\n                canvas.fillText(text.slice( 7, 12), props.quietWidth + props.elementWidth * 67.5, th - props.quietHeight);\n                canvas.font = props.smallFont || canvas.font;\n                canvas.textAlign = \"start\";\n                canvas.fillText(text.slice(12, 13), tw - props.quietWidth + props.elementWidth * 7, th - props.quietHeight - props.textHeight * 0.2);\n            } else {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text.slice(1), tw / 2, th - props.quietHeight);\n            }\n            break;\n        case \"ean-8\":\n            if (props.guardExtHeight > 0) {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text.slice(0, 4), props.quietWidth + props.elementWidth * 17, th - props.quietHeight);\n                canvas.fillText(text.slice(4, 8), props.quietWidth + props.elementWidth * 50, th - props.quietHeight);\n            } else {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text, tw / 2, th - props.quietHeight);\n            }\n            break;\n        case \"upc-e\":\n            if (props.guardExtHeight > 0) {\n                canvas.font = props.smallFont || canvas.font;\n                canvas.textAlign = \"start\";\n                canvas.fillText(text.slice(0, 1), props.quietWidth - props.elementWidth * 12, th - props.quietHeight - props.textHeight * 0.2);\n                canvas.font = props.font || canvas.font;\n                canvas.textAlign = \"center\";\n                canvas.fillText(text.slice(1, 7), tw / 2, th - props.quietHeight);\n                canvas.font = props.smallFont || canvas.font;\n                canvas.textAlign = \"start\";\n                canvas.fillText(text.slice(7, 8), tw - props.quietWidth + props.elementWidth * 7, th - props.quietHeight - props.textHeight * 0.2);\n            } else {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text, tw / 2, th - props.quietHeight);\n            }\n            break;\n        case \"ean-5\": case \"ean-2\":\n            {\n                canvas.textAlign = \"center\";\n                canvas.textBaseline = \"alphabetic\"; // \"bottom\";\n                canvas.fillText(text, tw / 2, props.quietHeight + props.textHeight);\n            }\n            break;\n        default:\n            throw new Error(\"EAN: bad data length\");\n        }\n    }\n}\n\nexport class Ean13 extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"ean-13\";\n    }\n}\n\nexport const Gtin13 = Ean13;\n\nexport class Ean8 extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"ean-8\";\n    }\n}\n\nexport const Gtin8 = Ean8;\n\nexport class Ean5 extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"ean-5\";\n    }\n}\n\nexport class Ean2 extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"ean-2\";\n    }\n}\n\nexport class UpcA extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"upc-a\";\n    }\n}\n\nexport class UpcE extends EanBase {\n    protected get eanTypes(): EanTypesEnum {\n        return \"upc-e\";\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nconst characterPatterns = new Map<number, string>([\n    [0, \"11221\"],\n    [1, \"21112\"],\n    [2, \"12112\"],\n    [3, \"22111\"],\n    [4, \"11212\"],\n    [5, \"21211\"],\n    [6, \"12211\"],\n    [7, \"11122\"],\n    [8, \"21121\"],\n    [9, \"12121\"]\n]);\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string}>();\nfor (const a of characterPatterns) {\n    for (const b of characterPatterns) {\n        const x = a[0] * 10 + b[0];\n        const c = String.fromCharCode(x);\n        let p = \"\";\n        for (let i = 0; i < 5; i++) {\n            p += a[1][i] + b[1][i];\n        }\n        charactersMap.set(c, {index: x, pattern: p});\n    }\n}\ncharactersMap.set(\"\\x64\", {index: 100, pattern: \"1111\"}); // start\ncharactersMap.set(\"\\x65\", {index: 101, pattern: \"211\"}); // stop\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap }      from './data/Itf.data';\n\n\n\nexport interface ItfProps extends BarcodeBaseProps {\n    addCheckDigit?: boolean;\n    narrowWidth?: number;\n    wideWidth?: number;\n}\n\nexport interface ItfPropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    addCheckDigit: boolean;\n    narrowWidth: number;\n    wideWidth: number;\n}\n\nexport const itfPropsDefault: ItfPropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    addCheckDigit: true,\n    narrowWidth: 0.33,\n    wideWidth: 0.66\n});\n\nexport class Itf extends BarcodeBase<ItfProps> {\n    public constructor(props: ItfProps) {\n        super(Object.assign({}, itfPropsDefault, props), charactersMap);\n    }\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n        const props = this.props as ItfPropsNoUndefined;\n\n        // module width (bar + space + gap)\n        const mw = props.narrowWidth * 3 + props.wideWidth * 2;\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw: props.quietWidth  * 2 + (props.narrowWidth * 8) + mw * data.length * 2,\n            // total height (quiet + bar + text)\n            th: props.quietHeight * 2 + props.height + (props.drawText ? props.textHeight : 0)\n        };\n    }\n\n    protected calcItfMod10W3Checksum(data: string): string {\n        let odd = 0, even = 0;\n        for (let i = 0; i < data.length; i++) {\n            // most right -> odd\n            if ((i + 1) % 2) {\n                odd  = (odd  + Number.parseInt(data[data.length - 1 - i], 10)) % 10;\n            } else {\n                even = (even + Number.parseInt(data[data.length - 1 - i], 10)) % 10;\n            }\n        }\n        return String((10 - ((odd * 3 + even) % 10)) % 10);\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        let labelText = data;\n        if (this.props.addCheckDigit) {\n            const cd = this.calcItfMod10W3Checksum(data);\n            labelText += cd;\n        }\n        let d = \"\";\n        if (labelText.length % 2) {\n            throw new Error(\"bad data length\");\n        }\n        for (let i = 0; i < labelText.length; i += 2) {\n            const c = Number.parseInt(labelText.slice(i, i + 2), 10);\n            d += String.fromCharCode(c);\n        }\n        return {data: d, labelText, startChar: \"\\x64\", stopChar: \"\\x65\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as ItfPropsNoUndefined;\n\n        return [0, props.narrowWidth, props.wideWidth];\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string}>([\n    [\"0\", {index:  0, pattern: \"144\"}],\n    [\"1\", {index:  1, pattern: \"114\"}],\n    [\"2\", {index:  2, pattern: \"132\"}],\n    [\"3\", {index:  3, pattern: \"312\"}],\n    [\"4\", {index:  4, pattern: \"123\"}],\n    [\"5\", {index:  5, pattern: \"141\"}],\n    [\"6\", {index:  6, pattern: \"321\"}],\n    [\"7\", {index:  7, pattern: \"213\"}],\n    [\"8\", {index:  8, pattern: \"231\"}],\n    [\"9\", {index:  9, pattern: \"411\"}],\n    [\"-\", {index: 10, pattern: \"414\"}],\n    [\"A\", {index: 11, pattern: \"324\"}], // CC1\n    [\"B\", {index: 12, pattern: \"342\"}], // CC2\n    [\"C\", {index: 13, pattern: \"234\"}], // CC3\n    [\"D\", {index: 14, pattern: \"432\"}], // CC4\n    [\"E\", {index: 15, pattern: \"243\"}], // CC5\n    [\"F\", {index: 16, pattern: \"423\"}], // CC6\n    [\"G\", {index: 17, pattern: \"441\"}], // CC7\n    [\"H\", {index: 18, pattern: \"111\"}], // CC8\n    [\"[\", {index: 19, pattern: \"13\" }], // start\n    [\"]\", {index: 38, pattern: \"31\" }]  // stop\n]);\n\n\nexport const reverseMap = new Map<number, string>();\nfor (const e of charactersMap.entries()) reverseMap.set(e[1].index, e[0]);\n\n\nexport const fullAsciiMap = new Map<number, string>([\n    [ 45, \"-\" ], // -\n    [ 48, \"0\" ], // 0\n    [ 49, \"1\" ], // 1\n    [ 50, \"2\" ], // 2\n    [ 51, \"3\" ], // 3\n    [ 52, \"4\" ], // 4\n    [ 53, \"5\" ], // 5\n    [ 54, \"6\" ], // 6\n    [ 55, \"7\" ], // 7\n    [ 56, \"8\" ], // 8\n    [ 57, \"9\" ], // 9\n    [ 65, \"A0\" ], // A\n    [ 66, \"A1\" ], // B\n    [ 67, \"A2\" ], // C\n    [ 68, \"A3\" ], // D\n    [ 69, \"A4\" ], // E\n    [ 70, \"A5\" ], // F\n    [ 71, \"A6\" ], // G\n    [ 72, \"A7\" ], // H\n    [ 73, \"A8\" ], // I\n    [ 74, \"A9\" ], // J\n    [ 75, \"B0\" ], // K\n    [ 76, \"B1\" ], // L\n    [ 77, \"B2\" ], // M\n    [ 78, \"B3\" ], // N\n    [ 79, \"B4\" ], // O\n    [ 80, \"B5\" ], // P\n    [ 81, \"B6\" ], // Q\n    [ 82, \"B7\" ], // R\n    [ 83, \"B8\" ], // S\n    [ 84, \"B9\" ], // T\n    [ 85, \"C0\" ], // U\n    [ 86, \"C1\" ], // V\n    [ 87, \"C2\" ], // W\n    [ 88, \"C3\" ], // X\n    [ 89, \"C4\" ], // Y\n    [ 90, \"C5\" ], // Z\n]);\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap,\n         reverseMap,\n         fullAsciiMap }       from './data/JapanPostal.data';\n\n\n\nexport interface JapanPostalProps extends BarcodeBaseProps {\n    elementWidth?: number;\n}\n\nexport interface JapanPostalPropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    elementWidth: number;\n}\n\nexport const japanPostalPropsDefault: JapanPostalPropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    elementWidth: 0.6,\n    height: 1.2 * 3\n});\n\nexport class JapanPostal extends BarcodeBase<JapanPostalProps> {\n    public constructor(props: JapanPostalProps) {\n        super(Object.assign({}, japanPostalPropsDefault, props), charactersMap);\n    }\n\n\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n\n        const props = this.props as JapanPostalPropsNoUndefined;\n\n        // module width (bar + space)\n        const mw = props.elementWidth * 6;\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw: props.quietWidth  * 2 + mw * 21 + props.elementWidth * (4 + 3),\n            // total height (quiet + bar)\n            th: props.quietHeight * 2 + props.height\n        };\n    }\n\n    protected calcCheckDigit(data: string): string {\n        let cdChar = \"\";\n        let cd = 0;\n        for (let i = 0; i < data.length; i++) {\n            const z = this.charactersMap.get(data[i]);\n            if (z === void 0) {\n                throw new Error(\"Japan Post: character is out of range.\");\n            }\n            cd = (cd + z.index) % 19;\n        }\n        const cdch = reverseMap.get(cd);\n        if (cdch === void 0) {\n            throw new Error(\"Japan Post: check digit is out of range.\");\n        }\n        cdChar = cdch;\n        return cdChar;\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        let d = \"\";\n        for (let i = 0; i < data.length; i++) {\n            const c = fullAsciiMap.get(data.charCodeAt(i));\n            if (c === void 0) {\n                throw new Error(\"Japan Post: character is out of range.\");\n            }\n            d += c;\n        }\n        d += \"DDDDDDDDDDDDDDDDD\";\n        return {data: d.slice(0, 20), startChar: \"[\", stopChar: \"]\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as JapanPostalPropsNoUndefined;\n\n        return [0, props.elementWidth];\n    }\n\n    protected getBarSpaceHeight(): Array<Array<{offset: number, height: number}>> {\n        const props = this.props as JapanPostalPropsNoUndefined;\n\n        const h = props.height;\n        return [\n            [{offset:     0, height: h        }], // 0: space\n            [{offset:     0, height: h        }], // 1: full\n            [{offset:     0, height: h * 2 / 3}], // 2: upper\n            [{offset: h / 3, height: h * 2 / 3}], // 3: lower\n            [{offset: h / 3, height: h     / 3}]  // 4: timing\n        ];\n    }\n\n    protected get isHeightModulated(): boolean {\n        return true;\n    }\n\n    protected renderText(canvas: SvgCanvas, tw: number, th: number, data: string, text: string) {\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nexport const charactersMap = new Map<string, {index: number, pattern: string, width: number}>([\n    [\"0\", {index:  0, pattern: \"11111220\", width:  9}],\n    [\"1\", {index:  1, pattern: \"11112210\", width:  9}],\n    [\"2\", {index:  2, pattern: \"11121120\", width:  9}],\n    [\"3\", {index:  3, pattern: \"22111110\", width:  9}],\n    [\"4\", {index:  4, pattern: \"11211210\", width:  9}],\n    [\"5\", {index:  5, pattern: \"21111210\", width:  9}],\n    [\"6\", {index:  6, pattern: \"12111120\", width:  9}],\n    [\"7\", {index:  7, pattern: \"12112110\", width:  9}],\n    [\"8\", {index:  8, pattern: \"12211110\", width:  9}],\n    [\"9\", {index:  9, pattern: \"21121110\", width:  9}],\n    [\"-\", {index: 10, pattern: \"11122110\", width:  9}],\n    [\"$\", {index: 11, pattern: \"11221110\", width:  9}],\n    [\":\", {index: 12, pattern: \"21112120\", width: 10}],\n    [\"/\", {index: 13, pattern: \"21211120\", width: 10}],\n    [\".\", {index: 14, pattern: \"21212110\", width: 10}],\n    [\"+\", {index: 15, pattern: \"11212120\", width: 10}],\n    [\"A\", {index: 16, pattern: \"11221210\", width: 10}],\n    [\"B\", {index: 17, pattern: \"12121120\", width: 10}],\n    [\"C\", {index: 18, pattern: \"11121220\", width: 10}],\n    [\"D\", {index: 19, pattern: \"11122210\", width: 10}]\n]);\n\n\nexport const reverseMap = new Map<number, string>();\nfor (const e of charactersMap.entries()) reverseMap.set(e[1].index, e[0]);\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { BarcodeBaseProps,\n         BarcodeBasePropsNoUndefined,\n         barcodeBasePropsDefault,\n         BarcodeBase }        from './BarcodeBase';\nimport { charactersMap,\n         reverseMap }         from './data/Nw7.data';\n\n\n\nexport interface Nw7Props extends BarcodeBaseProps {\n    addCheckDigit?: boolean;\n    narrowWidth?: number;\n    wideWidth?: number;\n    charGapWidth?: number;\n    startChar?: string;\n    stopChar?: string;\n}\n\nexport interface Nw7PropsNoUndefined extends BarcodeBasePropsNoUndefined {\n    addCheckDigit: boolean;\n    narrowWidth: number;\n    wideWidth: number;\n    charGapWidth?: number;\n    startChar: string;\n    stopChar: string;\n}\n\nexport const nw7PropsDefault: Nw7PropsNoUndefined = Object.assign({}, barcodeBasePropsDefault, {\n    useRawDataAsText: true,\n    addCheckDigit: true,\n    narrowWidth: 0.33,\n    wideWidth: 0.66,\n    charGapWidth: void 0,\n    startChar: \"\",\n    stopChar: \"\"\n});\n\nexport class Nw7 extends BarcodeBase<Nw7Props> {\n    public constructor(props: Nw7Props) {\n        super(Object.assign({}, nw7PropsDefault, props), charactersMap);\n    }\n\n    protected calcSymbolSize(\n        data: string, startChar: string, stopChar: string, cdChar: string\n        ): {tw: number, th: number} {\n        const props = this.props as Nw7PropsNoUndefined;\n\n        const gw = props.charGapWidth || props.narrowWidth;\n        // module width (bar + space + gap)\n        const mw = props.narrowWidth * 4 + props.wideWidth * 3 + gw;\n\n        let tw = props.quietWidth * 2 - gw;\n\n        const data2 = `${startChar}${data}${cdChar}${stopChar}`;\n        for (const c of data2) {\n            const z = charactersMap.get(c);\n            if (z === void 0) {\n                throw new Error(\"NW7: character is out of range.\");\n            }\n            const wide = z.width - 7;\n            const narrow = 7 - wide;\n            tw += props.narrowWidth * narrow + props.wideWidth * wide + gw;\n        }\n\n        return {\n            // total width (quiet + data + start + stop + cd)\n            tw,\n            // total height (quiet + bar + text)\n            th: props.quietHeight * 2 + props.height + (props.drawText ? props.textHeight : 0)\n        };\n    }\n\n    protected calcCheckDigit(data: string): string {\n        let cdChar = \"\";\n        if (this.props.addCheckDigit) {\n            let cd = 0;\n            for (let i = 0; i < data.length; i++) {\n                const z = charactersMap.get(data[i]);\n                if (z === void 0) {\n                    throw new Error(\"NW7: character is out of range.\");\n                }\n                cd = (cd + z.index) % 16;\n            }\n            const cdch = reverseMap.get((16 - cd) % 16);\n            if (cdch === void 0) {\n                throw new Error(\"NW7: check digit is out of range.\");\n            }\n            cdChar = cdch;\n        }\n        return cdChar;\n    }\n\n    protected encodeData(data: string):\n        {data: string, heightData?: string, labelText?: string, startChar: string, stopChar: string} {\n\n        return {data, startChar: this.props.startChar || \"\", stopChar: this.props.stopChar || \"\"};\n    }\n\n    protected getBarSpaceWidth(): number[] {\n        const props = this.props as Nw7PropsNoUndefined;\n\n        const gw = props.charGapWidth || props.narrowWidth;\n        return [gw, props.narrowWidth, props.wideWidth];\n    }\n}\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { BitStreamWriter } from 'red-agate-util/modules/io/BitStream';\n\n\n\nexport interface QrCodewords {\n    L: number[];\n    M: number[];\n    Q: number[];\n    H: number[];\n}\n\nexport interface QrDataLength {\n    L: number[][];\n    M: number[][];\n    Q: number[][];\n    H: number[][];\n}\n\nexport type QrSourceDataTypes = (BitStreamWriter | Uint8Array | string | number);\n\nexport enum QrDataChunkType {\n    Control,\n    Number,\n    Alnum,\n    Binary\n}\n\n\nexport const ecLevelMap = new Map<string, number>([\n    [\"L\", 1], [\"M\", 0], [\"Q\", 3], [\"H\", 2]\n]);\n\nexport const numberModeCharMap = new Map<string, number>([\n    [\"0\", 0], [\"1\", 1], [\"2\", 2], [\"3\", 3], [\"4\", 4], [\"5\", 5], [\"6\", 6], [\"7\", 7], [\"8\", 8], [\"9\", 9]\n]);\n\nexport const alnumModeCharMap = new Map<string, number>([\n    [\"0\",  0], [\"1\",  1], [\"2\",  2], [\"3\",  3], [\"4\",  4], [\"5\",  5], [\"6\",  6], [\"7\",  7], [\"8\",  8], [\"9\",  9],\n    [\"A\", 10], [\"B\", 11], [\"C\", 12], [\"D\", 13], [\"E\", 14], [\"F\", 15], [\"G\", 16], [\"H\", 17], [\"I\", 18], [\"J\", 19],\n    [\"K\", 20], [\"L\", 21], [\"M\", 22], [\"N\", 23], [\"O\", 24], [\"P\", 25], [\"Q\", 26], [\"R\", 27], [\"S\", 28], [\"T\", 29],\n    [\"U\", 30], [\"V\", 31], [\"W\", 32], [\"X\", 33], [\"Y\", 34], [\"Z\", 35], [\" \", 36], [\"$\", 37], [\"%\", 38], [\"*\", 39],\n    [\"+\", 40], [\"-\", 41], [\".\", 42], [\"/\", 43], [\",\", 44]\n]);\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport { QrCodewords } from '../Qr.defs';\n\n\n\n// tslint:disable:whitespace\n\n\n\nexport const matrixSize = [\n    0,\n   21,  25,  29,  33,  37,  41,  45,  49,  53,  57,\n   61,  65,  69,  73,  77,  81,  85,  89,  93,  97,\n  101, 105, 109, 113, 117, 121, 125, 129, 133, 137,\n  141, 145, 149, 153, 157, 161, 165, 169, 173, 177\n];\n\n\nexport const dataCodewords: QrCodewords = {\n  L: [\n         0,\n        19,   34,   55,   80,  108,  136,  156,  194,  232,  274,\n       324,  370,  428,  461,  523,  589,  647,  721,  795,  861,\n       932, 1006, 1094, 1174, 1276, 1370, 1468, 1531, 1631, 1735,\n      1843, 1955, 2071, 2191, 2306, 2434, 2566, 2702, 2812, 2956\n  ],\n  M: [\n         0,\n        16,   28,   44,   64,   86,  108,  124,  154,  182,  216,\n       254,  290,  334,  365,  415,  453,  507,  563,  627,  669,\n       714,  782,  860,  914, 1000, 1062, 1128, 1193, 1267, 1373,\n      1455, 1541, 1631, 1725, 1812, 1914, 1992, 2102, 2216, 2334\n  ],\n  Q: [\n         0,\n        13,   22,   34,   48,   62,   76,   88,  110,  132,  154,\n       180,  206,  244,  261,  295,  325,  367,  397,  445,  485,\n       512,  568,  614,  664,  718,  754,  808,  871,  911,  985,\n      1033, 1115, 1171, 1231, 1286, 1354, 1426, 1502, 1582, 1666\n  ],\n  H: [\n         0,\n         9,   16,   26,   36,   46,   60,   66,   86,  100,  122,\n       140,  158,  180,  197,  223,  253,  283,  313,  341,  385,\n       406,  442,  464,  514,  538,  596,  628,  661,  701,  745,\n       793,  845,  901,  961,  986, 1054, 1096, 1142, 1222, 1276\n  ]\n};\n\n\nexport const segments = [\n  // [[repeat, totalCodewords, dataCodewords, correctableCodewords], ...]\n{ L: [[  0,  0,  0,  0]],\n  M: [[  0,  0,  0,  0]],\n  Q: [[  0,  0,  0,  0]],\n  H: [[  0,  0,  0,  0]] }, // 0\n\n{ L: [[  1, 26, 19,  2]],\n  M: [[  1, 26, 16,  4]],\n  Q: [[  1, 26, 13,  6]],\n  H: [[  1, 26,  9,  8]] }, // 1\n\n{ L: [[  1, 44, 34,  4]],\n  M: [[  1, 44, 28,  8]],\n  Q: [[  1, 44, 22, 11]],\n  H: [[  1, 44, 16, 14]] }, // 2\n\n{ L: [[  1, 70, 55,  7]],\n  M: [[  1, 70, 44, 13]],\n  Q: [[  2, 35, 17,  9]],\n  H: [[  2, 35, 13, 11]] }, // 3\n\n{ L: [[  1,100, 80, 10]],\n  M: [[  2, 50, 32,  9]],\n  Q: [[  2, 50, 24, 13]],\n  H: [[  4, 25,  9,  8]] }, // 4\n\n{ L: [[  1,134,108, 13]],\n  M: [[  2, 67, 43, 12]],\n  Q: [[  2, 33, 15,  9],\n      [  2, 34, 16,  9]],\n  H: [[  2, 33, 11, 11],\n      [  2, 34, 12, 11]] }, // 5\n\n{ L: [[  2, 86, 68,  9]],\n  M: [[  4, 43, 27,  8]],\n  Q: [[  4, 43, 19, 12]],\n  H: [[  4, 43, 15, 14]] }, // 6\n\n{ L: [[  2, 98, 78, 10]],\n  M: [[  4, 49, 31,  9]],\n  Q: [[  2, 32, 14,  9],\n      [  4, 33, 15,  9]],\n  H: [[  4, 39, 13, 13],\n      [  1, 40, 14, 13]] }, // 7\n\n{ L: [[  2,121, 97, 12]],\n  M: [[  2, 60, 38, 11],\n      [  2, 61, 39, 11]],\n  Q: [[  4, 40, 18, 11],\n      [  2, 41, 19, 11]],\n  H: [[  4, 40, 14, 13],\n      [  2, 41, 15, 13]] }, // 8\n\n{ L: [[  2,146,116, 15]],\n  M: [[  3, 58, 36, 11],\n      [  2, 59, 37, 11]],\n  Q: [[  4, 36, 16, 10],\n      [  4, 37, 17, 10]],\n  H: [[  4, 36, 12, 12],\n      [  4, 37, 13, 12]] }, // 9\n\n{ L: [[  2, 86, 68,  9],\n      [  2, 87, 69,  9]],\n  M: [[  4, 69, 43, 13],\n      [  1, 70, 44, 13]],\n  Q: [[  6, 43, 19, 12],\n      [  2, 44, 20, 12]],\n  H: [[  6, 43, 15, 14],\n      [  2, 44, 16, 14]] }, // 10\n\n{ L: [[  4,101, 81, 10]],\n  M: [[  1, 80, 50, 15],\n      [  4, 81, 51, 15]],\n  Q: [[  4, 50, 22, 14],\n      [  4, 51, 23, 14]],\n  H: [[  3, 36, 12, 12],\n      [  8, 37, 13, 12]] }, // 11\n\n{ L: [[  2,116, 92, 12],\n      [  2,117, 93, 12]],\n  M: [[  6, 58, 36, 11],\n      [  2, 59, 37, 11]],\n  Q: [[  4, 46, 20, 13],\n      [  6, 47, 21, 13]],\n  H: [[  7, 42, 14, 14],\n      [  4, 43, 15, 14]] }, // 12\n\n{ L:[[  4,133,107, 13]],\n  M:[[  8, 59, 37, 11],\n     [  1, 60, 38, 11]],\n  Q:[[  8, 44, 20, 13],\n     [  4, 45, 21, 13]],\n  H:[[ 12, 33, 11, 14],\n     [  4, 34, 12, 14]] }, // 13\n\n{ L:[[  3,145,115, 15],\n     [  1,146,116, 15]],\n  M:[[  4, 64, 40, 12],\n     [  5, 65, 41, 12]],\n  Q:[[ 11, 36, 16, 10],\n     [  5, 37, 17, 10]],\n  H:[[ 11, 36, 12, 12],\n     [  5, 37, 13, 12]] }, // 14\n\n{ L:[[  5,109, 87, 11],\n     [  1,110, 88, 11]],\n  M:[[  5, 65, 41, 12],\n     [  5, 66, 42, 12]],\n  Q:[[  5, 54, 24, 15],\n     [  7, 55, 25, 15]],\n  H:[[ 11, 36, 12, 12],\n     [  7, 37, 13, 12]] }, // 15\n\n{ L:[[  5,122, 98, 12],\n     [  1,123, 99, 12]],\n  M:[[  7, 73, 45, 14],\n     [  3, 74, 46, 14]],\n  Q:[[ 15, 43, 19, 12],\n     [  2, 44, 20, 12]],\n  H:[[  3, 45, 15, 15],\n     [ 13, 46, 16, 15]] }, // 16\n\n{ L:[[  1,135,107, 14],\n     [  5,136,108, 14]],\n  M:[[ 10, 74, 46, 14],\n     [  1, 75, 47, 14]],\n  Q:[[  1, 50, 22, 14],\n     [ 15, 51, 23, 14]],\n  H:[[  2, 42, 14, 14],\n     [ 17, 43, 15, 14]] }, // 17\n\n{ L:[[  5,150,120, 15],\n     [  1,151,121, 15]],\n  M:[[  9, 69, 43, 13],\n     [  4, 70, 44, 13]],\n  Q:[[ 17, 50, 22, 14],\n     [  1, 51, 23, 14]],\n  H:[[  2, 42, 14, 14],\n     [ 19, 43, 15, 14]] }, // 18\n\n{ L:[[  3,141,113, 14],\n     [  4,142,114, 14]],\n  M:[[  3, 70, 44, 13],\n     [ 11, 71, 45, 13]],\n  Q:[[ 17, 47, 21, 13],\n     [  4, 48, 22, 13]],\n  H:[[  9, 39, 13, 13],\n     [ 16, 40, 14, 13]] }, // 19\n\n{ L:[[  3,135,107, 14],\n     [  5,136,108, 14]],\n  M:[[  3, 67, 41, 13],\n     [ 13, 68, 42, 13]],\n  Q:[[ 15, 54, 24, 15],\n     [  5, 55, 25, 15]],\n  H:[[ 15, 43, 15, 14],\n     [ 10, 44, 16, 14]] }, // 20\n\n{ L:[[  4,144,116, 14],\n     [  4,145,117, 14]],\n  M:[[ 17, 68, 42, 13]],\n  Q:[[ 17, 50, 22, 14],\n     [  6, 51, 23, 14]],\n  H:[[ 19, 46, 16, 15],\n     [  6, 47, 17, 15]] }, // 21\n\n{ L:[[  2,139,111, 14],\n     [  7,140,112, 14]],\n  M:[[ 17, 74, 46, 14]],\n  Q:[[  7, 54, 24, 15],\n     [ 16, 55, 25, 15]],\n  H:[[ 34, 37, 13, 12]] }, // 22\n\n{ L:[[  4,151,121, 15],\n     [  5,152,122, 15]],\n  M:[[  4, 75, 47, 14],\n     [ 14, 76, 48, 14]],\n  Q:[[ 11, 54, 24, 15],\n     [ 14, 55, 25, 15]],\n  H:[[ 16, 45, 15, 15],\n     [ 14, 46, 16, 15]] }, // 23\n\n{ L:[[  6,147,117, 15],\n     [  4,148,118, 15]],\n  M:[[  6, 73, 45, 14],\n     [ 14, 74, 46, 14]],\n  Q:[[ 11, 54, 24, 15],\n     [ 16, 55, 25, 15]],\n  H:[[ 30, 46, 16, 15],\n     [  2, 47, 17, 15]] }, // 24\n\n{ L:[[  8,132,106, 13],\n     [  4,133,107, 13]],\n  M:[[  8, 75, 47, 14],\n     [ 13, 76, 48, 14]],\n  Q:[[  7, 54, 24, 15],\n     [ 22, 55, 25, 15]],\n  H:[[ 22, 45, 15, 15],\n     [ 13, 46, 16, 15]] }, // 25\n\n{ L:[[ 10,142,114, 14],\n     [  2,143,115, 14]],\n  M:[[ 19, 74, 46, 14],\n     [  4, 75, 47, 14]],\n  Q:[[ 28, 50, 22, 14],\n     [  6, 51, 23, 14]],\n  H:[[ 33, 46, 16, 15],\n     [  4, 47, 17, 15]] }, // 26\n\n{ L:[[  8,152,122, 15],\n     [  4,153,123, 15]],\n  M:[[ 22, 73, 45, 14],\n     [  3, 74, 46, 14]],\n  Q:[[  8, 53, 23, 15],\n     [ 26, 54, 24, 15]],\n  H:[[ 12, 45, 15, 15],\n     [ 28, 46, 16, 15]] }, // 27\n\n{ L:[[  3,147,117, 15],\n     [ 10,148,118, 15]],\n  M:[[  3, 73, 45, 14],\n     [ 23, 74, 46, 14]],\n  Q:[[  4, 54, 24, 15],\n     [ 31, 55, 25, 15]],\n  H:[[ 11, 45, 15, 15],\n     [ 31, 46, 16, 15]] }, // 28\n\n{ L:[[  7,146,116, 15],\n     [  7,147,117, 15]],\n  M:[[ 21, 73, 45, 14],\n     [  7, 74, 46, 14]],\n  Q:[[  1, 53, 23, 15],\n     [ 37, 54, 24, 15]],\n  H:[[ 19, 45, 15, 15],\n     [ 26, 46, 16, 15]] }, // 29\n\n{ L:[[  5,145,115, 15],\n     [ 10,146,116, 15]],\n  M:[[ 19, 75, 47, 14],\n     [ 10, 76, 48, 14]],\n  Q:[[ 15, 54, 24, 15],\n     [ 25, 55, 25, 15]],\n  H:[[ 23, 45, 15, 15],\n     [ 25, 46, 16, 15]] }, // 30\n\n{ L:[[ 13,145,115, 15],\n     [  3,146,116, 15]],\n  M:[[  2, 74, 46, 14],\n     [ 29, 75, 47, 14]],\n  Q:[[ 42, 54, 24, 15],\n     [  1, 55, 25, 15]],\n  H:[[ 23, 45, 15, 15],\n     [ 28, 46, 16, 15]] }, // 31\n\n{ L:[[ 17,145,115, 15]],\n  M:[[ 10, 74, 46, 14],\n     [ 23, 75, 47, 14]],\n  Q:[[ 10, 54, 24, 15],\n     [ 35, 55, 25, 15]],\n  H:[[ 19, 45, 15, 15],\n     [ 35, 46, 16, 15]] }, // 32\n\n{ L:[[ 17,145,115, 15],\n     [  1,146,116, 15]],\n  M:[[ 14, 74, 46, 14],\n     [ 21, 75, 47, 14]],\n  Q:[[ 29, 54, 24, 15],\n     [ 19, 55, 25, 15]],\n  H:[[ 11, 44, 15, 15],\n     [ 46, 45, 16, 15]] }, // 33\n\n{ L:[[ 13,145,115, 15],\n     [  6,146,116, 15]],\n  M:[[ 14, 74, 46, 14],\n     [ 23, 75, 47, 14]],\n  Q:[[ 44, 54, 24, 15],\n     [  7, 55, 25, 15]],\n  H:[[ 59, 46, 16, 15],\n     [  1, 47, 17, 15]] }, // 34\n\n{ L:[[ 12,151,121, 15],\n     [  7,152,122, 15]],\n  M:[[ 12, 75, 47, 14],\n     [ 26, 76, 48, 14]],\n  Q:[[ 39, 54, 24, 15],\n     [ 14, 55, 25, 15]],\n  H:[[ 22, 45, 15, 15],\n     [ 41, 46, 16, 15]] }, // 35\n\n{ L:[[  6,151,121, 15],\n     [ 14,152,122, 15]],\n  M:[[  6, 75, 47, 14],\n     [ 34, 76, 48, 14]],\n  Q:[[ 46, 54, 24, 15],\n     [ 10, 55, 25, 15]],\n  H:[[  2, 45, 15, 15],\n     [ 64, 46, 16, 15]] }, // 36\n\n{ L:[[ 17,152,122, 15],\n     [  4,153,123, 15]],\n  M:[[ 29, 74, 46, 14],\n     [ 14, 75, 47, 14]],\n  Q:[[ 49, 54, 24, 15],\n     [ 10, 55, 25, 15]],\n  H:[[ 24, 45, 15, 15],\n     [ 46, 46, 16, 15]] }, // 37\n\n{ L:[[  4,152,122, 15],\n     [ 18,153,123, 15]],\n  M:[[ 13, 74, 46, 14],\n     [ 32, 75, 47, 14]],\n  Q:[[ 48, 54, 24, 15],\n     [ 14, 55, 25, 15]],\n  H:[[ 42, 45, 15, 15],\n     [ 32, 46, 16, 15]] }, // 38\n\n{ L:[[ 20,147,117, 15],\n     [  4,148,118, 15]],\n  M:[[ 40, 75, 47, 14],\n     [  7, 76, 48, 14]],\n  Q:[[ 43, 54, 24, 15],\n     [ 22, 55, 25, 15]],\n  H:[[ 10, 45, 15, 15],\n     [ 67, 46, 16, 15]] }, // 39\n\n{ L:[[ 19,148,118, 15],\n     [  6,149,119, 15]],\n  M:[[ 18, 75, 47, 14],\n     [ 31, 76, 48, 14]],\n  Q:[[ 34, 54, 24, 15],\n     [ 34, 55, 25, 15]],\n  H:[[ 20, 45, 15, 15],\n     [ 61, 46, 16, 15]] } // 40\n];\n\n\nexport const alignmentPatterns = [\n  [], // 0\n  [], // 1\n  [6,18], // 2 (12)\n  [6,22], // 3 (16)\n  [6,26], // 4 (20)\n  [6,30], // 5 (24)\n  [6,34], // 6 (28)\n  [6,22,38], //  7 (16)\n  [6,24,42], //  8 (18)\n  [6,26,46], //  9 (20)\n  [6,28,50], // 10 (22)\n  [6,30,54], // 11 (24)\n  [6,32,58], // 12 (26)\n  [6,34,62], // 13 (28)\n  [6,26,46,66], // 14 (20)\n  [6,26,48,70], // 15 (20,22)\n  [6,26,50,74], // 16 (20,24)\n  [6,30,54,78], // 17 (24)\n  [6,30,56,82], // 18 (24,26)\n  [6,30,58,86], // 19 (24,28)\n  [6,34,62,90], // 20 (28)\n  [6,28,50,72, 94], // 21 (22)\n  [6,26,50,74, 98], // 22 (20,24)\n  [6,30,54,78,102], // 23 (24)\n  [6,28,54,80,106], // 24 (22,26)\n  [6,32,58,84,110], // 25 (26)\n  [6,30,58,86,114], // 26 (24,28)\n  [6,34,62,90,118], // 27 (28)\n  [6,26,50,74, 98,122], // 28 (20,24)\n  [6,30,54,78,102,126], // 29 (24)\n  [6,26,52,78,104,130], // 30 (20,26)\n  [6,30,56,82,108,134], // 31 (24,26)\n  [6,34,60,86,112,138], // 32 (28,26)\n  [6,30,58,86,114,142], // 33 (24,28)\n  [6,34,62,90,118,146], // 34 (28)\n  [6,30,54,78,102,126,150], // 35 (24)\n  [6,24,50,76,102,128,154], // 36 (18,26)\n  [6,28,54,80,106,132,158], // 37 (22,26)\n  [6,32,58,84,110,136,162], // 38 (26)\n  [6,26,54,82,110,138,166], // 39 (20,28)\n  [6,30,58,86,114,142,170]  // 40 (24,28)\n];\n\n","// Copyright (c) 2017, Shellyl_N and Authors\n// license: ISC\n// https://github.com/shellyln\n\n\n\nimport * as RedAgate          from 'red-agate/modules/red-agate';\nimport { SvgCanvas,\n         SvgTextAttributes,\n         TextAlignValue,\n         TextBaselineValue }  from 'red-agate-svg-canvas/modules/drawing/canvas/SvgCanvas';\nimport { Rect2D }             from 'red-agate-svg-canvas/modules/drawing/canvas/TransferMatrix2D';\nimport { WebColor }           from 'red-agate-svg-canvas/modules/drawing/canvas/WebColor';\nimport { ShapeProps,\n         shapePropsDefault,\n         Shape,\n         ImagingShapeBasePropsMixin,\n         renderSvgCanvas,\n         toImgTag,\n         toElementStyle,\n         toDataUrl,\n         toSvg,\n         CONTEXT_SVG_CANVAS } from 'red-agate/modules/red-agate/tags/Shape';\nimport { Gf2e8Field }         from 'red-agate-math/modules/math/Gf2Ext';\nimport { BCH }                from 'red-agate-math/modules/error-correction/BCH';\nimport { ReedSolomon }        from 'red-agate-math/modules/error-correction/ReedSolomon';\nimport { BitStreamWriter }    from 'red-agate-util/modules/io/BitStream';\nimport { TextEncoding }       from 'red-agate-util/modules/convert/TextEncoding';\nimport { Bitmap }             from 'red-agate-util/modules/imaging/Bitmap';\nimport { QrSourceDataTypes,\n         QrDataChunkType,\n         ecLevelMap,\n         numberModeCharMap,\n         alnumModeCharMap }   from \"./Qr.defs\";\nimport * as qr                from './data/Qr.m2.data';\n\n\n\nexport interface QrProps extends ShapeProps, ImagingShapeBasePropsMixin {\n    data?: Array<Uint8Array | string | number> | Uint8Array | string;\n    version?: number | \"auto\";\n    ecLevel?: \"L\" | \"M\" | \"Q\" | \"H\";\n    encoding?: \"number\" | \"alnum\" | \"8bit\" | \"auto\";\n    cellSize?: number;\n    unit?: string;\n    asDataUrl?: boolean;\n    asImgTag?: boolean;\n}\n\nexport interface QrPropsNoUndefined extends ShapeProps, ImagingShapeBasePropsMixin {\n    data?: Array<Uint8Array | string | number> | Uint8Array | string;\n    version: number | \"auto\";\n    ecLevel: \"L\" | \"M\" | \"Q\" | \"H\";\n    encoding: \"number\" | \"alnum\" | \"8bit\" | \"auto\";\n    cellSize: number;\n    unit?: string;\n    asDataUrl?: boolean;\n    asImgTag?: boolean;\n}\n\nexport const qrPropsDefault: QrPropsNoUndefined = Object.assign({}, shapePropsDefault, {\n    version: \"auto\",\n    ecLevel: \"M\",\n    encoding: \"auto\",\n    cellSize: 0.33,\n    unit: \"mm\",\n} as any);\n\n\n\nconst field = new Gf2e8Field();\nlet gxList: number[][] = [];\n\nconst masks = [\n    { index: 0x00, fn: (x: number, y: number) =>   ((x + y) % 2) === 0 },\n    { index: 0x01, fn: (x: number, y: number) =>   (     y  % 2) === 0 },\n    { index: 0x02, fn: (x: number, y: number) =>   ( x      % 3) === 0 },\n    { index: 0x03, fn: (x: number, y: number) =>   ((x + y) % 3) === 0 },\n    { index: 0x04, fn: (x: number, y: number) => ((Math.floor(x / 3) + Math.floor(y / 2)) % 2) === 0},\n    { index: 0x05, fn: (x: number, y: number) => ( ((x * y) % 2) + (x * y) % 3)      === 0},\n    { index: 0x06, fn: (x: number, y: number) => ((((x * y) % 2) + (x * y) % 3) % 2) === 0},\n    { index: 0x07, fn: (x: number, y: number) => ((((x * y) % 3) + (x + y) % 2) % 2) === 0}\n];\n\n\n\nexport class Qr extends Shape<QrProps> {\n    public constructor(props: QrProps) {\n        super(Object.assign({}, qrPropsDefault, props));\n    }\n\n    public toImgTag(): string {\n        return toImgTag(this);\n    }\n\n    public toElementStyle(): string {\n        return toElementStyle(this);\n    }\n\n    public toDataUrl(): string {\n        return toDataUrl(this);\n    }\n\n    public toSvg(): string {\n        return toSvg(this);\n    }\n\n    public toRendered(): string {\n        return RedAgate.renderAsHtml_noDefer(this);\n    }\n\n    public render(contexts: Map<string, any>, children: string) {\n        let canvas: SvgCanvas = this.getContext(contexts, CONTEXT_SVG_CANVAS);\n        const contextHasCanvas = Boolean(canvas);\n        if (!contextHasCanvas) {\n            canvas = new SvgCanvas();\n            this.setContext(contexts, CONTEXT_SVG_CANVAS, canvas);\n            super.beforeRender(contexts);\n        }\n\n        const data = this.props.data || \"\";\n\n        const encoded = this.encodeData(data);\n        const bitmap  = this.buildBitmap(encoded.data, encoded.version);\n        this.drawBitmap(canvas, bitmap);\n\n        if (contextHasCanvas) {\n            return ``;\n        } else {\n            super.afterRender(contexts);\n            this.unsetContext(contexts, CONTEXT_SVG_CANVAS);\n            const total = bitmap.width * (this.props.cellSize as number) + (this.props.margin as number) * 2;\n            const imageWidth  = total + (this.props.x || 0);\n            const imageHeight = total + (this.props.y || 0);\n            return renderSvgCanvas(this.props, canvas, imageWidth, imageHeight);\n        }\n    }\n\n\n    protected evaluteMask(bitmap: Bitmap): number {\n        const nx = bitmap.width,\n              ny = bitmap.height;\n        let   z  = 0;\n        for (let i = 0; i < ny; i++) {\n            let p: number | null = null;\n            let c = 1;\n            for (let j = 0; j < nx; j++) {\n                const q = bitmap.get(j, i);\n                if      (p !== q) c  = 1;\n                else              c += 1;\n                if      (5 === c) z += 3;\n                else if (5   < c) z += 1;\n                p = q;\n            }\n        }\n        for (let i = 0; i < nx; i++) {\n            let p: number | null = null;\n            let c = 1;\n            for (let j = 0; j < ny; j++) {\n                const q = bitmap.get(i, j);\n                if      (p !== q) c  = 1;\n                else              c += 1;\n                if      (5 === c) z += 3;\n                else if (5   < c) z += 1;\n                p = q;\n            }\n        }\n        for (let i = 0; i < (ny - 1); i++) {\n            for (let j = 0; j < (nx - 1); j++) {\n                const v = bitmap.get(j, i);\n                if (v === bitmap.get(j + 1, i    ) &&\n                    v === bitmap.get(j    , i + 1) &&\n                    v === bitmap.get(j + 1, i + 1)) {\n                    z += 3;\n                }\n            }\n        }\n        for (let i = 0; i < ny; i++) {\n            for (let j = 0; j < (nx - 10); j++) {\n                if (bitmap.get(j     , i) !== 0 &&\n                    bitmap.get(j +  1, i) === 0 &&\n                    bitmap.get(j +  2, i) !== 0 &&\n                    bitmap.get(j +  3, i) !== 0 &&\n                    bitmap.get(j +  4, i) !== 0 &&\n                    bitmap.get(j +  5, i) === 0 &&\n                    bitmap.get(j +  6, i) !== 0 &&\n                    bitmap.get(j +  7, i) === 0 &&\n                    bitmap.get(j +  8, i) === 0 &&\n                    bitmap.get(j +  9, i) === 0 &&\n                    bitmap.get(j + 10, i) === 0) {\n                    z += 40;\n                } else if (\n                    bitmap.get(j     , i) === 0 &&\n                    bitmap.get(j +  1, i) === 0 &&\n                    bitmap.get(j +  2, i) === 0 &&\n                    bitmap.get(j +  3, i) === 0 &&\n                    bitmap.get(j +  4, i) !== 0 &&\n                    bitmap.get(j +  5, i) === 0 &&\n                    bitmap.get(j +  6, i) !== 0 &&\n                    bitmap.get(j +  7, i) !== 0 &&\n                    bitmap.get(j +  8, i) !== 0 &&\n                    bitmap.get(j +  9, i) === 0 &&\n                    bitmap.get(j + 10, i) !== 0) {\n                    z += 40;\n                }\n            }\n        }\n        for (let i = 0; i < nx; i++) {\n            for (let j = 0; j < (ny - 10); j++) {\n                if (bitmap.get(i, j     ) !== 0 &&\n                    bitmap.get(i, j +  1) === 0 &&\n                    bitmap.get(i, j +  2) !== 0 &&\n                    bitmap.get(i, j +  3) !== 0 &&\n                    bitmap.get(i, j +  4) !== 0 &&\n                    bitmap.get(i, j +  5) === 0 &&\n                    bitmap.get(i, j +  6) !== 0 &&\n                    bitmap.get(i, j +  7) === 0 &&\n                    bitmap.get(i, j +  8) === 0 &&\n                    bitmap.get(i, j +  9) === 0 &&\n                    bitmap.get(i, j + 10) === 0) {\n                    z += 40;\n                } else if (\n                    bitmap.get(i, j     ) === 0 &&\n                    bitmap.get(i, j +  1) === 0 &&\n                    bitmap.get(i, j +  2) === 0 &&\n                    bitmap.get(i, j +  3) === 0 &&\n                    bitmap.get(i, j +  4) !== 0 &&\n                    bitmap.get(i, j +  5) === 0 &&\n                    bitmap.get(i, j +  6) !== 0 &&\n                    bitmap.get(i, j +  7) !== 0 &&\n                    bitmap.get(i, j +  8) !== 0 &&\n                    bitmap.get(i, j +  9) === 0 &&\n                    bitmap.get(i, j + 10) !== 0) {\n                    z += 40;\n                }\n            }\n        }\n        let white = 0, black = 0;\n        for (let i = 0; i < ny; i++) {\n            for (let j = 0; j < nx; j++) {\n                if (bitmap.get(j, i) === 0) { white++; }\n                else                        { black++; }\n            }\n        }\n        z += Math.floor(Math.abs((black / (white + black)) * 100 - 50) / 5) * 10;\n        return z;\n    }\n\n\n    protected encodeNumberData(data: string): {data: BitStreamWriter, charLength: number} | null {\n        const length = Math.ceil(data.length * 10 / 24);\n        const buf = new BitStreamWriter(length);\n\n        let i = 0, v = 0;\n        for (; i < data.length; i++) {\n            const c = numberModeCharMap.get(data[i]);\n            if (c === void 0) return null;\n            v = v * 10 + c;\n            if (2 === (i % 3)) {\n                // 10 bits\n                buf.writeBits(v, 10);\n                v = 0;\n            }\n        }\n        i = i % 3;\n        if (i) {\n            // i is  1: 4bits, 2: 7bits\n            buf.writeBits8(v, 1 + 3 * i);\n        }\n        return {data: buf, charLength: data.length};\n    }\n\n    protected encodeAlnumData(data: string): {data: BitStreamWriter, charLength: number} | null {\n        const length = Math.ceil(data.length * 11 / 16);\n        const buf = new BitStreamWriter(length);\n\n        let i = 0, v = 0;\n        for (; i < data.length; i++) {\n            const c = alnumModeCharMap.get(data[i]);\n            if (c === void 0) return null;\n            v = v * 45 + c;\n            if (1 === (i % 2)) {\n                // 11 bits\n                buf.writeBits(v, 11);\n                v = 0;\n            }\n        }\n        if (i % 2) {\n            buf.writeBits8(v, 6);\n        }\n        return {data: buf, charLength: data.length};\n    }\n\n    protected encode8bitData(data: string): {data: BitStreamWriter, charLength: number} {\n        const buf = new BitStreamWriter(0, TextEncoding.encodeToUtf8(data));\n        return {data: buf, charLength: buf.byteLength};\n    }\n\n    protected encodeChunks(data: QrSourceDataTypes[] | QrSourceDataTypes): Array<{\n                                  type: QrDataChunkType, data: BitStreamWriter, charLength: number }> {\n\n        if (!Array.isArray(data)) {\n            data = [data];\n        }\n\n        const chunks: Array<{type: QrDataChunkType, data: BitStreamWriter, charLength: number}> = [];\n\n        for (const d of data) {\n            if (d instanceof BitStreamWriter) chunks.push({type: QrDataChunkType.Binary, data: d, charLength: d.byteLength});\n            else if (d instanceof Uint8Array) chunks.push({type: QrDataChunkType.Binary, data: new BitStreamWriter(0, d), charLength: d.length});\n            else if (typeof d === \"string\") {\n                let chunk: {data: BitStreamWriter, charLength: number} | null = null;\n                let type: QrDataChunkType;\n                let isManual = true;\n                switch (this.props.encoding) {\n                case \"auto\":\n                    isManual = false;\n                case \"number\":\n                    chunk = this.encodeNumberData(d);\n                    type = QrDataChunkType.Number;\n                    if (isManual || chunk) break;\n                case \"alnum\":\n                    chunk = this.encodeAlnumData(d);\n                    type = QrDataChunkType.Alnum;\n                    if (isManual || chunk) break;\n                case \"8bit\": default:\n                    chunk = this.encode8bitData(d);\n                    type = QrDataChunkType.Binary;\n                    break;\n                }\n                if (chunk === null) {\n                    throw new Error(\"QrModel2: character is out of range.\");\n                }\n                chunks.push({type, data: chunk.data, charLength: chunk.charLength});\n            }\n            else if (typeof d === \"number\") {\n                // TODO: not imple\n            }\n        }\n\n        return chunks;\n    }\n\n    protected determineSymbolVersion(chunks: Array<{type: QrDataChunkType, data: BitStreamWriter}>):\n        { version: number, segments: number[][], dataLength: number, maxDataLength: number } {\n\n        let version = this.props.version === \"auto\" ? 1 : (this.props.version || 1);\n        let segments: number[][];\n        let maxDataLength: number = 0;\n        let dataLength: number = 0;\n\n        while (true) {\n            dataLength = 0;\n\n            for (const c of chunks) {\n                switch (c.type) {\n                case QrDataChunkType.Number:\n                    if      (version < 10) dataLength += 14;\n                    else if (version < 27) dataLength += 16;\n                    else                   dataLength += 18;\n                    break;\n                case QrDataChunkType.Alnum:\n                    if      (version < 10) dataLength += 13;\n                    else if (version < 27) dataLength += 15;\n                    else                   dataLength += 17;\n                    break;\n                case QrDataChunkType.Binary:\n                    if      (version < 10) dataLength += 12;\n                    else                   dataLength += 20;\n                    break;\n                }\n                dataLength += c.data.bitLength;\n            }\n\n            switch (this.props.ecLevel) {\n            case \"L\":\n                segments = qr.segments[version].L;\n                maxDataLength = 8 * qr.dataCodewords.L[version];\n                break;\n            case \"Q\":\n                segments = qr.segments[version].Q;\n                maxDataLength = 8 * qr.dataCodewords.Q[version];\n                break;\n            case \"H\":\n                segments = qr.segments[version].H;\n                maxDataLength = 8 * qr.dataCodewords.H[version];\n                break;\n            case \"M\": default:\n                segments = qr.segments[version].M;\n                maxDataLength = 8 * qr.dataCodewords.M[version];\n                break;\n            }\n\n            // check total length\n            if (dataLength <= maxDataLength) {\n                break;\n            }\n            if (this.props.version !== \"auto\" || !qr.segments[++version]) {\n                throw new Error(\"QrModel2: data is too large.\");\n            }\n        }\n\n        return { version, segments, dataLength, maxDataLength };\n    }\n\n\n    protected encodeData(data: QrSourceDataTypes[] | QrSourceDataTypes): {\n            version: number, data: Uint8Array, ecLevel: \"L\" | \"M\" | \"Q\" | \"H\" } {\n\n        // determine chunks' encoding, and encoding data.\n        const chunks = this.encodeChunks(data);\n\n        // determine symbol's version.\n        const { version, segments, dataLength, maxDataLength } = this.determineSymbolVersion(chunks);\n\n        // convert chunks to QR data structure bit stream\n        let bytes: Uint8Array;\n        {\n            const bits: BitStreamWriter[] = [];\n\n            // make global headers.\n\n            // build data from chunks.\n            for (const c of chunks) {\n                let n = 0;\n                const header = new BitStreamWriter(3);\n\n                switch (c.type) {\n                case QrDataChunkType.Number:\n                    header.writeBits8(1, 4);\n                    if      (version < 10) n = 10;\n                    else if (version < 27) n = 12;\n                    else                   n = 14;\n                    header.writeBits(c.charLength, n);\n                    break;\n                case QrDataChunkType.Alnum:\n                    header.writeBits8(2, 4);\n                    if      (version < 10) n =  9;\n                    else if (version < 27) n = 11;\n                    else                   n = 13;\n                    header.writeBits(c.charLength, n);\n                    break;\n                case QrDataChunkType.Binary:\n                    header.writeBits8(4, 4);\n                    if      (version < 10) n =  8;\n                    else                   n = 16;\n                    header.writeBits(c.charLength, n);\n                    break;\n                }\n\n                if (0 < header.bitLength) bits.push(header);\n                bits.push(c.data);\n            }\n\n            // make global footers.\n\n            // finalize data.\n            // if data bits and codewords are remained, add terminator, padding bits, padding codewords.\n            if (dataLength < maxDataLength) {\n                let rem = maxDataLength - dataLength;\n                const fin = new BitStreamWriter(Math.ceil(rem / 8));\n\n                // terminator\n                let len = Math.min(4, rem);\n                fin.writeBits8(0, len);\n                rem -= len;\n\n                // padding bits\n                if ((0 < rem) && (0 !== (rem % 8))) {\n                    len = rem % 8;\n                    fin.writeBits8(0, len);\n                    rem -= len;\n                }\n\n                // padding codewords\n                for (let i = 0; 0 < rem; i++) {\n                    len = Math.min(8, rem);\n                    fin.writeBits8(0 === (i % 2) ? 0x00ec : 0x0011, len);\n                    rem -= len;\n                }\n\n                bits.push(fin);\n            }\n\n            bytes = BitStreamWriter.concat(...bits).toBytes();\n        }\n\n        // make data codewords, generate error correction codewords.\n        let totalLength = 0;\n        const dataCwStack: Uint8Array[] = [];\n        const   ecCwStack: Uint8Array[] = [];\n        for (let i = 0, p = 0; i < segments.length; i++) {\n            const repeats    = segments[i][0];\n            const dataCwSize = segments[i][2];\n            const ecCwSize   = segments[i][1] - dataCwSize;\n\n            let gx: number[];\n            if (gxList.length <= (ecCwSize - 1)) {\n                gxList = ReedSolomon.listGx(field, gxList, ecCwSize, 0);\n            }\n            gx = gxList[ecCwSize - 1];\n            const rs = new ReedSolomon(field, gx, 0);\n\n            for (let j = 0; j < repeats; j++) {\n                const dataCodewords = bytes.slice(p, p + dataCwSize).reverse();\n                const ecCodewords   = Uint8Array.from(rs.encode(dataCodewords));\n                dataCwStack.push(dataCodewords.reverse());\n                ecCwStack  .push(ecCodewords.reverse());\n                totalLength += dataCwSize + ecCwSize;\n                p += dataCwSize;\n            }\n        }\n\n        // interleaving codewords.\n        const codewords = new Uint8Array(totalLength);\n        {\n            const stacks = [dataCwStack, ecCwStack];\n            let p = 0;\n            for (const stack of stacks) {\n                for (let i = 0, z = true; z; i++) {\n                    z = false;\n                    for (let j = 0; j < stack.length; j++) {\n                        if (i < stack[j].length) {\n                            codewords[p++] = stack[j][i];\n                            z = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        const props = this.props as QrPropsNoUndefined;\n        return { data: codewords, version, ecLevel: props.ecLevel };\n    }\n\n    protected applyMask(bitmap: Bitmap, funcPatternsMap: Bitmap, fn: (x: number, y: number) => boolean) {\n        const nx = bitmap.width,\n              ny = bitmap.width;\n\n        for (let x = 0; x < nx; x++) {\n            for (let y = 0; y < ny; y++) {\n                if (0 === funcPatternsMap.get(nx - 1 - x, ny - 1 - y)) {\n                    bitmap.set(nx - 1 - x, ny - 1 - y, bitmap.get(nx - 1 - x, ny - 1 - y) ^ (fn(x, y) ? 1 : 0));\n                }\n            }\n        }\n    }\n\n    protected buildBitmap(data: Uint8Array, version: number): Bitmap {\n        const width = qr.matrixSize[version];\n        const nx = width,\n              ny = width;\n        const bitmap = new Bitmap(width, width);\n        const funcPatternsMap = new Bitmap(width, width);\n\n        {\n            {\n                // finder patterns + format info\n                funcPatternsMap.fill(     0, ny - 9, 8, 9, 1);\n                funcPatternsMap.fill(nx - 9,      0, 9, 8, 1);\n                funcPatternsMap.fill(nx - 9, ny - 9, 9, 9, 1);\n\n                // version info\n                if (7 <= version) {\n                    funcPatternsMap.fill(     8, ny - 6, 3, 6, 1);\n                    funcPatternsMap.fill(nx - 6,      8, 6, 3, 1);\n                }\n            }\n\n            // finder patterns\n            for (const {px, py} of [{px: nx - 7, py: ny - 7}, {px: 0, py: ny - 7}, {px: nx - 7, py: 0}]){\n                bitmap.set(px + 0, py + 0, 1);\n                bitmap.set(px + 0, py + 1, 1);\n                bitmap.set(px + 0, py + 2, 1);\n                bitmap.set(px + 0, py + 3, 1);\n                bitmap.set(px + 0, py + 4, 1);\n                bitmap.set(px + 0, py + 5, 1);\n                bitmap.set(px + 0, py + 6, 1);\n                bitmap.set(px + 1, py + 0, 1);\n                bitmap.set(px + 2, py + 0, 1);\n                bitmap.set(px + 3, py + 0, 1);\n                bitmap.set(px + 4, py + 0, 1);\n                bitmap.set(px + 5, py + 0, 1);\n                bitmap.set(px + 6, py + 0, 1);\n                bitmap.set(px + 6, py + 1, 1);\n                bitmap.set(px + 6, py + 2, 1);\n                bitmap.set(px + 6, py + 3, 1);\n                bitmap.set(px + 6, py + 4, 1);\n                bitmap.set(px + 6, py + 5, 1);\n                bitmap.set(px + 1, py + 6, 1);\n                bitmap.set(px + 2, py + 6, 1);\n                bitmap.set(px + 3, py + 6, 1);\n                bitmap.set(px + 4, py + 6, 1);\n                bitmap.set(px + 5, py + 6, 1);\n                bitmap.set(px + 6, py + 6, 1);\n\n                bitmap.set(px + 2, py + 2, 1);\n                bitmap.set(px + 2, py + 3, 1);\n                bitmap.set(px + 2, py + 4, 1);\n                bitmap.set(px + 3, py + 2, 1);\n                bitmap.set(px + 4, py + 2, 1);\n                bitmap.set(px + 4, py + 3, 1);\n                bitmap.set(px + 4, py + 4, 1);\n                bitmap.set(px + 3, py + 4, 1);\n                bitmap.set(px + 3, py + 3, 1);\n            }\n\n            // alignment patterns\n            const aps = qr.alignmentPatterns[version];\n            for (let i = 0; i < aps.length; i++) {\n                const a = nx - aps[i] - 1;\n                for (let j = 0; j < aps.length; j++) {\n                    const b = ny - aps[j] - 1;\n                    let q = true;\n                    for (let x = (a - 2); x <= (a + 2); x++) {\n                        for (let y = (b - 2); y <= (b + 2); y++) {\n                            if (funcPatternsMap.get(x, y)) {\n                                q = false;\n                                break;\n                            }\n                        }\n                        if (!q) break;\n                    }\n                    if (q) {\n                        funcPatternsMap.fill(a - 2, b - 2, 5, 5, 1);\n\n                        bitmap.set(a - 2, b + 2, 1);\n                        bitmap.set(a - 2, b + 1, 1);\n                        bitmap.set(a - 2, b    , 1);\n                        bitmap.set(a - 2, b - 1, 1);\n                        bitmap.set(a - 2, b - 2, 1);\n                        bitmap.set(a + 2, b + 2, 1);\n                        bitmap.set(a + 2, b + 1, 1);\n                        bitmap.set(a + 2, b    , 1);\n                        bitmap.set(a + 2, b - 1, 1);\n                        bitmap.set(a + 2, b - 2, 1);\n                        bitmap.set(a + 1, b - 2, 1);\n                        bitmap.set(a + 1, b + 2, 1);\n                        bitmap.set(a    , b + 2, 1);\n                        bitmap.set(a    , b    , 1);\n                        bitmap.set(a    , b - 2, 1);\n                        bitmap.set(a - 1, b - 2, 1);\n                        bitmap.set(a - 1, b + 2, 1);\n                    }\n                }\n            }\n\n            // timing pattern\n            funcPatternsMap.fill(     8, ny - 7, nx - 17,       1, 1);\n            funcPatternsMap.fill(nx - 7,      8,       1, ny - 17, 1);\n\n            // timing pattern\n            for (let i = 8; i <= ny - 9; i += 2) {\n                bitmap.set(nx - 7, i, 1);\n                bitmap.set(i, ny - 7, 1);\n            }\n        }\n\n        // place codewords\n        {\n            let cx =  1;\n            let cy = -1;\n            let b2t =  true; // bottom to top\n            let odd = false;\n\n            for (let i = 0; i < data.length; i++) {\n                for (let j = 7; j >= 0; j--) {\n                    for (; ; ) {\n                        if (odd) {\n                            cx += 1;\n                        } else if ((((ny - 1) === cy) && b2t) || ((0 === cy) && (!b2t))) {\n                            if (cx === (nx - 8)) cx += 2;\n                            else                 cx += 1;\n                            b2t = !b2t;\n                        } else {\n                            cx -= 1;\n                            if (b2t) cy += 1;\n                            else     cy -= 1;\n                        }\n                        odd = !odd;\n\n                        // determine\n                        if (0 === funcPatternsMap.get(cx, cy)) {\n                            bitmap.set(cx, cy, (data[i] >>> j) & 0x01);\n                            break;\n                        } else {\n                            continue;\n                        }\n                    }\n                }\n            }\n        }\n\n        // place version info\n        if (7 <= version) {\n            // gx=0x1f25 BCH Code is built on GF(2^4). but BCH#encode() is not use arithmetic on GF.\n            const vi = ((version << 12) | new BCH(field, 0x1f25).encode(version));\n\n            bitmap.set(nx - 1, 10, (vi >>>  0) & 1);\n            bitmap.set(nx - 1,  9, (vi >>>  1) & 1);\n            bitmap.set(nx - 1,  8, (vi >>>  2) & 1);\n            bitmap.set(nx - 2, 10, (vi >>>  3) & 1);\n            bitmap.set(nx - 2,  9, (vi >>>  4) & 1);\n            bitmap.set(nx - 2,  8, (vi >>>  5) & 1);\n            bitmap.set(nx - 3, 10, (vi >>>  6) & 1);\n            bitmap.set(nx - 3,  9, (vi >>>  7) & 1);\n            bitmap.set(nx - 3,  8, (vi >>>  8) & 1);\n            bitmap.set(nx - 4, 10, (vi >>>  9) & 1);\n            bitmap.set(nx - 4,  9, (vi >>> 10) & 1);\n            bitmap.set(nx - 4,  8, (vi >>> 11) & 1);\n            bitmap.set(nx - 5, 10, (vi >>> 12) & 1);\n            bitmap.set(nx - 5,  9, (vi >>> 13) & 1);\n            bitmap.set(nx - 5,  8, (vi >>> 14) & 1);\n            bitmap.set(nx - 6, 10, (vi >>> 15) & 1);\n            bitmap.set(nx - 6,  9, (vi >>> 16) & 1);\n            bitmap.set(nx - 6,  8, (vi >>> 17) & 1);\n\n            bitmap.set(10, ny - 1, (vi >>>  0) & 1);\n            bitmap.set( 9, ny - 1, (vi >>>  1) & 1);\n            bitmap.set( 8, ny - 1, (vi >>>  2) & 1);\n            bitmap.set(10, ny - 2, (vi >>>  3) & 1);\n            bitmap.set( 9, ny - 2, (vi >>>  4) & 1);\n            bitmap.set( 8, ny - 2, (vi >>>  5) & 1);\n            bitmap.set(10, ny - 3, (vi >>>  6) & 1);\n            bitmap.set( 9, ny - 3, (vi >>>  7) & 1);\n            bitmap.set( 8, ny - 3, (vi >>>  8) & 1);\n            bitmap.set(10, ny - 4, (vi >>>  9) & 1);\n            bitmap.set( 9, ny - 4, (vi >>> 10) & 1);\n            bitmap.set( 8, ny - 4, (vi >>> 11) & 1);\n            bitmap.set(10, ny - 5, (vi >>> 12) & 1);\n            bitmap.set( 9, ny - 5, (vi >>> 13) & 1);\n            bitmap.set( 8, ny - 5, (vi >>> 14) & 1);\n            bitmap.set(10, ny - 6, (vi >>> 15) & 1);\n            bitmap.set( 9, ny - 6, (vi >>> 16) & 1);\n            bitmap.set( 8, ny - 6, (vi >>> 17) & 1);\n        }\n\n        // masking\n        let maskNo = 0;\n        {\n            let maskScore = Number.MAX_SAFE_INTEGER;\n\n            // for each mask procs\n            for (const mask of masks) {\n                // mask\n                this.applyMask(bitmap, funcPatternsMap, mask.fn);\n\n                // calculate score\n                const score = this.evaluteMask(bitmap);\n                if (score < maskScore) {\n                    maskNo = mask.index;\n                    maskScore = score;\n                }\n\n                // unmask\n                this.applyMask(bitmap, funcPatternsMap, mask.fn);\n            }\n\n            // mask\n            this.applyMask(bitmap, funcPatternsMap, masks[maskNo].fn);\n        }\n\n        // place format info\n        {\n            const props = this.props as QrPropsNoUndefined;\n            const ecLevel = ecLevelMap.get(props.ecLevel);\n            if (ecLevel === void 0) {\n                throw new Error(`Qr#buildBitmap: bad ecLevel '${props.ecLevel}' is specified.`);\n            }\n            let fi = (ecLevel << 3) | masks[maskNo].index;\n\n            // gx=0x0537 BCH Code is built on GF(2^4). but BCH#encode() is not use arithmetic on GF.\n            fi = ((fi << 10) | new BCH(field, 0x0537).encode(fi)) ^ 0x5412;\n\n            for (let i = 0; i <= 7; i++) {\n                bitmap.set(i          , ny - 9, (fi >>> i) & 1);\n            }\n            {\n                bitmap.set(    nx -  8, ny - 9, (fi >>> 8) & 1);\n            }\n            for (let i = 9; i <= 14; i++) {\n                bitmap.set(i + nx - 15, ny - 9, (fi >>> i) & 1);\n            }\n\n            for (let i = 0; i <= 5; i++) {\n                bitmap.set(nx - 9, ny - 1 - i, (fi >>> i) & 1);\n            }\n            for (let i = 6; i <= 7; i++) {\n                bitmap.set(nx - 9, ny - 2 - i, (fi >>> i) & 1);\n            }\n            {\n                bitmap.set(nx - 9,  7        ,              1);\n            }\n            for (let i = 8; i <= 14; i++) {\n                bitmap.set(nx - 9, 14     - i, (fi >>> i) & 1);\n            }\n        }\n\n        return bitmap;\n    }\n\n    protected drawBitmap(canvas: SvgCanvas, bitmap: Bitmap) {\n        // bitmap's coodinate origin is right-bottom.\n        const c = this.props.cellSize as number;\n        const nx = bitmap.width,\n              ny = bitmap.height;\n\n        for (let i = 0; i < nx; i++) {\n            for (let j = 0; j < ny; j++) {\n                if (bitmap.get(i, j)) canvas.rect((nx - 1 - i) * c, (ny - 1 - j) * c, c, c);\n            }\n        }\n\n        canvas.fill();\n        canvas.beginPath();\n    }\n}\n","\nexport * from 'red-agate-util/modules/';\nexport * from 'red-agate-math/modules/';\nexport * from 'red-agate-svg-canvas/modules/';\nexport * from 'red-agate/modules/';\nexport * from 'red-agate-react-host/modules/';\nexport * from 'red-agate-barcode/modules/';\n"],"sourceRoot":""}