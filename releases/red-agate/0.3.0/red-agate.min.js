!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react-dom/server")):"function"==typeof define&&define.amd?define(["react-dom/server"],e):"object"==typeof exports?exports.RedAgate=e(require("react-dom/server")):t.RedAgate=e(t.ReactDOMServer)}(window,(function(__WEBPACK_EXTERNAL_MODULE__1__){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(module,exports){module.exports=function(){return eval("require")}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,r){t.exports=r(3)},function(t,e,r){"use strict";r.r(e);class n{static encode(t,e){let r=[];const n=t.length;let s=0,i=0,o=0;for(let e=0,a=0;e<n;e++)a=e%3,0===a?(s=t[e],o=s<<4&48,s=s>>>2&63):1===a?(s=t[e],i=s<<2&60,s=s>>>4&15|o,o=i):(i=t[e],s=i>>>6&3|o,s<26?s+=65:s<52?s+=71:s<62?s-=4:s=s<63?43:47,r.push(s),s=63&i),s<26?s+=65:s<52?s+=71:s<62?s-=4:s=s<63?43:47,r.push(s);for(n%3&&(o<26?o+=65:o<52?o+=71:o<62?o-=4:o=o<63?43:47,r.push(o));r.length%4;)r.push(61);if(e&&0<e){const t=[];for(let n=0;n<r.length;n+=e)t.push(...r.slice(n,n+e),10);r=t}let a="";for(let t=0;t<r.length;t++)a+=String.fromCharCode(r[t]);return a}static decode(t){const e=[];let r=0,n=0,s=0;const i=t.length;let o=0,a=0;for(;r<i;r++){if(n=(r+s)%4,o=t.charCodeAt(r),65<=o&&o<=90)o-=65;else if(97<=o&&o<=122)o-=71;else if(48<=o&&o<=57)o+=4;else if(43===o)o=62;else{if(47!==o){if(61===o)break;s++;continue}o=63}0===n?a=o<<2&252:1===n?(e.push(a|o>>>4&3),a=o<<4&240):2===n?(e.push(a|o>>>2&15),a=o<<6&192):e.push(a|63&o)}return e}}class s{static html(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static xml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class i{static html(t){return t.replace(/&#39;/g,"'").replace(/&#x(?:0{0,2})27;/gi,"'").replace(/&apos;/g,"'").replace(/&#34;/g,'"').replace(/&#x(?:0{0,2})22;/gi,'"').replace(/&quot;/g,'"').replace(/&#62;/g,">").replace(/&#x(?:0{0,2})3e;/gi,">").replace(/&gt;/g,">").replace(/&#60;/g,"<").replace(/&#x(?:0{0,2})3c;/gi,"<").replace(/&lt;/g,"<").replace(/&#38;/g,"&").replace(/&#x(?:0{0,2})26;/gi,"&").replace(/&amp;/g,"&")}static xml(t){return s.html(t)}}class o{static*entries(t){for(const e of Object.keys(t))yield[e,t[e]]}static build(t){let e="",r=0;for(const[n,s]of this.entries(t))e+=`${r++?"&":""}${encodeURIComponent(n)}=${encodeURIComponent(s)}`;return e}static decode(t){const e=t.substr(1),r={};return e.split("&").forEach(t=>{const e=t.split("=");r[e[0]]=decodeURIComponent(e[1])}),r}}class a{static encodeToUtf8(t){return a.__encodeToUtf8(t)}static decodeUtf8(t){return a.__decodeUtf8(t)}static __encodeToUtf8Impl(t){const e=t.length;let r,n,s=-1,i=512,o=new Uint8Array(i);for(r=0;r<e;++r){const e=t.codePointAt(r);if(void 0===e)throw new Error("Can't convert string to UTF-8. string include unexpected sequence.");if(n=e,n<=127)o[++s]=n;else if(n<=2047)o[++s]=192|n>>>6,o[++s]=128|63&n;else if(n<=65535)o[++s]=224|n>>>12,o[++s]=128|n>>>6&63,o[++s]=128|63&n;else{if(!(n<=1114111))throw new Error("Can't convert string to UTF-8. string include unexpected sequence.");o[++s]=240|n>>>18,o[++s]=128|n>>>12&63,o[++s]=128|n>>>6&63,o[++s]=128|63&n,65536<=n&&++r}if(i-s<=4){const t=o;i*=2,o=new Uint8Array(i),o.set(t)}}return o.subarray(0,++s)}static __decodeUtf8Impl(t){let e="",r=0;const n=t.length;let s,i,o,a;for(;r<n;)switch(s=t[r++],s>>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCodePoint(s);break;case 12:case 13:i=t[r++],e+=String.fromCodePoint((31&s)<<6|63&i);break;case 14:i=t[r++],o=t[r++],e+=String.fromCodePoint((15&s)<<12|(63&i)<<6|(63&o)<<0);break;case 16:if(s>>>3&1)throw new Error("Can't convert UTF-8 to string. UTF-8 include unexpected sequence.");i=t[r++],o=t[r++],a=t[r++],e+=String.fromCodePoint((7&s)<<18|(63&i)<<12|(63&o)<<6|(63&a)<<0)}return e}}a.__ctor=(a.isNode="undefined"!=typeof Buffer,a.isTextEncoder="undefined"!=typeof TextEncoder,void(a.isNode?(a.__encodeToUtf8=t=>Buffer.from(t,"utf8"),a.__decodeUtf8=t=>Buffer.from(Array.isArray(t)?t:Array.from(t)).toString("utf8")):a.isTextEncoder?(a.utf8Encoder=new TextEncoder("utf8"),a.__encodeToUtf8=t=>a.utf8Encoder.encode(t),a.utfDecoder=new TextDecoder("utf8"),a.__decodeUtf8=t=>a.utfDecoder.decode(t)):(a.__encodeToUtf8=a.__encodeToUtf8Impl,a.__decodeUtf8=a.__decodeUtf8Impl)));class h{static loose(t,e=120){let r="",n=0;for(const s of t)n++,n>=e&&" \f\t\v".indexOf(s)>-1?(r+="\n",n=0):r+=s;return r}static normal(t,e=120){return h.loose(t,e)}static force(t,e=120){return h.loose(t,e)}}class l{static get MAX_INT(){return 9007199254740991}static highestBit(t){t=Math.abs(t);for(let e=52;e>=0;e--)if(Math.trunc(t/Math.pow(2,e))>0)return e;return-1}static bitOr(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296|(e-n)/4294967296)>>>0)+((r|n)>>>0)}static bitAnd(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296&(e-n)/4294967296)>>>0)+((r&n)>>>0)}static bitXor(t,e){const r=(4294967295&(t=Math.abs(t)))>>>0,n=(4294967295&(e=Math.abs(e)))>>>0;return 4294967296*(((t-r)/4294967296^(e-n)/4294967296)>>>0)+((r^n)>>>0)}static bitNot(t){const e=(4294967295&(t=Math.abs(t)))>>>0;return 4294967296*((2097151&~((t-e)/4294967296))>>>0)+(~e>>>0)}static bitLShift(t,e){return t=Math.abs(t),e>=0?e<=52?t%Math.pow(2,53-e)*Math.pow(2,e):0:e>=-52?Math.trunc(t/Math.pow(2,-e)):0}static bitRShift(t,e){return t=Math.abs(t),e<=0?e>=-52?t%Math.pow(2,53+e)*Math.pow(2,-e):0:e<=52?Math.trunc(t/Math.pow(2,e)):0}static slice(t,e,r){return t=Math.abs(t),r<0&&(r+=53),0<e&&(t=Math.trunc(t/Math.pow(2,e)),r-=e),t%Math.pow(2,r)}}var c;!function(t){t[t.Start=0]="Start",t[t.Current=1]="Current",t[t.End=2]="End"}(c||(c={}));class p{constructor(t,e){this.pos=0,e?(this.data=e,this.pos=8*e.length):this.data=new Uint8Array(t)}static fromBytes(t,e){const r=new p(t),n=r.byteLength,s=r.data;if(n<e.length)if(e instanceof Uint8Array)r.data.set(e.subarray(0,n));else for(let t=0;t<n;t++)s[t]=e[t];else r.data.set(e);return r.pos=8*e.length,r}writeBits8(t,e){if(0<e){const r=Math.floor(this.pos/8),n=this.pos%8,s=t&255>>>8-e,i=8-n-e;this.data[r]&=255<<8-n,i>=0?this.data[r]|=s<<i:(this.data[r]|=s>>>-i,this.data[r+1]&=255>>>-i,this.data[r+1]|=s<<8+i),this.pos+=e}return this}writeBits(t,e){if(0<e){let r=Math.floor(this.pos/8),n=this.pos%8,s=e;const i=s%8||8,o=l.slice(t,s-i,s),a=8-n-i;if(this.data[r]&=255<<8-n,a>=0?(this.data[r]|=o<<a,0===a&&(r+=1)):(this.data[r]|=o>>>-a,this.data[r+1]&=255>>>-a,this.data[r+1]|=o<<8+a,r+=1),s-=i,n=(n+i)%8,0===n)for(;0<s;s-=8,r++)this.data[r]=l.slice(t,s-8,s);else for(;0<s;s-=8,r++){const e=l.slice(t,s-8,s);this.data[r]&=255<<8-n,this.data[r]|=e>>>n,this.data[r+1]&=255>>>n,this.data[r+1]|=e<<8-n}this.pos+=e}return this}writeBitsFromArray(t,e,r){if(0<r)if(e%8==0){const n=e/8,s=Math.floor(r/8),i=r%8;let o=0;if(this.pos%8==0){const e=this.pos/8;if(0<s)for(;o<s;o++)this.data[e+o]=t[n+o];i&&(this.data[e+o]&=255>>>i,this.data[e+o]|=t[n+o]>>>8-i<<8-i),this.pos+=r}else{if(0<s)for(;o<s;o++)this.writeBits8(t[n+o],8);this.writeBits8(t[n+o]>>>8-i,i)}}else{const n=Math.floor(e/8),s=Math.floor((e+r)/8),i=e%8,o=(e+r)%8;if(n===s)this.writeBits8(t[s]>>>8-o,r);else{this.writeBits8(t[n],8-i);for(let e=n+1;e<s;e++)this.writeBits8(t[e],8);this.writeBits8(t[s]>>>8-o,o)}}return this}seek(t,e){switch(e){case c.Start:this.pos=t;break;case c.Current:this.pos+=t;break;case c.End:this.pos=8*this.data.length+t}return this}resize(t){if(this.data.length>t)this.data=this.data.subarray(0,t),this.pos=Math.min(this.pos,8*t);else if(this.data.length<t){const e=new Uint8Array(t);e.set(this.data,0),this.data=e}return this}writeAlignedSingleByte(t){const e=Math.ceil(this.pos/8);return this.data[e]=255&t,this.pos=8*(e+1),this}writeAlignedBytes(t,e,r){const n=Math.ceil(this.pos/8);for(let s=0;s<r;s++)this.data[n+s]=t[e+s];return this.pos=8*(n+r),this}toBytes(){return this.data.subarray(0,this.byteLength)}get byteLength(){return Math.ceil(this.pos/8)}get bitLength(){return this.pos}slice(t,e){e<0&&(e=this.pos+e);const r=new p(Math.ceil((e-t)/8));return r.writeBitsFromArray(this.data,t,e-t),r}setBit(t,e){const r=Math.floor(t/8),n=t%8;this.data[r]=this.data[r]&~(128>>>n)|(e?128:0)>>>n}getBit(t){const e=Math.floor(t/8),r=t%8;return this.data[e]&128>>>r?1:0}setByte(t,e){this.data[t]=e}getByte(t){return this.data[t]}concat(...t){return p.concat(this,...t)}static concat(...t){let e=0;for(const r of t)e+=r.bitLength;const r=new p(Math.ceil(e/8));for(let e=0;e<t.length;e++)r.writeBitsFromArray(t[e].data,0,t[e].bitLength);return r}}class d{constructor(t,e,r){this.w=t,this.h=e,this.widthAligned=8*Math.ceil(t/8),this.buf=new p(this.widthAligned*e,r),this.buf.seek(0,c.End)}get width(){return this.w}get height(){return this.h}toBytes(){return this.buf.toBytes()}set(t,e,r){this.buf.setBit(e*this.widthAligned+t,r)}get(t,e){return this.buf.getBit(e*this.widthAligned+t)}clear(t,e,r,n){t=Math.max(0,t),e=Math.max(0,e),r=Math.max(0,Math.min(r,Math.max(0,this.w-t))),n=Math.max(0,Math.min(n,Math.max(0,this.h-e)));for(let s=0;s<n;s++){const n=(e+s)*this.widthAligned+t;for(let t=0;t<r;t++)this.buf.setBit(n+t,0)}return this}fill(t,e,r,n,s){t=Math.max(0,t),e=Math.max(0,e),r=Math.max(0,Math.min(r,Math.max(0,this.w-t))),n=Math.max(0,Math.min(n,Math.max(0,this.h-e)));for(let i=0;i<n;i++){const n=(e+i)*this.widthAligned+t;for(let t=0;t<r;t++)this.buf.setBit(n+t,s)}return this}clearAll(){const t=this.buf.byteLength;for(let e=0;e<t;e++)this.buf.setByte(e,0);return this}}let u=!1;"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(void 0!==process.type&&"renderer"===process.type||(u=!0));var g,f=u;!function(t){t[t.NO_LOG=0]="NO_LOG",t[t.ERROR=1]="ERROR",t[t.PRODUCTION=1]="PRODUCTION",t[t.ASSERT=2]="ASSERT",t[t.WARN=3]="WARN",t[t.STAGING=3]="STAGING",t[t.INFO=4]="INFO",t[t.LOG=5]="LOG",t[t.DEVELOPMENT=5]="DEVELOPMENT",t[t.TRACE=6]="TRACE",t[t.DEBUG=6]="DEBUG",t[t.VERBOSE=6]="VERBOSE"}(g||(g={}));class m{static assert(t,e,...r){if(this.logLevel<=g.PRODUCTION)return this;let n=!1;try{n=Boolean(t)}catch(t){n=!1}if(!n){try{m.con.assert(t,e,...r)}catch(t){if(this.logLevel<=g.STAGING)throw t}if(this.logLevel<=g.STAGING){let t="";try{t=String(e)}catch(t){}throw new Error("Assertion failed:"+t)}}return this}static dir(t,...e){if(this.logLevel<=g.DEBUG)return this;try{m.con.dir(t,...e)}catch(t){}return this}static error(t,...e){if(this.logLevel<g.ERROR)return this;try{m.con.error(t,...e)}catch(t){}return this}static info(t,...e){if(this.logLevel<g.INFO)return this;try{m.con.info(t,...e)}catch(t){}return this}static log(t,...e){if(this.logLevel<g.LOG)return this;try{m.con.log(t,...e)}catch(t){}return this}static time(t){if(this.logLevel<=g.DEBUG)return this;try{m.con.time(t)}catch(t){}return this}static timeEnd(t){if(this.logLevel<=g.DEBUG)return this;try{m.con.timeEnd(t)}catch(t){}return this}static trace(t,...e){if(this.logLevel<g.TRACE)return this;try{m.con.trace(t,...e)}catch(t){}return this}static warn(t,...e){if(this.logLevel<g.WARN)return this;try{m.con.warn(t,...e)}catch(t){}return this}}m.__ctor=void(f?(m.con=new console.Console(process.stderr),m.logLevel=g.PRODUCTION):(m.con=console,m.logLevel=g.DEVELOPMENT));var x=r(0);const b=r.n(x).a||x;var w=f?b():t=>{};class y{static fetchLocation_node(t,e){return new Promise((e,r)=>{try{const n=t.toLowerCase();if(n.startsWith("http:")||n.startsWith("https:")){const s=w(n.startsWith("http:")?"http":"https");w("url");s.get(t,t=>{if(200===t.statusCode){const n=t.headers["content-type"],s=[];t.on("data",t=>{s.push(t)}),t.on("end",()=>{e({contentType:n,data:Buffer.concat(s)})}),t.on("error",t=>{m.log("FileFetcher#fetchLocation_node:http.get:on-error:"+t),r(t)})}else m.log("FileFetcher#fetchLocation_node:http.get:bad-status-code:"+t.statusCode),r(t)})}else if(!t.match(/^[A-Za-z][-+.A-Za-z0-9]*:/)||n.toLowerCase().startsWith("file:")||"win32"===process.platform&&t.match(/^[A-Za-z]:/)){const n=w("fs");let s=t;"win32"===process.platform&&(s=s.replace(/^file:\/+([A-Za-z])\//i,"$1:/"),s=s.replace(/^\/+([A-Za-z])\//,"$1:/")),s=s.replace(/^file\:\/+/i,"/");const i=[];n.createReadStream(s).on("data",t=>{i.push(t)}).on("end",()=>{e({contentType:null,data:Buffer.concat(i)})}).on("error",t=>{m.log("FileFetcher#fetchLocation_node:fs.createReadStream:on-error:"+t),r(t)})}else r(t)}catch(t){m.log("FileFetcher#fetchLocation_node:"+t),r(t)}})}static fetchLocation_xhr(t,e){return new Promise((r,n)=>{try{const s=new XMLHttpRequest;if(s.onload=t=>{if(200===s.status||304===s.status){const e=s.getResponseHeader("content-type"),i=s.response;i?r({contentType:e,data:new Uint8Array(i)}):(m.log("FileFetcher#fetchLocation_xhr:xhr.onload:empty-response:"+t),n(t))}else m.log("FileFetcher#fetchLocation_xhr:xhr.onload:bad-status-code:"+s.status+":"+t),n(t)},s.onerror=t=>{m.log("FileFetcher#fetchLocation_xhr:xhr.onerror:"+t),n(t)},s.open(null!=e&&void 0!==e.method&&null!==e.method?e.method:"GET",t,!0,null!=e?e.user:void 0,null!=e?e.password:void 0),null!=e&&void 0!==e.headers&&null!==e.headers)for(const t of e.headers)s.setRequestHeader(t.header,t.value);s.responseType="arraybuffer",s.send(null!=e&&void 0!==e.data&&null!==e.data?e.data:void 0)}catch(t){m.log("FileFetcher#fetchLocation_xhr:"+t),n(t)}})}static fetchLocation(t,e){return f?this.fetchLocation_node(t,e):this.fetchLocation_xhr(t,e)}}class v{static saveTextAs_node(t,e,r){return new Promise((n,s)=>{try{w("fs").writeFile(t,e,"utf-8"===r||"UTF-8"===r?"utf8":r,t=>{t?(m.log("FileSaver#saveTextAs_node:writeFile:"+t),s(t)):n(!0)})}catch(t){m.log("FileSaver#saveTextAs_node:"+t),s(t)}})}static saveTextAs_html5(t,e,r){return new Promise((n,s)=>{try{if("utf-8"===r||"UTF-8"===r){const r=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t),n(!0);else{const e=window.URL.createObjectURL(r),s=document.createElement("a");s.href=e,s.download=t;const i=window.navigator.userAgent.toLowerCase(),o=-1!==i.indexOf("chrome/")&&-1===i.indexOf("edge/");o||document.body.appendChild(s),s.click(),window.setTimeout(()=>{window.URL.revokeObjectURL(e),o||document.body.removeChild(s),n(!0)},10)}}else m.log("FileSaver#saveTextAs_html5:unsupported text encoding:"+r),s("unsupported text encoding")}catch(t){m.log("FileSaver#saveTextAs_html5:"+t),s(t)}})}static saveBinaryAs_node(t,e){return new Promise((r,n)=>{try{w("fs").writeFile(t,e,t=>{t?(m.log("FileSaver#saveBinaryAs_node:writeFile:"+t),n(t)):r(!0)})}catch(t){m.log("FileSaver#saveBinaryAs_node:"+t),n(t)}})}static saveBinaryAs_html5(t,e){return new Promise((r,n)=>{try{const n=new Blob([e],{type:"application/octet-binary"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t),r(!0);else{const e=window.URL.createObjectURL(n),s=document.createElement("a");s.href=e,s.download=t;const i=window.navigator.userAgent.toLowerCase(),o=-1!==i.indexOf("chrome/")&&-1===i.indexOf("edge/");o||document.body.appendChild(s),s.click(),window.setTimeout(()=>{window.URL.revokeObjectURL(e),o||document.body.removeChild(s),r(!0)},10)}}catch(t){m.log("FileSaver#saveBinaryAs_html5:"+t),n(t)}})}static saveTextAs(t,e,r="utf-8"){return f?this.saveTextAs_node(t,e,r):this.saveTextAs_html5(t,e,r)}static saveBinaryAs(t,e){return f?this.saveBinaryAs_node(t,e):this.saveBinaryAs_html5(t,e)}}class k{static fetch(t){return new Promise((e,r)=>{try{const n=new FileReader;n.onload=r=>{e({contentType:t.type,data:new Uint8Array(r.target.result)})},n.onerror=t=>{m.log("Html5FileFetcher#fetch:onerror:"+t),r(t)},n.onabort=t=>{m.log("Html5FileFetcher#fetch:onabort:"+t),r(t)},n.readAsArrayBuffer(t)}catch(t){m.log("Html5FileFetcher#fetch:"+t),r(t)}})}}class S{static isAbsolute(t){const e=t.toLowerCase();return!(!e.startsWith("/")&&!e.startsWith("\\"))||"."!==e&&!e.startsWith("./")&&!e.startsWith(".\\")&&(".."!==e&&!e.startsWith("../")&&!e.startsWith("..\\")&&(!!e.match(/^([a-z][a-z0-9+\-.]*):/)||!!e.match(/^[a-z]:[/\/]/)))}static getDirectory(t){let e="",r=t;r.startsWith("\\\\?\\")&&(e+="\\\\?\\",r=r.substring(3));let n=r.indexOf("?");n<0&&(n=r.length);let s=r.indexOf("#");if(s<0&&(s=r.length),r=r.substring(0,Math.min(n,s)),r.endsWith("/")||r.endsWith("\\"))return e+r;for(;r.length>0;)if(r=r.substring(0,r.length-1),r.endsWith("/")||r.endsWith("\\"))return e+r;return e+r||"/"}static join(t,e){return S.isAbsolute(e)?e:S.getDirectory(t)+e}static getPathExt(t){return t.slice(2+(t.lastIndexOf(".")-1>>>0)).toLowerCase()}static pathExtToContentType(t){let e=null;switch(t){case"jpeg":case"jpg":e="image/jpeg";break;case"png":e="image/png";break;case"gif":e="image/gif";break;case"svg":case"svgz":e="image/svg+xml";break;case"tiff":case"tif":e="image/tiff";break;case"jp2":case"j2c":e="image/jp2";break;case"css":e="text/css";break;case"js":e="text/javascript";break;case"csv":e="text/csv";break;case"txt":e="text/plain";break;case"html":case"htm":e="text/plain"}return e}}class ${constructor(t){this.field=t,this._zero=[t.ZERO],this._one=[t.ONE],this._nan=[t.NaN]}listPx(t){throw new Error("not supported operation")}getAt(t,e){return t[e]}setAt(t,e,r){return t[e]=r,t}slice(t,e,r){return t.slice(e,r)}map(t,e){return this.mapToSelf(Array.from(t),e)}mapToSelf(t,e){for(let r=0;r<t.length;r++)t[r]=e(t[r]);return t}newNthPolynomial(t){const e=[];return e.length=t+1,e.fill(this.field.ZERO),e}get ZERO(){return Array.from(this._zero)}get ONE(){return Array.from(this._one)}get NaN(){return this._nan}normalize(t){return(Array.isArray(t)?t:Array.from(t)).map(t=>this.field.normalize(t))}isNaN(t){return t===this.NaN||1===t.length&&t[0]===this.field.NaN}eq(t,e){if(this.isNaN(t)||this.isNaN(e))return!1;const r=this.field.ZERO,n=Math.max(t.length,e.length);for(let s=0;s<n;s++)if(!this.field.eq(void 0!==t[s]?t[s]:r,void 0!==e[s]?e[s]:r))return!1;return!0}noteq(t,e){return!this.eq(t,e)}neg(t){const e=[];for(let r=0;r<t.length;r++)e[r]=this.field.neg(t[r]);return e}add(t,e){const r=[],n=this.field.ZERO;r.length=Math.max(t.length,e.length);for(let s=0;s<r.length;s++)r[s]=this.field.add(void 0!==t[s]?t[s]:n,void 0!==e[s]?e[s]:n);return r}sub(t,e){const r=[],n=this.field.ZERO;r.length=Math.max(t.length,e.length);for(let s=0;s<r.length;s++)r[s]=this.field.sub(void 0!==t[s]?t[s]:n,void 0!==e[s]?e[s]:n);return r}mul(t,e){const r=[],n=this.field.ZERO;r.length=t.length+e.length-1;for(let t=0;t<r.length;t++)r[t]=n;for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)r[s+n]=this.field.add(r[s+n],this.field.mul(t[s],e[n]));return r}mod(t,e,r=0){return this.divmod(t,e,r).r}divmod(t,e,r=0){t=Array.from(t);const n=this.field.ZERO;if(r>0){const e=[];e.length=r;for(let t=0;t<r;t++)e[t]=n;t=e.concat(t)}let s=e.length;for(let t=0;t<s&&(void 0===e[s-1]||!this.field.noteq(e[s-1],n));t++,s--);if(0===s)return{q:this.NaN,r:this.NaN,divisible:!1};const i=t.length-s+1,o=[];o.length=i;for(let r=0;r<i;r++)if(this.field.noteq(t[t.length-1-r],n)){const n=this.field.divmod(t[t.length-1-r],e[s-1]);o[i-1-r]=n.q;for(let o=0;o<s-1;o++)t[i-1-r+o]=this.field.sub(t[i-1-r+o],this.field.mul(e[o],n.q));t[t.length-1-r]=n.r}else t[t.length-1-r]=n;let a=!0;const h=[];h.length=s-1;for(let e=0;e<h.length;e++)t[e]&&(a=!1),h[e]=t[e];return{q:o,r:h,divisible:a}}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}}class M extends ${}class T{constructor(t){this.ring=t}solve(t,e,r,n){const s=this.ring.field;for(let e=0;e<n;e++){let r=this.ring.getAt(t[e],n-e);if(s.eq(r,s.ZERO)){for(let r=e+1;r<n;r++)if(s.noteq(this.ring.getAt(t[r],n-e),s.ZERO)){const n=t[e];t[e]=t[r],t[r]=n;break}r=this.ring.getAt(t[e],n-e)}if(!s.eq(r,s.ZERO)){t[e]=this.ring.mapToSelf(t[e],t=>s.div(t,r));for(let r=e+1;r<n;r++){const i=this.ring.getAt(t[r],n-e),o=this.ring.map(t[e],t=>s.mul(t,i));t[r]=this.ring.sub(t[r],o)}}}for(let e=n-1;e>=0;e--){const r=this.ring.getAt(t[e],n-e);if(!s.eq(r,s.ZERO))for(let r=0;r<e;r++){const i=this.ring.getAt(t[r],n-e),o=this.ring.map(t[e],t=>s.mul(t,i));t[r]=this.ring.sub(t[r],o)}}const i=this.ring.newNthPolynomial(n-1);for(let e=0;e<n;e++)s.eq(this.ring.getAt(t[e],n-e),s.ZERO)?this.ring.setAt(i,n-1-e,s.NaN):this.ring.setAt(i,n-1-e,s.neg(this.ring.getAt(t[e],0)));return i}det(t,e,r,n){const s=this.ring.field;if(n<=0)return s.NaN;const i=(t,e)=>{if(e<2)return this.ring.getAt(t[0],0);if(2===e)return s.sub(s.mul(this.ring.getAt(t[0],1),this.ring.getAt(t[1],0)),s.mul(this.ring.getAt(t[1],1),this.ring.getAt(t[0],0)));let r=s.ZERO;for(let n=0;n<e;n++){const o=[];for(let r=0;r<e;r++)n!==r&&o.push(this.ring.slice(t[r],0,e-1));const a=(e-1+e-n)%2?1:-1,h=i(o,e-1);r=s.add(r,s.mul(this.ring.getAt(t[n],e-1),a>=0?h:s.neg(h)))}return r};if(0===e)return i(0===r?t:t.slice(r),n);const o=[];for(let s=0;s<n;s++)o.push(this.ring.slice(t[r+s],e,e+n));return i(o,n)}}class A{constructor(t=8,e=285){this.nth=t,this.px=e,this.expDict=[],this.lnDict=[this.NaN];let r=1;this.numElements=Math.pow(2,t),this.mask=this.numElements-1,this.expDict.length=this.mask,this.lnDict.length=this.numElements;for(let t=0;t<this.mask;t++)this.expDict[t]=r,this.lnDict[r]=t,r*=2,r>this.mask&&(r=((r^e)&this.mask)>>>0)}bitMask(t){const e=(4294967295&(t=Math.abs(t)))>>>0;return 4294967296*(((t-e)/4294967296&this.maskHi)>>>0)+((e&this.maskLo)>>>0)}checkGenerationResult(){for(let t=1;t<this.numElements;t++)if(void 0===this.lnDict[t])return!1;return!0}get MODULO(){return this.numElements}get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return 2}get NaN(){return Number.NaN}normalize(t){return(t&this.mask)>>>0}isNaN(t){return Number.isNaN(t)}eq(t,e){return(t&this.mask)>>>0==(e&this.mask)>>>0}noteq(t,e){return(t&this.mask)>>>0!=(e&this.mask)>>>0}neg(t){return(t&this.mask)>>>0}inv(t){return 0===(t=(t&this.mask)>>>0)?this.NaN:this.expDict[(this.mask-this.lnDict[t])%this.mask]}add(t,e){return((t^e)&this.mask)>>>0}sub(t,e){return((t^e)&this.mask)>>>0}mul(t,e){return t=(t&this.mask)>>>0,e=(e&this.mask)>>>0,0===t||0===e?0:this.expDict[(this.lnDict[t]+this.lnDict[e])%this.mask]}div(t,e){return t=(t&this.mask)>>>0,0===(e=(e&this.mask)>>>0)?this.NaN:0===t?0:this.expDict[(this.lnDict[t]+(this.mask-this.lnDict[e])%this.mask)%this.mask]}mod(t,e){return(e&this.mask)>>>0==0?this.NaN:0}divmod(t,e){return(e&this.mask)>>>0==0?{q:this.NaN,r:this.NaN,divisible:!1}:{q:this.div(t,e),r:0,divisible:!0}}pow(t,e){return t=this.normalize(t),e%=this.mask,0===t?0===e?1:0:e>=0?this.exp(this.ln(t)*e):this.inv(this.exp(this.ln(t)*-e))}log(t,e){const r=[this.NaN];for(let e=0;e<this.mask;e++){const n=this.pow(t,e);void 0===r[n]&&(r[n]=e)}const n=r[(e&this.mask)>>>0];return void 0!==n?n:this.NaN}exp(t){return t>=0?this.expDict[t%this.mask]:this.inv(this.expDict[-t%this.mask])}ln(t){return this.lnDict[(t&this.mask)>>>0]}}class C extends A{constructor(t=285){super(8,t)}}class P extends A{constructor(t=67){super(6,t)}}class O{constructor(t,e=3){this.prime=t,this.alpha=e,this.expDict=[],this.lnDict=[this.NaN];let r=1;for(let n=0;n<t-1;n++)this.expDict[n]=r,this.lnDict[r]=n,r=r*e%t}checkGenerationResult(){for(let t=1;t<this.prime;t++)if(void 0===this.lnDict[t])return!1;return!0}get MODULO(){return this.prime}get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return this.alpha}get NaN(){return Number.NaN}normalize(t){return(t<0?this.prime- -t%this.prime:t)%this.prime}isNaN(t){return Number.isNaN(t)}eq(t,e){return this.normalize(t)===this.normalize(e)}noteq(t,e){return this.normalize(t)!==this.normalize(e)}neg(t){return(this.prime-t%this.prime)%this.prime}inv(t){return 0===(t=this.normalize(t))?this.NaN:this.expDict[(this.prime-1-this.ln(t))%(this.prime-1)]}inv_withoutTable(t){if(0===(t=this.normalize(t)))return this.NaN;let e=1;for(let r=0;r<this.prime;r++){if(e%t==0)return e/t%this.prime;e+=this.prime}return this.NaN}add(t,e){return(this.normalize(t)+this.normalize(e))%this.prime}sub(t,e){return this.normalize(this.normalize(t)-this.normalize(e))}mul(t,e){return this.normalize(t)*this.normalize(e)%this.prime}div(t,e){return this.normalize(t)*this.inv(e)%this.prime}mod(t,e){return e%this.prime==0?this.NaN:0}divmod(t,e){return e%this.prime==0?{q:this.NaN,r:this.NaN,divisible:!1}:{q:this.div(t,e),r:0,divisible:!0}}pow(t,e){return t=this.normalize(t),e%=this.prime-1,0===t?0===e?1:0:e>=0?this.exp(this.ln(t)*e):this.inv(this.exp(this.ln(t)*-e))}pow_withoutTable(t,e){return t=this.normalize(t),e%=this.prime-1,0===t?0===e?1:0:e>=0?this.exp_withoutTable(this.ln_withoutTable(t)*e):this.inv_withoutTable(this.exp_withoutTable(this.ln(t)*-e))}log(t,e){const r=[this.NaN];for(let e=0;e<this.prime-1;e++){const n=this.pow(t,e);void 0===r[n]&&(r[n]=e)}const n=r[this.normalize(e)];return void 0!==n?n:this.NaN}log_withoutTable(t,e){let r=this.ln_withoutTable(e);const n=this.ln_withoutTable(t);if(this.isNaN(r)||this.isNaN(n))return this.NaN;for(let t=0;t<this.prime;t++){if(r%n==0)return r/n%this.prime;r=r+this.prime-1}return this.NaN}exp(t){return t>=0?this.expDict[t%(this.prime-1)]:this.inv(this.expDict[-t%(this.prime-1)])}exp_withoutTable(t){return t>=0?Math.pow(this.alpha,t%(this.prime-1))%this.prime:this.inv_withoutTable(Math.pow(this.alpha,-t%(this.prime-1)))}ln(t){return this.lnDict[this.normalize(t)]}ln_withoutTable(t){if(0===(t=this.normalize(t)))return this.NaN;let e=1;for(let r=0;r<this.prime-1;r++){if(t===e)return r;e=e*this.alpha%this.prime}return this.NaN}}class N{static listPx(t,e=!1){const r=[],n=[];r[Math.pow(2,t)-1]=1,r[0]=1;const s=Math.pow(2,t+1);for(let t=2;t<s;t++){N.polyDiv(r,N.bitToPoly(t)).divisible&&(0===n.length||n.every(e=>!N.bitPolyDiv(t,e).divisible))&&n.push(t)}return e?n:n.filter(e=>Boolean(1&l.bitRShift(e,t))).filter(e=>new A(t,e).checkGenerationResult())}static bitToPoly(t){const e=[],r=(4294967295&(t=Math.abs(t)))>>>0,n=(t-r)/4294967296;for(let t=0;t<32;t++)e[t]=(r&1<<t)>>>0?1:0;for(let t=0;t<21;t++)e[32+t]=(n&1<<t)>>>0?1:0;for(let t=52;t>0;t--)if(e[t])return e.length=t+1,e;return e.length=1,e}static polyToBit(t){let e=0;const r=Math.min(53,t.length);for(let n=0;n<r;n++)t[n]&&(e+=Math.pow(2,n));return e}static polyAdd(t,e){const r=[];r.length=Math.max(t.length,e.length);for(let n=0;n<r.length;n++)r[n]=(void 0!==t[n]?t[n]:0)^(void 0!==e[n]?e[n]:0);return r}static polySub(t,e){return this.polyAdd(t,e)}static bitPolyAdd(t,e){return l.bitXor(t,e)}static bitPolySub(t,e){return l.bitXor(t,e)}static polyMul(t,e){const r=[];r.length=t.length+e.length-1;for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)r[s+n]^=t[s]&e[n];return r}static bitPolyMul(t,e){let r=0;for(let n=0;n<53;n++)r=l.bitXor(r,t*(1&l.bitRShift(e,n))*Math.pow(2,n));return r}static polyDiv(t,e,r=0){if(t=Array.from(t),r>0){const e=[];e.length=r;for(let t=0;t<r;t++)e[t]=0;t=e.concat(t)}let n=e.length;for(let t=0;t<n&&!e[n-1];t++,n--);if(0===n)return{q:[Number.NaN],r:[Number.NaN],divisible:!1};const s=t.length-n+1,i=[];i.length=s;for(let r=0;r<s;r++)if(t[t.length-1-r]){i[s-1-r]=1;for(let i=0;i<n;i++)t[s-1-r+i]^=e[i]}else t[t.length-1-r]=0;let o=!0;const a=[];a.length=n-1;for(let e=0;e<a.length;e++)t[e]&&(o=!1),a[e]=t[e];return{q:i,r:a,divisible:o}}static bitPolyDiv(t,e,r=0){r&&(t=l.bitLShift(t,r));let n=53;for(let t=0;t<53&&!l.bitRShift(e,52-t);t++,n--);if(0===n)return{q:Number.NaN,r:Number.NaN,divisible:!1};const s=53-n+1;let i=0;for(let r=0,n=Math.pow(2,52);r<s;r++,n/=2)if(1&Math.trunc(t/n)){const n=Math.pow(2,s-1-r);i+=n,t=l.bitXor(t,e*n)}return{q:i,r:t,divisible:0===t}}static polyIsZero(t){const e=Math.min(52,t.length);for(let r=0;r<e;r++)if(t[r])return!0;return!1}}class D{get field(){return this._field?this._field:(this._field=new O(2),this._field)}listPx(t,e=!1){return N.listPx(t,e)}getAt(t,e){return 1&l.bitRShift(t,e)}setAt(t,e,r){return l.bitNot(l.bitLShift(1&r?0:1,e))}slice(t,e,r){return l.bitAnd(l.bitRShift(l.MAX_INT,r-e),l.bitRShift(t,e))}map(t,e){return this.mapToSelf(t,e)}mapToSelf(t,e){for(let r=0;r<53;r++)t=this.setAt(t,r,e(this.getAt(t,r)));return t}newNthPolynomial(t){return 0}get ZERO(){return 0}get ONE(){return 1}get NaN(){return Number.NaN}normalize(t){return t}isNaN(t){return Number.isNaN(t)}eq(t,e){return t===e}noteq(t,e){return t!==e}neg(t){return t}add(t,e){return l.bitXor(t,e)}sub(t,e){return l.bitXor(t,e)}mul(t,e){return N.bitPolyMul(t,e)}mod(t,e,r=0){return N.bitPolyDiv(t,e,r).r}divmod(t,e,r=0){return N.bitPolyDiv(t,e,r)}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}}class L{constructor(){this._nan=[Number.NaN]}get field(){return this._field?this._field:(this._field=new O(2),this._field)}listPx(t,e=!1){return N.listPx(t,e).map(t=>N.bitToPoly(t))}getAt(t,e){return t[e]}setAt(t,e,r){return t[e]=r,t}slice(t,e,r){return t.slice(e,r)}map(t,e){return this.mapToSelf(Array.from(t),e)}mapToSelf(t,e){for(let r=0;r<t.length;r++)t[r]=e(t[r]);return t}newNthPolynomial(t){const e=[];return e.length=t+1,e.fill(0),e}get ZERO(){return[0]}get ONE(){throw[1]}get NaN(){return this._nan}normalize(t){return(Array.isArray(t)?t:Array.from(t)).map(t=>Boolean(1&t)?1:0)}isNaN(t){return t===this.NaN||1===t.length&&t[0]===Number.NaN}eq(t,e){if(this.isNaN(t)||this.isNaN(e))return!1;const r=Math.max(t.length,e.length);for(let n=0;n<r;n++)if((void 0!==t[n]&&Boolean(1&t[n])?1:0)!=(void 0!==e[n]&&Boolean(1&e[n])?1:0))return!1;return!0}noteq(t,e){return!this.eq(t,e)}neg(t){return Array.from(t)}add(t,e){return N.polyAdd(t,e)}sub(t,e){return N.polySub(t,e)}mul(t,e){return N.polyMul(t,e)}mod(t,e,r=0){return N.polyDiv(t,e,r).r}divmod(t,e,r=0){return N.polyDiv(t,e,r)}pow(t,e){throw new Error("not supported operation")}exp(t){throw new Error("not supported operation")}}class B{get ZERO(){return 0}get ONE(){return 1}get ALPHA(){return Math.E}get NaN(){return Number.NaN}normalize(t){return t}isNaN(t){return Number.isNaN(t)}eq(t,e){return t===e}noteq(t,e){return t!==e}neg(t){return-t}inv(t){return 1/t}add(t,e){return t+e}sub(t,e){return t-e}mul(t,e){return t*e}div(t,e){return t/e}mod(t,e){return t%e}divmod(t,e){return 0===e?{q:this.NaN,r:this.NaN,divisible:!1}:{q:Math.sign(t)*(Math.abs(t)-Math.abs(t%e))/e,r:t%e,divisible:t%e==0}}pow(t,e){return Math.pow(t,e)}log(t,e){return Math.log(e)/Math.log(t)}exp(t){return Math.exp(t)}ln(t){return Math.log(t)}}class E{constructor(t,e,r=1){this.field=t,this.aDegree=r,this.gx=e}set gx(t){this._gx=t,this._gxLength=l.highestBit(t)+1}get gx(){return this._gx}get gxLength(){return this._gxLength}static getGx(t,e,r=1){const n=Math.log2(t.MODULO),s=N.listPx(n,!0),i=[],o=Math.min(2*e,t.MODULO-1);for(let e=0;e<t.MODULO-1;e++)for(let r=0;r<s.length;r++){const o=s[r];let a=1&o;for(let r=1;r<=n;r++)a=t.add(a,1&l.bitRShift(o,r)?t.exp(r*e):0);0===a&&(i[e]=o)}let a=i[r];for(let t=1;t<o;t++){let e=!1;const n=i[t+r];for(let s=t-1;s>=0;s--)if(n===i[s+r]){e=!0;break}e||(a=N.bitPolyMul(a,n))}return a}encode(t){return N.bitPolyDiv(t,this._gx,this._gxLength-1).r}decode(t,e){const r=this.field.MODULO-1;let n=!1;const s=[];s.length=2*e;for(let e=0;e<s.length;e++){let i=(1&t)*this.field.ONE;for(let n=1;n<r;n++){const r=this.field.exp((this.aDegree+e)*n);i=this.field.add((1&l.bitRShift(t,n))*r,i)}s[e]=i,n=n||this.field.noteq(i,this.field.ZERO)}if(!n)return l.bitRShift(t,this._gxLength-1);const i=new T(new $(this.field));let o=Math.floor(s.length/2);const a=[];for(;o>0;o--){a.length=0;for(let t=0;t<o;t++)a[t]=s.slice(t,t+o);if(this.field.noteq(i.det(a,0,0,a.length),this.field.ZERO))break}if(0===o)return l.bitRShift(t,this._gxLength-1);for(let t=0;t<o;t++)a[t]=[this.field.neg(s[o+t])].concat(a[t]);const h=[this.field.ONE].concat(i.solve(a,0,0,o).reverse()),c=[];for(let t=0;t<this.field.MODULO-1;t++){let e=h[0];for(let r=1;r<h.length;r++){const n=this.field.exp((this.aDegree+t)*r);e=this.field.add(this.field.mul(h[r],n),e)}this.field.eq(this.field.ZERO,e)&&c.push(this.field.MODULO-1-t-this.aDegree)}let p=0;for(let t=0;t<o;t++)p+=Math.pow(2,c[t]);return t=l.bitXor(t,p),l.bitRShift(t,this._gxLength-1)}}class _{constructor(t=3988292384){this.reversedGx=t,this.table=[];for(let e=0;e<256;e++){let r=e;for(let e=0;e<8;e++)r=1&r?t^r>>>1:r>>>1;this.table[e]=r}}calc(t){let e=4294967295;for(let r=0;r<t.length;r++)e=this.table[255&(e^t[r])]^e>>>8;return 4294967295^e}}class R{constructor(t,e,r=0){this.field=t,this.gx=e,this.aDegree=r,this.poly=new $(t)}static listGx(t,e,r,n=0){const s=new $(t),i=e||[];let o=[t.exp(n),t.ONE];const a=[t.exp(n+1),t.ONE];0===i.length?i.push(o):(o=i[i.length-1],a[0]=t.exp(n+i.length));for(let e=i.length+1;e<=r;e++)o=s.mul(o,a),i.push(o),a[0]=t.exp(n+e);return i}static getGx(t,e,r=0){const n=new $(t);let s=[t.exp(r),t.ONE];const i=[t.exp(r+1),t.ONE];for(let o=2;o<=e;o++)s=n.mul(s,i),i[0]=t.exp(r+o);return s}encode(t){return this.poly.divmod(t,this.gx,this.gx.length-1).r}decode(t,e=0){let r=!1;const n=[];n.length=this.gx.length-1,n.length<=2*e&&(n.length=2*e);for(let e=0;e<n.length;e++){let s=t[0];for(let r=1;r<t.length;r++){const n=this.field.exp((this.aDegree+e)*r);s=this.field.add(this.field.mul(t[r],n),s)}n[e]=s,r=r||this.field.noteq(s,this.field.ZERO)}if(!r)return Array.prototype.slice.call(t,this.gx.length-1);const s=this.poly.field,i=new T(this.poly);let o=Math.floor(n.length/2),a=[];for(;o>0;o--){a.length=0;for(let t=0;t<o;t++)a[t]=n.slice(t,t+o);if(s.noteq(i.det(a,0,0,a.length),s.ZERO))break}if(0===o)return Array.prototype.slice.call(t,this.gx.length-1);for(let t=0;t<o;t++)a[t]=[s.neg(n[o+t])].concat(a[t]);const h=[s.ONE].concat(i.solve(a,0,0,o).reverse()),l=[];for(let t=0;t<s.MODULO-1;t++){let e=h[0];for(let r=1;r<h.length;r++){const n=s.exp((this.aDegree+t)*r);e=s.add(s.mul(h[r],n),e)}s.eq(s.ZERO,e)&&l.push(s.MODULO-1-t-this.aDegree)}a=[];for(let t=0;t<o;t++){a[t]=[s.neg(n[t])];for(let e=0;e<l.length;e++)a[t].push(s.exp((this.aDegree+t)*l[e]))}const c=i.solve(a,0,0,o);for(let e=0;e<o;e++)t[l[e]]=s.add(t[l[e]],c[e]);return Array.prototype.slice.call(t,this.gx.length-1)}}class I{constructor(t){if(this._r=0,this._g=0,this._b=0,this._a=1,!t)return;let e={r:0,g:0,b:0,a:1};if("object"==typeof t){if(t.hasOwnProperty("r")){const r=t;e={r:I.cutoff255(r.r),g:I.cutoff255(r.g),b:I.cutoff255(r.b),a:I.cutoff1(r.a||1)}}else if(t.hasOwnProperty("h")){const r=t;e=I.hslToRgb(r.h,r.s,r.l,r.a||1)}}else if("string"==typeof t){let r;if(r=I.isCode(t)||I.isName(t)||I.isRgb(t)){e=r}else if(r=I.isHsl(t)){const t=r;e=I.hslToRgb(t.h,t.s,t.l,t.a)}}this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a}static cutoff255(t){return t<0?0:t>255?255:t}static cutoff1(t){return t<0?0:t>1?1:t}static isRgb(t){let e,r,n,s,i=1;return!!(s=t.match(/^\s*rgb(a?)\(\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*(?:,\s*((?:[01]?\.)?\d+)\s*)?\)\s*$/))&&(e=I.cutoff255(s[2].endsWith("%")?Math.round(Number.parseFloat(s[2])/100*255):Number.parseInt(s[2],10)),r=I.cutoff255(s[3].endsWith("%")?Math.round(Number.parseFloat(s[3])/100*255):Number.parseInt(s[3],10)),n=I.cutoff255(s[4].endsWith("%")?Math.round(Number.parseFloat(s[4])/100*255):Number.parseInt(s[4],10)),"a"===s[1]&&(i=I.cutoff1(Number.parseFloat(s[5]))),{r:e,g:r,b:n,a:i})}static isHsl(t){let e,r,n,s,i=1;return!!(s=t.match(/^\s*hsl(a?)\(\s*(-?(?:\d+\.)?\d+)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*(-?(?:\d+\.)?\d+%?)\s*,\s*((?:[01]?\.)?\d+)\s*\)\s*$/))&&(e=Number.parseFloat(s[2])%360,e<0&&(e=360-e),r=I.cutoff1(s[3].endsWith("%")?Math.round(Number.parseFloat(s[3])/100):Number.parseFloat(s[3])),n=I.cutoff1(s[4].endsWith("%")?Math.round(Number.parseFloat(s[4])/100):Number.parseFloat(s[4])),"a"===s[1]&&(i=I.cutoff1(Number.parseFloat(s[5]))),{h:e,s:r,l:n,a:i})}static isCode(t){let e,r,n;let s;return(s=t.match(/^\s*#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])\s*$/))?(e=Number.parseInt(`${s[1]}${s[1]}`,16),r=Number.parseInt(`${s[2]}${s[2]}`,16),n=Number.parseInt(`${s[3]}${s[3]}`,16),{r:e,g:r,b:n,a:1}):!!(s=t.match(/^\s*#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})\s*$/))&&(e=Number.parseInt(s[1],16),r=Number.parseInt(s[2],16),n=Number.parseInt(s[3],16),{r:e,g:r,b:n,a:1})}static isName(t){if(I.colorNames.has(t)){const e=I.colorNames.get(t);return{r:e.r,g:e.g,b:e.b,a:1}}return!1}static fromRgba(t,e,r,n=1){const s=new I;return s._r=I.cutoff255(t),s._g=I.cutoff255(e),s._b=I.cutoff255(r),s._a=I.cutoff1(n),s}static hueToRgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}static hslToRgb(t,e,r,n=1){t%=360,e=I.cutoff1(e),t<0&&(t=360-t);const s=(r=I.cutoff1(r))<=.5?r*(e+1):r+e-r*e,i=2*r-s;return{r:I.hueToRgb(i,s,t+1/3),g:I.hueToRgb(i,s,t),b:I.hueToRgb(i,s,t-1/3),a:I.cutoff1(n)}}static fromHsla(t,e,r,n=1){t%=360,e=I.cutoff1(e),r=I.cutoff1(r),t<0&&(t=360-t);const s=new I,i=r<=.5?r*(e+1):r+e-r*e,o=2*r-i;return s._r=I.hueToRgb(o,i,t+1/3),s._g=I.hueToRgb(o,i,t),s._b=I.hueToRgb(o,i,t-1/3),s._a=I.cutoff1(n),s}static fromGray(t,e=1){const r=new I;return r._r=I.cutoff255(t),r._g=I.cutoff255(t),r._b=I.cutoff255(t),r._a=I.cutoff1(e),r}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}toString(){return 1!==this._a?this.toRgbaString():this.toCode()}toCode(){return"#"+`0${this._r.toString(16)}`.slice(-2)+`0${this._g.toString(16)}`.slice(-2)+`0${this._b.toString(16)}`.slice(-2)}toRgbString(){return`rgb(${this._r},${this._g},${this._b})`}toRgbaString(){return`rgb(${this._r},${this._g},${this._b},${this._a})`}toHsla(){const t=this._r/255,e=this._g/255,r=this._b/255,n=Math.max(e,r),s=Math.min(e,r);let i=0,o=0;const a=(n+s)/2,h=n-s;return n!==s&&(i=n===t?(e-r)/h:n===e?(r-t)/h+2:(t-e)/h+4,i=60*i+(i<0?360:0),o=h/(a<.5?n+s:2-n-s)),{h:i,s:o,l:a,a:this._a}}toHslString(){const t=this.toHsla();return`hsl(${t.h},${t.s}%,${t.l}%)`}toHslaString(){const t=this.toHsla();return`hsl(${t.h},${t.s}%,${t.l}%,${this._a})`}}I.colorNames=new Map([["red",{r:255,g:0,b:0}],["darkred",{r:139,g:0,b:0}],["maroon",{r:128,g:0,b:0}],["brown",{r:165,g:42,b:42}],["firebrick",{r:178,g:34,b:34}],["sienna",{r:160,g:82,b:45}],["saddlebrown",{r:139,g:69,b:19}],["peru",{r:205,g:133,b:63}],["indianred",{r:205,g:92,b:92}],["rosybrown",{r:188,g:143,b:143}],["lightcoral",{r:240,g:128,b:128}],["salmon",{r:250,g:128,b:114}],["darksalmon",{r:233,g:150,b:122}],["coral",{r:255,g:127,b:80}],["tomato",{r:255,g:99,b:71}],["sandybrown",{r:244,g:164,b:96}],["lightsalmon",{r:255,g:160,b:122}],["chocolate",{r:210,g:105,b:30}],["orangered",{r:255,g:69,b:0}],["orange",{r:255,g:165,b:0}],["darkorange",{r:255,g:140,b:0}],["tan",{r:210,g:180,b:140}],["peachpuff",{r:255,g:218,b:185}],["bisque",{r:255,g:228,b:196}],["moccasin",{r:255,g:228,b:181}],["navajowhite",{r:255,g:222,b:173}],["wheat",{r:245,g:222,b:179}],["burlywood",{r:222,g:184,b:135}],["darkgoldenrod",{r:184,g:134,b:11}],["goldenrod",{r:218,g:165,b:32}],["gold",{r:255,g:215,b:0}],["yellow",{r:255,g:255,b:0}],["lightgoldenrodyellow",{r:250,g:250,b:210}],["palegoldenrod",{r:238,g:232,b:170}],["khaki",{r:240,g:230,b:140}],["darkkhaki",{r:189,g:183,b:107}],["blanchedalmond",{r:255,g:235,b:205}],["lightyellow",{r:255,g:255,b:224}],["cornsilk",{r:255,g:248,b:220}],["antiquewhite",{r:250,g:235,b:215}],["papayawhip",{r:255,g:239,b:213}],["papayawhite",{r:255,g:239,b:213}],["lemonchiffon",{r:255,g:250,b:205}],["beige",{r:245,g:245,b:220}],["oldlace",{r:253,g:245,b:230}],["lightcyan",{r:224,g:255,b:255}],["aliceblue",{r:240,g:248,b:255}],["whitesmoke",{r:245,g:245,b:245}],["lavenderblush",{r:255,g:240,b:245}],["floralwhite",{r:255,g:250,b:240}],["mintcream",{r:245,g:255,b:250}],["ghostwhite",{r:248,g:248,b:255}],["honeydew",{r:240,g:255,b:240}],["seashell",{r:255,g:245,b:238}],["ivory",{r:255,g:255,b:240}],["azure",{r:240,g:255,b:255}],["snow",{r:255,g:250,b:250}],["white",{r:255,g:255,b:255}],["gainsboro",{r:220,g:220,b:220}],["lightgrey",{r:211,g:211,b:211}],["silver",{r:192,g:192,b:192}],["darkgray",{r:169,g:169,b:169}],["lightslategray",{r:119,g:136,b:153}],["slategray",{r:112,g:128,b:144}],["gray",{r:128,g:128,b:128}],["dimgray",{r:105,g:105,b:105}],["darkslategray",{r:47,g:79,b:79}],["black",{r:0,g:0,b:0}],["lawngreen",{r:124,g:252,b:0}],["greenyellow",{r:173,g:255,b:47}],["chartreuse",{r:127,g:255,b:0}],["lime",{r:0,g:255,b:0}],["limegreen",{r:50,g:205,b:50}],["yellowgreen",{r:154,g:205,b:50}],["olive",{r:128,g:128,b:0}],["olivedrab",{r:107,g:142,b:35}],["darkolivegreen",{r:85,g:107,b:47}],["forestgreen",{r:34,g:139,b:34}],["darkgreen",{r:0,g:100,b:0}],["green",{r:0,g:128,b:0}],["seagreen",{r:46,g:139,b:87}],["mediumseagreen",{r:60,g:179,b:113}],["darkseagreen",{r:143,g:188,b:143}],["lightgreen",{r:144,g:238,b:144}],["palegreen",{r:152,g:251,b:152}],["springgreen",{r:0,g:255,b:127}],["mediumspringgreen",{r:0,g:250,b:154}],["teal",{r:0,g:128,b:128}],["darkcyan",{r:0,g:139,b:139}],["lightseagreen",{r:51,g:153,b:153}],["mediumaquamarine",{r:102,g:205,b:170}],["cadetblue",{r:95,g:158,b:160}],["steelblue",{r:70,g:130,b:180}],["aquamarine",{r:127,g:255,b:212}],["powderblue",{r:176,g:224,b:230}],["paleturquoise",{r:175,g:238,b:238}],["lightblue",{r:173,g:216,b:230}],["lightsteelblue",{r:176,g:196,b:222}],["skyblue",{r:135,g:206,b:235}],["lightskyblue",{r:135,g:206,b:250}],["mediumturquoise",{r:72,g:209,b:204}],["turquoise",{r:64,g:224,b:208}],["darkturquoise",{r:0,g:206,b:209}],["aqua",{r:0,g:255,b:255}],["cyan",{r:0,g:255,b:255}],["deepskyblue",{r:0,g:191,b:255}],["dodgerblue",{r:30,g:144,b:255}],["cornflowerblue",{r:100,g:149,b:237}],["royalblue",{r:65,g:105,b:225}],["blue",{r:0,g:0,b:255}],["mediumblue",{r:0,g:0,b:205}],["navy",{r:0,g:0,b:128}],["darkblue",{r:0,g:0,b:139}],["midnightblue",{r:25,g:25,b:112}],["darkslateblue",{r:72,g:61,b:139}],["mediumslateblue",{r:123,g:104,b:238}],["slateblue",{r:106,g:90,b:205}],["darkorchid",{r:153,g:50,b:204}],["darkviolet",{r:148,g:0,b:211}],["blueviolet",{r:138,g:43,b:226}],["mediumorchid",{r:186,g:85,b:211}],["plum",{r:221,g:160,b:221}],["lavender",{r:230,g:230,b:250}],["thistle",{r:216,g:191,b:216}],["orchid",{r:218,g:112,b:214}],["magenta",{r:255,g:0,b:255}],["fuchsia",{r:255,g:0,b:255}],["violet",{r:238,g:130,b:238}],["indigo",{r:75,g:0,b:130}],["darkmagenta",{r:139,g:0,b:139}],["purple",{r:128,g:0,b:128}],["mediumpurple",{r:147,g:112,b:219}],["mediumvioletred",{r:199,g:21,b:133}],["deeppink",{r:255,g:20,b:147}],["hotpink",{r:255,g:105,b:180}],["crimson",{r:220,g:20,b:60}],["palevioletred",{r:219,g:112,b:147}],["lightpink",{r:255,g:182,b:193}],["pink",{r:255,g:192,b:203}],["mistyrose",{r:255,g:228,b:225}]]);const H=class{static decimalPlaces(t){return e=>Number(e.toFixed(t))}static precision(t){return e=>Number(e.toPrecision(t))}}.decimalPlaces(6);class W{constructor(t,e){this.x=t,this.y=e}toString(){return`${this.x},${this.y}`}}class F{constructor(t,e){this.x=t,this.y=e}static fromPoints(t,e){return new F(e.x-t.x,e.y-t.y)}isZero(){return 0===this.x&&0===this.y}getLength(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}getAngle(){let t=Math.acos(this.x/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return 0>this.y&&(t=2*Math.PI-t),t}static getAngle(t,e){const r=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),n=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));return Math.acos((t.x*e.x+t.y*e.y)/(r*n))}toString(){return`${this.x},${this.y}`}}class U{constructor(t,e,r,n){this.x=t,this.y=e,this.w=r,this.h=n}}class j{constructor(t,e,r,n,s,i){this.m11=1,this.m21=0,this.dx=0,this.m12=0,this.m22=1,this.dy=0,t&&("object"==typeof t?(this.m11=t.m11||this.m11,this.m12=t.m12||this.m12,this.m21=t.m21||this.m21,this.m22=t.m22||this.m22,this.dx=t.dx||this.dx,this.dy=t.dy||this.dy):(this.m11=t||this.m11,this.m12=e||this.m12,this.m21=r||this.m21,this.m22=n||this.m22,this.dx=s||this.dx,this.dy=i||this.dy))}toString(){return`${this.m11} ${this.m12} ${this.m21} ${this.m22} ${this.dx} ${this.dy}`}isIdentity(){return 1===this.m11&&0===this.m21&&0===this.dx&&0===this.m12&&1===this.m22&&0===this.dy}scale(t,e){return this.concat(new j(t,0,0,e,0,0))}translate(t,e){return this.concat(new j(1,0,0,1,t,e))}rotate(t){return this.concat(new j(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))}skewX(t){return this.concat(new j(1,0,Math.tan(t),1,0,0))}skewY(t){return this.concat(new j(1,Math.tan(t),0,1,0,0))}concat(t){return new j(this.m11*t.m11+this.m21*t.m12,this.m12*t.m11+this.m22*t.m12,this.m11*t.m21+this.m21*t.m22,this.m12*t.m21+this.m22*t.m22,this.m11*t.dx+this.m21*t.dy+this.dx,this.m12*t.dx+this.m22*t.dy+this.dy)}transfer(t,e){return"object"==typeof t?new W(H(this.m11*t.x+this.m21*t.y+this.dx),H(this.m12*t.x+this.m22*t.y+this.dy)):[H(this.m11*t+this.m21*e+this.dx),H(this.m12*t+this.m22*e+this.dy)]}getInverse(){return new j(this.m22,-this.m12,-this.m21,this.m11,this.m21*this.dy-this.dx*this.m22,this.dx*this.m12-this.m11*this.dy)}}class q{constructor(t,e,r,n,s){this.url=t,this.x=e,this.y=r,this.width=n,this.height=s}}class G{}class z extends G{constructor(t,e,r,n,s){super(),this.id=t,this.x0=e,this.y0=r,this.x1=n,this.y1=s,this.content=`<linearGradient id="${t}" gradientUnits="userSpaceOnUse" x1="${e}" y1="${r}" x2="${n}" y2="${s}" >\n`}addColorStop(t,e,r=1){this.content+=`<stop offset="${t}" stop-color="${e}" stop-opacity="${r}" />\n`}toDef(){return this.content+"</linearGradient>"}toString(){return`url(#${this.id})`}}class X extends G{constructor(t,e,r,n,s,i){super(),this.id=t,this.cx=e,this.cy=r,this.r=n,this.fx=s,this.fy=i,this.content=`<radialGradient id="${t}" gradientUnits="userSpaceOnUse" cx="${e}" cy="${r}" r="${n}" fx="${s}" fy="${i}" >\n`}addColorStop(t,e,r=1){this.content+=`<stop offset="${t}" stop-color="${e}" stop-opacity="${r}" />\n`}toDef(){return this.content+"</radialGradient>"}toString(){return`url(#${this.id})`}}class Q{constructor(t,e){this.id=t,this.imageData=e}toDef(){const t=`<image x="0" y="0" width="${this.imageData.width}" height="${this.imageData.height}" \n`+`xlink:href="${this.imageData.url}" />`;return`<pattern id="${this.id}"  patternUnits="userSpaceOnUse" patternContentUnits="userSpaceOnUse" `+`x="${this.imageData.x}" y="${this.imageData.y}" `+`width="${this.imageData.width}" height="${this.imageData.height}">${t}</pattern>`}toString(){return`url(#${this.id})`}}class Z{constructor(t){if(this.globalAlpha=1,this.globalCompositeOperation="source-over",this.shadowBlur=0,this.shadowColor="rgba(0,0,0,1)",this.shadowOffsetX=0,this.shadowOffsetY=0,this.filterIdUrl=null,this.font="normal 12px 'Times New Roman'",this.textAlign="start",this.textBaseline="auto",this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=4,this.strokeStyle="black",this.fillStyle="black",this.ctm=new j,this.currentPoint=null,this.currentPointOnCtm=null,this.subpath=[],this.lineDash=[],this.clipPath="",t){for(const e in this)this.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(this[e]=t[e]);this.subpath=Array.from(this.subpath)}}}class Y{constructor(){this.graphicsStack=[],this.assets=[],this.content="",this.contentSaved="",this.idCount=0,this.template=null,this._fontHeightRatio=1.25,this.graphicsStack.push(new Z)}get globalAlpha(){return this.graphicsStack[this.graphicsStack.length-1].globalAlpha}set globalAlpha(t){this.graphicsStack[this.graphicsStack.length-1].globalAlpha=t}get globalCompositeOperation(){return this.graphicsStack[this.graphicsStack.length-1].globalCompositeOperation}set globalCompositeOperation(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].globalCompositeOperation=t}get shadowBlur(){return this.graphicsStack[this.graphicsStack.length-1].shadowBlur}set shadowBlur(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowBlur=t}get shadowColor(){return this.graphicsStack[this.graphicsStack.length-1].shadowColor}set shadowColor(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowColor=t}get shadowOffsetX(){return this.graphicsStack[this.graphicsStack.length-1].shadowOffsetX}set shadowOffsetX(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowOffsetX=t}get shadowOffsetY(){return this.graphicsStack[this.graphicsStack.length-1].shadowOffsetY}set shadowOffsetY(t){this.filterIdUrl=null,this.graphicsStack[this.graphicsStack.length-1].shadowOffsetY=t}get filterIdUrl(){return this.graphicsStack[this.graphicsStack.length-1].filterIdUrl}set filterIdUrl(t){this.graphicsStack[this.graphicsStack.length-1].filterIdUrl=t}get font(){return this.graphicsStack[this.graphicsStack.length-1].font}set font(t){this.graphicsStack[this.graphicsStack.length-1].font=t}get textAlign(){return this.graphicsStack[this.graphicsStack.length-1].textAlign}set textAlign(t){this.graphicsStack[this.graphicsStack.length-1].textAlign=t}get textBaseline(){return this.graphicsStack[this.graphicsStack.length-1].textBaseline}set textBaseline(t){this.graphicsStack[this.graphicsStack.length-1].textBaseline=t}get lineCap(){return this.graphicsStack[this.graphicsStack.length-1].lineCap}set lineCap(t){this.graphicsStack[this.graphicsStack.length-1].lineCap=t}get lineDashOffset(){return this.graphicsStack[this.graphicsStack.length-1].lineDashOffset}set lineDashOffset(t){this.graphicsStack[this.graphicsStack.length-1].lineDashOffset=t}get lineJoin(){return this.graphicsStack[this.graphicsStack.length-1].lineJoin}set lineJoin(t){this.graphicsStack[this.graphicsStack.length-1].lineJoin=t}get lineWidth(){return this.graphicsStack[this.graphicsStack.length-1].lineWidth}set lineWidth(t){this.graphicsStack[this.graphicsStack.length-1].lineWidth=t}get miterLimit(){return this.graphicsStack[this.graphicsStack.length-1].miterLimit}set miterLimit(t){this.graphicsStack[this.graphicsStack.length-1].miterLimit=t}get strokeStyle(){return this.graphicsStack[this.graphicsStack.length-1].strokeStyle}set strokeStyle(t){this.graphicsStack[this.graphicsStack.length-1].strokeStyle=t.toString()}get fillStyle(){return this.graphicsStack[this.graphicsStack.length-1].fillStyle}set fillStyle(t){this.graphicsStack[this.graphicsStack.length-1].fillStyle=t.toString()}get ctm(){return this.graphicsStack[this.graphicsStack.length-1].ctm}set ctm(t){this.graphicsStack[this.graphicsStack.length-1].ctm=t}get currentPoint(){return this.graphicsStack[this.graphicsStack.length-1].currentPoint}set currentPoint(t){this.graphicsStack[this.graphicsStack.length-1].currentPoint=t}get currentPointOnCtm(){return this.graphicsStack[this.graphicsStack.length-1].currentPointOnCtm}set currentPointOnCtm(t){this.graphicsStack[this.graphicsStack.length-1].currentPointOnCtm=t}get subpath(){return this.graphicsStack[this.graphicsStack.length-1].subpath}set subpath(t){this.graphicsStack[this.graphicsStack.length-1].subpath=t}get lineDash(){return this.graphicsStack[this.graphicsStack.length-1].lineDash}set lineDash(t){this.graphicsStack[this.graphicsStack.length-1].lineDash=t}get clipPath(){return this.graphicsStack[this.graphicsStack.length-1].clipPath}set clipPath(t){this.graphicsStack[this.graphicsStack.length-1].clipPath=t}get subpathIsEmptyOrClosed(){return 0===this.subpath.length||"Z"===this.subpath[this.subpath.length-1]}static fromTemplate(t){const e=new Y;return e.template=t,e.idCount=(new Date).getTime(),e}render(t,e="mm"){const r='xmlns="http://www.w3.org/2000/svg"',n='xmlns:xlink="http://www.w3.org/1999/xlink"',s=`viewBox="${t.x} ${t.y} ${t.w} ${t.h}"`,i=`<defs>\n${this.assets.map(t=>"string"==typeof t?t:t.toDef()).join("\n")}</defs>`;if(this.template){let o=this.template.replace(/<\/svg>\s*$/,"");{const r=/(<svg[^>]*?)\s+?width\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=r.test(o)?o.replace(r,`$1 width="${t.w}${e}"$2`):o.replace(/<svg\s/,`<svg width="${t.w}${e}" `)}{const r=/(<svg[^>]*?)\s+?height\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=r.test(o)?o.replace(r,`$1 height="${t.h}${e}"$2`):o.replace(/<svg\s/,`<svg height="${t.h}${e}" `)}{const t=/(<svg[^>]*?)\s+?viewBox\s*?=\s*?["'](?:[^"'>]+?)["']([^>]*?>)/;o=t.test(o)?o.replace(t,`$1 ${s}$2`):o.replace(/<svg\s/,`<svg ${s} `)}return o.match(/<svg[^>]*?\s+?xmlns:xlink\s*?=/)||(o=o.replace(/<svg\s/,`<svg ${n} `)),o.match(/<svg[^>]*?\s+?xmlns\s*?=/)||(o=o.replace(/<svg\s/,`<svg ${r} `)),`${o}\n${i}\n${this.contentSaved}${this.content}</svg>`}return`<svg ${r} ${n} version="1.1" width="${t.w}${e}" height="${t.h}${e}" ${s}>\n${i}\n${this.contentSaved}${this.content}</svg>`}toDataUrl(t,e="mm",r=120){return"data:image/svg+xml;base64,"+n.encode(a.encodeToUtf8(this.render(t,e)),r)}save(){const t=new Z(this.graphicsStack[this.graphicsStack.length-1]);this.graphicsStack.push(t)}restore(t=!1){if(t)0<this.graphicsStack.length&&this.graphicsStack.pop();else if(0<this.graphicsStack.length){const t=this.subpath,e=this.currentPoint,r=this.currentPointOnCtm;this.graphicsStack.pop(),this.subpath=t,this.currentPoint=e,this.currentPointOnCtm=r}}scale(t,e){if(null!==this.currentPointOnCtm){const r=(new j).scale(t,e);this.currentPointOnCtm=r.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.scale(t,e)}translate(t,e){if(null!==this.currentPointOnCtm){const r=(new j).translate(t,e);this.currentPointOnCtm=r.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.translate(t,e)}rotate(t){if(null!==this.currentPointOnCtm){const e=(new j).rotate(t);this.currentPointOnCtm=e.transfer(this.currentPointOnCtm)}this.ctm=this.ctm.rotate(t)}transform(t,e,r,n,s,i){const o=new j(t,e,r,n,s,i);null!==this.currentPointOnCtm&&(this.currentPointOnCtm=o.transfer(this.currentPointOnCtm)),this.ctm=this.ctm.concat(o)}setTransform(t,e,r,n,s,i){this.currentPointOnCtm=null,this.ctm=new j(t,e,r,n,s,i)}beginPath(){this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null}closePath(){this.subpath.push("Z"),this.currentPoint=null,this.currentPointOnCtm=null}moveTo(t,e){const r=new W(t,e);this.subpath.push("M",this.ctm.transfer(r)),this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=r}lineTo(t,e,...r){let n=new W(t,e);if(this.subpath.push("L",this.ctm.transfer(n)),r&&r.length%4==0)for(let t=0;t<r.length&&!(r.length<=t+1);t+=2)n=new W(r[t],r[t+1]),this.subpath.push(this.ctm.transfer(n));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=n}quadraticCurveTo(t,e,r,n,...s){let i=new W(r,n);if(this.subpath.push("Q",this.ctm.transfer(new W(t,e)),this.ctm.transfer(i)),s&&s.length%4==0)for(let t=0;t<s.length&&!(s.length<=t+1);t+=2)i=new W(s[t],s[t+1]),this.subpath.push(this.ctm.transfer(i));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=i}bezierCurveTo(t,e,r,n,s,i,...o){let a=new W(s,i);if(this.subpath.push("C",this.ctm.transfer(new W(t,e)),this.ctm.transfer(new W(r,n)),this.ctm.transfer(a)),o&&o.length%6==0)for(let t=0;t<o.length;t+=2)a=new W(o[t],o[t+1]),this.subpath.push(this.ctm.transfer(a));this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=a}arc(t,e,r,n,s,i=!1){const o=Math.abs(s-n)>=2*Math.PI;Math.abs(n)>2*Math.PI&&(n%=2*Math.PI),n<0&&(n=2*Math.PI+n),Math.abs(s)>2*Math.PI&&(s%=2*Math.PI),s<0&&(s=2*Math.PI+s),o?s=n+2*Math.PI:(i&&([n,s]=[s,n]),s<n&&(s+=2*Math.PI));let a=s-n,h=0;const l=Math.PI/2,c=4*(Math.sqrt(2)-1)/3,p=(new j).translate(t,e).scale(r,r);let d=[];for(;l<a;h+=l,a-=l){const t=p.rotate(n+h);0===d.length&&d.push(t.transfer(new W(1,0))),d.push(t.transfer(new W(1,c))),d.push(t.transfer(new W(c,1))),d.push(t.transfer(new W(0,1)))}const u=4*Math.tan(a/4)/3;{const t=p.rotate(n+h);0===d.length&&d.push(t.transfer(new W(1,0))),d.push(t.transfer(new W(1,u))),d.push(t.transfer(new W(Math.cos(a)+u*Math.sin(a),Math.sin(a)-u*Math.cos(a)))),d.push(t.transfer(new W(Math.cos(a),Math.sin(a))))}i&&(d=d.reverse());const g=d[d.length-1];d=d.map(t=>this.ctm.transfer(t)),this.subpath.push(this.subpathIsEmptyOrClosed?"M":"L",d.shift(),"C"),this.subpath.push(...d),this.currentPoint=this.subpath[this.subpath.length-1],this.currentPointOnCtm=g}arcTo(t,e,r,n,s){const i=this.currentPointOnCtm;if(null===i)return;const o=new W(t,e),a=new W(r,n),h=F.fromPoints(i,o),l=F.fromPoints(o,a);if(0===h.x&&0===l.x||0===h.y&&0===l.y||h.isZero()||l.isZero())return this.subpath.push("L",this.ctm.transfer(o),this.ctm.transfer(a)),void(this.currentPointOnCtm=a);const c=F.getAngle(h,l);if(0===c||c===Math.PI)return this.subpath.push("L",this.ctm.transfer(o),this.ctm.transfer(a)),void(this.currentPointOnCtm=a);const p=Math.PI-c,d=s/Math.sin(p/2),u=Math.abs(Math.cos(p/2)*d);let g=F.fromPoints(o,i).getAngle(),f=l.getAngle();const m=new W(u*Math.cos(g)+o.x,u*Math.sin(g)+o.y),x=new W(u*Math.cos(f)+o.x,u*Math.sin(f)+o.y);Math.abs(f-g)>Math.PI&&(f>g?g+=2*Math.PI:f+=2*Math.PI);const b=new W(d*Math.cos((g+f)/2)+o.x,d*Math.sin((g+f)/2)+o.y),w=F.fromPoints(b,m),y=F.fromPoints(b,x);let v=w.getAngle(),k=y.getAngle();Math.abs(k-v)>Math.PI&&(k>v?v+=2*Math.PI:k+=2*Math.PI),this.arc(b.x,b.y,s,v,k,v>=k),this.lineTo(r,n)}circle(t,e,r,n=!0){this.subpathIsEmptyOrClosed||this.closePath(),this.arc(t,e,r,0,2*Math.PI,n),this.closePath()}rect(t,e,r,n,s=!0){s?this.subpath.push("M",this.ctm.transfer(new W(t,e)),"L",this.ctm.transfer(new W(t,e+n)),this.ctm.transfer(new W(t+r,e+n)),this.ctm.transfer(new W(t+r,e)),"Z"):this.subpath.push("M",this.ctm.transfer(new W(t,e)),"L",this.ctm.transfer(new W(t+r,e)),this.ctm.transfer(new W(t+r,e+n)),this.ctm.transfer(new W(t,e+n)),"Z"),this.currentPoint=null,this.currentPointOnCtm=null}roundRect(t,e,r,n,s,i=!0){i?(this.moveTo(t,e+n/2),this.arcTo(t,e+n,t+r/2,e+n,s),this.arcTo(t+r,e+n,t+r,e+n/2,s),this.arcTo(t+r,e,t+r/2,e,s),this.arcTo(t,e,t,e+n/2,s)):(this.moveTo(t+r/2,e),this.arcTo(t+r,e,t+r,e+n/2,s),this.arcTo(t+r,e+n,t+r/2,e+n,s),this.arcTo(t,e+n,t,e+n/2,s),this.arcTo(t,e,t+r/2,e,s)),this.closePath()}getInheritedStyle(t){let e;const r=t.toString();let n,s=this.globalAlpha;if(n=I.isRgb(r)){const e=n;s*=e.a,t=`rgb(${e.r},${e.g},${e.b})`}else if(n=I.isHsl(r)){const e=n;s*=e.a,t=`hsl(${e.h},${100*e.s}%,${100*e.l}%)`}else this.ctm.isIdentity()||((e=r.match(/^url\(\#lgrad-(.+)\)$/))?(this.assets.push(`<linearGradient id="lgrad-${++this.idCount}" xlink:href="#lgrad-${e[1]}" `+`gradientTransform="matrix(${this.ctm.toString()})" />`),t=`url(#lgrad-${this.idCount})`):(e=r.match(/^url\(\#rgrad-(.+)\)$/))?(this.assets.push(`<radialGradient id="rgrad-${++this.idCount}" xlink:href="#rgrad-${e[1]}" `+`gradientTransform="matrix(${this.ctm.toString()})" />`),t=`url(#rgrad-${this.idCount})`):(e=r.match(/^url\(\#pat-(.+)\)$/))&&(this.assets.push(`<pattern id="pat-${++this.idCount}" xlink:href="#pat-${e[1]}" `+`patternTransform="matrix(${this.ctm.toString()})" />`),t=`url(#pat-${this.idCount})`));return{style:t,alpha:s}}getStrokeAttrs(){const t=this.getInheritedStyle(this.strokeStyle);return`stroke="${t.style}" stroke-width="${this.lineWidth}" `+`stroke-linecap="${this.lineCap}" stroke-linejoin="${this.lineJoin}" stroke-miterlimit="${this.miterLimit}" `+(this.getLineDash().length>0?`stroke-dasharray="${this.getLineDash().join(",")}" stroke-dashoffset="${this.lineDashOffset}" `:"")+`stroke-opacity="${t.alpha}" `}getFillAttrs(t){const e=this.getInheritedStyle(this.fillStyle);return`fill="${e.style}" fill-rule="${t}" fill-opacity="${e.alpha}" `}getFilterAttrs(){if(""===this.filterIdUrl);else if(null===this.filterIdUrl){if(0<this.shadowBlur||this.globalCompositeOperation&&"source-over"!==this.globalCompositeOperation){let t="",e="";if(0<this.shadowBlur)if(t+=`<feGaussianBlur stdDeviation="${this.shadowBlur}" result="blur" />\n`+`<feOffset in="blur" dx="${this.shadowOffsetX}" dy="${this.shadowOffsetY}" result="offsetBlur" />\n`,null===this.shadowColor)e+='<feMergeNode in="offsetBlur" />';else{const r=new I(this.shadowColor);t+='<feColorMatrix in="offsetBlur" type="matrix" values=" 1 1 1 0 0  1 1 1 0 0  1 1 1 0 0  0 0 0 1 0 " result="color1" />\n<feColorMatrix in="color1" type="matrix" values="'+` ${r.r/255} 0 0 0 0 `+` 0 ${r.g/255} 0 0 0 `+` 0 0 ${r.b/255} 0 0 `+` 0 0 0 ${r.a} 0 " result="color2" />\n`,e+='<feMergeNode in="color2" />\n'}if(this.globalCompositeOperation&&"source-over"!==this.globalCompositeOperation){let r=this.globalCompositeOperation,n=!1;switch(r){case"destination-in":n=!0;case"source-in":r="in";break;case"destination-out":n=!0;case"source-out":r="out";break;case"destination-atop":n=!0;case"source-atop":r="atop";break;case"xor":r="xor";break;case"destination-over":n=!0;default:r="over"}t+=`<feComposite in${n?"2":""}="SourceGraphic" `+`in${n?"":"2"}="BackgroundImage" operator="${r}" result="comp"/>\n`,e+='<feMergeNode in="comp" />\n'}else e+='<feMergeNode in="SourceGraphic" />\n';return this.assets.push(`<filter id="filter-${++this.idCount}" filterUnits="userSpaceOnUse">\n`+`${t}<feMerge>\n${e}</feMerge>\n</filter>`),this.filterIdUrl=`url(#filter-${this.idCount})`,`filter="${this.filterIdUrl}" `}this.filterIdUrl=""}else if(""!==this.filterIdUrl)return`filter="${this.filterIdUrl}" `;return""}getMultilineTextHeight(t){if(t.multiline&&"string"==typeof this.font&&(void 0===t.lineHeight||null===t.lineHeight)){const e=new RegExp("^\\s*(?:normal|italic|oblique)?s*(?:normal|small-caps)?\\s*(?:normal|bold|lighter|bolder|100|200|300|400|500|600|700|800|900)??\\s*(?:([0-9.]+)(px|pt|mm|cm|in|pc)?)(?:\\/(?:([0-9.]+|normal)(px|pt|mm|cm|in|em|%)?))?").exec(this.font);if(e){let r=Number(e[1]);switch(e[2]){case"pt":r=r/72*96;break;case"pc":r=r/72*96/12;break;case"mm":r=r/25.4*96;break;case"cm":r=r/25.4*96*100;break;case"in":r*=96}let n=r;if(e[3])switch(n=Number(e[3])||1.3,e[4]){case"px":break;case"pt":n=n/72*96;break;case"pc":n=n/72*96/12;break;case"mm":n=n/25.4*96;break;case"cm":n=n/25.4*96*100;break;case"in":n*=96;break;case"%":n=n/100*r;break;default:n*=r}t.lineHeight=n}}return t}getTextAttributes(t){let e,r;switch(this.textAlign){case"left":e="start";break;case"right":e="end";break;case"center":e="middle";break;default:e=this.textAlign}switch(this.textBaseline){case"top":r="text-before-edge";break;case"bottom":r="text-after-edge";break;default:r=this.textBaseline}let n=` style="font:${s.xml(this.font)};" text-anchor="${e}" dominant-baseline="${r}"`;if(null==t)return n;if("number"==typeof t)return n+=` textLength="${t}"`,n;const i=this.getMultilineTextHeight(t);return void 0!==i.textLength&&null!==i.textLength&&(n+=` textLength="${i.textLength}"`),void 0!==i.lengthAdjust&&null!==i.lengthAdjust&&(n+=` lengthAdjust="${i.lengthAdjust}"`),void 0!==i.rotate&&null!==i.rotate&&(n+=` rotate="${i.rotate}"`),void 0!==i.writingMode&&null!==i.writingMode&&(n+=` writing-mode="${i.writingMode}"`),void 0!==i.glyphOrientationVertical&&null!==i.glyphOrientationVertical&&(n+=` glyph-orientation-vertical="${i.glyphOrientationVertical}"`),void 0!==i.glyphOrientationHorizontal&&null!==i.glyphOrientationHorizontal&&(n+=` glyph-orientation-horizontal="${i.glyphOrientationHorizontal}"`),void 0!==i.direction&&null!==i.direction&&(n+=` direction="${i.direction}"`),void 0!==i.unicodeBidi&&null!==i.unicodeBidi&&(n+=` unicode-bidi="${i.unicodeBidi}"`),void 0!==i.textDecoration&&null!==i.textDecoration&&(n+=` text-decoration="${i.textDecoration}"`),void 0!==i.kerning&&null!==i.kerning&&(n+=` kerning="${i.kerning}"`),void 0!==i.letterSpacing&&null!==i.letterSpacing&&(n+=` letter-spacing="${i.letterSpacing}"`),void 0!==i.wordSpacing&&null!==i.wordSpacing&&(n+=` word-spacing="${i.wordSpacing}"`),n}getTextPath(t){if(null!=t&&"object"==typeof t&&t.textPath){const e=this.ctm.getInverse(),r=[];for(const t of this.subpath)t instanceof W?r.push(e.transfer(t)):r.push(t);const n=`path-${++this.idCount}`;this.assets.push(`<path id="${n}" d="${h.loose(r.join(" "))}" />\n`),this.subpath=[],this.currentPoint=null,this.currentPointOnCtm=null;const s={id:`#${n}`};return void 0!==t.textPathOffset&&null!==t.textPathOffset&&(s.offset=t.textPathOffset),s}return null}convertToMultiline(t,e,r,n){if(null!=n&&"object"==typeof n&&n.multiline&&!n.textPath){const i=n.lineHeight||12,o=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),a=s.xml(o).split("\n");switch(n.writingMode){case"tb":case"tb-rl":return`<tspan>${a.join(`</tspan><tspan dx="${-i}" y="${r}">`)}</tspan>`;default:return`<tspan>${a.join(`</tspan><tspan x="${e}" dy="${i}">`)}</tspan>`}}return`<tspan x="${e}" y="${r}">${s.xml(t)}</tspan>`}stroke(){this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<path d="${h.loose(this.subpath.join(" "))}" />\n</g>\n`}strokeRect(t,e,r,n){this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}strokeText(t,e,r,n){const s=this.getTextPath(n);this.content+=`<g ${this.getStrokeAttrs()}fill="none"${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==s?`<textPath xlink:href="${s.id}"${void 0!==s.offset?` startOffset="${s.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==s?"</textPath>":""}</text></g>\n`}fill(t="nonzero"){this.content+=`<g stroke="none" ${this.getFillAttrs(t)}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<path d="${h.loose(this.subpath.join(" "))}" />\n</g>\n`}fillRect(t,e,r,n){this.content+=`<g stroke="none" ${this.getFillAttrs("nonzero")}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}fillText(t,e,r,n){const s=this.getTextPath(n);this.content+=`<g stroke="none" ${this.getFillAttrs("nonzero")}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==s?`<textPath xlink:href="${s.id}"${void 0!==s.offset?` startOffset="${s.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==s?"</textPath>":""}</text></g>\n`}fillStroke(t="nonzero"){this.content+=`<g ${this.getFillAttrs(t)}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<path d="${h.loose(this.subpath.join(" "))}" />\n</g>\n`}fillStrokeRect(t,e,r,n){this.content+=`<g ${this.getFillAttrs("nonzero")}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+`>\n<rect x="${t}" y="${e}" width="${r}" height="${n}" `+`transform="matrix(${this.ctm.toString()})" `+"/></g>\n"}fillStrokeText(t,e,r,n){const s=this.getTextPath(n);this.content+=`<g ${this.getFillAttrs("nonzero")}${this.getStrokeAttrs()}${this.getFilterAttrs()}`+(this.clipPath.length>0?` clip-path="${this.clipPath}" `:"")+">\n<text"+`${this.getTextAttributes(n)} transform="matrix(${this.ctm.toString()})" `+`\n>${null!==s?`<textPath xlink:href="${s.id}"${void 0!==s.offset?` startOffset="${s.offset}"`:""}\n>`:""}`+this.convertToMultiline(t,e,r,n)+`${null!==s?"</textPath>":""}</text></g>\n`}getLineDash(){return this.lineDash}setLineDash(t){this.lineDash=t}clip(t="nonzero"){const e=`<clipPath id="clip-${++this.idCount}" fill-rule="${t}" >`+`<path d="${h.loose(this.subpath.join(" "))}" /></clipPath>`;this.assets.push(e),this.clipPath=`url(#clip-${this.idCount})`}registerImage(t,e){const r=t=this.convertImageToSvgImageData(t),n=null==e?`img-${++this.idCount}_w${r.width}_h${r.height}`:e,s=`<image id="${n}" \n`+'x="0" y="0" width="1" height="1" preserveAspectRatio="none" '+`xlink:href="${r.url}" />`;return this.assets.push(s),`#${n}`}registerCustomFilter(t,e){this.assets.push(e),this.filterIdUrl=`url(#${t})`}registerCustomAsset(t){this.assets.push(t)}appendCustomContent(t){this.content+=`<g transform="matrix(${this.ctm.toString()})">${t}</g>\n`}createLinearGradient(t,e,r,n){const s=new z(`lgrad-${++this.idCount}`,t,e,r,n);return this.assets.push(s),s}createRadialGradient(t,e,r,n,s,i){const o=new X(`rgrad-${++this.idCount}`,t,e,r,n,s);return this.assets.push(o),o}createPattern(t,e){const r=new Q(`pat-${++this.idCount}`,this.convertImageToSvgImageData(t));return this.assets.push(r),r}beginPattern(){this.contentSaved=this.content,this.content="";const t=new Z;this.graphicsStack.push(t)}endPattern(t,e,r,n){const s=++this.idCount,i=`<pattern id="pat-${s}" patternUnits="userSpaceOnUse" patternContentUnits="userSpaceOnUse" `+`x="${t}" y="${e}" width="${r}" height="${n}">\n${this.content}</pattern>`;return this.assets.push(i),this.content=this.contentSaved,this.contentSaved="",this.restore(),`url(#pat-${s})`}convertImageToSvgImageData(t){let e;if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const n=r.getContext("2d");if(null===n)throw new Error("SvgCanvas#convertImageToSvgImageData: Can't get context from Canvas.");n.drawImage(t,0,0),e=new q(r.toDataURL(),0,0,r.width,r.height)}else e="undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?new q(t.toDataURL(),0,0,t.width,t.height):t;return e}drawImage(t,e,r,n,s){let i;if(i="string"==typeof t?new q(t,0,0,n,s):this.convertImageToSvgImageData(t),i.url.startsWith("#")){const t=this.ctm.translate(e,r).scale(n,s);this.content+='<g><use x="0" y="0" '+`transform="matrix(${t.toString()})" `+`\nxlink:href="${i.url}" /></g>\n`}else this.content+=`<g><image x="${e}" y="${r}" `+`width="${n}" height="${s}" `+'preserveAspectRatio="none" '+`transform="matrix(${this.ctm.toString()})" `+`\nxlink:href="${i.url}" /></g>\n`}beginGroup(){this.content+="<g>"}endGroup(){this.content+="</g>"}get fontHeightRatio(){return this._fontHeightRatio}set fontHeightRatio(t){this._fontHeightRatio=t}measureText(t){const e=this.font.match(/(\d+(?:.\d+)?)(px|pt|in|mm|em|rem|%)/);let r=1,n=12;if(e){switch(e[2]){case"pt":r=96/72;break;case"in":r=96;break;case"mm":r=1/25.4*96;break;case"em":case"rem":r=12;break;case"%":r=.01}n=Number.parseFloat(e[1])}return{width:Math.round(r*n*Array.from(t.replace(/[\u200B-\u200D\uFEFF\u200E\u200F]/g,"").normalize("NFKC")).length/this.fontHeightRatio)}}clearRect(t,e,r,n){this.save(),this.fillStyle="white",this.fillRect(t,e,r,n),this.restore()}}const V=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);class J{constructor(t={}){this.props=t,this.savedContexts=new Map}defer(){return Promise.resolve()}setContext(t,e,r){if(this.savedContexts.has(e))throw new Error(`RedAgateComponent#setContext: the key '${e}' has already set by myself.`);t.has(e)&&t.set(e,t.get(e)),t.set(e,r)}unsetContext(t,e){t.delete(e),this.savedContexts.has(e)&&(t.set(e,this.savedContexts.get(e)),this.savedContexts.delete(e))}getContext(t,e){return t.get(e)}}class K extends J{transform(){return null!==this.props.children&&void 0!==this.props.children?this.props.children:[]}}class tt extends J{constructor(t,e){super(e),this.fn=t}transform(){return this.fn(this.props)}}function et(t,e){if(e){1===e.length?t.children=e[0]:e.length>1&&(t.children=e);let r={},n=!1;for(const t of e)if(null==t);else if(Array.isArray(t));else if("object"!=typeof t);else if(t.props){const e=t.props;"object"==typeof e.refs&&(n=!0,r=Object.assign(r,e.refs)),"string"==typeof e.ref&&(n=!0,r[e.ref]=t)}n&&(t.refs=r)}return t}function rt(t,e,...r){if(e=et(e||{},r),"function"==typeof t)return{type:t,props:e,nodeId:null,children:r,component:t.prototype&&t.prototype.earlyConstruct&&t.prototype.transform?new t(e):null};if("string"==typeof t)return{type:t,props:e,nodeId:null,children:r,component:null};throw new Error("createElement receives invalid parameter type.")}function nt(t){let e=Object.assign({},t.props||{});delete e.__nodeId;const r=Array.isArray(t.children)?t.children.slice(0):t.children;return e=et(e,r),{type:t.type,props:e,nodeId:null,children:r,component:null}}function st(t){return{type:t.constructor,props:t.props,nodeId:null,children:Array.isArray(t.props.children)?t.props.children:[],component:t}}function it(t,e){if(e||(e={counter:0}),null==t)return t;if(Array.isArray(t))return t.map(t=>it(t,e)).filter(t=>null!=t);if("object"!=typeof t)return t;const r=function(t){return{type:t.type,props:t.props,nodeId:t.nodeId,children:Array.isArray(t.children)?t.children.slice(0):t.children,component:t.component}}(function(t,e){return null!==t.nodeId&&void 0!==t.nodeId||(t.nodeId=e.counter++,t.props.__nodeId=t.nodeId),null!==t.component&&void 0!==t.component||"function"==typeof t.type&&(t.component=t.type.prototype&&t.type.prototype.transform?new t.type(t.props):new tt(t.type,t.props)),t}(t,e));if(r.component&&r.component.transform){const t=r.component.transform();null==t?r.children=[]:Array.isArray(t)?r.children=t:r.children=[t]}else r.children||(r.children=[]);return r.children=r.children.map(t=>it(t,e)).filter(t=>null!=t),r}function ot(t){return"string"==typeof t?t:Object.getOwnPropertyNames(t).filter(e=>null!==t[e]&&void 0!==t[e]).map(e=>{return`${s.html((r=e,r.replace(/([a-z0-9])([A-Z])/g,(t,e,r)=>`${e}-${r.toLowerCase()}`)))}:${s.html(t[e])};`;var r}).join("")}function at(t,e,r){let n="",i="";const o=t=>{if(Array.isArray(t))return t.map(t=>s.html(t.toString())).filter(t=>null!=t).join(" ");if(null==t)return"";switch(typeof t){case"function":case"object":case"symbol":return"";default:return String(t)}};for(const a of Object.getOwnPropertyNames(t))switch(a){case"styleClass":case"className":case"class":n+=` class="${o(t[a])}"`;break;case"style":n+=` style="${ot(t.style)}"`;break;case"children":case"__nodeId":break;case"dangerouslySetInnerHTML":i+=t[a].__html;break;case"setInnerText":i+=s.html(t[a].__text).replace(/\r?\n/g,"<br/>").replace(/\r/g,"<br/>");break;default:e&&e.has(a)||r&&!r.has(a)&&"id"!==a||null===t[a]||void 0===t[a]||!1===t[a]||(!0===t[a]?n+=` ${s.html(a)}`:n+=` ${s.html(a)}="${o(t[a])}"`)}return{attrs:n,children:i}}function ht(t,e){if(null==t)return"";if(Array.isArray(t))return t.map(t=>ht(t,e)).join("");if("object"!=typeof t)return s.html(t.toString());if(!t.props)return s.html(t.toString());const r=t;let{attrs:n,children:i}=at(r.props);r.component&&r.component.beforeRender&&r.component.beforeRender(e),null!==r.children&&void 0!==r.children&&(i+=r.children.map(t=>ht(t,e)).join(""));let o="";if(r.component&&r.component.render)o=r.component.render(e,i);else if("string"==typeof r.type){const t=s.html(r.type);o=""!==i&&null!=i||!V.has(t)?`<${t}${n}>${i}</${t}>`:`<${t}${n}/>`}else o=i;return r.component&&r.component.afterRender&&r.component.afterRender(e),o}function lt(t){const e=new Map,r=it(t,{counter:0});return Promise.all(function t(e,r){if(null==r)return e;if(Array.isArray(r))return r.forEach(r=>t(e,r)),e;if("object"!=typeof r)return e;if(r.component&&r.component.defer){const t=r.component.defer();t&&e.push(t)}return r.children&&t(e,r.children),e}([],r)).then(t=>ht(r,e))}function ct(t){const e=new Map;return ht(it(t,{counter:0}),e)}function pt(t,e,r){lt(t).then(t=>{e.innerHTML=t,r&&r(t,null)}).catch(t=>{r&&r(null,t)})}function dt(t,e){lt(t).then(t=>{e(null,t)}).catch(t=>{e(t,null)})}function ut(t,e,r,n){lt(t).then(t=>{n&&n.forEach(t=>r.set(t[0],"string"==typeof t[1]?t[1]:void 0)),r.send(t)}).catch(t=>{console.error(JSON.stringify(t)),r.status(500).send("")})}class gt extends K{constructor(t){super(t)}}class ft{constructor(t){this.data=t}orderBy(t){let e;return e=Array.isArray(t)?(e,r)=>{for(const n of t)if("string"==typeof n){if(e[n]>r[n])return 1;if(e[n]<r[n])return-1}else{const t="desc"===n[1]?-1:1;if(e[n[0]]>r[n[0]])return 1*t;if(e[n[0]]<r[n[0]])return-1*t}return 0}:t,new ft(this.data.slice(0).sort(e))}groupBy(t){let e;e=Array.isArray(t)?(e,r)=>{for(const n of t)if(e[n]!==r[n])return!1;return!0}:t;const r=[];let n=0,s=1;for(;s<this.data.length;s++)e(this.data[n],this.data[s],s,this.data)||(r.push(this.data.slice(n,s)),n=s);return r.push(this.data.slice(n,s)),new ft(r)}groupEvery(t){if("number"==typeof t)return this.groupBy((e,r,n,s)=>n%t!=0);{const e=Object.assign({first:t.intermediate,last:t.intermediate},t),r=this.groupBy((t,r,n,s)=>e.single>=s.length?n%e.single!=0:n<=e.first?n%e.first!=0:(n-e.first)%e.intermediate!=0);return 1===r.data.length?e.single<r.data[0].length&&r.data.push([]):e.first<r.data[0].length&&r.data.unshift([]),r.data.length>1&&r.data[r.data.length-1].length>e.last&&r.data.push([]),r}}where(t){return new ft(this.data.filter(t))}select(t){return t?this.data.map(t):this.data}}function mt(t){return new ft(t)}const xt="CONTEXT_SVG_CANVAS",bt={x:0,y:0,margin:0};class wt extends K{constructor(t){super(t),this.isAmbient=!1,this.isPathFragment=!1,this.isGroup=!0}initializeCanvas(t){if((this.props.fill||this.isAmbient)&&void 0!==this.props.fillColor&&null!==this.props.fillColor&&(t.fillStyle=this.props.fillColor.toString()),(this.props.stroke||this.isAmbient)&&(void 0!==this.props.strokeColor&&null!==this.props.strokeColor&&(t.strokeStyle=this.props.strokeColor.toString()),void 0!==this.props.lineCap&&null!==this.props.lineCap&&(t.lineCap=this.props.lineCap),void 0!==this.props.lineJoin&&null!==this.props.lineJoin&&(t.lineJoin=this.props.lineJoin),void 0!==this.props.lineWidth&&null!==this.props.lineWidth&&(t.lineWidth=this.props.lineWidth),void 0!==this.props.miterLimit&&null!==this.props.miterLimit&&(t.miterLimit=this.props.miterLimit),void 0!==this.props.lineDash&&null!==this.props.lineDash&&t.setLineDash(this.props.lineDash),void 0!==this.props.lineDashOffset&&null!==this.props.lineDashOffset&&(t.lineDashOffset=this.props.lineDashOffset)),this.isAmbient){const e=this.props;(e.margin||e.x||e.y)&&t.translate((e.margin||0)+(e.x||0),(e.margin||0)+(e.y||0)),void 0!==e.scaleX&&null!==e.scaleX&&t.scale(e.scaleX,1),void 0!==e.scaleY&&null!==e.scaleY&&t.scale(1,e.scaleY),void 0!==e.rotationDeg&&null!==e.rotationDeg&&t.rotate(e.rotationDeg*Math.PI/180),void 0!==e.tm&&null!==e.tm&&e.tm.length>=6&&t.transform(e.tm[0],e.tm[1],e.tm[2],e.tm[3],e.tm[4],e.tm[5])}}setGraphicState(t){this.isGroup&&t.beginGroup(),t.save(),t.translate(this.props.margin+this.props.x,this.props.margin+this.props.y),this.initializeCanvas(t)}restoreGraphicState(t){t.restore(),this.isGroup&&t.endGroup()}fillStrokePaths(t){this.props.fill&&this.props.stroke?t.fillStroke():this.props.fill?t.fill():this.props.stroke&&t.stroke(),(this.props.fill||this.props.stroke)&&t.beginPath()}beforeRender(t){this.isPathFragment=this.getContext(t,"CONTEXT_SVG_PATH")||!1;const e=this.getContext(t,xt);e&&(this.isPathFragment||this.setGraphicState(e))}afterRender(t){const e=this.getContext(t,xt);e&&(this.isPathFragment||(this.fillStrokePaths(e),this.restoreGraphicState(e)))}}function yt(t,e,r,n){return t.asImgTag?`<img style="width:${r}${t.unit};height:${n}${t.unit};" src="${e.toDataUrl(new U(0,0,r,n),t.unit,120)}"${at(t,void 0,new Set([])).attrs}></img>`:t.asElementStyle?`${t.style?ot(t.style):""}${ot({"background-image":`url("${e.toDataUrl(new U(0,0,r,n),t.unit,0)}")`})}`:t.asDataUrl?e.toDataUrl(new U(0,0,r,n),t.unit,0):e.render(new U(0,0,r,n),t.unit)}function vt(t){const e=Object.assign({},t.props);e.asImgTag=!0,e.asElementStyle=!1,e.asDataUrl=!1;const r=t.props;t.props=e;const n=ct(st(t));return t.props=r,n}function kt(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!0,e.asDataUrl=!1;const r=t.props;t.props=e;const n=ct(st(t));return t.props=r,n}function St(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!1,e.asDataUrl=!0;const r=t.props;t.props=e;const n=ct(st(t));return t.props=r,n}function $t(t){const e=Object.assign({},t.props);e.asImgTag=!1,e.asElementStyle=!1,e.asDataUrl=!1;const r=t.props;t.props=e;const n=ct(st(t));return t.props=r,n}class Mt extends J{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.times;n++)e.push(t(n,r));return e}}class Tt extends J{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.items.length;n++)e.push(t(this.props.items[n],n,this.props.items,r));return e}}class At extends J{constructor(t){super(t)}transform(){return this.props.condition?this.props.children:[]}}class Ct extends J{constructor(t){super(t),(Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children)()}earlyConstruct(){}transform(){return[]}render(t,e){return""}}class Pt extends gt{constructor(t){super(t)}}const Ot=Pt;class Nt extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class Dt extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class Lt extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class Bt extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class Et extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class _t extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"><html${r.attrs}>${r.children}${e}</html>`}}class Rt extends K{constructor(t){super(t)}render(t,e){const r=at(this.props);return`<!DOCTYPE html><html${r.attrs}>${r.children}${e}</html>`}}class It extends K{constructor(t){super(t)}render(t,e){return`<?xml version="${"string"==typeof this.props.version?this.props.version:"1.0"}" encoding="${"string"==typeof this.props.encoding?this.props.encoding:"UTF-8"}"?>${e}`}}class Ht extends J{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.items.length;n++)e.push(rt("div",{style:{position:"absolute",left:this.props.paperWidth/this.props.cols*(n%this.props.cols),top:this.props.paperHeight/this.props.rows*Math.floor(n/this.props.cols)}},t(this.props.items[n],n,this.props.items,r)));return e}}class Wt extends K{constructor(t){super(t),this.template=null,t.template&&(this.template=t.template)}defer(){if(null!==this.template)return Promise.resolve();if(void 0===this.props.templateUrl||null===this.props.templateUrl||""===this.props.templateUrl)return Promise.resolve();{const t=this.props.templateUrl;return new Promise((e,r)=>{try{y.fetchLocation(t).then(t=>{this.template=a.decodeUtf8(t.data),e()}).catch(t=>{m.log("Svg#defer:catch:"+t),r(t)})}catch(t){m.log("Svg#defer:catch:"+t),r(t)}})}}toImgTag(){return vt(this)}toElementStyle(){return kt(this)}toDataUrl(){return St(this)}toSvg(){return $t(this)}toRendered(){return ct(this)}beforeRender(t){this.setContext(t,xt,null===this.template?new Y:Y.fromTemplate(this.template))}render(t,e){const r=this.getContext(t,xt);return yt(this.props,r,this.props.width,this.props.height)}afterRender(t){this.unsetContext(t,xt)}}const Ft=Object.assign({},bt,{});class Ut extends wt{constructor(t){super(Object.assign({},Ft,t)),this.isAmbient=!0,this.isGroup=!1}render(t,e){return""}}const jt=Object.assign({},bt,{r:1,startDeg:0,endDeg:180,anticlockwise:!0});class qt extends wt{constructor(t){super(Object.assign({},jt,t))}render(t,e){return this.getContext(t,xt).arc(this.props.r,this.props.r,this.props.r,this.props.startDeg/180*Math.PI,this.props.endDeg/180*Math.PI,this.props.anticlockwise),""}}const Gt=Object.assign({},bt,{});class zt extends wt{constructor(t){super(Object.assign({},Gt,t))}render(t,e){const r=this.getContext(t,xt);return(Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children)(r),""}}const Xt=Object.assign({},bt,{r:1,anticlockwise:!0});class Qt extends wt{constructor(t){super(Object.assign({},Xt,t))}render(t,e){const r=this.getContext(t,xt);return r.arc(this.props.r,this.props.r,this.props.r,0,2*Math.PI,this.props.anticlockwise),r.closePath(),""}}const Zt=Object.assign({},bt,{move:!0,points:[]});class Yt extends wt{constructor(t){super(Object.assign({},Zt,t))}render(t,e){const r=this.getContext(t,xt);this.props.move&&r.moveTo(this.props.points[0],this.props.points[1]);for(let t=this.props.move?2:0;t<this.props.points.length;t+=6)r.bezierCurveTo(this.props.points[t+0],this.props.points[t+1],this.props.points[t+2],this.props.points[t+3],this.props.points[t+4],this.props.points[t+5]);return""}}const Vt=Object.assign({},bt,{lineWidth:.1,fill:!1,stroke:!0,strokeColor:"#ccc",startX:0,endX:210,startY:0,endY:296,gridSize:5,bleed:13});class Jt extends wt{constructor(t){super(Object.assign({},Vt,t))}render(t,e){const r=this.props,n=this.getContext(t,xt),s=Math.ceil(r.bleed/r.gridSize)*r.gridSize,i=Math.ceil((r.endX-r.startX+r.bleed)/r.gridSize)*r.gridSize,o=Math.ceil((r.endY-r.startY+r.bleed)/r.gridSize)*r.gridSize;for(let t=r.startX-s;t<=i;t+=r.gridSize)n.moveTo(r.startX+t,r.startY-s),n.lineTo(r.startX+t,r.startY+o);for(let t=r.startY-s;t<=o;t+=r.gridSize)n.moveTo(r.startX-s,r.startY+t),n.lineTo(r.startX+i,r.startY+t);return n.rect(r.startX||0,r.startY||0,r.endX-r.startX,r.endY-r.startY),""}}class Kt extends wt{constructor(t){super(Object.assign({},{},t)),this.isAmbient=!0}render(t,e){return""}}const te=Object.assign({},bt,{move:!0,points:[]});class ee extends wt{constructor(t){super(Object.assign({},te,t))}render(t,e){const r=this.getContext(t,xt);this.props.move&&r.moveTo(this.props.points[0],this.props.points[1]);for(let t=this.props.move?2:0;t<this.props.points.length;t+=2)r.lineTo(this.props.points[t],this.props.points[t+1]);return""}}const re=Object.assign({},bt,{close:!1,clip:!1,width:10,height:10,paths:[]});class ne extends wt{constructor(t){super(Object.assign({},re,t))}beforeRender(t){super.beforeRender(t),this.setContext(t,"CONTEXT_SVG_PATH",!0)}render(t,e){return""}afterRender(t){this.unsetContext(t,"CONTEXT_SVG_PATH");const e=this.getContext(t,xt);e&&(this.props.close&&e.closePath(),this.props.clip?e.clip():(this.fillStrokePaths(e),this.restoreGraphicState(e)))}}const se=Object.assign({},bt,{r:1,startDeg:0,endDeg:180,anticlockwise:!0});class ie extends wt{constructor(t){super(Object.assign({},se,t))}render(t,e){const r=this.getContext(t,xt);return r.moveTo(this.props.r,this.props.r),r.arc(this.props.r,this.props.r,this.props.r,this.props.startDeg/180*Math.PI,this.props.endDeg/180*Math.PI,this.props.anticlockwise),r.closePath(),""}}const oe=Object.assign({},bt,{points:[]});class ae extends wt{constructor(t){super(Object.assign({},oe,t))}render(t,e){const r=this.getContext(t,xt);r.moveTo(this.props.points[0],this.props.points[1]);for(let t=2;t<this.props.points.length;t+=2)r.lineTo(this.props.points[t],this.props.points[t+1]);return r.closePath(),""}}const he=Object.assign({},bt,{width:10,height:10});class le extends wt{constructor(t){super(Object.assign({},he,t))}render(t,e){return this.getContext(t,xt).rect(0,0,this.props.width,this.props.height),""}}const ce=Object.assign({},bt,{width:10,height:10,r:1});class pe extends wt{constructor(t){super(Object.assign({},ce,t))}render(t,e){return this.getContext(t,xt).roundRect(0,0,this.props.width,this.props.height,this.props.r),""}}const de=Object.assign({},bt,{});class ue extends wt{constructor(t){super(Object.assign({},Gt,t))}render(t,e){return this.getContext(t,xt).registerCustomAsset(e),""}}const ge=Object.assign({},bt,{});class fe extends wt{constructor(t){super(Object.assign({},Gt,t))}render(t,e){return this.getContext(t,xt).appendCustomContent(e),""}}const me=Object.assign({},bt,{text:""});class xe extends wt{constructor(t){super(Object.assign({},me,t))}fillStrokeText(t){this.props.font&&(t.font=this.props.font),this.props.textAlign&&(t.textAlign=this.props.textAlign),this.props.textBaseline&&(t.textBaseline=this.props.textBaseline),this.props.fill&&this.props.stroke?t.fillStrokeText(this.props.text,0,0,this.props):this.props.fill?t.fillText(this.props.text,0,0,this.props):this.props.stroke&&t.strokeText(this.props.text,0,0,this.props)}render(t,e){return""}afterRender(t){const e=this.getContext(t,xt);this.isPathFragment||(this.fillStrokeText(e),this.restoreGraphicState(e))}}class be extends J{constructor(t){super(t)}transform(){const t=Array.isArray(this.props.children)?this.props.children.find(t=>"function"==typeof t):this.props.children,e=[],r=Object.assign({},this.props.scope||{});for(let n=0;n<this.props.items.length;n++)e.push(rt(Kt,{x:this.props.paperWidth/this.props.cols*(n%this.props.cols)+(Array.isArray(this.props.itemTranslation)?Array.isArray(this.props.itemTranslation[n])?this.props.itemTranslation[n][0]||0:this.props.itemTranslation[0]||0:0),y:this.props.paperHeight/this.props.rows*Math.floor(n/this.props.cols)+(Array.isArray(this.props.itemTranslation)?Array.isArray(this.props.itemTranslation[n])?this.props.itemTranslation[n][1]||0:this.props.itemTranslation[1]||0:0),scaleX:Array.isArray(this.props.itemScale)?Array.isArray(this.props.itemScale[n])?this.props.itemScale[n][0]||1:this.props.itemScale[0]||1:1,scaleY:Array.isArray(this.props.itemScale)?Array.isArray(this.props.itemScale[n])?this.props.itemScale[n][1]||1:this.props.itemScale[1]||1:1,rotationDeg:Array.isArray(this.props.itemRotationDeg)?this.props.itemRotationDeg[n]||0:this.props.itemRotationDeg||0},t(this.props.items[n],n,this.props.items,r)));return e}}class we extends K{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();{const t=this.props.src;return new Promise((e,r)=>{try{y.fetchLocation(this.props.src).then(s=>{let i=s.contentType;if(null===i){const e=S.getPathExt(t);if(i=S.pathExtToContentType(e),null===i)return m.log("Asset#defer:unknown content-type:"+e),void r("unknown content-type")}this.content=`data:${i};base64,`+n.encode(s.data,120),e()}).catch(t=>{m.log("Asset#defer:catch:"+t),r(t)})}catch(t){m.log("Asset#defer:catch:"+t),r(t)}})}}beforeRender(t){this.setContext(t,"CONTEXT_ASSET_"+this.props.contextName,this.content)}render(t,e){return""}}class ye extends wt{constructor(t){super(t),this.content=""}transform(){return null!==this.props.children&&void 0!==this.props.children?this.props.children:[]}defer(){if(void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use)return Promise.resolve();if(null!==this.content&&void 0!==this.content&&""!==this.content)return Promise.resolve();if(null===this.props.src||void 0===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return this.content=this.props.src,Promise.resolve();{const t=this.props.src;return new Promise((e,r)=>{y.fetchLocation(t).then(s=>{let i=s.contentType;if(null===i){const e=S.getPathExt(t);if(i=S.pathExtToContentType(e),null===i)return m.log("Image#defer:unknown content-type:"+e),void r("unknown content-type")}this.content=`data:${i};base64,`+n.encode(s.data,120),e()}).catch(t=>{m.log("Image#defer:"+t),r(t)})})}}renderAsHtml(t){let e="";if(this.props.asAsset)e=`<script>(Function("return this")())['#img_asset_mb3vhWjBUxDX__${this.props.id}']="${this.content.replace(/\r/g,"").replace(/\n/g,"")}";<\/script>`;else if(void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use){const t=this.props.id||`__img_node_id_mb3vhWjBUxDX_${this.props.__nodeId}`;e=`<img id="${t}" style="width:${this.props.width}${this.props.unit||"px"};height:${this.props.height}${this.props.unit||"px"};"${at(this.props,new Set(["id","src","unit","width","height"])).attrs}></img><script>document.getElementById("${t}").src=(Function("return this")())['#img_asset_mb3vhWjBUxDX__${this.props.use}'];<\/script>`}else e=`<img src="${this.content}" style="width:${this.props.width}${this.props.unit||"px"};height:${this.props.height}${this.props.unit||"px"};"${at(this.props,new Set(["src","unit","width","height"])).attrs}></img>`;return e}renderAsSvg(t){const e=void 0!==this.props.use&&null!==this.props.use&&""!==this.props.use?"#"+this.props.use:t.registerImage({url:this.content,x:0,y:0,width:1,height:1},this.props.id);this.props.asAsset||t.drawImage(e,this.props.x||0,this.props.y||0,this.props.width,this.props.height)}render(t,e){const r=this.getContext(t,xt);return void 0!==this.props.srcContext&&null!==this.props.srcContext&&""!==this.props.srcContext&&(this.content=this.getContext(t,"CONTEXT_ASSET_"+this.props.srcContext)),r?(this.renderAsSvg(r),""):this.renderAsHtml(t)}}class ve extends K{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return Promise.resolve();return new Promise((t,e)=>{try{y.fetchLocation(this.props.src).then(e=>{this.content=a.decodeUtf8(e.data),t()}).catch(t=>{m.log("Script#defer:catch:"+t),e(t)})}catch(t){m.log("Script#defer:catch:"+t),e(t)}})}render(t,e){let r="";r=this.props.noDownload?`<script${at(this.props,new Set([])).attrs}><\/script>`:`<script${at(this.props,new Set(["src"])).attrs}>${this.content}<\/script>`;const n=this.getContext(t,xt);return n?(n.registerCustomAsset(r),""):r}}class ke extends K{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return Promise.resolve();return new Promise((t,e)=>{try{y.fetchLocation(this.props.src).then(r=>{this.content=a.decodeUtf8(r.data);const s=/^url\((.+?)\)$/,i=this.content.split(/(url\(.+?\))/),o=[],h=[];for(let t=0;t<i.length;t++){const e=s.exec(i[t]);e&&!e[1].startsWith("data:")&&(o.push(y.fetchLocation(S.join(this.props.src,e[1])).then(e=>{i[t]=i[t].replace(s,`url(${`data:${e.contentType};charset=utf-8;base64,`+n.encode(e.data)})`)})),h.push(t))}Promise.all(o).then(()=>{this.content=i.join(""),t()}).catch(t=>{m.log("Style#defer:catch(1):"+t),e(t)})}).catch(t=>{m.log("Style#defer:catch(2):"+t),e(t)})}catch(t){m.log("Style#defer:catch(3):"+t),e(t)}})}render(t,e){let r="";r=this.props.noDownload?`<style type="text/css">@import url("${this.props.src}");</style>`:`<style${at(this.props,new Set(["src"])).attrs}>${this.content}</style>`;const n=this.getContext(t,xt);return n?(n.registerCustomAsset(r),""):r}}const Se=ke;class $e extends K{constructor(t){super(t),this.content=""}defer(){if(void 0===this.props.src||null===this.props.src||""===this.props.src)return Promise.resolve();if(this.props.noDownload)return Promise.resolve();return new Promise((t,e)=>{try{y.fetchLocation(this.props.src).then(e=>{this.content=`data:${e.contentType};charset=utf-8;base64,`+n.encode(e.data),t()}).catch(t=>{m.log("SingleFont#defer:catch:"+t),e(t)})}catch(t){m.log("SingleFont#defer:catch:"+t),e(t)}})}render(t,e){let r="";this.props.noDownload,r=`<style type="text/css">@font-face{font-family:${this.props.fontFamily};font-style:${this.props.fontStyle};font-weight:${this.props.fontWeight};src:${this.props.localNames?this.props.localNames.map(t=>` local(${t})`):""} url(${this.props.noDownload?this.props.src:this.content});unicode-range:${this.props.unicodeRange};}</style>`;const n=this.getContext(t,xt);return n?(n.registerCustomAsset(r),""):r}}const Me=Object.assign({},bt,{fill:!1,stroke:!0,strokeColor:"black",lineWidth:.105834,width:210,height:297,cropMarkLength:9,bleedMarks:!0,northBleed:3,southBleed:3,eastBleed:3,westBleed:3,centerMarks:!0,centerMarkArmLength:15,centerMarkArmMargin:3});class Te extends wt{constructor(t){super(Object.assign({},Me,t))}render(t,e){const r=this.getContext(t,xt),n=this.props;if(r.moveTo(-n.westBleed,0),r.lineTo(-n.westBleed-n.cropMarkLength,0),r.moveTo(-n.westBleed,n.height),r.lineTo(-n.westBleed-n.cropMarkLength,n.height),r.moveTo(n.width+n.eastBleed,0),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,0),r.moveTo(n.width+n.eastBleed,n.height),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,n.height),r.moveTo(0,-n.northBleed),r.lineTo(0,-n.northBleed-n.cropMarkLength),r.moveTo(n.width,-n.northBleed),r.lineTo(n.width,-n.northBleed-n.cropMarkLength),r.moveTo(0,n.height+n.southBleed),r.lineTo(0,n.height+n.southBleed+n.cropMarkLength),r.moveTo(n.width,n.height+n.southBleed),r.lineTo(n.width,n.height+n.southBleed+n.cropMarkLength),n.bleedMarks&&(r.moveTo(0,-n.northBleed),r.lineTo(-n.westBleed-n.cropMarkLength,-n.northBleed),r.moveTo(0,n.height+n.southBleed),r.lineTo(-n.westBleed-n.cropMarkLength,n.height+n.southBleed),r.moveTo(n.width,-n.northBleed),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,-n.northBleed),r.moveTo(n.width,n.height+n.southBleed),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,n.height+n.southBleed),r.moveTo(-n.westBleed,0),r.lineTo(-n.westBleed,-n.northBleed-n.cropMarkLength),r.moveTo(n.width+n.eastBleed,0),r.lineTo(n.width+n.eastBleed,-n.northBleed-n.cropMarkLength),r.moveTo(-n.westBleed,n.height),r.lineTo(-n.westBleed,n.height+n.southBleed+n.cropMarkLength),r.moveTo(n.width+n.eastBleed,n.height),r.lineTo(n.width+n.eastBleed,n.height+n.southBleed+n.cropMarkLength)),n.centerMarks&&(r.moveTo(n.width/2,-n.northBleed),r.lineTo(n.width/2,-n.northBleed-n.cropMarkLength),r.moveTo(n.width/2,n.height+n.southBleed),r.lineTo(n.width/2,n.height+n.southBleed+n.cropMarkLength),r.moveTo(n.width/2-n.centerMarkArmLength/2,-n.northBleed-n.centerMarkArmMargin),r.lineTo(n.width/2+n.centerMarkArmLength/2,-n.northBleed-n.centerMarkArmMargin),r.moveTo(n.width/2-n.centerMarkArmLength/2,n.height+n.southBleed+n.centerMarkArmMargin),r.lineTo(n.width/2+n.centerMarkArmLength/2,n.height+n.southBleed+n.centerMarkArmMargin),r.moveTo(-n.westBleed,n.height/2),r.lineTo(-n.westBleed-n.cropMarkLength,n.height/2),r.moveTo(n.width+n.eastBleed,n.height/2),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,n.height/2),r.moveTo(-n.westBleed-n.centerMarkArmMargin,n.height/2-n.centerMarkArmLength/2),r.lineTo(-n.westBleed-n.centerMarkArmMargin,n.height/2+n.centerMarkArmLength/2),r.moveTo(n.width+n.eastBleed+n.centerMarkArmMargin,n.height/2-n.centerMarkArmLength/2),r.lineTo(n.width+n.eastBleed+n.centerMarkArmMargin,n.height/2+n.centerMarkArmLength/2)),n.hFold){let t=0;for(const e of n.hFold)t+=e,r.moveTo(t,-n.northBleed),r.lineTo(t,-n.northBleed-n.cropMarkLength),r.moveTo(t,n.height+n.southBleed),r.lineTo(t,n.height+n.southBleed+n.cropMarkLength)}if(n.vFold){let t=0;for(const e of n.vFold)t+=e,r.moveTo(-n.westBleed,t),r.lineTo(-n.westBleed-n.cropMarkLength,t),r.moveTo(n.width+n.eastBleed,t),r.lineTo(n.width+n.eastBleed+n.cropMarkLength,t)}return""}}class Ae{static pipe(t,e){return(r,n,s)=>{t(r,n,(t,r)=>{t?s(t,null):e(r,n,(t,e)=>s(t,e))})}}}class Ce{static cli(t,e){if(Ce.suppressRun)return this;const r=new Map;for(let e of t){let t=!1,n=!1;e.startsWith("?")&&(e=e.substring(1),n=!0);for(const n of process.argv.slice(2))if(e.endsWith("*")){if(n.startsWith(e.substring(0,e.length-1))){t=!0,r.set(e,n.substring(e.length-1));break}}else if(n===e){t=!0,r.set(e,n.substring(e.length));break}if(!n&&!t)return this}return e(r),Ce.suppressRun=!0,this}static route(t,e){return Ce.lambdas.set(t,e),this}static run(t,e){if(Ce.suppressRun)return;process.stdin.resume(),process.stdin.setEncoding("utf8");let r="";process.stdin.on("data",t=>{r+=t}),process.stdin.on("end",()=>{const n=(t,e)=>{process.stdout.write(t)?process.exit(e):process.stdout.once("drain",()=>{process.exit(e)})};try{const s=JSON.parse(r);let i=e;i||s&&s.eventName&&(i=Ce.lambdas.get(s.eventName)),i=i||((t,e,r)=>{r({message:`Error: event name ${s&&s.eventName||""} is not found.`},null)}),i(s,t,(t,e)=>{t?n(String(t),-1):n(e,0)})}catch(t){n(String(t),-1)}})}}Ce.lambdas=new Map,Ce.suppressRun=!1;var Pe=function(t,e,r,n){return new(r||(r=Promise))((function(s,i){function o(t){try{h(n.next(t))}catch(t){i(t)}}function a(t){try{h(n.throw(t))}catch(t){i(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};class Oe{static get rendererPackageName(){return Oe._rendererPackageName}static set rendererPackageName(t){Oe._rendererPackageName=t}static get launchOptions(){return Oe._launchOptions}static set launchOptions(t){Oe._launchOptions=t}static writeToTempFile(t,e){return Pe(this,void 0,void 0,(function*(){const r=w("path"),s=w("fs"),i=w("util");for(let o=0;o<3;o++){let o=e;if(o.includes("*")){const t=w("crypto");o=o.replace(/\*/g,n.encode(t.randomBytes(6)).replace(/\+/g,"A").replace(/\//g,"B"))}let a="";const h=r.resolve(o),l=yield i.promisify(s.open)(h,"ax");try{yield i.promisify(s.writeFile)(l,t,"utf8");let e=encodeURI(h.replace(/\\/g,"/"));e.startsWith("/")||(e="/"+e),a="file://"+e}finally{yield i.promisify(s.close)(l)}return{tmpFullPath:h,url:a}}throw new Error("HtmlRenderer#writeToTempFile: Can't create a temp file.")}))}static _toPdf(t,e,r,s){return Pe(this,void 0,void 0,(function*(){const i=w(Oe._rendererPackageName);let o=null,h=null,l="",c="";try{s?({tmpFullPath:l,url:c}=yield Oe.writeToTempFile(t,s)):c="data:text/html;base64,"+n.encode(a.encodeToUtf8(t)),h=yield i.launch(Oe._launchOptions);const p=yield h.newPage();yield p.goto(c,Object.assign({waitUntil:"load"},e||{})),o=yield p.pdf(Object.assign({width:"210mm",height:"297mm",printBackground:!0},r||{}))}finally{try{h&&(yield h.close())}catch(t){}try{if(s&&l){const t=w("fs"),e=w("util");yield e.promisify(t.unlink)(l)}}catch(t){}}return o}))}static toPdf(t,e,r,n){return Pe(this,void 0,void 0,(function*(){return"string"==typeof t?Oe._toPdf(t,e,r,n):Oe._toPdf(yield t,e,r,n)}))}static toPdfHandler(t,e,r,n){return Ae.pipe(t,(t,s,i)=>{Oe.toPdf(t,e,r,n).then(t=>i(null,t)).catch(t=>i(t,null))})}static _toImage(t,e,r,s){return Pe(this,void 0,void 0,(function*(){const i=w(Oe._rendererPackageName);let o=null,h=null,l="",c="";try{s?({tmpFullPath:l,url:c}=yield Oe.writeToTempFile(t,s)):c="data:text/html;base64,"+n.encode(a.encodeToUtf8(t)),h=yield i.launch(Oe._launchOptions);const p=yield h.newPage();yield p.goto(c,Object.assign({waitUntil:"load"},e||{})),yield p.emulateMedia("print"),o=yield p.screenshot(Object.assign({type:"png",fullPage:!0,omitBackground:!1},r||{}))}finally{try{h&&(yield h.close())}catch(t){}try{if(s&&l){const t=w("fs"),e=w("util");yield e.promisify(t.unlink)(l)}}catch(t){}}return o}))}static toImage(t,e,r,n){return Pe(this,void 0,void 0,(function*(){return"string"==typeof t?Oe._toImage(t,e,r,n):Oe._toImage(yield t,e,r,n)}))}static toImageHandler(t,e,r,n){return Ae.pipe(t,(t,s,i)=>{Oe.toImage(t,e,r,n).then(t=>i(null,t)).catch(t=>i(t,null))})}}Oe._rendererPackageName="puppeteer",Oe._launchOptions=void 0;var Ne=r(1);const De=r.n(Ne).a||Ne;class Le extends J{constructor(t){super(t)}transform(){return[]}render(){return De.renderToStaticMarkup(this.props.element)}}const Be=Object.assign({},bt,{fillColor:"black",font:"normal 3.5px 'OCRB'",rotation:0,height:6.35,quietWidth:2.54,quietHeight:.66,unit:"mm",drawText:!0,useRawDataAsText:!1,textHeight:3.55});class Ee extends wt{constructor(t,e){super(Object.assign({},Be,t)),this.charactersMap=e}toImgTag(){return vt(this)}toElementStyle(){return kt(this)}toDataUrl(){return St(this)}toSvg(){return $t(this)}toRendered(){return ct(this)}render(t,e){let r=this.getContext(t,xt);const n=Boolean(r);n||(r=new Y,this.setContext(t,xt,r),super.beforeRender(t));let s=this.props.data||"",i=this.props.text;const o=s;let a,h,l,c;({data:s,heightData:a,labelText:h,startChar:l,stopChar:c}=this.encodeData(s));const p=this.calcCheckDigit(s),{tw:d,th:u}=this.calcSymbolSize(s,l,c,p);s=`${l}${s}${p}${c}`,void 0!==h?i=h:(null==i&&(i=this.props.text),null==i&&(i=o));let g=void 0===this.props.rotation||null===this.props.rotation?0:Math.floor(this.props.rotation/90)%4;switch(g<0&&(g+=4),g){case 1:r.rotate(1.5*Math.PI),r.translate(-d,0);break;case 2:r.rotate(Math.PI),r.translate(-d,-u);break;case 3:r.rotate(.5*Math.PI),r.translate(0,-u)}if(this.props.drawText&&r.beginGroup(),this.isHeightModulated?this.renderHeightModulatedBarData(r,d,u,s,a,i):this.renderBarData(r,d,u,s,a,i),this.renderAdditional(r,d,u,s,i),this.props.drawText&&(r.endGroup(),r.beginGroup()),this.props.drawText&&(this.props.font&&(r.font=this.props.font),this.renderText(r,d,u,s,i)),this.props.drawText&&r.endGroup(),n)return"";{super.afterRender(t),this.unsetContext(t,xt);const e=d+(this.props.x||0),n=u+(this.props.y||0);return yt(this.props,r,e,n)}}calcSymbolSize(t,e,r,n){return{tw:0,th:0}}calcCheckDigit(t){return""}encodeData(t){return{data:t,startChar:"",stopChar:""}}getBarSpaceWidth(){return[]}getBarSpaceHeight(){return[[{offset:0,height:this.props.height}]]}getRenderStartCoodinate(t,e){const r=this.props;return{rx:r.quietWidth,ry:r.quietHeight}}get isHeightModulated(){return!1}renderBarData(t,e,r,n,s,i){const o=this.getBarSpaceWidth(),a=this.getBarSpaceHeight();let{rx:h,ry:l}=this.getRenderStartCoodinate(n,i);for(let e=0;e<n.length;e++){const r=this.charactersMap.get(n[e]);if(!r)throw new Error("BarcodeBase#renderBarData: character is out of range.");const i=r.pattern;let c=!0,p=0;for(let r=0;r<i.length;r++){const n=i[r];switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const r=o[Number.parseInt(n,10)];if(c){const n=void 0===s?a[0]:a[Number.parseInt(s[e],10)];for(const e of n)t.rect(h+p,l+e.offset,r,e.height)}p+=r,c=!c}break;case"+":c=!0;break;case"-":c=!1}}h+=p}t.fill(),t.beginPath()}renderHeightModulatedBarData(t,e,r,n,s,i){const o=this.getBarSpaceWidth()[1],a=this.getBarSpaceHeight();let{rx:h,ry:l}=this.getRenderStartCoodinate(n,i);for(let e=0;e<n.length;e++){const r=this.charactersMap.get(n[e]).pattern;let s=0;for(let e=0;e<r.length;e++){const n=r[e];switch(n){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const e=a[Number.parseInt(n,10)];for(const r of e)t.rect(h+s,l+r.offset,o,r.height)}case"0":s+=2*o}}h+=s}t.fill(),t.beginPath()}renderAdditional(t,e,r,n,s){}renderText(t,e,r,n,s){const i=this.props;t.textAlign="center",t.textBaseline="alphabetic",t.fillText(i.useRawDataAsText?n:s,e/2,r-i.quietHeight)}}const _e=new Map([["0",{index:0,pattern:"1112212110"}],["1",{index:1,pattern:"2112111120"}],["2",{index:2,pattern:"1122111120"}],["3",{index:3,pattern:"2122111110"}],["4",{index:4,pattern:"1112211120"}],["5",{index:5,pattern:"2112211110"}],["6",{index:6,pattern:"1122211110"}],["7",{index:7,pattern:"1112112120"}],["8",{index:8,pattern:"2112112110"}],["9",{index:9,pattern:"1122112110"}],["A",{index:10,pattern:"2111121120"}],["B",{index:11,pattern:"1121121120"}],["C",{index:12,pattern:"2121121110"}],["D",{index:13,pattern:"1111221120"}],["E",{index:14,pattern:"2111221110"}],["F",{index:15,pattern:"1121221110"}],["G",{index:16,pattern:"1111122120"}],["H",{index:17,pattern:"2111122110"}],["I",{index:18,pattern:"1121122110"}],["J",{index:19,pattern:"1111222110"}],["K",{index:20,pattern:"2111111220"}],["L",{index:21,pattern:"1121111220"}],["M",{index:22,pattern:"2121111210"}],["N",{index:23,pattern:"1111211220"}],["O",{index:24,pattern:"2111211210"}],["P",{index:25,pattern:"1121211210"}],["Q",{index:26,pattern:"1111112220"}],["R",{index:27,pattern:"2111112210"}],["S",{index:28,pattern:"1121112210"}],["T",{index:29,pattern:"1111212210"}],["U",{index:30,pattern:"2211111120"}],["V",{index:31,pattern:"1221111120"}],["W",{index:32,pattern:"2221111110"}],["X",{index:33,pattern:"1211211120"}],["Y",{index:34,pattern:"2211211110"}],["Z",{index:35,pattern:"1221211110"}],["-",{index:36,pattern:"1211112120"}],[".",{index:37,pattern:"2211112110"}],[" ",{index:38,pattern:"1221112110"}],["$",{index:39,pattern:"1212121110"}],["/",{index:40,pattern:"1212111210"}],["+",{index:41,pattern:"1211121210"}],["%",{index:42,pattern:"1112121210"}],["*",{index:43,pattern:"1211212110"}]]),Re=new Map;for(const t of _e.entries())Re.set(t[1].index,t[0]);const Ie=new Map([[0,"%U"],[1,"$A"],[2,"$B"],[3,"$C"],[4,"$D"],[5,"$E"],[6,"$F"],[7,"$G"],[8,"$H"],[9,"$I"],[0,"$J"],[11,"$K"],[12,"$L"],[13,"$M"],[14,"$N"],[15,"$O"],[16,"$P"],[17,"$Q"],[18,"$R"],[19,"$S"],[20,"$T"],[21,"$U"],[22,"$V"],[23,"$W"],[24,"$X"],[25,"$Y"],[26,"$Z"],[27,"%A"],[28,"%B"],[29,"%C"],[30,"%D"],[31,"%E"],[32," "],[33,"/A"],[34,"/B"],[35,"/C"],[36,"/D"],[37,"/E"],[38,"/F"],[39,"/G"],[40,"/H"],[41,"/I"],[42,"/J"],[43,"/K"],[44,"/L"],[45,"-"],[46,"."],[47,"/"],[48,"0"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[58,"/Z"],[59,"%F"],[60,"%G"],[61,"%H"],[62,"%I"],[63,"%J"],[64,"%V"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"],[91,"%K"],[92,"%L"],[93,"%M"],[94,"%N"],[95,"%O"],[96,"%W"],[97,"+A"],[98,"+B"],[99,"+C"],[100,"+D"],[101,"+E"],[102,"+F"],[103,"+G"],[104,"+H"],[105,"+I"],[106,"+J"],[107,"+K"],[108,"+L"],[109,"+M"],[110,"+N"],[111,"+O"],[112,"+P"],[113,"+Q"],[114,"+R"],[115,"+S"],[116,"+T"],[117,"+U"],[118,"+V"],[119,"+W"],[120,"+X"],[121,"+Y"],[122,"+Z"],[123,"%P"],[124,"%Q"],[125,"%R"],[126,"%S"],[127,"%T"]]),He=Object.assign({},Be,{addCheckDigit:!0,fullAscii:!1,narrowWidth:.33,wideWidth:.66,charGapWidth:void 0});class We extends Ee{constructor(t){super(Object.assign({},He,t),_e)}calcSymbolSize(t,e,r,n){const s=this.props,i=s.charGapWidth||s.narrowWidth,o=6*s.narrowWidth+3*s.wideWidth+i;return{tw:2*s.quietWidth+o*(t.length+2+(s.addCheckDigit?1:0))-i,th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcCheckDigit(t){let e="";if(this.props.addCheckDigit){let r=0;for(let e=0;e<t.length;e++){const n=_e.get(t[e]);if(void 0===n)throw new Error("code39: character is out of range.");r=(r+n.index)%43}const n=Re.get(r);if(void 0===n)throw new Error("code39 (trace): checkdigit is out of range.");e=n}return e}encodeData(t){let e=t;if(this.props.fullAscii){e="";for(let r=0;r<t.length;r++){const n=Ie.get(t.charCodeAt(r));if(void 0===n)throw new Error("code39 fullascii: character is out of range.");e+=n}}return{data:e,startChar:"*",stopChar:"*"}}getBarSpaceWidth(){const t=this.props;return[t.charGapWidth||t.narrowWidth,t.narrowWidth,t.wideWidth]}}const Fe=new Map([["\0",{index:0,pattern:"212222"}],["",{index:1,pattern:"222122"}],["",{index:2,pattern:"222221"}],["",{index:3,pattern:"121223"}],["",{index:4,pattern:"121322"}],["",{index:5,pattern:"131222"}],["",{index:6,pattern:"122213"}],["",{index:7,pattern:"122312"}],["\b",{index:8,pattern:"132212"}],["\t",{index:9,pattern:"221213"}],["\n",{index:10,pattern:"221312"}],["\v",{index:11,pattern:"231212"}],["\f",{index:12,pattern:"112232"}],["\r",{index:13,pattern:"122132"}],["",{index:14,pattern:"122231"}],["",{index:15,pattern:"113222"}],["",{index:16,pattern:"123122"}],["",{index:17,pattern:"123221"}],["",{index:18,pattern:"223211"}],["",{index:19,pattern:"221132"}],["",{index:20,pattern:"221231"}],["",{index:21,pattern:"213212"}],["",{index:22,pattern:"223112"}],["",{index:23,pattern:"312131"}],["",{index:24,pattern:"311222"}],["",{index:25,pattern:"321122"}],["",{index:26,pattern:"321221"}],["",{index:27,pattern:"312212"}],["",{index:28,pattern:"322112"}],["",{index:29,pattern:"322211"}],["",{index:30,pattern:"212123"}],["",{index:31,pattern:"212321"}],[" ",{index:32,pattern:"232121"}],["!",{index:33,pattern:"111323"}],['"',{index:34,pattern:"131123"}],["#",{index:35,pattern:"131321"}],["$",{index:36,pattern:"112313"}],["%",{index:37,pattern:"132113"}],["&",{index:38,pattern:"132311"}],["'",{index:39,pattern:"211313"}],["(",{index:40,pattern:"231113"}],[")",{index:41,pattern:"231311"}],["*",{index:42,pattern:"112133"}],["+",{index:43,pattern:"112331"}],[",",{index:44,pattern:"132131"}],["-",{index:45,pattern:"113123"}],[".",{index:46,pattern:"113321"}],["/",{index:47,pattern:"133121"}],["0",{index:48,pattern:"313121"}],["1",{index:49,pattern:"211331"}],["2",{index:50,pattern:"231131"}],["3",{index:51,pattern:"213113"}],["4",{index:52,pattern:"213311"}],["5",{index:53,pattern:"213131"}],["6",{index:54,pattern:"311123"}],["7",{index:55,pattern:"311321"}],["8",{index:56,pattern:"331121"}],["9",{index:57,pattern:"312113"}],[":",{index:58,pattern:"312311"}],[";",{index:59,pattern:"332111"}],["<",{index:60,pattern:"314111"}],["=",{index:61,pattern:"221411"}],[">",{index:62,pattern:"431111"}],["?",{index:63,pattern:"111224"}],["@",{index:64,pattern:"111422"}],["A",{index:65,pattern:"121124"}],["B",{index:66,pattern:"121421"}],["C",{index:67,pattern:"141122"}],["D",{index:68,pattern:"141221"}],["E",{index:69,pattern:"112214"}],["F",{index:70,pattern:"112412"}],["G",{index:71,pattern:"122114"}],["H",{index:72,pattern:"122411"}],["I",{index:73,pattern:"142112"}],["J",{index:74,pattern:"142211"}],["K",{index:75,pattern:"241211"}],["L",{index:76,pattern:"221114"}],["M",{index:77,pattern:"413111"}],["N",{index:78,pattern:"241112"}],["O",{index:79,pattern:"134111"}],["P",{index:80,pattern:"111242"}],["Q",{index:81,pattern:"121142"}],["R",{index:82,pattern:"121241"}],["S",{index:83,pattern:"114212"}],["T",{index:84,pattern:"124112"}],["U",{index:85,pattern:"124211"}],["V",{index:86,pattern:"411212"}],["W",{index:87,pattern:"421112"}],["X",{index:88,pattern:"421211"}],["Y",{index:89,pattern:"212141"}],["Z",{index:90,pattern:"214121"}],["[",{index:91,pattern:"412121"}],["\\",{index:92,pattern:"111143"}],["]",{index:93,pattern:"111341"}],["^",{index:94,pattern:"131141"}],["_",{index:95,pattern:"114113"}],["`",{index:96,pattern:"114311"}],["a",{index:97,pattern:"411113"}],["b",{index:98,pattern:"411311"}],["c",{index:99,pattern:"113141"}],["d",{index:100,pattern:"114131"}],["e",{index:101,pattern:"311141"}],["f",{index:102,pattern:"411131"}],["g",{index:103,pattern:"211412"}],["h",{index:104,pattern:"211214"}],["i",{index:105,pattern:"211232"}],["j",{index:106,pattern:"2331112"}]]),Ue=new Map([[0,["@",null]],[1,["A",null]],[2,["B",null]],[3,["C",null]],[4,["D",null]],[5,["E",null]],[6,["F",null]],[7,["G",null]],[8,["H",null]],[9,["I",null]],[0,["J",null]],[11,["K",null]],[12,["L",null]],[13,["M",null]],[14,["N",null]],[15,["O",null]],[16,["P",null]],[17,["Q",null]],[18,["R",null]],[19,["S",null]],[20,["T",null]],[21,["U",null]],[22,["V",null]],[23,["W",null]],[24,["X",null]],[25,["Y",null]],[26,["Z",null]],[27,["[",null]],[28,["\\",null]],[29,["]",null]],[30,["^",null]],[31,["_",null]],[32,["\0","\0"]],[33,["",""]],[34,["",""]],[35,["",""]],[36,["",""]],[37,["",""]],[38,["",""]],[39,["",""]],[40,["\b","\b"]],[41,["\t","\t"]],[42,["\n","\n"]],[43,["\v","\v"]],[44,["\f","\f"]],[45,["\r","\r"]],[46,["",""]],[47,["",""]],[48,["",""]],[49,["",""]],[50,["",""]],[51,["",""]],[52,["",""]],[53,["",""]],[54,["",""]],[55,["",""]],[56,["",""]],[57,["",""]],[58,["",""]],[59,["",""]],[60,["",""]],[61,["",""]],[62,["",""]],[63,["",""]],[64,[" "," "]],[65,["!","!"]],[66,['"','"']],[67,["#","#"]],[68,["$","$"]],[69,["%","%"]],[70,["&","&"]],[71,["'","'"]],[72,["(","("]],[73,[")",")"]],[74,["*","*"]],[75,["+","+"]],[76,[",",","]],[77,["-","-"]],[78,[".","."]],[79,["/","/"]],[80,["0","0"]],[81,["1","1"]],[82,["2","2"]],[83,["3","3"]],[84,["4","4"]],[85,["5","5"]],[86,["6","6"]],[87,["7","7"]],[88,["8","8"]],[89,["9","9"]],[90,[":",":"]],[91,[";",";"]],[92,["<","<"]],[93,["=","="]],[94,[">",">"]],[95,["?","?"]],[96,[null,"@"]],[97,[null,"A"]],[98,[null,"B"]],[99,[null,"C"]],[100,[null,"D"]],[101,[null,"E"]],[102,[null,"F"]],[103,[null,"G"]],[104,[null,"H"]],[105,[null,"I"]],[106,[null,"J"]],[107,[null,"K"]],[108,[null,"L"]],[109,[null,"M"]],[110,[null,"N"]],[111,[null,"O"]],[112,[null,"P"]],[113,[null,"Q"]],[114,[null,"R"]],[115,[null,"S"]],[116,[null,"T"]],[117,[null,"U"]],[118,[null,"V"]],[119,[null,"W"]],[120,[null,"X"]],[121,[null,"Y"]],[122,[null,"Z"]],[123,[null,"["]],[124,[null,"\\"]],[125,[null,"]"]],[126,[null,"^"]],[127,[null,"_"]],[128,["f","f","f"]],[129,["a","a",null]],[130,["`","`",null]],[131,["e","d",null]],[132,[null,"e","e"]],[133,["d",null,"d"]],[134,["c","c",null]],[135,[null,"b",null]],[135,["b",null,null]]]),je=Object.assign({},Be,{elementWidth:.33,useLatin1:!1,raw:!1});class qe extends Ee{constructor(t){super(Object.assign({},je,t),Fe)}calcSymbolSize(t,e,r,n){const s=this.props,i=11*s.elementWidth;return{tw:2*s.quietWidth+i*t.length+13*s.elementWidth,th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcMod103Checksum(t){let e=Fe.get(t[0]);if(void 0===e)throw new Error("code128: character is out of range.");let r=e.index%103;for(let n=1;n<t.length;n++){if(e=Fe.get(t[n]),void 0===e)throw new Error("code128: character is out of range.");r=(r+e.index*n)%103}return r}encodeData(t){if(this.props.raw)return{data:t,startChar:"",stopChar:"j"};let e="",r=4,n=null,s=0;const i=e=>{let n=e+1,s=1;for(;n<t.length;n++){const e=t.charCodeAt(n);if(48<=e&&e<=57)s++;else{if(128!==e)break;if(s%2)break}}return n>=t.length&&n-e>=4||n-e>=r},o=r=>{e+=null===n?"i":"c";let s=r,i=0,o=0;for(;s<t.length;s++){let r=t.charCodeAt(s);if(48<=r&&r<=57)i=10*i+(r-48),o++,o%2==0&&(e+=String.fromCharCode(i),i=0);else{if(this.props.useLatin1&&r>127&&(r-=128),128!==r)break;if(o%2)break;e+="f"}}if((s<t.length||o%2)&&(n=a(s),e+=0===n?"e":"d"),o%2){const t=Ue.get(48+i);if(void 0===t)throw new Error("code128: character is out of range.");if(null===n)throw new Error("code128: mode === null. Assertion failed.");e+=t[n]}return s},a=e=>{let r=0,i=0,o=Math.max(e,s);for(;o<t.length;o++){let e=t.charCodeAt(o);this.props.useLatin1&&e>127&&(e-=128);const r=Ue.get(e);if(void 0===r)throw new Error("code128: character is out of range.");const n=r[0],s=r[1];if(void 0===n||void 0===s)break}const a=Math.min(t.length,o+6);for(;o<a;o++){let e=t.charCodeAt(o);this.props.useLatin1&&e>127&&(e-=128);const n=Ue.get(e);if(void 0===n)throw new Error("code128: character is out of range.");void 0===n[0]&&r++,void 0===n[1]&&i++}s=o;const h=null===n?1:n;return r<i?i-r<2?h:0:r>i?r-i<2?h:1:h};for(let s=0;s<t.length;){const h=t.charCodeAt(s);let l=!1,c=!1;if((48<=h&&h<=57||!this.props.useLatin1&&128===h||this.props.useLatin1&&256===h)&&(i(s)&&(s=o(s),l=!0),r=6),!l){let r=t.charCodeAt(s);this.props.useLatin1&&r>127&&(r-=128,128<=r&&r<=135?131===r&&(c=!0):c=!0);const i=Ue.get(r);if(void 0===i)throw new Error("code128: character is out of range.");let o=null!==n?i[n]:void 0;if(void 0===o){const t=a(s);n===t?(e+="b",o=i[(n+1)%2]):(e+=null===n?0===n?"g":"h":0===n?"d":"e",n=t,o=i[n])}if(null===o)throw new Error("code128: character is out of range.");if(c){const t=Ue.get(131);if(void 0===t)throw new Error("code128: character is out of range.");if(null===n)throw new Error("code128: mode === null. Assertion failed.");e+=t[n]}e+=o,s++}}return e+=String.fromCharCode(this.calcMod103Checksum(e)),{data:e,startChar:"",stopChar:"j"}}getBarSpaceWidth(){const t=this.props.elementWidth;return[0,t,2*t,3*t,4*t]}}const Ge=new Map([["\0",{index:0,pattern:"-1123"}],["",{index:1,pattern:"-1222"}],["",{index:2,pattern:"-2212"}],["",{index:3,pattern:"-1141"}],["",{index:4,pattern:"-2311"}],["",{index:5,pattern:"-1321"}],["",{index:6,pattern:"-4111"}],["",{index:7,pattern:"-2131"}],["\b",{index:8,pattern:"-3121"}],["\t",{index:9,pattern:"-2113"}],["",{index:10,pattern:"-3211"}],["",{index:11,pattern:"-2221"}],["",{index:12,pattern:"-2122"}],["",{index:13,pattern:"-1411"}],["",{index:14,pattern:"-1132"}],["",{index:15,pattern:"-1231"}],["",{index:16,pattern:"-1114"}],["",{index:17,pattern:"-1312"}],["",{index:18,pattern:"-1213"}],["",{index:19,pattern:"-3112"}],[" ",{index:20,pattern:"3211"}],["!",{index:21,pattern:"2221"}],['"',{index:22,pattern:"2122"}],["#",{index:23,pattern:"1411"}],["$",{index:24,pattern:"1132"}],["%",{index:25,pattern:"1231"}],["&",{index:26,pattern:"1114"}],["'",{index:27,pattern:"1312"}],["(",{index:28,pattern:"1213"}],[")",{index:29,pattern:"3112"}],["0",{index:30,pattern:"111111"}],["1",{index:31,pattern:"110100"}],["2",{index:32,pattern:"110010"}],["3",{index:33,pattern:"110001"}],["4",{index:34,pattern:"101100"}],["5",{index:35,pattern:"100110"}],["6",{index:36,pattern:"100011"}],["7",{index:37,pattern:"101010"}],["8",{index:38,pattern:"101001"}],["9",{index:39,pattern:"100101"}],["@",{index:40,pattern:"111"}],["P",{index:50,pattern:"-11111"}],["`",{index:60,pattern:"111"}],["p",{index:70,pattern:"00111"}],["q",{index:71,pattern:"01011"}],["r",{index:72,pattern:"01101"}],["s",{index:73,pattern:"01110"}],["t",{index:74,pattern:"10011"}],["u",{index:75,pattern:"11001"}],["v",{index:76,pattern:"11100"}],["w",{index:77,pattern:"10101"}],["x",{index:78,pattern:"10110"}],["y",{index:79,pattern:"11010"}],["",{index:80,pattern:"11"}],["",{index:81,pattern:"10"}],["",{index:82,pattern:"01"}],["",{index:83,pattern:"00"}],["",{index:90,pattern:"-1112"}],["",{index:91,pattern:"-11"}],["",{index:92,pattern:"112"}],["",{index:93,pattern:"-111111"}],["",{index:100,pattern:"000111"}],["",{index:101,pattern:"001011"}],["",{index:102,pattern:"001101"}],["",{index:103,pattern:"001110"}],["",{index:104,pattern:"010011"}],["",{index:105,pattern:"011001"}],["",{index:106,pattern:"011100"}],["",{index:107,pattern:"010101"}],["",{index:108,pattern:"010110"}],["",{index:109,pattern:"011010"}],["",{index:110,pattern:"111000"}],["",{index:111,pattern:"110100"}],["",{index:112,pattern:"110010"}],["",{index:113,pattern:"110001"}],["",{index:114,pattern:"101100"}],["",{index:115,pattern:"100110"}],["",{index:116,pattern:"100011"}],["",{index:117,pattern:"101010"}],["",{index:118,pattern:"101001"}],["",{index:119,pattern:"100101"}]]),ze=Object.assign({},Be,{smallFont:"normal 3.0px 'OCRB'",elementWidth:.33,guardExtHeight:2});class Xe extends Ee{constructor(t){super(Object.assign({},ze,t),Ge)}get eanTypes(){throw new Error("EAN#eanTypes: abstract property")}calcSymbolSize(t,e,r,n){const s=this.props;let i,o=0;switch(this.eanTypes){case"ean-13":case"upc-a":i=12,o=11;break;case"ean-8":i=8,o=11;break;case"ean-5":i=5,o=13;break;case"upc-e":i=6,o=10;break;case"ean-2":i=2,o=7;break;default:throw new Error("bad data length")}return{tw:2*s.quietWidth+s.elementWidth*(7*i+o),th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcEanMod10W3Checksum(t){let e=0,r=0;for(let n=0;n<t.length;n++){const s=this.charactersMap.get(t[t.length-1-n]);if(void 0===s)throw new Error("EAN: character is out of range.");(n+1)%2?e=(e+s.index)%10:r=(r+s.index)%10}return(10-(3*e+r)%10)%10}calcEan5Checksum(t){let e=0;for(let r=0;r<t.length;r++)e=(e+Number.parseInt(t[r],10)*(r%2?3:9))%10;return e}calcEan2Checksum(t){return Number.parseInt(t,10)%4}encodeData(t){let e,r=t,n="",s=void 0;if("upc-a"===this.eanTypes||"upc-e"===this.eanTypes){switch(t.length){case 12:case 11:t="0"+t}if("upc-e"===this.eanTypes){let e;switch(t.length){case 13:case 12:{if(r=t.slice(0,12),e=t.match(/^0([01])([0-9]{5})0{4}([5-9])/))t=`${e[1]}${e[2]}${e[3]}`;else if(e=t.match(/^0([01])([0-9]{4})0{5}([0-9])/))t=`${e[1]}${e[2]}${e[3]}4`;else if(e=t.match(/^0([01])([0-9]{3})0{5}([0-9]{2})/))t=`${e[1]}${e[2]}${e[3]}3`;else{if(!(e=t.match(/^0([01])([0-9]{2})([0-2])0{4}([0-9]{3})/)))throw new Error("EAN: bad data format");t=`${e[1]}${e[2]}${e[4]}${e[3]}`}const n=this.calcEanMod10W3Checksum(r);r+=n,t+=n}break;case 8:case 7:{if(!t.match(/^[01]/))throw new Error("EAN: bad data format");switch(t[6]){case"0":case"1":case"2":r=`0${t[0]}${t.slice(1,3)}${t.slice(6,7)}0000${t.slice(3,6)}`;break;case"3":r=`0${t[0]}${t.slice(1,4)}00000${t.slice(4,6)}`;break;case"4":r=`0${t[0]}${t.slice(1,5)}00000${t.slice(5,6)}`;break;case"5":case"6":case"7":case"8":case"9":r=`0${t[0]}${t.slice(1,6)}0000${t.slice(6,7)}`;break;default:throw new Error("EAN: bad data format")}const e=this.calcEanMod10W3Checksum(r);r+=e,t=t.slice(0,7)+e}}}}switch(this.eanTypes){case"ean-13":case"upc-a":{s="",e=t.slice(0,12),n+="@",s+="1";const r=this.charactersMap.get(String.fromCharCode(48+Number.parseInt(t[0],10)));if(void 0===r)throw new Error("EAN: character is out of range.");const i=r.pattern;for(let e=1;e<7;e++){const r=Number.parseInt(i[e-1],10);n+=String.fromCharCode(16*r+Number.parseInt(t[e],10)),"upc-a"===this.eanTypes&&1===e?s+="1":s+="0"}n+="P",s+="1";for(let e=7;e<12;e++)n+=String.fromCharCode(32+Number.parseInt(t[e],10)),s+="0";const o=this.calcEanMod10W3Checksum(e);e+=String.fromCharCode(48+o),n+=String.fromCharCode(32+o),"upc-a"===this.eanTypes?s+="1":s+="0",n+="`",s+="1"}break;case"ean-8":{s="",e=t.slice(0,7),n+="@",s+="1";for(let e=0;e<4;e++)n+=String.fromCharCode(16+Number.parseInt(t[e],10)),s+="0";n+="P",s+="1";for(let e=4;e<7;e++)n+=String.fromCharCode(32+Number.parseInt(t[e],10)),s+="0";const r=this.calcEanMod10W3Checksum(e);e+=String.fromCharCode(48+r),n+=String.fromCharCode(32+r),s+="0",n+="`",s+="1"}break;case"upc-e":{s="",e=t,n+="",s+="1";const r=this.charactersMap.get(String.fromCharCode(("0"===t[0]?160:176)+Number.parseInt(t[7],10)));if(void 0===r)throw new Error("EAN: character is out of range.");const i=r.pattern;for(let e=1;e<7;e++){const r=Number.parseInt(i[e-1],10);n+=String.fromCharCode(16*r+Number.parseInt(t[e],10)),s+="0"}n+="",s+="1"}break;case"ean-5":{e=t.slice(0,5),n+="";const r=this.charactersMap.get(String.fromCharCode(112+this.calcEan5Checksum(t)));if(void 0===r)throw new Error("EAN: character is out of range.");const s=r.pattern;for(let e=0;e<5;e++){const r=Number.parseInt(s[e],10);e>0&&(n+=""),n+=String.fromCharCode(16*r+Number.parseInt(t[e],10))}}break;case"ean-2":{e=t.slice(0,2),n+="";const r=this.charactersMap.get(String.fromCharCode(128+this.calcEan2Checksum(t)));if(void 0===r)throw new Error("EAN: character is out of range.");const s=r.pattern;for(let e=0;e<2;e++){const r=Number.parseInt(s[e],10);e>0&&(n+=""),n+=String.fromCharCode(16*r+Number.parseInt(t[e],10))}}break;default:throw new Error("EAN: bad data length")}return{data:n,heightData:s,labelText:e,startChar:"",stopChar:""}}getBarSpaceWidth(){const t=this.props.elementWidth;return[0,t,2*t,3*t,4*t]}getBarSpaceHeight(){const t=this.props,e=t.height;return[[{offset:0,height:e}],[{offset:0,height:e+t.guardExtHeight}]]}getRenderStartCoodinate(t,e){const r=this.props,n=r.quietWidth,s=r.quietHeight;switch(this.eanTypes){case"ean-13":case"ean-8":case"upc-a":case"upc-e":return{rx:n,ry:s};case"ean-5":case"ean-2":return{rx:n,ry:s+(r.drawText?r.textHeight:0)};default:throw new Error("EAN: bad data length")}}renderText(t,e,r,n,s){const i=this.props;switch(this.eanTypes){case"ean-13":i.guardExtHeight>0?(t.textBaseline="alphabetic",t.textAlign="start",t.fillText(s.slice(0,1),i.quietWidth-14*i.elementWidth,r-i.quietHeight),t.textAlign="center",t.fillText(s.slice(1,7),i.quietWidth+24*i.elementWidth,r-i.quietHeight),t.fillText(s.slice(7,13),i.quietWidth+71*i.elementWidth,r-i.quietHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s,e/2,r-i.quietHeight));break;case"upc-a":i.guardExtHeight>0?(t.textBaseline="alphabetic",t.font=i.smallFont||t.font,t.textAlign="start",t.fillText(s.slice(1,2),i.quietWidth-12*i.elementWidth,r-i.quietHeight-.2*i.textHeight),t.font=i.font||t.font,t.textAlign="center",t.fillText(s.slice(2,7),i.quietWidth+27.5*i.elementWidth,r-i.quietHeight),t.fillText(s.slice(7,12),i.quietWidth+67.5*i.elementWidth,r-i.quietHeight),t.font=i.smallFont||t.font,t.textAlign="start",t.fillText(s.slice(12,13),e-i.quietWidth+7*i.elementWidth,r-i.quietHeight-.2*i.textHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s.slice(1),e/2,r-i.quietHeight));break;case"ean-8":i.guardExtHeight>0?(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s.slice(0,4),i.quietWidth+17*i.elementWidth,r-i.quietHeight),t.fillText(s.slice(4,8),i.quietWidth+50*i.elementWidth,r-i.quietHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s,e/2,r-i.quietHeight));break;case"upc-e":i.guardExtHeight>0?(t.font=i.smallFont||t.font,t.textAlign="start",t.fillText(s.slice(0,1),i.quietWidth-12*i.elementWidth,r-i.quietHeight-.2*i.textHeight),t.font=i.font||t.font,t.textAlign="center",t.fillText(s.slice(1,7),e/2,r-i.quietHeight),t.font=i.smallFont||t.font,t.textAlign="start",t.fillText(s.slice(7,8),e-i.quietWidth+7*i.elementWidth,r-i.quietHeight-.2*i.textHeight)):(t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s,e/2,r-i.quietHeight));break;case"ean-5":case"ean-2":t.textAlign="center",t.textBaseline="alphabetic",t.fillText(s,e/2,i.quietHeight+i.textHeight);break;default:throw new Error("EAN: bad data length")}}}class Qe extends Xe{get eanTypes(){return"ean-13"}}const Ze=Qe;class Ye extends Xe{get eanTypes(){return"ean-8"}}const Ve=Ye;class Je extends Xe{get eanTypes(){return"ean-5"}}class Ke extends Xe{get eanTypes(){return"ean-2"}}class tr extends Xe{get eanTypes(){return"upc-a"}}class er extends Xe{get eanTypes(){return"upc-e"}}const rr=new Map([[0,"11221"],[1,"21112"],[2,"12112"],[3,"22111"],[4,"11212"],[5,"21211"],[6,"12211"],[7,"11122"],[8,"21121"],[9,"12121"]]),nr=new Map;for(const t of rr)for(const e of rr){const r=10*t[0]+e[0],n=String.fromCharCode(r);let s="";for(let r=0;r<5;r++)s+=t[1][r]+e[1][r];nr.set(n,{index:r,pattern:s})}nr.set("d",{index:100,pattern:"1111"}),nr.set("e",{index:101,pattern:"211"});const sr=Object.assign({},Be,{addCheckDigit:!0,narrowWidth:.33,wideWidth:.66});class ir extends Ee{constructor(t){super(Object.assign({},sr,t),nr)}calcSymbolSize(t,e,r,n){const s=this.props,i=3*s.narrowWidth+2*s.wideWidth;return{tw:2*s.quietWidth+8*s.narrowWidth+i*t.length*2,th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcItfMod10W3Checksum(t){let e=0,r=0;for(let n=0;n<t.length;n++)(n+1)%2?e=(e+Number.parseInt(t[t.length-1-n],10))%10:r=(r+Number.parseInt(t[t.length-1-n],10))%10;return String((10-(3*e+r)%10)%10)}encodeData(t){let e=t;if(this.props.addCheckDigit){e+=this.calcItfMod10W3Checksum(t)}let r="";if(e.length%2)throw new Error("bad data length");for(let t=0;t<e.length;t+=2){const n=Number.parseInt(e.slice(t,t+2),10);r+=String.fromCharCode(n)}return{data:r,labelText:e,startChar:"d",stopChar:"e"}}getBarSpaceWidth(){const t=this.props;return[0,t.narrowWidth,t.wideWidth]}}const or=new Map([["0",{index:0,pattern:"144"}],["1",{index:1,pattern:"114"}],["2",{index:2,pattern:"132"}],["3",{index:3,pattern:"312"}],["4",{index:4,pattern:"123"}],["5",{index:5,pattern:"141"}],["6",{index:6,pattern:"321"}],["7",{index:7,pattern:"213"}],["8",{index:8,pattern:"231"}],["9",{index:9,pattern:"411"}],["-",{index:10,pattern:"414"}],["A",{index:11,pattern:"324"}],["B",{index:12,pattern:"342"}],["C",{index:13,pattern:"234"}],["D",{index:14,pattern:"432"}],["E",{index:15,pattern:"243"}],["F",{index:16,pattern:"423"}],["G",{index:17,pattern:"441"}],["H",{index:18,pattern:"111"}],["[",{index:19,pattern:"13"}],["]",{index:38,pattern:"31"}]]),ar=new Map;for(const t of or.entries())ar.set(t[1].index,t[0]);const hr=new Map([[45,"-"],[48,"0"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[65,"A0"],[66,"A1"],[67,"A2"],[68,"A3"],[69,"A4"],[70,"A5"],[71,"A6"],[72,"A7"],[73,"A8"],[74,"A9"],[75,"B0"],[76,"B1"],[77,"B2"],[78,"B3"],[79,"B4"],[80,"B5"],[81,"B6"],[82,"B7"],[83,"B8"],[84,"B9"],[85,"C0"],[86,"C1"],[87,"C2"],[88,"C3"],[89,"C4"],[90,"C5"]]),lr=Object.assign({},Be,{elementWidth:.6,height:1.2*3});class cr extends Ee{constructor(t){super(Object.assign({},lr,t),or)}calcSymbolSize(t,e,r,n){const s=this.props,i=6*s.elementWidth;return{tw:2*s.quietWidth+21*i+7*s.elementWidth,th:2*s.quietHeight+s.height}}calcCheckDigit(t){let e="",r=0;for(let e=0;e<t.length;e++){const n=this.charactersMap.get(t[e]);if(void 0===n)throw new Error("Japan Post: character is out of range.");r=(r+n.index)%19}const n=ar.get(r);if(void 0===n)throw new Error("Japan Post: check digit is out of range.");return e=n,e}encodeData(t){let e="";for(let r=0;r<t.length;r++){const n=hr.get(t.charCodeAt(r));if(void 0===n)throw new Error("Japan Post: character is out of range.");e+=n}return e+="DDDDDDDDDDDDDDDDD",{data:e.slice(0,20),startChar:"[",stopChar:"]"}}getBarSpaceWidth(){return[0,this.props.elementWidth]}getBarSpaceHeight(){const t=this.props.height;return[[{offset:0,height:t}],[{offset:0,height:t}],[{offset:0,height:2*t/3}],[{offset:t/3,height:2*t/3}],[{offset:t/3,height:t/3}]]}get isHeightModulated(){return!0}renderText(t,e,r,n,s){}}const pr=new Map([["0",{index:0,pattern:"11111220",width:9}],["1",{index:1,pattern:"11112210",width:9}],["2",{index:2,pattern:"11121120",width:9}],["3",{index:3,pattern:"22111110",width:9}],["4",{index:4,pattern:"11211210",width:9}],["5",{index:5,pattern:"21111210",width:9}],["6",{index:6,pattern:"12111120",width:9}],["7",{index:7,pattern:"12112110",width:9}],["8",{index:8,pattern:"12211110",width:9}],["9",{index:9,pattern:"21121110",width:9}],["-",{index:10,pattern:"11122110",width:9}],["$",{index:11,pattern:"11221110",width:9}],[":",{index:12,pattern:"21112120",width:10}],["/",{index:13,pattern:"21211120",width:10}],[".",{index:14,pattern:"21212110",width:10}],["+",{index:15,pattern:"11212120",width:10}],["A",{index:16,pattern:"11221210",width:10}],["B",{index:17,pattern:"12121120",width:10}],["C",{index:18,pattern:"11121220",width:10}],["D",{index:19,pattern:"11122210",width:10}]]),dr=new Map;for(const t of pr.entries())dr.set(t[1].index,t[0]);const ur=Object.assign({},Be,{useRawDataAsText:!0,addCheckDigit:!0,narrowWidth:.33,wideWidth:.66,charGapWidth:void 0,startChar:"",stopChar:""});class gr extends Ee{constructor(t){super(Object.assign({},ur,t),pr)}calcSymbolSize(t,e,r,n){const s=this.props,i=s.charGapWidth||s.narrowWidth;s.narrowWidth,s.wideWidth;let o=2*s.quietWidth-i;const a=`${e}${t}${n}${r}`;for(const t of a){const e=pr.get(t);if(void 0===e)throw new Error("NW7: character is out of range.");const r=e.width-7,n=7-r;o+=s.narrowWidth*n+s.wideWidth*r+i}return{tw:o,th:2*s.quietHeight+s.height+(s.drawText?s.textHeight:0)}}calcCheckDigit(t){let e="";if(this.props.addCheckDigit){let r=0;for(let e=0;e<t.length;e++){const n=pr.get(t[e]);if(void 0===n)throw new Error("NW7: character is out of range.");r=(r+n.index)%16}const n=dr.get((16-r)%16);if(void 0===n)throw new Error("NW7: check digit is out of range.");e=n}return e}encodeData(t){return{data:t,startChar:this.props.startChar||"",stopChar:this.props.stopChar||""}}getBarSpaceWidth(){const t=this.props;return[t.charGapWidth||t.narrowWidth,t.narrowWidth,t.wideWidth]}}var fr;!function(t){t[t.Control=0]="Control",t[t.Number=1]="Number",t[t.Alnum=2]="Alnum",t[t.Binary=3]="Binary"}(fr||(fr={}));const mr=new Map([["L",1],["M",0],["Q",3],["H",2]]),xr=new Map([["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9]]),br=new Map([["0",0],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["A",10],["B",11],["C",12],["D",13],["E",14],["F",15],["G",16],["H",17],["I",18],["J",19],["K",20],["L",21],["M",22],["N",23],["O",24],["P",25],["Q",26],["R",27],["S",28],["T",29],["U",30],["V",31],["W",32],["X",33],["Y",34],["Z",35],[" ",36],["$",37],["%",38],["*",39],["+",40],["-",41],[".",42],["/",43],[",",44]]),wr=[0,21,25,29,33,37,41,45,49,53,57,61,65,69,73,77,81,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,169,173,177],yr=[0,19,34,55,80,108,136,156,194,232,274,324,370,428,461,523,589,647,721,795,861,932,1006,1094,1174,1276,1370,1468,1531,1631,1735,1843,1955,2071,2191,2306,2434,2566,2702,2812,2956],vr=[0,16,28,44,64,86,108,124,154,182,216,254,290,334,365,415,453,507,563,627,669,714,782,860,914,1e3,1062,1128,1193,1267,1373,1455,1541,1631,1725,1812,1914,1992,2102,2216,2334],kr=[0,13,22,34,48,62,76,88,110,132,154,180,206,244,261,295,325,367,397,445,485,512,568,614,664,718,754,808,871,911,985,1033,1115,1171,1231,1286,1354,1426,1502,1582,1666],Sr=[0,9,16,26,36,46,60,66,86,100,122,140,158,180,197,223,253,283,313,341,385,406,442,464,514,538,596,628,661,701,745,793,845,901,961,986,1054,1096,1142,1222,1276],$r=[{L:[[0,0,0,0]],M:[[0,0,0,0]],Q:[[0,0,0,0]],H:[[0,0,0,0]]},{L:[[1,26,19,2]],M:[[1,26,16,4]],Q:[[1,26,13,6]],H:[[1,26,9,8]]},{L:[[1,44,34,4]],M:[[1,44,28,8]],Q:[[1,44,22,11]],H:[[1,44,16,14]]},{L:[[1,70,55,7]],M:[[1,70,44,13]],Q:[[2,35,17,9]],H:[[2,35,13,11]]},{L:[[1,100,80,10]],M:[[2,50,32,9]],Q:[[2,50,24,13]],H:[[4,25,9,8]]},{L:[[1,134,108,13]],M:[[2,67,43,12]],Q:[[2,33,15,9],[2,34,16,9]],H:[[2,33,11,11],[2,34,12,11]]},{L:[[2,86,68,9]],M:[[4,43,27,8]],Q:[[4,43,19,12]],H:[[4,43,15,14]]},{L:[[2,98,78,10]],M:[[4,49,31,9]],Q:[[2,32,14,9],[4,33,15,9]],H:[[4,39,13,13],[1,40,14,13]]},{L:[[2,121,97,12]],M:[[2,60,38,11],[2,61,39,11]],Q:[[4,40,18,11],[2,41,19,11]],H:[[4,40,14,13],[2,41,15,13]]},{L:[[2,146,116,15]],M:[[3,58,36,11],[2,59,37,11]],Q:[[4,36,16,10],[4,37,17,10]],H:[[4,36,12,12],[4,37,13,12]]},{L:[[2,86,68,9],[2,87,69,9]],M:[[4,69,43,13],[1,70,44,13]],Q:[[6,43,19,12],[2,44,20,12]],H:[[6,43,15,14],[2,44,16,14]]},{L:[[4,101,81,10]],M:[[1,80,50,15],[4,81,51,15]],Q:[[4,50,22,14],[4,51,23,14]],H:[[3,36,12,12],[8,37,13,12]]},{L:[[2,116,92,12],[2,117,93,12]],M:[[6,58,36,11],[2,59,37,11]],Q:[[4,46,20,13],[6,47,21,13]],H:[[7,42,14,14],[4,43,15,14]]},{L:[[4,133,107,13]],M:[[8,59,37,11],[1,60,38,11]],Q:[[8,44,20,13],[4,45,21,13]],H:[[12,33,11,14],[4,34,12,14]]},{L:[[3,145,115,15],[1,146,116,15]],M:[[4,64,40,12],[5,65,41,12]],Q:[[11,36,16,10],[5,37,17,10]],H:[[11,36,12,12],[5,37,13,12]]},{L:[[5,109,87,11],[1,110,88,11]],M:[[5,65,41,12],[5,66,42,12]],Q:[[5,54,24,15],[7,55,25,15]],H:[[11,36,12,12],[7,37,13,12]]},{L:[[5,122,98,12],[1,123,99,12]],M:[[7,73,45,14],[3,74,46,14]],Q:[[15,43,19,12],[2,44,20,12]],H:[[3,45,15,15],[13,46,16,15]]},{L:[[1,135,107,14],[5,136,108,14]],M:[[10,74,46,14],[1,75,47,14]],Q:[[1,50,22,14],[15,51,23,14]],H:[[2,42,14,14],[17,43,15,14]]},{L:[[5,150,120,15],[1,151,121,15]],M:[[9,69,43,13],[4,70,44,13]],Q:[[17,50,22,14],[1,51,23,14]],H:[[2,42,14,14],[19,43,15,14]]},{L:[[3,141,113,14],[4,142,114,14]],M:[[3,70,44,13],[11,71,45,13]],Q:[[17,47,21,13],[4,48,22,13]],H:[[9,39,13,13],[16,40,14,13]]},{L:[[3,135,107,14],[5,136,108,14]],M:[[3,67,41,13],[13,68,42,13]],Q:[[15,54,24,15],[5,55,25,15]],H:[[15,43,15,14],[10,44,16,14]]},{L:[[4,144,116,14],[4,145,117,14]],M:[[17,68,42,13]],Q:[[17,50,22,14],[6,51,23,14]],H:[[19,46,16,15],[6,47,17,15]]},{L:[[2,139,111,14],[7,140,112,14]],M:[[17,74,46,14]],Q:[[7,54,24,15],[16,55,25,15]],H:[[34,37,13,12]]},{L:[[4,151,121,15],[5,152,122,15]],M:[[4,75,47,14],[14,76,48,14]],Q:[[11,54,24,15],[14,55,25,15]],H:[[16,45,15,15],[14,46,16,15]]},{L:[[6,147,117,15],[4,148,118,15]],M:[[6,73,45,14],[14,74,46,14]],Q:[[11,54,24,15],[16,55,25,15]],H:[[30,46,16,15],[2,47,17,15]]},{L:[[8,132,106,13],[4,133,107,13]],M:[[8,75,47,14],[13,76,48,14]],Q:[[7,54,24,15],[22,55,25,15]],H:[[22,45,15,15],[13,46,16,15]]},{L:[[10,142,114,14],[2,143,115,14]],M:[[19,74,46,14],[4,75,47,14]],Q:[[28,50,22,14],[6,51,23,14]],H:[[33,46,16,15],[4,47,17,15]]},{L:[[8,152,122,15],[4,153,123,15]],M:[[22,73,45,14],[3,74,46,14]],Q:[[8,53,23,15],[26,54,24,15]],H:[[12,45,15,15],[28,46,16,15]]},{L:[[3,147,117,15],[10,148,118,15]],M:[[3,73,45,14],[23,74,46,14]],Q:[[4,54,24,15],[31,55,25,15]],H:[[11,45,15,15],[31,46,16,15]]},{L:[[7,146,116,15],[7,147,117,15]],M:[[21,73,45,14],[7,74,46,14]],Q:[[1,53,23,15],[37,54,24,15]],H:[[19,45,15,15],[26,46,16,15]]},{L:[[5,145,115,15],[10,146,116,15]],M:[[19,75,47,14],[10,76,48,14]],Q:[[15,54,24,15],[25,55,25,15]],H:[[23,45,15,15],[25,46,16,15]]},{L:[[13,145,115,15],[3,146,116,15]],M:[[2,74,46,14],[29,75,47,14]],Q:[[42,54,24,15],[1,55,25,15]],H:[[23,45,15,15],[28,46,16,15]]},{L:[[17,145,115,15]],M:[[10,74,46,14],[23,75,47,14]],Q:[[10,54,24,15],[35,55,25,15]],H:[[19,45,15,15],[35,46,16,15]]},{L:[[17,145,115,15],[1,146,116,15]],M:[[14,74,46,14],[21,75,47,14]],Q:[[29,54,24,15],[19,55,25,15]],H:[[11,44,15,15],[46,45,16,15]]},{L:[[13,145,115,15],[6,146,116,15]],M:[[14,74,46,14],[23,75,47,14]],Q:[[44,54,24,15],[7,55,25,15]],H:[[59,46,16,15],[1,47,17,15]]},{L:[[12,151,121,15],[7,152,122,15]],M:[[12,75,47,14],[26,76,48,14]],Q:[[39,54,24,15],[14,55,25,15]],H:[[22,45,15,15],[41,46,16,15]]},{L:[[6,151,121,15],[14,152,122,15]],M:[[6,75,47,14],[34,76,48,14]],Q:[[46,54,24,15],[10,55,25,15]],H:[[2,45,15,15],[64,46,16,15]]},{L:[[17,152,122,15],[4,153,123,15]],M:[[29,74,46,14],[14,75,47,14]],Q:[[49,54,24,15],[10,55,25,15]],H:[[24,45,15,15],[46,46,16,15]]},{L:[[4,152,122,15],[18,153,123,15]],M:[[13,74,46,14],[32,75,47,14]],Q:[[48,54,24,15],[14,55,25,15]],H:[[42,45,15,15],[32,46,16,15]]},{L:[[20,147,117,15],[4,148,118,15]],M:[[40,75,47,14],[7,76,48,14]],Q:[[43,54,24,15],[22,55,25,15]],H:[[10,45,15,15],[67,46,16,15]]},{L:[[19,148,118,15],[6,149,119,15]],M:[[18,75,47,14],[31,76,48,14]],Q:[[34,54,24,15],[34,55,25,15]],H:[[20,45,15,15],[61,46,16,15]]}],Mr=[[],[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],Tr=Object.assign({},bt,{version:"auto",ecLevel:"M",encoding:"auto",cellSize:.33,unit:"mm"}),Ar=new C;let Cr=[];const Pr=[{index:0,fn:(t,e)=>(t+e)%2==0},{index:1,fn:(t,e)=>e%2==0},{index:2,fn:(t,e)=>t%3==0},{index:3,fn:(t,e)=>(t+e)%3==0},{index:4,fn:(t,e)=>(Math.floor(t/3)+Math.floor(e/2))%2==0},{index:5,fn:(t,e)=>t*e%2+t*e%3==0},{index:6,fn:(t,e)=>(t*e%2+t*e%3)%2==0},{index:7,fn:(t,e)=>(t*e%3+(t+e)%2)%2==0}];class Or extends wt{constructor(t){super(Object.assign({},Tr,t))}toImgTag(){return vt(this)}toElementStyle(){return kt(this)}toDataUrl(){return St(this)}toSvg(){return $t(this)}toRendered(){return ct(this)}render(t,e){let r=this.getContext(t,xt);const n=Boolean(r);n||(r=new Y,this.setContext(t,xt,r),super.beforeRender(t));const s=this.props.data||"",i=this.encodeData(s),o=this.buildBitmap(i.data,i.version);if(this.drawBitmap(r,o),n)return"";{super.afterRender(t),this.unsetContext(t,xt);const e=o.width*this.props.cellSize+2*this.props.margin,n=e+(this.props.x||0),s=e+(this.props.y||0);return yt(this.props,r,n,s)}}evaluteMask(t){const e=t.width,r=t.height;let n=0;for(let s=0;s<r;s++){let r=null,i=1;for(let o=0;o<e;o++){const e=t.get(o,s);r!==e?i=1:i+=1,5===i?n+=3:5<i&&(n+=1),r=e}}for(let s=0;s<e;s++){let e=null,i=1;for(let o=0;o<r;o++){const r=t.get(s,o);e!==r?i=1:i+=1,5===i?n+=3:5<i&&(n+=1),e=r}}for(let s=0;s<r-1;s++)for(let r=0;r<e-1;r++){const e=t.get(r,s);e===t.get(r+1,s)&&e===t.get(r,s+1)&&e===t.get(r+1,s+1)&&(n+=3)}for(let s=0;s<r;s++)for(let r=0;r<e-10;r++)0!==t.get(r,s)&&0===t.get(r+1,s)&&0!==t.get(r+2,s)&&0!==t.get(r+3,s)&&0!==t.get(r+4,s)&&0===t.get(r+5,s)&&0!==t.get(r+6,s)&&0===t.get(r+7,s)&&0===t.get(r+8,s)&&0===t.get(r+9,s)&&0===t.get(r+10,s)?n+=40:0===t.get(r,s)&&0===t.get(r+1,s)&&0===t.get(r+2,s)&&0===t.get(r+3,s)&&0!==t.get(r+4,s)&&0===t.get(r+5,s)&&0!==t.get(r+6,s)&&0!==t.get(r+7,s)&&0!==t.get(r+8,s)&&0===t.get(r+9,s)&&0!==t.get(r+10,s)&&(n+=40);for(let s=0;s<e;s++)for(let e=0;e<r-10;e++)0!==t.get(s,e)&&0===t.get(s,e+1)&&0!==t.get(s,e+2)&&0!==t.get(s,e+3)&&0!==t.get(s,e+4)&&0===t.get(s,e+5)&&0!==t.get(s,e+6)&&0===t.get(s,e+7)&&0===t.get(s,e+8)&&0===t.get(s,e+9)&&0===t.get(s,e+10)?n+=40:0===t.get(s,e)&&0===t.get(s,e+1)&&0===t.get(s,e+2)&&0===t.get(s,e+3)&&0!==t.get(s,e+4)&&0===t.get(s,e+5)&&0!==t.get(s,e+6)&&0!==t.get(s,e+7)&&0!==t.get(s,e+8)&&0===t.get(s,e+9)&&0!==t.get(s,e+10)&&(n+=40);let s=0,i=0;for(let n=0;n<r;n++)for(let r=0;r<e;r++)0===t.get(r,n)?s++:i++;return n+=10*Math.floor(Math.abs(i/(s+i)*100-50)/5),n}encodeNumberData(t){const e=Math.ceil(10*t.length/24),r=new p(e);let n=0,s=0;for(;n<t.length;n++){const e=xr.get(t[n]);if(void 0===e)return null;s=10*s+e,2==n%3&&(r.writeBits(s,10),s=0)}return n%=3,n&&r.writeBits8(s,1+3*n),{data:r,charLength:t.length}}encodeAlnumData(t){const e=Math.ceil(11*t.length/16),r=new p(e);let n=0,s=0;for(;n<t.length;n++){const e=br.get(t[n]);if(void 0===e)return null;s=45*s+e,1==n%2&&(r.writeBits(s,11),s=0)}return n%2&&r.writeBits8(s,6),{data:r,charLength:t.length}}encode8bitData(t){const e=new p(0,a.encodeToUtf8(t));return{data:e,charLength:e.byteLength}}encodeChunks(t){Array.isArray(t)||(t=[t]);const e=[];for(const r of t)if(r instanceof p)e.push({type:fr.Binary,data:r,charLength:r.byteLength});else if(r instanceof Uint8Array)e.push({type:fr.Binary,data:new p(0,r),charLength:r.length});else if("string"==typeof r){let t,n=null,s=!0;switch(this.props.encoding){case"auto":s=!1;case"number":if(n=this.encodeNumberData(r),t=fr.Number,s||n)break;case"alnum":if(n=this.encodeAlnumData(r),t=fr.Alnum,s||n)break;case"8bit":default:n=this.encode8bitData(r),t=fr.Binary}if(null===n)throw new Error("QrModel2: character is out of range.");e.push({type:t,data:n.data,charLength:n.charLength})}return e}determineSymbolVersion(t){let e,r="auto"===this.props.version?1:this.props.version||1,n=0,s=0;for(;;){s=0;for(const e of t){switch(e.type){case fr.Number:s+=r<10?14:r<27?16:18;break;case fr.Alnum:s+=r<10?13:r<27?15:17;break;case fr.Binary:s+=r<10?12:20}s+=e.data.bitLength}switch(this.props.ecLevel){case"L":e=$r[r].L,n=8*yr[r];break;case"Q":e=$r[r].Q,n=8*kr[r];break;case"H":e=$r[r].H,n=8*Sr[r];break;case"M":default:e=$r[r].M,n=8*vr[r]}if(s<=n)break;if("auto"!==this.props.version||!$r[++r])throw new Error("QrModel2: data is too large.")}return{version:r,segments:e,dataLength:s,maxDataLength:n}}encodeData(t){const e=this.encodeChunks(t),{version:r,segments:n,dataLength:s,maxDataLength:i}=this.determineSymbolVersion(e);let o;{const t=[];for(const n of e){let e=0;const s=new p(3);switch(n.type){case fr.Number:s.writeBits8(1,4),e=r<10?10:r<27?12:14,s.writeBits(n.charLength,e);break;case fr.Alnum:s.writeBits8(2,4),e=r<10?9:r<27?11:13,s.writeBits(n.charLength,e);break;case fr.Binary:s.writeBits8(4,4),e=r<10?8:16,s.writeBits(n.charLength,e)}0<s.bitLength&&t.push(s),t.push(n.data)}if(s<i){let e=i-s;const r=new p(Math.ceil(e/8));let n=Math.min(4,e);r.writeBits8(0,n),e-=n,0<e&&0!=e%8&&(n=e%8,r.writeBits8(0,n),e-=n);for(let t=0;0<e;t++)n=Math.min(8,e),r.writeBits8(0==t%2?236:17,n),e-=n;t.push(r)}o=p.concat(...t).toBytes()}let a=0;const h=[],l=[];for(let t=0,e=0;t<n.length;t++){const r=n[t][0],s=n[t][2],i=n[t][1]-s;let c;Cr.length<=i-1&&(Cr=R.listGx(Ar,Cr,i,0)),c=Cr[i-1];const p=new R(Ar,c,0);for(let t=0;t<r;t++){const t=o.slice(e,e+s).reverse(),r=Uint8Array.from(p.encode(t));h.push(t.reverse()),l.push(r.reverse()),a+=s+i,e+=s}}const c=new Uint8Array(a);{const t=[h,l];let e=0;for(const r of t)for(let t=0,n=!0;n;t++){n=!1;for(let s=0;s<r.length;s++)t<r[s].length&&(c[e++]=r[s][t],n=!0)}}return{data:c,version:r,ecLevel:this.props.ecLevel}}applyMask(t,e,r){const n=t.width,s=t.width;for(let i=0;i<n;i++)for(let o=0;o<s;o++)0===e.get(n-1-i,s-1-o)&&t.set(n-1-i,s-1-o,t.get(n-1-i,s-1-o)^(r(i,o)?1:0))}buildBitmap(t,e){const r=wr[e],n=r,s=r,i=new d(r,r),o=new d(r,r);{o.fill(0,s-9,8,9,1),o.fill(n-9,0,9,8,1),o.fill(n-9,s-9,9,9,1),7<=e&&(o.fill(8,s-6,3,6,1),o.fill(n-6,8,6,3,1));for(const{px:t,py:e}of[{px:n-7,py:s-7},{px:0,py:s-7},{px:n-7,py:0}])i.set(t+0,e+0,1),i.set(t+0,e+1,1),i.set(t+0,e+2,1),i.set(t+0,e+3,1),i.set(t+0,e+4,1),i.set(t+0,e+5,1),i.set(t+0,e+6,1),i.set(t+1,e+0,1),i.set(t+2,e+0,1),i.set(t+3,e+0,1),i.set(t+4,e+0,1),i.set(t+5,e+0,1),i.set(t+6,e+0,1),i.set(t+6,e+1,1),i.set(t+6,e+2,1),i.set(t+6,e+3,1),i.set(t+6,e+4,1),i.set(t+6,e+5,1),i.set(t+1,e+6,1),i.set(t+2,e+6,1),i.set(t+3,e+6,1),i.set(t+4,e+6,1),i.set(t+5,e+6,1),i.set(t+6,e+6,1),i.set(t+2,e+2,1),i.set(t+2,e+3,1),i.set(t+2,e+4,1),i.set(t+3,e+2,1),i.set(t+4,e+2,1),i.set(t+4,e+3,1),i.set(t+4,e+4,1),i.set(t+3,e+4,1),i.set(t+3,e+3,1);const t=Mr[e];for(let e=0;e<t.length;e++){const r=n-t[e]-1;for(let e=0;e<t.length;e++){const n=s-t[e]-1;let a=!0;for(let t=r-2;t<=r+2;t++){for(let e=n-2;e<=n+2;e++)if(o.get(t,e)){a=!1;break}if(!a)break}a&&(o.fill(r-2,n-2,5,5,1),i.set(r-2,n+2,1),i.set(r-2,n+1,1),i.set(r-2,n,1),i.set(r-2,n-1,1),i.set(r-2,n-2,1),i.set(r+2,n+2,1),i.set(r+2,n+1,1),i.set(r+2,n,1),i.set(r+2,n-1,1),i.set(r+2,n-2,1),i.set(r+1,n-2,1),i.set(r+1,n+2,1),i.set(r,n+2,1),i.set(r,n,1),i.set(r,n-2,1),i.set(r-1,n-2,1),i.set(r-1,n+2,1))}}o.fill(8,s-7,n-17,1,1),o.fill(n-7,8,1,s-17,1);for(let t=8;t<=s-9;t+=2)i.set(n-7,t,1),i.set(t,s-7,1)}{let e=1,r=-1,a=!0,h=!1;for(let l=0;l<t.length;l++)for(let c=7;c>=0;c--)for(;;)if(h?e+=1:s-1===r&&a||0===r&&!a?(e+=e===n-8?2:1,a=!a):(e-=1,a?r+=1:r-=1),h=!h,0===o.get(e,r)){i.set(e,r,t[l]>>>c&1);break}}if(7<=e){const t=e<<12|new E(Ar,7973).encode(e);i.set(n-1,10,t>>>0&1),i.set(n-1,9,t>>>1&1),i.set(n-1,8,t>>>2&1),i.set(n-2,10,t>>>3&1),i.set(n-2,9,t>>>4&1),i.set(n-2,8,t>>>5&1),i.set(n-3,10,t>>>6&1),i.set(n-3,9,t>>>7&1),i.set(n-3,8,t>>>8&1),i.set(n-4,10,t>>>9&1),i.set(n-4,9,t>>>10&1),i.set(n-4,8,t>>>11&1),i.set(n-5,10,t>>>12&1),i.set(n-5,9,t>>>13&1),i.set(n-5,8,t>>>14&1),i.set(n-6,10,t>>>15&1),i.set(n-6,9,t>>>16&1),i.set(n-6,8,t>>>17&1),i.set(10,s-1,t>>>0&1),i.set(9,s-1,t>>>1&1),i.set(8,s-1,t>>>2&1),i.set(10,s-2,t>>>3&1),i.set(9,s-2,t>>>4&1),i.set(8,s-2,t>>>5&1),i.set(10,s-3,t>>>6&1),i.set(9,s-3,t>>>7&1),i.set(8,s-3,t>>>8&1),i.set(10,s-4,t>>>9&1),i.set(9,s-4,t>>>10&1),i.set(8,s-4,t>>>11&1),i.set(10,s-5,t>>>12&1),i.set(9,s-5,t>>>13&1),i.set(8,s-5,t>>>14&1),i.set(10,s-6,t>>>15&1),i.set(9,s-6,t>>>16&1),i.set(8,s-6,t>>>17&1)}let a=0;{let t=Number.MAX_SAFE_INTEGER;for(const e of Pr){this.applyMask(i,o,e.fn);const r=this.evaluteMask(i);r<t&&(a=e.index,t=r),this.applyMask(i,o,e.fn)}this.applyMask(i,o,Pr[a].fn)}{const t=this.props,e=mr.get(t.ecLevel);if(void 0===e)throw new Error(`Qr#buildBitmap: bad ecLevel '${t.ecLevel}' is specified.`);let r=e<<3|Pr[a].index;r=21522^(r<<10|new E(Ar,1335).encode(r));for(let t=0;t<=7;t++)i.set(t,s-9,r>>>t&1);i.set(n-8,s-9,r>>>8&1);for(let t=9;t<=14;t++)i.set(t+n-15,s-9,r>>>t&1);for(let t=0;t<=5;t++)i.set(n-9,s-1-t,r>>>t&1);for(let t=6;t<=7;t++)i.set(n-9,s-2-t,r>>>t&1);i.set(n-9,7,1);for(let t=8;t<=14;t++)i.set(n-9,14-t,r>>>t&1)}return i}drawBitmap(t,e){const r=this.props.cellSize,n=e.width,s=e.height;for(let i=0;i<n;i++)for(let o=0;o<s;o++)e.get(i,o)&&t.rect((n-1-i)*r,(s-1-o)*r,r,r);t.fill(),t.beginPath()}}r.d(e,"Base64",(function(){return n})),r.d(e,"Escape",(function(){return s})),r.d(e,"Unescape",(function(){return i})),r.d(e,"QueryString",(function(){return o})),r.d(e,"TextEncoding",(function(){return a})),r.d(e,"WordWrap",(function(){return h})),r.d(e,"Bitmap",(function(){return d})),r.d(e,"StreamSeekOrigin",(function(){return c})),r.d(e,"BitStreamWriter",(function(){return p})),r.d(e,"FileFetcher",(function(){return y})),r.d(e,"FileSaver",(function(){return v})),r.d(e,"Html5FileFetcher",(function(){return k})),r.d(e,"LoggerLogLevel",(function(){return g})),r.d(e,"Logger",(function(){return m})),r.d(e,"Uri",(function(){return S})),r.d(e,"Integer53",(function(){return l})),r.d(e,"ArrayPolynomialRing",(function(){return $})),r.d(e,"NumberArrayPolynomialRing",(function(){return M})),r.d(e,"Equation",(function(){return T})),r.d(e,"Gf2Ext",(function(){return A})),r.d(e,"Gf2e8Field",(function(){return C})),r.d(e,"Gf2e6Field",(function(){return P})),r.d(e,"Gf2PrimeFieldHelper",(function(){return N})),r.d(e,"Gf2PrimeBitPolynomialRing",(function(){return D})),r.d(e,"Gf2PrimeArrayPolynomialRing",(function(){return L})),r.d(e,"GfPrime",(function(){return O})),r.d(e,"RealField",(function(){return B})),r.d(e,"BCH",(function(){return E})),r.d(e,"CRC32",(function(){return _})),r.d(e,"ReedSolomon",(function(){return R})),r.d(e,"SvgCanvasImageData",(function(){return q})),r.d(e,"SvgCanvas2DGradient",(function(){return G})),r.d(e,"SvgCanvas2DLinerGradient",(function(){return z})),r.d(e,"SvgCanvas2DRadialGradient",(function(){return X})),r.d(e,"SvgCanvas2DPattern",(function(){return Q})),r.d(e,"SvgCanvas",(function(){return Y})),r.d(e,"Point2D",(function(){return W})),r.d(e,"Vector2D",(function(){return F})),r.d(e,"Rect2D",(function(){return U})),r.d(e,"TransferMatrix2D",(function(){return j})),r.d(e,"WebColor",(function(){return I})),r.d(e,"RedAgateComponent",(function(){return J})),r.d(e,"RedAgatePhantomComponent",(function(){return K})),r.d(e,"createElement",(function(){return rt})),r.d(e,"cloneElement",(function(){return nt})),r.d(e,"createElementFromComponentInstance",(function(){return st})),r.d(e,"transform",(function(){return it})),r.d(e,"elementStyleRenderer",(function(){return ot})),r.d(e,"htmlAttributesRenderer",(function(){return at})),r.d(e,"htmlRenderer",(function(){return ht})),r.d(e,"renderAsHtml",(function(){return lt})),r.d(e,"renderAsHtml_noDefer",(function(){return ct})),r.d(e,"render",(function(){return pt})),r.d(e,"renderOnAwsLambda",(function(){return dt})),r.d(e,"renderOnExpress",(function(){return ut})),r.d(e,"Fragment",(function(){return gt})),r.d(e,"Query",(function(){return ft})),r.d(e,"query",(function(){return mt})),r.d(e,"CONTEXT_SVG_CANVAS",(function(){return xt})),r.d(e,"CONTEXT_SVG_PATH",(function(){return"CONTEXT_SVG_PATH"})),r.d(e,"CONTEXT_ASSET_",(function(){return"CONTEXT_ASSET_"})),r.d(e,"shapePropsDefault",(function(){return bt})),r.d(e,"Shape",(function(){return wt})),r.d(e,"renderSvgCanvas",(function(){return yt})),r.d(e,"toImgTag",(function(){return vt})),r.d(e,"toElementStyle",(function(){return kt})),r.d(e,"toDataUrl",(function(){return St})),r.d(e,"toSvg",(function(){return $t})),r.d(e,"Repeat",(function(){return Mt})),r.d(e,"ForEach",(function(){return Tt})),r.d(e,"If",(function(){return At})),r.d(e,"Do",(function(){return Ct})),r.d(e,"Facet",(function(){return Pt})),r.d(e,"Template",(function(){return Ot})),r.d(e,"Html4_01_Strict",(function(){return Nt})),r.d(e,"Html4_01_Transitional",(function(){return Dt})),r.d(e,"Html4_01_Frameset",(function(){return Lt})),r.d(e,"Xhtml1_0_Strict",(function(){return Bt})),r.d(e,"Xhtml1_0_Transitional",(function(){return Et})),r.d(e,"Xhtml1_0_Frameset",(function(){return _t})),r.d(e,"Html5",(function(){return Rt})),r.d(e,"Xml",(function(){return It})),r.d(e,"HtmlImposition",(function(){return Ht})),r.d(e,"Svg",(function(){return Wt})),r.d(e,"ambientPropsDefault",(function(){return Ft})),r.d(e,"Ambient",(function(){return Ut})),r.d(e,"arcPropsDefault",(function(){return jt})),r.d(e,"Arc",(function(){return qt})),r.d(e,"canvasPropsDefault",(function(){return Gt})),r.d(e,"Canvas",(function(){return zt})),r.d(e,"circlePropsDefault",(function(){return Xt})),r.d(e,"Circle",(function(){return Qt})),r.d(e,"curvePropsDefault",(function(){return Zt})),r.d(e,"Curve",(function(){return Yt})),r.d(e,"gridLinePropsDefault",(function(){return Vt})),r.d(e,"GridLine",(function(){return Jt})),r.d(e,"Group",(function(){return Kt})),r.d(e,"linePropsDefault",(function(){return te})),r.d(e,"Line",(function(){return ee})),r.d(e,"pathPropsDefault",(function(){return re})),r.d(e,"Path",(function(){return ne})),r.d(e,"piePropsDefault",(function(){return se})),r.d(e,"Pie",(function(){return ie})),r.d(e,"polygonPropsDefault",(function(){return oe})),r.d(e,"Polygon",(function(){return ae})),r.d(e,"rectPropsDefault",(function(){return he})),r.d(e,"Rect",(function(){return le})),r.d(e,"roundRectPropsDefault",(function(){return ce})),r.d(e,"RoundRect",(function(){return pe})),r.d(e,"svgAssetFragmentPropsDefault",(function(){return de})),r.d(e,"SvgAssetFragment",(function(){return ue})),r.d(e,"svgFragmentPropsDefault",(function(){return ge})),r.d(e,"SvgFragment",(function(){return fe})),r.d(e,"textPropsDefault",(function(){return me})),r.d(e,"Text",(function(){return xe})),r.d(e,"SvgImposition",(function(){return be})),r.d(e,"Asset",(function(){return we})),r.d(e,"Image",(function(){return ye})),r.d(e,"Script",(function(){return ve})),r.d(e,"Style",(function(){return ke})),r.d(e,"Font",(function(){return Se})),r.d(e,"SingleFont",(function(){return $e})),r.d(e,"printerMarksDefault",(function(){return Me})),r.d(e,"PrinterMarks",(function(){return Te})),r.d(e,"Lambdas",(function(){return Ae})),r.d(e,"App",(function(){return Ce})),r.d(e,"HtmlRenderer",(function(){return Oe})),r.d(e,"ReactDOMServer",(function(){return De})),r.d(e,"ReactHost",(function(){return Le})),r.d(e,"barcodeBasePropsDefault",(function(){return Be})),r.d(e,"BarcodeBase",(function(){return Ee})),r.d(e,"code39PropsDefault",(function(){return He})),r.d(e,"Code39",(function(){return We})),r.d(e,"code128PropsDefault",(function(){return je})),r.d(e,"Code128",(function(){return qe})),r.d(e,"eanPropsDefault",(function(){return ze})),r.d(e,"EanBase",(function(){return Xe})),r.d(e,"Ean13",(function(){return Qe})),r.d(e,"Gtin13",(function(){return Ze})),r.d(e,"Ean8",(function(){return Ye})),r.d(e,"Gtin8",(function(){return Ve})),r.d(e,"Ean5",(function(){return Je})),r.d(e,"Ean2",(function(){return Ke})),r.d(e,"UpcA",(function(){return tr})),r.d(e,"UpcE",(function(){return er})),r.d(e,"itfPropsDefault",(function(){return sr})),r.d(e,"Itf",(function(){return ir})),r.d(e,"japanPostalPropsDefault",(function(){return lr})),r.d(e,"JapanPostal",(function(){return cr})),r.d(e,"nw7PropsDefault",(function(){return ur})),r.d(e,"Nw7",(function(){return gr})),r.d(e,"qrPropsDefault",(function(){return Tr})),r.d(e,"Qr",(function(){return Or}))}])}));
//# sourceMappingURL=red-agate.min.js.map