!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tynder=t():e.tynder=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(11),o=n(13);function a(e){if(e.evalCount++,e.config.maxEvalCount&&e.config.maxEvalCount<e.evalCount)throw new r.b}function s(e,t,n,r){if(t.length<n)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${n} / args: ${t.length}.`);if(r&&r<t.length)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${r} / args: ${t.length}.`);return t}const i={}.constructor,c=Function;function l(e,t){if("__proto__"===t||"__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if("prototype"===t||"constructor"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if(i.hasOwnProperty(t))throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if("call"===t||"arguments"===t||"caller"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);return t}function u(e,t,n){if(t===o.a||"__proto__"===n||"__defineGetter__"===n||"__defineSetter__"===n||"__lookupGetter__"===n||"__lookupSetter__"===n)throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(!("prototype"!==n&&"constructor"!==n||null!=t&&"function"!=typeof t))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if((null==t||t===i)&&i.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(null==t||t===c){let t=c;for(;t;){if(t.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);t=t.__proto__}}if("function"==typeof t&&!t.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);return n}},function(e,t,n){"use strict";function r(e,t){return[{symbol:e.config.reservedNames.quote},t]}function o(e,t){return[{symbol:e.config.reservedNames.backquote},t]}function a(e,t){return[{symbol:e.config.reservedNames.unquote},t]}function s(e,t){return[{symbol:e.config.reservedNames.spread},t]}function i(e,t){return[{symbol:e.config.reservedNames.splice},t]}function c(e,t){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"symbol")?void 0!==t?e.symbol===t?e:null:e:null}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c}))},function(e,t,n){"use strict";var r;!function(e){e[e.InvalidDefinition=1]="InvalidDefinition",e[e.Required=2]="Required",e[e.TypeUnmatched=3]="TypeUnmatched",e[e.AdditionalPropUnmatched=4]="AdditionalPropUnmatched",e[e.RepeatQtyUnmatched=5]="RepeatQtyUnmatched",e[e.SequenceUnmatched=6]="SequenceUnmatched",e[e.ValueRangeUnmatched=7]="ValueRangeUnmatched",e[e.ValuePatternUnmatched=8]="ValuePatternUnmatched",e[e.ValueLengthUnmatched=9]="ValueLengthUnmatched",e[e.ValueUnmatched=10]="ValueUnmatched"}(r||(r={})),n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"b",(function(){return h}));var r=n(1),o=n(0);function a(e){switch(typeof e){case"object":case"symbol":case"function":return NaN;default:return Number(e)}}function s(e,t){if(e.config.enableSplice)for(let n=t.length-1;n>=0;n--){Array.isArray(t[n])&&Object(r.b)(t[n][0],e.config.reservedNames.splice)&&(t=t.slice(0,n).concat(t[n][1],t.slice(n+1)))}return t}function i(e,t,n){const r=e.macroMap.get(t.symbol);let o=null;if(r){let a=r;const s=n.slice(1);for(;a;){if(!a.formalArgs)return{fn:a.fn(e,t.symbol),actualArgs:n};{const r=y(e,t.symbol,a.formalArgs,Boolean(a.lastIsSpread),s);if(!r.error)return{fn:a.fn(e,t.symbol,r.formalArgs),actualArgs:n.slice(0,1).concat(r.actualArgs)};o=r.error,a=a.next}}if(o)throw new Error(o)}return!1}function c(e,t,n){for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r&&Object.prototype.hasOwnProperty.call(r.scope,t.symbol))return r.scope;if(r.capturedScopes&&Object.prototype.hasOwnProperty.call(r.capturedScopes,t.symbol))return r.capturedScopes[t.symbol];if(!r.isBlockLocal)break}const r=b(e);return Object.prototype.hasOwnProperty.call(r.scope,t.symbol)?r.scope:n?null:d(e).scope}function l(e,t){const n=c(e,t,!0);if(n)return n[t.symbol];const r=e.symbolMap.get(t.symbol);if(r)return r.fn(e,t.symbol);if(e.config.valueSymbolResolverFallback)return e.config.valueSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveValueSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}function u(e,t){const n={};for(const r of t){const t=c(e,r,!0);if(null===t)throw new Error(`[SX] collectCapturedVariables: Unresolved symbols ${r}`);Object(o.c)("collectCapturedVariables",n,r.symbol),n[r.symbol]=t}return n}function m(e){const t=[];for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r.capturedScopes&&t.unshift(r.capturedScopes),!r.isBlockLocal)break}return t.length>0?Object.assign({},...t):void 0}function f(e,t,n,r){e.scopes.push({isBlockLocal:n,scope:t,capturedScopes:r})}function p(e){if(e.scopes.length<2)throw new Error("[SX] uninstallScope: Unable to pop stack.");return e.scopes.pop()}function d(e){return e.scopes[e.scopes.length-1]}function b(e){return e.scopes[0]}function y(e,t,n,o,a){if(n=n.slice(0),(a=a.slice(0)).length+(o?1:0)<n.length)return{error:`[SX] macro call (${t}): Actual args too short: actual ${a.length} / formal ${n.length}.`};for(let e=n.length-(o?2:1);e>=0;e--){let o=n[e].symbol;if(o.startsWith("!")){if(n[e].symbol=n[e].symbol.slice(1),o=n[e].symbol,!Object(r.b)(a[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not symbol.`}}else if(o.startsWith("<")&&o.endsWith(">")){if(n[e].symbol=n[e].symbol.slice(1,-1),o=n[e].symbol,!Object(r.b)(a[e],o))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not expected symbol.`};n=n.slice(0,e).concat(n.slice(e+1)),a=a.slice(0,e).concat(a.slice(e+1))}else{const s=o.lastIndexOf(":");if(0<s){const i=o.slice(s+1);switch(i){case"number":if("number"!=typeof a[e])return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not number.`};break;case"string":if("string"!=typeof a[e])return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not string.`};break;case"function":if(!Array.isArray(a[e])||!Object(r.b)(a[e][0]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not function.`};break;case"list":if(!Array.isArray(a[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not list.`};break;case"symbol":if(!Object(r.b)(a[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${o}) is not symbol.`};break;case"any":break;default:return{error:`[SX] macro call (${t}): Formal arg(${e}: ${o}) is unknown type ${i}.`}}n[e].symbol=n[e].symbol.slice(0,s)}}}return{formalArgs:n,actualArgs:a}}function g(e,t,n){if(Array.isArray(n[n.length-1])){const r=n.slice(0,n.length-1),o=n[n.length-1];if(o&&"object"==typeof o[0]&&o[0].symbol===e.config.reservedNames.if&&Array.isArray(o[3])&&"object"==typeof o[3][0]&&o[3][0].symbol===e.config.reservedNames.self){const n=`$__tempvar__$$ec${e.evalCount++}$$_`,a=t.map((e,t)=>({symbol:`${n}_$i${t}_${e.symbol}`}));return[[{symbol:e.config.reservedNames.until},o[1],[{symbol:e.config.reservedNames.let},[...a],...r,...o[3].slice(1).map((t,n)=>[{symbol:e.config.reservedNames.set},a[n],t]),...a.map((n,r)=>[{symbol:e.config.reservedNames.set},t[r],n])]],...r,o[2]]}}return n}function h(e,t){if(Object(o.d)(e),null==t)return t;let n=t;for(;Array.isArray(n);){{if(0===n.length)return n;n=s(e,n);const t=Object(r.b)(n[0]);if(!t)break;{const r=i(e,t,n);if(!r)break;n=r.fn(r.actualArgs)}}Object(o.d)(e)}if(Array.isArray(n)){if(n=n.slice(0),0<n.length){const t=Object(r.b)(n[0]);if(t){if(t.symbol===e.config.reservedNames.quote)return n.slice(1,2)[0];if(t.symbol===e.config.reservedNames.backquote)return n=n.slice(1,2)[0],Array.isArray(n)&&(n=function e(t,n){for(let o=0;o<n.length;o++){Array.isArray(n[o])&&Object(r.b)(n[o][0],t.config.reservedNames.unquote)&&(n=n.slice(0,o).concat([h(t,n[o][1])],n.slice(o+1))),Array.isArray(n[o])&&((n=n.slice(0))[o]=e(t,n[o]))}return s(t,n)}(e,n)),n;if(t.symbol===e.config.reservedNames.eval)return h(e,h(e,n.slice(1,2)[0]))}const o=[];for(let t=1;t<n.length;t++){if(Array.isArray(n[t])&&Object(r.b)(n[t][0],e.config.reservedNames.spread)){o.push(t);const r=h(e,n[t][1]);n[t]=Array.isArray(r)?r:[r]}else n[t]=h(e,n[t])}for(const e of o.reverse())n=n.slice(0,e).concat(n[e],n.slice(e+1));let a;if(a="function"==typeof n[0]?n[0]:t?function(e,t){if("function"==typeof t)return t;const n=e.funcMap.get(t.symbol);if(n)return n.fn(e,t.symbol);{const n=l(e,t);if("function"==typeof n)return n;if(e.config.funcSymbolResolverFallback)return e.config.funcSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveFunctionSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}}(e,t):h(e,n[0]),"function"!=typeof a)throw new Error(`[SX] evaluate: First item of list is not a function: ${JSON.stringify(n)}.`);n=a(...n.slice(1))}}else if(e.config.wrapExternalValue&&Object.prototype.hasOwnProperty.call(n,"value"))n=n.value;else if(Object.prototype.hasOwnProperty.call(n,"symbol"))n=l(e,n);else if(Object.prototype.hasOwnProperty.call(n,"car")){const t=h(e,n.car),r=h(e,n.cdr);if(Array.isArray(r)){const e=r.slice(0);e.unshift(t),n=e}else n={car:t,cdr:r}}else Object.prototype.hasOwnProperty.call(n,"dotted")?n=[h(e,n.dotted)]:Object.prototype.hasOwnProperty.call(n,"comment")&&(n=[]);return n}},function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"p",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"l",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return y})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return _})),n.d(t,"q",(function(){return v})),n.d(t,"B",(function(){return j})),n.d(t,"E",(function(){return O})),n.d(t,"C",(function(){return k})),n.d(t,"r",(function(){return w})),n.d(t,"D",(function(){return x})),n.d(t,"y",(function(){return S})),n.d(t,"w",(function(){return N})),n.d(t,"s",(function(){return T})),n.d(t,"t",(function(){return A})),n.d(t,"x",(function(){return E})),n.d(t,"v",(function(){return I})),n.d(t,"u",(function(){return P})),n.d(t,"z",(function(){return C})),n.d(t,"A",(function(){return U}));var r=n(7);function o(e,...t){switch(e.kind){case"object":{const n=[];for(const r of t){const t=e.members.find(e=>e[0]===r);if(t)if(t[2]){const e=[...t];3<e.length?e[2]=!1:e.length=2,n.push(e)}else n.push(t)}return{kind:"object",members:n}}case"symlink":case"operator":return{kind:"operator",operator:"picked",operands:[e,...t]};default:return{kind:"object",members:[]}}}function a(e,...t){switch(e.kind){case"object":{const n=[];for(const r of e.members)if(!t.find(e=>r[0]===e))if(r[2]){const e=[...r];3<e.length?e[2]=!1:e.length=2,n.push(e)}else n.push(r);return{kind:"object",members:n}}case"symlink":case"operator":return{kind:"operator",operator:"omit",operands:[e,...t]};default:return{kind:"object",members:[]}}}function s(e){switch(e.kind){case"object":{const t=[];for(const n of e.members){let e="optional"===n[1].kind?n:[n[0],p(n[1]),...n.slice(2)];e[2]&&(e=[...e],3<e.length?e[2]=!1:e.length=2),e[1].name=e[0];const r=Object.assign({},e[1].optional);e[1].optional=r,r.name&&r.name!==r.typeName&&delete r.name,!r.name&&r.typeName&&(r.name=r.typeName),t.push(e)}return{kind:"object",members:t}}case"symlink":case"operator":return{kind:"operator",operator:"partial",operands:[e]};default:return e}}function i(...e){if(0===e.length)throw new Error("Empty intersection type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"intersect",operands:e.slice()};let t=null;const n=new Map;for(const r of e){if(!r||"object"!=typeof r)return{kind:"never"};if(t&&t.kind!==r.kind)return{kind:"never"};if(t=r,"object"===r.kind)for(const e of r.members)if(e[2]){const t=[...e];3<t.length?t[2]=!1:t.length=2,n.set(e[0],t)}else n.set(e[0],e)}return t&&"object"!==t.kind?t:{kind:"object",members:Array.from(n.values())}}function c(...e){if(0===e.length)throw new Error("Empty union type is not allowed.");if(1===e.length){const t=e[0];return t&&"object"==typeof t?t:f(t)}const t={kind:"one-of",oneOf:[]};for(const n of e)n&&"object"==typeof n?"one-of"===n.kind?t.oneOf=t.oneOf.concat(n.oneOf):t.oneOf.push(n):t.oneOf.push(f(n));return t}function l(...e){if(0===e.length)throw new Error("Empty subtraction type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"subtract",operands:e.slice()};let t=e[0];if(!t||"object"!=typeof t||"object"!==t.kind)throw new Error("First parameter of subtraction type should be 'object'.");for(const n of e.slice(1))n&&"object"==typeof n&&"object"===n.kind&&(t=a(t,...n.members.map(e=>e[0])));return t}function u(e){switch(e){case"never":return{kind:"never"};case"any":return{kind:"any"};case"unknown":return{kind:"unknown"};case"number":case"integer":case"bigint":case"string":case"boolean":case"null":case"undefined":return{kind:"primitive",primitiveName:e};case"never?":return p({kind:"never"});case"any?":return p({kind:"any"});case"unknown?":return p({kind:"unknown"});case"number?":case"integer?":case"bigint?":case"string?":case"boolean?":case"null?":case"undefined?":return p({kind:"primitive",primitiveName:e.substring(0,e.length-1)});default:throw new Error(`Unknown primitive type assertion: ${e}`)}}function m(e){return{kind:"primitive",primitiveName:"string",pattern:e}}function f(e){if(null==e)return{kind:"primitive-value",value:e};switch(typeof e){case"number":case"bigint":case"string":case"boolean":return{kind:"primitive-value",value:e};default:throw new Error(`Unknown primitive value assertion: ${e}`)}}function p(e){return e&&"object"==typeof e&&e.kind?"optional"===e.kind?e:Object.assign({kind:"optional",optional:e},e.typeName?{typeName:e.typeName}:{}):{kind:"optional",optional:f(e)}}function d(e,t){return e&&"object"==typeof e&&e.kind?{kind:"repeated",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,repeated:e}:{kind:"repeated",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,repeated:u(e)}}function b(...e){return{kind:"sequence",sequence:e.map(e=>e&&"object"==typeof e&&e.kind?e:f(e))}}function y(e,t){return e&&"object"==typeof e&&e.kind?{kind:"spread",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,spread:e}:{kind:"spread",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,spread:f(e)}}function g(...e){const t=e.slice();let n=0;for(let e=0;e<t.length;e++){if(Object(r.b)(r.a,t[e][0]))throw new Error(`Unsafe symbol name is appeared in enum assertion: ${t[e][0]}`);null===t[e][1]||void 0===t[e][1]?t[e][1]=n++:"number"==typeof t[e][1]&&(n=t[e][1]+1),t[e][2]||(t[e].length=2)}return{kind:"enum",values:t}}function h(...e){const t=e.slice().reverse();for(const n of e)if("string"==typeof n[0]){if(Object(r.b)(r.a,n[0]))throw new Error(`Unsafe symbol name is appeared in object assertion: ${n[0]}`);if(e.find(e=>e[0]===n[0])!==t.find(e=>e[0]===n[0]))throw new Error(`Duplicated member is found: ${n[0]}`)}const n=e.filter(e=>"string"==typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?[e[0],j(e[1],e[0]),e[2]]:[e[0],j(f(e[1]),e[0]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]),o=e.filter(e=>"string"!=typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?e:[e[0],f(e[1]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]);return Object.assign({kind:"object",members:n},0<o.length?{additionalProps:o}:{})}function $(e,t){if(e===t)return!1;if(e.typeName&&(e.typeName===t.typeName||"symlink"===t.kind&&e.typeName===t.symlinkTargetName))return!1;if("object"===t.kind&&t.baseTypes)for(const n of t.baseTypes)if(!$(e,n))return!1;return!0}function _(e,...t){const n={kind:"object",members:[],baseTypes:[]};for(const r of t)switch(r.kind){case"object":if(!$(e,r))throw new Error(`Recursive extend is found: ${e.name||"(unnamed)"}`);for(const e of r.members)n.members.find(t=>t[0]===e[0])||n.members.push([e[0],e[1],!0,...e.slice(3)]);case"symlink":n.baseTypes.push(r);break;case"operator":throw new Error(`Unresolved type operator is found: ${r.operator}`)}n.members=e.members.concat(n.members),e.baseTypes&&(n.baseTypes=e.baseTypes.filter(e=>"symlink"!==e.kind).concat(n.baseTypes)),0===n.baseTypes.length&&delete n.baseTypes;const r=n.members.slice().reverse();for(const t of n.members)if(n.members.find(e=>e[0]===t[0])!==r.find(e=>e[0]===t[0]))throw new Error(`Duplicated member is found: ${t[0]} in ${e.name||"(unnamed)"}`);let o=[];if(n.baseTypes)for(const e of n.baseTypes)"object"===e.kind&&e.additionalProps&&0<e.additionalProps.length&&(o=o.concat(e.additionalProps.map(e=>[e[0],e[1],!0,...e.slice(3)])));return e.additionalProps&&0<e.additionalProps.length&&(o=o.concat(e.additionalProps)),0<o.length&&(n.additionalProps=o),n}function v(e){return{kind:"symlink",symlinkTargetName:e}}function j(e,t){return t?Object.assign(Object.assign({},e),{name:t}):e}function O(e,t){return t?Object.assign(Object.assign({},e),{typeName:t}):e}function k(e,t){return t?Object.assign(Object.assign({},e),{originalTypeName:t}):e}function w(e,t){return t?Object.assign(Object.assign({},e),{docComment:t}):e}function x(e,t){return n=>{var r;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@range' parameter 'minValue' should be number or string.");if("number"!=typeof t&&"string"!=typeof t)throw new Error("Decorator '@range' parameter 'maxValue' should be number or string.");if("optional"===(null===(r=n)||void 0===r?void 0:r.kind)){const r=n.optional;if("primitive"!==r.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},r),{minValue:e,maxValue:t})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{minValue:e,maxValue:t})}}function S(e){return t=>{var n;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@minValue' parameter 'minValue' should be number or string.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{minValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{minValue:e})}}function N(e){return t=>{var n;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@maxValue' parameter 'maxValue' should be number or string.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{maxValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{maxValue:e})}}function T(e){return t=>{var n;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@greaterThan' parameter 'greaterThan' should be number or string.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{greaterThanValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{greaterThanValue:e})}}function A(e){return t=>{var n;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@lessThan' parameter 'lessThan' should be number or string.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{lessThanValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{lessThanValue:e})}}function E(e){return t=>{var n;if("number"!=typeof e)throw new Error("Decorator '@minLength' parameter 'minLength' should be number.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{minLength:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{minLength:e})}}function I(e){return t=>{var n;if("number"!=typeof e)throw new Error("Decorator '@maxLength' parameter 'maxLength' should be number.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{maxLength:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{maxLength:e})}}function P(e){return t=>{var n;if("object"!=typeof e)throw new Error("Decorator '@match' parameter 'pattern' should be RegExp.");if("optional"===(null===(n=t)||void 0===n?void 0:n.kind)){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{pattern:e})})}if(!t||"primitive"!==t.kind||"string"!==t.primitiveName)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{pattern:e})}}function C(e){return t=>{if("optional"===t.kind){if("string"==typeof e){const n=Object.assign(Object.assign({},t),{message:e,optional:Object.assign(Object.assign({},t.optional),{message:e})});return delete n.messages,delete n.optional.messages,n}{const n=Object.assign(Object.assign({},t),{messages:e,optional:Object.assign(Object.assign({},t.optional),{messages:e})});return delete n.message,delete n.optional.message,n}}if("string"==typeof e){const n=Object.assign(Object.assign({},t),{message:e});return delete n.messages,n}{const n=Object.assign(Object.assign({},t),{messages:e});return delete n.message,n}}}function U(e){return t=>"optional"===t.kind?Object.assign(Object.assign({},t),{messageId:e,optional:Object.assign(Object.assign({},t.optional),{messageId:e})}):Object.assign(Object.assign({},t),{messageId:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(1),o=n(3),a=n(0);function s(e,t){let n=t;for(;Array.isArray(n);){{if(0===n.length)break;n=Object(o.i)(e,n);const t=Object(r.b)(n[0]);if(!t)break;{const r=Object(o.h)(e,t,n);if(!r)break;n=r.fn(r.actualArgs)}}Object(a.d)(e)}return n}function i(e,t){if(!Array.isArray(t)||!Object(r.b)(t[0],e.config.reservedNames.quote))throw new Error("[SX] stripQuote: token is not quoted.");return t[1]}function c(e,t){return Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.quote)?t[1]:t}function l(e){return function(){return Object(o.e)(e)}}function u(e,t){return Object(a.b)("(compiler)resolveValueSymbol_dynamic",t),function(){return Object(o.j)(e,{symbol:t})}}function m(e){return function(t){return Object(a.b)(e,t)}}},function(e,t,n){"use strict";function r(e){return e.replace(/\x08/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"').replace(/\`/g,"\\`")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));const r=Function("return this")(),o={}.constructor,a=Function,s={};function i(e,t){if(e===r||"__proto__"===t||"__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t)return!0;if(!("prototype"!==t&&"constructor"!==t||null!=e&&"function"!=typeof e))return!0;if((null==e||e===o)&&o.hasOwnProperty(t))return!0;if(null==e||e===a){let e=a;for(;e;){if(e.hasOwnProperty(t))return!0;e=e.__proto__}}return"function"==typeof e&&!e.hasOwnProperty(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e,t,n){super(e),this.ty=t,this.ctx=n}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(4);function o(e,t,n,r){if(r&&t.has(r)){const o=t.get(r);o.ty===e&&t.set(r,Object.assign(Object.assign({},o),{ty:n,resolved:!0}))}return n}function a(e,t,n){var s;const i=Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1});switch(t.kind){case"symlink":{const r=e.get(t.symlinkTargetName);if(!r)throw new Error(`Undefined symbol '${t.symlinkTargetName}' is referred.`);return 0<=n.symlinkStack.findIndex(e=>e===t.symlinkTargetName)?t:a(e,function(e,t){const n=Object.assign({},t);return delete n.kind,delete n.symlinkTargetName,Object.assign(Object.assign({},e),n)}(r.ty,t),Object.assign(Object.assign({},i),{symlinkStack:[...i.symlinkStack,t.symlinkTargetName]}))}case"repeated":return o(t,e,Object.assign(Object.assign({},t),{repeated:a(e,t.repeated,i)}),t.typeName);case"spread":return o(t,e,Object.assign(Object.assign({},t),{spread:a(e,t.spread,i)}),t.typeName);case"sequence":return o(t,e,Object.assign(Object.assign({},t),{sequence:t.sequence.map(t=>a(e,t,i))}),t.typeName);case"one-of":return o(t,e,Object.assign(Object.assign({},t),{oneOf:t.oneOf.map(t=>a(e,t,i))}),t.typeName);case"optional":return o(t,e,Object.assign(Object.assign({},t),{optional:a(e,t.optional,i)}),t.typeName);case"object":{if(0<n.nestLevel&&t.typeName&&0<=n.symlinkStack.findIndex(e=>e===t.typeName)&&e.has(t.typeName)){const n=e.get(t.typeName);if(n.resolved)return n.ty}const c=null===(s=t.baseTypes)||void 0===s?void 0:s.filter(e=>"symlink"===e.kind);if(c&&c.length>0){const n=c.map(t=>a(e,t,i)).filter(e=>"object"===e.kind),s=a(e,r.a(Object.assign(Object.assign({},t),t.baseTypes?{baseTypes:t.baseTypes.filter(e=>"symlink"!==e.kind)}:{}),...n),t.typeName?Object.assign(Object.assign({},i),{symlinkStack:[...i.symlinkStack,t.typeName]}):i);return o(t,e,Object.assign(Object.assign({},t),s),t.typeName)}return o(t,e,Object.assign(Object.assign({},Object.assign(Object.assign({},t),{members:t.members.map(n=>[n[0],a(e,n[1],t.typeName?Object.assign(Object.assign({},i),{symlinkStack:[...i.symlinkStack,t.typeName]}):i),...n.slice(2)])})),t.additionalProps&&0<t.additionalProps.length?{additionalProps:t.additionalProps.map(n=>[n[0],a(e,n[1],t.typeName?Object.assign(Object.assign({},i),{symlinkStack:[...i.symlinkStack,t.typeName]}):i),...n.slice(2)])}:{}),t.typeName)}case"operator":if(i.operators){const n=t.typeName?Object.assign(Object.assign({},i),{symlinkStack:[...i.symlinkStack,t.typeName]}):i,r=t.operands.map(t=>"object"==typeof t&&t.kind?a(e,t,n):t);if(0<r.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)throw new Error(`Unresolved type operator is found: ${t.operator}`);if(!i.operators[t.operator])throw new Error(`Undefined type operator is found: ${t.operator}`);const s=Object.assign({},t);return delete s.operator,delete s.operands,o(t,e,Object.assign(Object.assign({},s),a(e,i.operators[t.operator](...r),n)),t.typeName)}return t;default:return t}}const s={picked:r.i,omit:r.e,partial:r.h,intersect:r.c,subtract:r.p};function i(e){for(const t of e.entries()){const n=a(e,t[1].ty,{nestLevel:0,symlinkStack:[t[0]],operators:s});t[1].ty=n}return e}},function(e,t,n){"use strict";var r=n(2),o=n(8),a=n(7),s=n(6);const i=["","InvalidDefinition","Required","TypeUnmatched","AdditionalPropUnmatched","RepeatQtyUnmatched","SequenceUnmatched","ValueRangeUnmatched","ValuePatternUnmatched","ValueLengthUnmatched","ValueUnmatched"],c={invalidDefinition:'"%{name}" of "%{parentType}" type definition is invalid.',required:'"%{name}" of "%{parentType}" is required.',typeUnmatched:'"%{name}" of "%{parentType}" should be type "%{expectedType}".',additionalPropUnmatched:'"%{addtionalProps}" of "%{parentType}" are not matched to additional property patterns.',repeatQtyUnmatched:'"%{name}" of "%{parentType}" should repeat %{repeatQty} times.',sequenceUnmatched:'"%{name}" of "%{parentType}" sequence is not matched',valueRangeUnmatched:'"%{name}" of "%{parentType}" value should be in the range %{minValue} to %{maxValue}.',valuePatternUnmatched:'"%{name}" of "%{parentType}" value should be matched to pattern "%{pattern}"',valueLengthUnmatched:'"%{name}" of "%{parentType}" length should be in the range %{minLength} to %{maxLength}.',valueUnmatched:'"%{name}" of "%{parentType}" value should be "%{expectedValue}".'};function l(e,...t){for(const n of t)switch(e){case r.a.InvalidDefinition:if(n.invalidDefinition)return n.invalidDefinition;break;case r.a.Required:if(n.required)return n.required;break;case r.a.TypeUnmatched:if(n.typeUnmatched)return n.typeUnmatched;break;case r.a.AdditionalPropUnmatched:if(n.additionalPropUnmatched)return n.additionalPropUnmatched;break;case r.a.RepeatQtyUnmatched:if(n.repeatQtyUnmatched)return n.repeatQtyUnmatched;break;case r.a.SequenceUnmatched:if(n.sequenceUnmatched)return n.sequenceUnmatched;break;case r.a.ValueRangeUnmatched:if(n.valueRangeUnmatched)return n.valueRangeUnmatched;break;case r.a.ValuePatternUnmatched:if(n.valuePatternUnmatched)return n.valuePatternUnmatched;break;case r.a.ValueLengthUnmatched:if(n.valueLengthUnmatched)return n.valueLengthUnmatched;break;case r.a.ValueUnmatched:if(n.valueUnmatched)return n.valueUnmatched}return""}function u(e,t){return null!=e?e:t}function m(e){return e.typeStack.slice().reverse().map(e=>Array.isArray(e)?e[0]:e).find(e=>"object"===e.kind)||null}function f(e){switch(e.kind){case"repeated":return`(repeated ${f(e.repeated)})`;case"spread":return f(e.spread);case"sequence":return"(sequence)";case"primitive":return e.primitiveName;case"primitive-value":return`(value ${"string"==typeof e.value?`'${String(e.value)}'`:String(e.value)})`;case"optional":return f(e.optional);case"one-of":return`(one of ${e.oneOf.map(e=>f(e)).join(", ")}`;case"never":case"any":case"unknown":return e.kind;case"symlink":return e.symlinkTargetName;default:return e.typeName?e.typeName:"?"}}function p(e,t,n,r,o){var a,i;let c=e;const l=o.topRepeatable,p=new Map([["expectedType",Object(s.a)(f(n))],["type",Object(s.a)(typeof t)],["expectedValue",Object(s.a)("primitive-value"===n.kind?String(n.value):"enum"===n.kind&&n.typeName?`enum member of ${n.typeName}`:"?")],["value",Object(s.a)(String(t))],["repeatQty",Object(s.a)(l?"optional"!==l.kind?`${u(l.min,"")}${null!==l.min&&void 0!==l.min||null!==l.max&&void 0!==l.max?"..":""}${u(l.max,"")}`:"0..1":"?")],["minValue",Object(s.a)("primitive"===n.kind?`${u(n.minValue,u(n.greaterThanValue,"(smallest)"))}`:"?")],["maxValue",Object(s.a)("primitive"===n.kind?`${u(n.maxValue,u(n.lessThanValue,"(biggest)"))}`:"?")],["pattern",Object(s.a)("primitive"===n.kind?`${n.pattern?`/${n.pattern.source}/${n.pattern.flags}`:"(pattern)"}`:"?")],["minLength",Object(s.a)("primitive"===n.kind?`${u(n.minLength,"0")}`:"?")],["maxLength",Object(s.a)("primitive"===n.kind?`${u(n.maxLength,"(biggest)")}`:"?")],["name",Object(s.a)(`${"repeated"!==n.kind&&o.dataPath.endsWith("repeated)")?"repeated item of ":"sequence"!==n.kind&&o.dataPath.endsWith("sequence)")?"sequence item of ":""}${(n.name&&n.name!==n.typeName?n.name:null)||(null===(d=r.ctx,a=d.typeStack.slice().reverse().map(e=>Array.isArray(e)?e[0]:e).find(e=>e.name&&e.name!==e.typeName)||null)||void 0===a?void 0:a.name)||"?"}`)],["parentType",Object(s.a)((null===(i=m(r.ctx))||void 0===i?void 0:i.typeName)||n.typeName||o.parentType||"?")],["dataPath",o.dataPath],...r.substitutions||[]]);var d;for(const e of p.entries())c=c.replace(new RegExp(`%{${e[0]}}`),e[1]);return c}function d(e,t,n,o){const a=[];n.messages&&a.push(n.messages),o.ctx.errorMessages&&a.push(o.ctx.errorMessages),a.push(c);let s="";const m=[];for(let e=0;e<o.ctx.typeStack.length;e++){const t=o.ctx.typeStack[e],n=o.ctx.typeStack[e+1],r=Array.isArray(t)?t[0]:t,a=Array.isArray(n)?n[1]:void 0;let i=!1;"repeated"===r.kind?e!==o.ctx.typeStack.length-1&&(r.name?m.push(`${r.name}.(${void 0!==a?`${a}:`:""}repeated)`):m.push("(repeated)"),i=!0):"sequence"===r.kind&&e!==o.ctx.typeStack.length-1&&(r.name?m.push(`${r.name}.(${void 0!==a?`${a}:`:""}sequence)`):m.push("(sequence)"),i=!0),i||(r.name?m.push(`${r.name}`):r.typeName&&m.push(`${r.typeName}`)),!s&&r.typeName&&(s=r.typeName)}const f=m.join("."),d=o.ctx.typeStack.slice().reverse().map(e=>Array.isArray(e)?e[0]:e).find(e=>"repeated"===e.kind||"spread"===e.kind||"optional"===e.kind)||null;const b={dataPath:f,topRepeatable:d,parentType:s},y={},g=[n];e===r.a.RepeatQtyUnmatched&&d&&g.unshift(d);for(const e of g){if(u(e.minValue,!1)&&(y.minValue=e.minValue),u(e.maxValue,!1)&&(y.maxValue=e.maxValue),u(e.greaterThanValue,!1)&&(y.greaterThanValue=e.greaterThanValue),u(e.lessThanValue,!1)&&(y.lessThanValue=e.lessThanValue),u(e.minLength,!1)&&(y.minLength=e.minLength),u(e.maxLength,!1)&&(y.maxLength=e.maxLength),u(e.pattern,!1)){const t=e.pattern;y.pattern=`/${t.source}/${t.flags}`}u(e.min,!1)&&(y.min=e.min),u(e.max,!1)&&(y.max=e.max)}const h={};switch(typeof t){case"number":case"bigint":case"string":case"boolean":case"undefined":h.value=t;break;case"object":null===t&&(h.value=t)}n.messageId?o.ctx.errors.push(Object.assign({code:`${n.messageId}-${i[e]}`,message:p(n.message?n.message:l(e,...a),t,n,o,b),dataPath:f,constraints:y},h)):n.message?o.ctx.errors.push(Object.assign({code:`${i[e]}`,message:p(n.message,t,n,o,b),dataPath:f,constraints:y},h)):o.ctx.errors.push(Object.assign({code:`${i[e]}`,message:p(l(e,...a),t,n,o,b),dataPath:f,constraints:y},h))}function b(e,t,n,r){try{r.ctx.typeStack.push(n),d(e,t,n[0],r)}finally{r.ctx.typeStack.pop()}}var y=n(9);n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return $})),n.d(t,"a",(function(){return _}));const g=/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)$/;function h(e,t,n,s){try{switch(n.typeStack.push("number"==typeof s||"string"==typeof s?[t,s]:t),t.kind){case"never":return function(e,t,n){return d(r.a.TypeUnmatched,e,t,{ctx:n}),null}(e,t,n);case"any":case"unknown":return function(e,t,n){return{value:n.mapper?n.mapper(e,t):e}}(e,t,n);case"primitive":return function(e,t,n){if("null"===t.primitiveName){if(null!==e)return d(r.a.TypeUnmatched,e,t,{ctx:n}),null}else if("integer"===t.primitiveName){if("number"!=typeof e)return d(r.a.TypeUnmatched,e,t,{ctx:n}),null;if(Math.trunc(e)!==e)return d(r.a.TypeUnmatched,e,t,{ctx:n}),null}else if(typeof e!==t.primitiveName)return d(r.a.TypeUnmatched,e,t,{ctx:n}),null;let o=!1,a=!1;switch(typeof t.minValue){case"number":case"string":e<t.minValue&&(a||d(r.a.ValueRangeUnmatched,e,t,{ctx:n}),a=!0,o=!0)}switch(typeof t.maxValue){case"number":case"string":e>t.maxValue&&(a||d(r.a.ValueRangeUnmatched,e,t,{ctx:n}),a=!0,o=!0)}switch(typeof t.greaterThanValue){case"number":case"string":e<=t.greaterThanValue&&(a||d(r.a.ValueRangeUnmatched,e,t,{ctx:n}),a=!0,o=!0)}switch(typeof t.lessThanValue){case"number":case"string":e>=t.lessThanValue&&(a||d(r.a.ValueRangeUnmatched,e,t,{ctx:n}),a=!0,o=!0)}let s=!1;switch(typeof t.minLength){case"number":("string"!=typeof e||e.length<t.minLength)&&(s||d(r.a.ValueLengthUnmatched,e,t,{ctx:n}),s=!0,o=!0)}switch(typeof t.maxLength){case"number":("string"!=typeof e||e.length>t.maxLength)&&(s||d(r.a.ValueLengthUnmatched,e,t,{ctx:n}),s=!0,o=!0)}return t.pattern&&(t.pattern.test(e)||(d(r.a.ValuePatternUnmatched,e,t,{ctx:n}),o=!0)),o?null:{value:n.mapper?n.mapper(e,t):e}}(e,t,n);case"primitive-value":return function(e,t,n){const o=e===t.value?{value:n.mapper?n.mapper(e,t):e}:null;return o||d(r.a.ValueUnmatched,e,t,{ctx:n}),o}(e,t,n);case"repeated":return function(e,t,n){if(!Array.isArray(e))return d(r.a.TypeUnmatched,e,t,{ctx:n}),null;if("number"==typeof t.min&&e.length<t.min)return d(r.a.RepeatQtyUnmatched,e,t,{ctx:n}),null;if("number"==typeof t.max&&e.length>t.max)return d(r.a.RepeatQtyUnmatched,e,t,{ctx:n}),null;const o=[];for(let r=0;r<e.length;r++){const a=h(e[r],t.repeated,n,r);if(!a)return null;o.push(a.value)}return{value:o}}(e,t,n);case"sequence":return function(e,t,n){if(!Array.isArray(e))return d(r.a.TypeUnmatched,e,t,{ctx:n}),null;let o=0,a=0,s=0,i=!1;const c=(t,o)=>"number"==typeof t.min&&s<t.min?(b(0===s?r.a.TypeUnmatched:r.a.RepeatQtyUnmatched,e,[t,o],{ctx:n}),null):"number"==typeof t.max&&s>t.max?(b(r.a.RepeatQtyUnmatched,e,[t,o],{ctx:n}),null):t,l=(t,o)=>{if(0===s)i=!0;else{if(i)return b(r.a.RepeatQtyUnmatched,e,[t,o],{ctx:n}),null;if(s>1)return b(r.a.RepeatQtyUnmatched,e,[t,o],{ctx:n}),null}return t},u=[];for(;o<e.length&&a<t.sequence.length;){const r=t.sequence[a];if("spread"===r.kind){const t=n.errors.length,i=h(e[o],r.spread,n,o);if(i)u.push(i.value),o++,s++;else{if(n.errors.length=t,!c(r,o))return null;s=0,a++}}else if("optional"===r.kind){const t=n.errors.length,i=h(e[o],r.optional,n,o);if(i)u.push(i.value),o++,s++;else{if(n.errors.length=t,!l(r,o))return null;s=0,a++}}else{const t=h(e[o],r,n,o);if(!t)return null;u.push(t.value),o++,a++}}for(;a<t.sequence.length;){const i=t.sequence[a];if("spread"===i.kind){if(!c(i,o))return null;s=0,a++}else{if("optional"!==i.kind)return b(r.a.RepeatQtyUnmatched,e,[i,o],{ctx:n}),null;if(!l(i,o))return null;s=0,a++}}const m=e.length===o?{value:u}:null;return m||d(r.a.SequenceUnmatched,e,t,{ctx:n}),m}(e,t,n);case"one-of":return function(e,t,n){for(const r of t.oneOf){const t=n.errors.length,o=h(e,r,n);if(o)return o;n.errors.length=t}return d(r.a.TypeUnmatched,e,t,{ctx:n}),null}(e,t,n);case"enum":return function(e,t,n){for(const r of t.values)if(e===r[1])return{value:n.mapper?n.mapper(e,t):e};return d(r.a.ValueUnmatched,e,t,{ctx:n}),null}(e,t,n);case"object":return function(e,t,n){let s=Array.isArray(e)?[...e]:Object.assign({},e);const i=t.members.slice().reverse();for(const a of t.members)if(t.members.find(e=>e[0]===a[0])!==i.find(e=>e[0]===a[0]))throw d(r.a.InvalidDefinition,e,t,{ctx:n}),new o.a(`Duplicated member is found: ${a[0]} in ${t.name||"(unnamed)"}`,t,n);if(null===e||"object"!=typeof e){if(d(r.a.TypeUnmatched,e,t,{ctx:n}),!n||!n.checkAll)return null;s=null}else{const o=new Set;if((n.noAdditionalProps||t.additionalProps&&0<t.additionalProps.length)&&!Array.isArray(e))for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.add(t);if(n.noAdditionalProps&&Array.isArray(e)&&0<e.length){if(0===(t.additionalProps||[]).filter(e=>e[0].includes("number")).length){if(d(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps","[number]"]]}),!n||!n.checkAll)return null;s=null}}for(const i of t.members)if(o.delete(i[0]),Object.prototype.hasOwnProperty.call(e,i[0])){const t=h(e[i[0]],"optional"===i[1].kind?Object.assign(Object.assign({},i[1].optional),{name:i[0],message:i[1].message,messages:i[1].messages,messageId:i[1].messageId}):i[1],n);if(t){if(s){if(Object(a.b)(s,i[0]))continue;s[i[0]]=t.value}}else{if(!n||!n.checkAll)return null;s=null}}else if("optional"!==i[1].kind){if(b(r.a.Required,e,[i[1],void 0],{ctx:n}),!n||!n.checkAll)return null;s=null}if(t.additionalProps&&0<t.additionalProps.length){for(const i of function*(){for(const e of o.values())yield e;if(Array.isArray(e))for(let t=0;t<e.length;t++)yield String(t)}()){let c=!1;const l=[];for(const e of t.additionalProps)for(const t of e[0]){const n=e[1];"number"===t?g.test(i)&&l.push(n):"string"===t?l.push(n):t.test(i)&&l.push(n),"optional"===n.kind&&(c=!0)}if(0===l.length){if(c)continue;if(d(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps",i]]}),n&&n.checkAll){s=null;continue}return null}o.delete(i);let u=!1;const m=n.errors.length;for(const t of l){const r=h(e[i],"optional"===t.kind?Object.assign(Object.assign({},t.optional),{message:t.message,messages:t.messages,messageId:t.messageId,name:i}):Object.assign(Object.assign({},t),{name:i}),n);if(r){if(s){if(u=!1,n.errors.length=m,Object(a.b)(s,i))continue;s[i]=r.value}break}u=!0}if(u){if(!n||!n.checkAll)return null;s=null}}}if(n.noAdditionalProps&&0<o.size){if(d(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps",Array.from(o.values()).join(", ")]]}),!n||!n.checkAll)return null;s=null}}return s?{value:n&&n.mapper?n.mapper(s,t):s}:null}(e,t,n);case"symlink":if(n.schema)return h(e,Object(y.b)(n.schema,t,{nestLevel:0,symlinkStack:[]}),n);throw d(r.a.InvalidDefinition,e,t,{ctx:n}),new o.a(`Unresolved symbol '${t.symlinkTargetName}' is appeared.`,t,n);case"operator":if(n.schema)return h(e,Object(y.b)(n.schema,t,{nestLevel:0,symlinkStack:[]}),n);throw d(r.a.InvalidDefinition,e,t,{ctx:n}),new o.a(`Unresolved type operator is found: ${t.operator}`,t,n);case"spread":case"optional":throw d(r.a.InvalidDefinition,e,t,{ctx:n}),new o.a(`Unexpected type assertion: ${t.kind}`,t,n);default:throw d(r.a.InvalidDefinition,e,t,{ctx:n}),new o.a(`Unknown type assertion: ${t.kind}`,t,n)}}finally{n.typeStack.pop()}}function $(e,t,n){const r=Object.assign({errors:[],typeStack:[]},n||{});try{return h(e,t,r)}finally{n&&(n.errors=r.errors)}}function _(e,t){var n;if(e.has(t))return null===(n=e.get(t))||void 0===n?void 0:n.ty;throw new Error(`Undefined type name is referred: ${t}`)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));class r extends Error{constructor(e){super(e)}}class o extends r{constructor(){super("[SX] evaluate: The maximum count of evaluations has been exceeded.")}}class a extends r{constructor(e){super(`[SX] ${e}: Unexpected termination of script.`)}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(8),o=n(7),a=n(10);function s(e,t){switch(t.kind){case"object":{const n=Array.isArray(e)?[]:{},r=new Set;if(!Array.isArray(e))for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.add(t);for(const o of t.members)Object.hasOwnProperty.call(e,o[0])&&(r.delete(o[0]),n[o[0]]=e[o[0]]);if(t.additionalProps&&0<t.additionalProps.length){for(const t of function*(){for(const e of r.values())yield e;if(Array.isArray(e))for(let t=0;t<e.length;t++)yield String(t)}())n[t]=e[t]}return n}default:return e}}function i(e,t,n){switch(t.kind){case"never":throw new r.a(`Type unmatched: ${t.kind}`,t,n);case"any":case"unknown":case"primitive":case"primitive-value":case"repeated":case"sequence":case"one-of":case"enum":case"object":{const o=Object(a.b)(e,t,n);if(o)return o.value;throw new r.a("Validation failed.",t,n)}case"spread":case"optional":case"symlink":case"operator":throw new r.a(`Unexpected type assertion: ${t.kind}`,t,n);default:throw new r.a(`Unknown type assertion: ${t.kind}`,t,n)}}function c(e,t,n){const r=Object.assign(Object.assign({errors:[],typeStack:[]},n||{}),{mapper:s});try{return i(e,t,r)}finally{n&&(n.errors=r.errors)}}function l(e,t,n,r){return function e(t,n){if(null==t)return n;switch(typeof t){case"object":if(Array.isArray(t))return[...n];{const r=Object.assign({},t);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){if(Object(o.b)(r,t))continue;r[t]=e(r[t],n[t])}return r}default:return n}}(e,c(t,n,Object.assign({errors:[],typeStack:[]},r||{})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=Function("return this")()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return compileLambda}));var _ast__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_evaluate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_errors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_compile_ops__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15);function compileCore(e,t,n,r,o){function a(e){let t="";if(null===e)t+="(null)";else if(void 0===e)t+="(void 0)";else switch(typeof e){case"boolean":case"number":t+=`(${String(e)})`;break;case"object":if(Object(_ast__WEBPACK_IMPORTED_MODULE_0__.b)(e)){const n=e;Object(_errors__WEBPACK_IMPORTED_MODULE_2__.c)("(compiler)compileValue",i.varNames,n.symbol),i.varNames.has(n.symbol)?t+=`(${i.varNames.get(n.symbol)})`:(o[i.varsCount]=n.symbol,t+=`(_$_vars[${String(i.varsCount++)}])`);break}default:o[i.varsCount]=e,t+=`(_$_vars[${String(i.varsCount++)}])`}return t}function s(t,n){let r="";const l=t[n];if(Array.isArray(l))if(0<l.length){const t=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.a)(e,l);if(Array.isArray(t))if(0<t.length)if(Object(_ast__WEBPACK_IMPORTED_MODULE_0__.b)(t[0])){const n=t[0],a=t.slice(1);Object(_errors__WEBPACK_IMPORTED_MODULE_2__.c)("(compiler)compileToken",c,n.symbol),c.has(n.symbol)?r+=c.get(n.symbol)(t,a):n.symbol===e.config.reservedNames.spread?r+=`...(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")})`:e.funcMap.has(n.symbol)?(o[i.varsCount]=e.funcMap.get(n.symbol).fn(e,""),r+=`((_$_vars[${String(i.varsCount++)}])(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`):i.varNames.has(n.symbol)?r+=`(${String(i.varNames.get(n.symbol))})(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")})`:(o[i.varsCount]=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.d)(e,n.symbol),r+=`((_$_vars[${String(i.varsCount++)}])()(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`)}else switch(typeof t[0]){case"function":o[i.varsCount]=t[0],r+=`((_$_vars[${String(i.varsCount++)}])(${t.slice(1).map((t,n,r)=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`;break;default:throw new Error(`[SX] compileToken: First item of list is not a function: ${JSON.stringify(t[0])}.`)}else r+="([])";else r+=a(l)}else r+="([])";else r+=a(l);return r}const i={_$_vars:o,varsCount:1,varNames:new Map,varNamesCount:0,varDefs:"var x0;",ops:new Map,makeScope:function(e){const t=new Map;for(const e of i.varNames.entries())t.set(e[0],e[1]);e(),i.varNames=t},compileToken:s};Object(_compile_ops__WEBPACK_IMPORTED_MODULE_4__.a)(e,i);const c=i.ops;e.config.enableTailCallOptimization&&(r=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.g)(e,t,r)),i.varNames.set(e.config.reservedNames.thiz,"(this===(Function('return this')())?null:(this===void 0?null:this))");const l=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.c)(e);if(l)for(const e in l)Object.prototype.hasOwnProperty.call(l,e)&&(o[i.varsCount++]=e,o[i.varsCount]=l[e],i.varNames.set(e,`(_$_vars[${String(i.varsCount)}][_$_vars[${String(i.varsCount-1)}]])`),i.varsCount++);const u=`${t.map((e,r)=>(i.varNames.set(t[r].symbol,"a"+r),`${n&&r===t.length-1?"...":""}a${r}`)).join(",")}`,m=`return(${r.map((e,t)=>s(r,t)).join(",")})`;return`(function(${u}){"strict";${i.varDefs}${m}})`}function evalCompiledLambda(_$_state,_$_vars,code){return _$_vars[0]=eval(code),_$_vars[0]}function compileLambda(e,t,n,r){const o=[];return evalCompiledLambda(e,o,compileCore(e,t,n,r,o))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),o=n(0),a=n(5);function s(e,t){const{_$_vars:n,ops:s,makeScope:i,compileToken:c}=t;s.set(e.config.reservedNames.quote,(function(e,r){let o="";return n[t.varsCount]=e[1],o+=`(_$_vars[${String(t.varsCount++)}])`,o})),s.set(e.config.reservedNames.self,(function(t,n){let r="";return r+=`((_$_vars[0])(${n.map(t=>c([Object(a.f)(e,t)],0)).join(",")}))`,r})),s.set("$__if",(function(t,n){let r="";return Object(o.a)("compileToken:$__if",n,2,3),r+=`(${c(t,1)}?(${c([Object(a.e)(e,t[2])],0)}):(${c([Object(a.e)(e,t[3])],0)}))`,r})),s.set("$__if-null",(function(t,n){let r="";return Object(o.a)("compileToken:$__if-null",n,2,2),r+=`((()=>{let _$_rv=${c(t,1)};return _$_rv?_$_rv:(${c([Object(a.e)(e,t[2])],0)}});})())`,r})),s.set("$__cond",(function(t,n){let r="";Object(o.a)("compileToken:$__cond",n,1),r+="(";for(let t=0;t<n.length;t+=2)r+=`${c([Object(a.e)(e,n[t])],0)}?(${c([Object(a.e)(e,n[t+1])],0)}):(`;r+="null";for(let e=0;e<n.length;e+=2)r+=")";return r+=")",r})),s.set("$__while",(function(t,n){let r="";return Object(o.a)("compileToken:$__while",n,1),r+=`((()=>{let _$_rv=null;while(${c([Object(a.e)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}return _$_rv})())`,r})),s.set("$__do-while",(function(t,n){let r="";return Object(o.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}}while(${c([Object(a.e)(e,t[1])],0)})return _$_rv)())`,r})),s.set("$__until",(function(t,n){let r="";return Object(o.a)("compileToken:$__until",n,1),r+=`((()=>{let _$_rv=null;while(!${c([Object(a.e)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}return _$_rv})())`,r})),s.set("$__do-until",(function(t,n){let r="";return Object(o.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}}while(!${c([Object(a.e)(e,t[1])],0)})return _$_rv)())`,r})),s.set("$__repeat",(function(n,s){let l="";if(Object(o.a)("compileToken:$__repeat",s,2),!Object(r.b)(s[0]))throw new Error("[SX] compileToken: $__repeat : args[0] is not symbol.");return i(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_n)=>{let _$_rv=null;for(let ${r}=0;${r}<_$_n;${r}++){_$_rv=${n.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}return _$_rv})(${c(s,1)}))`}),l})),s.set("$__for",(function(n,s){let l="";if(Object(o.a)("compileToken:$__for",s,2),!Object(r.b)(s[0]))throw new Error("[SX] compileToken: $__for : args[0] is not symbol.");return i(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_l)=>{let _$_rv=null;for(const ${r} of _$_l){_$_rv=${n.slice(2).map(t=>c([Object(a.e)(e,t)],0)).join(",")}}return _$_rv})(${c(s,1)}))`}),l})),s.set("$__scope",(function(n,s){let l="";if(Object(o.a)("compileToken:$__scope",s,2),!Array.isArray(n[3]))throw new Error("[SX] compileToken: $__scope : args[2] is not array.");return i(()=>{for(const o of Object(a.e)(e,n[3])){let e="";if(Array.isArray(o)){if(o.length<1)throw new Error("[SX] compileToken: $__scope : args[0][?] is too short.");if(!Object(r.b)(o[0]))throw new Error("[SX] compileToken: $__scope : args[0][?][0] is not symbol.");e=o[0].symbol,l+=`(${"v"+t.varNamesCount}=${c(o,1)})`}else{if(!Object(r.b)(o))throw new Error("[SX] compileToken: $__scope : args[0][?] is not symbol.");e=o.symbol}t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(e,"v"+t.varNamesCount++)}const o=`${n.slice(4).map(t=>c([Object(a.e)(e,t)],0)).join(",")}`;l+=n[2]?`[${o}]`:`(${o})`}),l})),s.set("$__try",(function(r,s){let l="";return Object(o.a)("compileToken:$__try",s,1,2),l+=`((()=>{try{${c([Object(a.e)(e,r[1])],0)}}catch(e${t.varNamesCount}){let e${t.varNamesCount+1}=(_$_vars[${String(t.varsCount)}])();`,n[t.varsCount++]=Object(a.c)(e),i(()=>{t.varNames.set("$error","e"+t.varNamesCount++),t.varNames.set("$parent","e"+t.varNamesCount++),l+=`${c([Object(a.e)(e,r[2])],0)}}})())`}),l})),s.set(e.config.reservedNames.raise,(function(t,n){let r="";return r+=`((()=>{throw ${c([Object(a.f)(e,t[1])],0)}})())`,r})),s.set("$boolean",(function(e,t){let n="";return Object(o.a)("compileToken:$boolean",t,1,1),n+=`((x0=${c(t,0)}),(Array.isArray(x0)&&x0.length===0?false:boolean(x0)))`,n})),s.set("$__get",(function(s,i){let l="";Object(o.a)("compileToken:$__get",i,1);const u=Object(a.e)(e,s[1]),m=Object(r.b)(u)?u.symbol:"string"==typeof u?u:null;if("string"!=typeof m)throw new Error(`[SX] compileToken: $__get : operand is not symbol: ${JSON.stringify(s[1])}.`);let f="";t.varNames.has(m)?f=t.varNames.get(m):(n[t.varsCount]=Object(a.d)(e,m),f=`_$_vars[${String(t.varsCount++)}]`);return l+=`((${f})${s.slice(2).map((e,o,a)=>{return`[${Object(r.b)(a[o])?(s=a[o].symbol,n[t.varsCount]=s,`_$_vars[${String(t.varsCount++)}]`):c(a,o)}]`;var s}).join("")})`,l})),s.set("$__let",(function(n,s){let i="";Object(o.a)("compileToken:$__let",s,2,2);const l=Object(a.e)(e,n[1]),u=Object(r.b)(l)?l.symbol:"string"==typeof l?l:null;if("string"!=typeof u)throw new Error(`[SX] compileToken: $__let : operand is not rvalue: ${JSON.stringify(n[1])}.`);return t.varNames.has(u)||(t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(u,"v"+t.varNamesCount++)),i+=`(${t.varNames.get(u)}=${c(n,2)})`,i})),s.set("$__set",(function(s,i){let l="";Object(o.a)("compileToken:$__set",i,2);const u=Object(a.e)(e,s[1]),m=Object(r.b)(u)?u.symbol:"string"==typeof u?u:Array.isArray(u)?Object(r.b)(u[0])?u[0].symbol:"string"==typeof u[0]?u[0]:null:null;if("string"!=typeof m)throw new Error(`[SX] compileToken: $__set : operand is not rvalue: ${JSON.stringify(s[1])}.`);let f="";t.varNames.has(m)?f=t.varNames.get(m):(n[t.varsCount]=Object(a.d)(e,m),f=`_$_vars[${String(t.varsCount++)}]`);let p=!1,d="";return l+=`((${f})${(Array.isArray(u)?u.slice(1):[]).map((e,s,i)=>{return`[${Object(r.b)(i[s])?(u=i[s].symbol,n[t.varsCount]=Object(o.b)("compileToken:$__set",u),`_$_vars[${String(t.varsCount++)}]`):(l=c(i,s),p||(n[t.varsCount]=Object(a.b)("compileToken:$__set"),d=String(t.varsCount++),p=!0),`(_$_vars[${d}](${l}))`)}]`;var l,u}).join("")}=${c(s,2)})`,l})),s.set(e.config.reservedNames.not,(function(e,t){let n="";return Object(o.a)("compileToken:$not",t,1,1),n+=`(!${c(t,0)})`,n})),s.set("$__and",(function(t,n){let r="";return Object(o.a)("compileToken:$__and",n,1),r+=`(${n.map(t=>c([Object(a.e)(e,t)],0)).join("&&")})`,r})),s.set("$__or",(function(t,n){let r="";return Object(o.a)("compileToken:$__or",n,1),r+=`(${n.map(t=>c([Object(a.e)(e,t)],0)).join("||")})`,r})),s.set("===",(function(e,t){let n="";return Object(o.a)("compileToken:===",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("===")})`,n})),s.set("!==",(function(e,t){let n="";return Object(o.a)("compileToken:!==",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("!==")})`,n})),s.set("==",(function(e,t){let n="";return Object(o.a)("compileToken:==",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("==")})`,n})),s.set("!=",(function(e,t){let n="";return Object(o.a)("compileToken:!=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("!=")})`,n})),s.set("<",(function(e,t){let n="";return Object(o.a)("compileToken:<",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<")})`,n})),s.set("<=",(function(e,t){let n="";return Object(o.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<=")})`,n})),s.set(">",(function(e,t){let n="";return Object(o.a)("compileToken:>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">")})`,n})),s.set(">=",(function(e,t){let n="";return Object(o.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">=")})`,n})),s.set("$concat",(function(t,n){let a="";Object(o.a)("compileToken:$concat",n,1);let s="";if(Array.isArray(n[0])&&Object(r.b)(n[0][0],e.config.reservedNames.spread)){const e=c(n[0],1);s=`(${e}[0]).concat((${e}.length>1?${e}[1]:(typeof ${e}[0]==='string'?'':[])),`}else s=`${c(n,0)}.concat(`;return a+=`(${s}${n.slice(1).map((e,t,n)=>c(n,t)).join(",")}))`,a})),s.set("+",(function(t,n){let a="";Object(o.a)("compileToken:+",n,1);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x+y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("+")})`,a})),s.set("-",(function(t,n){let a="";Object(o.a)("compileToken:-",n,1);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return (_$_rv.length>1?(_$_rv.reduce((x,y)=>x-y)):(_$_rv.length>0?-_$_rv[0]:NaN));})())`:`(${t.length>2?n.map((e,t,n)=>c(n,t)).join("-"):`-(${String(c(t,1))})`})`,a})),s.set("*",(function(t,n){let a="";Object(o.a)("compileToken:*",n,2);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x*y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("*")})`,a})),s.set("**",(function(t,n){let a="";Object(o.a)("compileToken:**",n,2);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x**y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("**")})`,a})),s.set("/",(function(t,n){let a="";Object(o.a)("compileToken:/",n,2);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x/y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("/")})`,a})),s.set("%",(function(t,n){let a="";Object(o.a)("compileToken:%",n,2);let s=!1;return n.map((t,n,o)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),a+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x%y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("%")})`,a})),s.set("<<",(function(e,t){let n="";return Object(o.a)("compileToken:<<",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<<")})`,n})),s.set(">>",(function(e,t){let n="";return Object(o.a)("compileToken:>>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">>")})`,n})),s.set(">>>",(function(e,t){let n="";return Object(o.a)("compileToken:>>>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">>>")})`,n})),s.set("$bit-not",(function(e,t){let n="";return Object(o.a)("compileToken:$bit-not",t,1,1),n+=`(~(${c(e,1)}))`,n})),s.set("$bit-and",(function(e,t){let n="";return Object(o.a)("compileToken:$bit-and",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("&")})`,n})),s.set("$bit-or",(function(e,t){let n="";return Object(o.a)("compileToken:$bit-or",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("|")})`,n})),s.set("$bit-xor",(function(e,t){let n="";return Object(o.a)("compileToken:$bit-xor",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("^")})`,n}))}},function(e,t,n){e.exports=n(19)},,,function(e,t,n){"use strict";n.r(t);var r=n(2);class o extends Error{}function a(e,t){return{src:e,start:0,end:e.length,context:t}}function s(e,t){let n="";if("string"==typeof e.src){n=e.src.slice(Math.max(e.start-5,0),e.start+55);let t=n.split(/\r\n|\n|\r/);t=t.slice(0,1).concat("          ^~~~~~~~").concat(...t.slice(1)),n=t.join("\n")+"\n\n"}else{n="     (object)\n          ^~~~~~~~";try{n="     "+JSON.stringify(e.src.slice(Math.max(e.start-10,0),e.start))+"\n          "+JSON.stringify(e.src.slice(e.start,e.start+1))+"\n          "+JSON.stringify(e.src.slice(e.start+1,e.start+10));let t=n.split(/\r\n|\n|\r/);t=t.slice(0,2).concat("          ^~~~~~~~").concat(...t.slice(2)),n=t.join("\n")+"\n\n"}catch(e){}}return`parse error occured at position:${e.start} ${t?` ${t}`:""}\n     ${n}`}function i(e,t){return`parse faild at position:${e.start} ${t?` ${t}`:""}`}function c(e){return t=>({succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]})}function l(e){return t=>{throw new o(s(t,e))}}function u(e){return t=>0===t.start?{succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,'operator "beginning"')}}function m(e){return t=>t.start===t.end?{succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,'operator "end"')}}function f(e,t){return e=e||0,n=>r=>{let o=r;const a=[];for(;;){const r=n(o);if(!r.succeeded){if(r.error)return r;if(a.length>=e)break;return{succeeded:!1,error:!1,src:o.src,pos:o.start,message:i(o,'operator "quantify"')}}if(o=r.next,a.push({next:r.next,tokens:r.tokens}),t&&t===a.length)break}if(a.length>0){const e=[];for(const t of a)e.push(...t.tokens);return{succeeded:!0,next:a[a.length-1].next,tokens:e}}return{succeeded:!0,next:{src:r.src,start:r.start,end:r.end,context:r.context},tokens:[]}}}function p(...e){return t=>{let n=null,r=null;for(const o of e){const e=o(t);if(e.succeeded){n={next:e.next,tokens:e.tokens};break}r?e.error?(!r.error||r.pos<e.pos)&&(r=e):r.pos<e.pos&&(r=e):r=e}return n?{succeeded:!0,next:n.next,tokens:n.tokens}:r||{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,'operator "first"')}}}function d(...e){return t=>{const n=[];let r=null;for(const o of e){const e=o(t);e.succeeded?n.push({next:e.next,tokens:e.tokens}):r?e.error?(!r.error||r.pos<e.pos)&&(r=e):r.pos<e.pos&&(r=e):r=e}if(n.length>0){const e=n.reduce((e,t)=>e.next.start>=t.next.start?e:t);return{succeeded:!0,next:e.next,tokens:e.tokens}}return r||{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,'operator "or"')}}}function b(e,t){return(...n)=>r=>{let o=r;const a=[];for(const e of n){const t=e(o);if(!t.succeeded)return t;o=t.next,a.push(...t.tokens)}const s=e?e(a,r):a;return{succeeded:!0,next:t?{src:o.src,start:o.start,end:o.end,context:t(o.context)}:o,tokens:s}}}function y(...e){return t=>{let n=t;for(const t of e){const e=t(n);if(!e.succeeded)return e;n=e.next}return{succeeded:!0,next:t,tokens:[]}}}function g(e,t){return(...n)=>r=>{if(r.start-e<0)return{succeeded:!1,error:!1,src:r.src,pos:r.start,message:i(r,"lookBehind: src is too short")};let o={src:r.src,start:r.start-e,end:r.end,context:r.context};for(const e of n){const t=e(o);if(!t.succeeded)return t;o=t.next}return{succeeded:!0,next:r,tokens:t?[t()]:[]}}}function h(e){return t=>n=>{const r=t(n);if(!r.succeeded)return r;const i=a(r.tokens,n.context);let c=i,l=!1;if(e.check(c).succeeded)return{succeeded:!0,next:r.next,tokens:r.tokens};e:for(let t=0;void 0===e.maxApply||t<e.maxApply;t++){let t=!1;t:for(const n of e.rules){const{parser:r,rtol:o}="function"==typeof n?{parser:n,rtol:!1}:n,a=c.src.length;for(let n=0;n<=a;n++){const s=r({src:c.src,start:o?a-n:n,end:c.src.length,context:c.context});if(s.succeeded){t=!0;const r=c.src.slice(0,o?a-n:n);if(r.push(...s.tokens),r.push(...c.src.slice(s.next.start)),c={src:r,start:0,end:r.length,context:s.next.context},e.check(c).succeeded){l=!0;break e}break t}}}if(!t)break}if(!l&&!e.check(c).succeeded)throw new o(s(i));return{succeeded:!0,next:r.next,tokens:c.src}}}function $(e,t){return n=>r=>{let o=!0;if(Math.max(0,r.end-r.start)>=n.length){for(let e=0;e<n.length;e++)if(!t(r.src[r.start+e],n[e])){o=!1;break}}else o=!1;return o?{succeeded:!0,next:{src:r.src,start:r.start+n.length,end:r.end,context:r.context},tokens:[e(n)]}:{succeeded:!1,error:!1,src:r.src,pos:r.start,message:i(r,`operator "objSequence(${n})"`)}}}function _(e,t){return(...n)=>r=>{const o=Math.max(0,r.end-r.start);let a=-1;return o>0&&n.some((e,n)=>{if(t(r.src[r.start],e))return a=n,!0})?{succeeded:!0,next:{src:r.src,start:r.start+1,end:r.end,context:r.context},tokens:[e(n[a])]}:{succeeded:!1,error:!1,src:r.src,pos:r.start,message:i(r,`operator "objClass(${n.join(",")})"`)}}}function v(e,t){return(...n)=>r=>{if(Math.max(0,r.end-r.start)>0)for(const e of n){let o=!0;if(!t(r.src[r.start],e)){o=!1;break}if(o)return{succeeded:!1,error:!1,src:r.src,pos:r.start,message:i(r,`operator "objClassNot(${n.join(",")})"`)}}return{succeeded:!0,next:{src:r.src,start:r.start+1,end:r.end,context:r.context},tokens:[e(r.src[r.start])]}}}var j=n(11),O=n(13),k=n(1),w=n(3),x=n(14),S=n(0);const N=(e,t)=>(...e)=>{Object(S.a)("$car",e,1,1);const t=I(...e);if(!Array.isArray(t))throw new Error("[SX] $car: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $car: Invalid argument(s): args[0] is nil.");return t[0]},T=(N(),(e,t)=>(...e)=>{Object(S.a)("$cdr",e,1,1);const t=I(...e);if(!Array.isArray(t))throw new Error("[SX] $cdr: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $cdr: Invalid argument(s): args[0] is nil.");return t.slice(1)}),A=(T(),(e,t)=>(...e)=>{Object(S.a)("$cons",e,2,2);let{car:t,cdr:n}=X(...e);return null===t&&(t=[]),null===n&&(n=[]),Array.isArray(n)?(n=n.slice(0),n.unshift(t),n):{car:t,cdr:n}}),E=(A(),(e,t)=>(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null}),I=(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null},P=(e,t)=>(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},C=(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},U=(e,t)=>(...e)=>{const t=e.slice(e.length-1,e.length);return 1===t.length?t[0]:null},L=(e,t)=>(...e)=>{const t=e.slice(1);return 0<t.length?t:null},V=(e,t)=>(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:t,cdr:n}},X=(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:t,cdr:n}},M=(e,t)=>(...e)=>{Object(S.a)("$atom",e,1,1);const t=I(...e);if(null==t)return!0;if(Array.isArray(t))return 0===t.length;switch(typeof t){case"number":case"string":case"function":case"boolean":return!0;case"object":return!!Object(k.b)(t)}return!1},q=(M(),(e,t)=>(...e)=>{Object(S.a)("$eq",e,2,2);const{car:t,cdr:n}=X(...e);return t===n}),D=(q(),(e,t)=>(...e)=>{Object(S.a)("$notEq",e,2,2);const{car:t,cdr:n}=X(...e);return t!==n}),R=(D(),(e,t)=>(...e)=>e.slice(0)),F=(e,t,n)=>(...t)=>{Object(S.a)("$__scope",t,3);const r=I(...t),o=C(...t),{car:a,cdr:s}=X(...t.slice(2));let i=null;const c={};if(Array.isArray(a))for(const t of a)if(Array.isArray(t)){const n=X(...t),r=Object(k.b)(n.car),o=r?r.symbol:String(n.car);Object(S.c)("$__scope",c,o),c[o]=Object(w.b)(e,n.cdr)}else{const e=Object(k.b)(t),n=e?e.symbol:String(t);Object(S.c)("$__scope",c,n),c[n]=null}Object(w.f)(e,c,r,n);try{if(4<t.length)if(o){i=[];for(const n of t.slice(3))i.push(Object(w.b)(e,n))}else for(const n of t.slice(3))i=Object(w.b)(e,n);else i=Object(w.b)(e,s)}finally{Object(w.m)(e)}return i},B=(e,t)=>(...t)=>{Object(S.a)("$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let r=!1;for(let t=0;t<n.length;t++){const o=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(o)&&Object(k.b)(o[0],e.config.reservedNames.spread)){if(!Object(k.b)(o[1]))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=o[1],r=!0}else if(!Object(k.b)(o))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}let o=t.slice(1);e.config.enableTailCallOptimization&&(o=Object(w.g)(e,n,o));const a=Object(w.c)(e),s=function(...t){if(t.length+(r?1:0)<n.length)throw new Error(`[SX] func call: Actual args too short: actual ${t.length} / formal ${n.length}.`);return F(e,0,a)(!1,!1,[[e.config.reservedNames.self,s],[e.config.reservedNames.thiz,this===O.a||void 0===this?null:Object(k.c)(e,this)],...n.map((o,a)=>[o.symbol,Object(k.c)(e,r&&a===n.length-1?t.slice(a):t[a])])],...o)};return s},W=(e,t)=>(...t)=>{Object(S.a)("$$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $$__lambda: Invalid argument(s): args[0] is not array.");let r=!1;for(let t=0;t<n.length;t++){const o=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(o)&&Object(k.b)(o[0],e.config.reservedNames.spread)){if(!Object(k.b)(o[1]))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=o[1],r=!0}else if(!Object(k.b)(o))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}const o=t.slice(1);return Object(x.a)(e,n,r,o)},z=(e,t)=>(...e)=>{Object(S.a)("$apply",e,1);const t=I(...e);if("function"!=typeof t)throw new Error("[SX] $apply: Invalid argument(s): args[0] is not function.");return(...n)=>t.apply(null,e.slice(1).concat(n))},K=(z(),(e,t)=>(...e)=>{throw I(...e)}),Q=(K(),(e,t)=>(...e)=>{Object(S.a)("$pipe",e,1);let t=e[0];for(let n=1;n<e.length;n++)t=e[n](t);return t}),J=(Q(),(e,t)=>(...t)=>{Object(S.a)("$__let",t,2,2);let n=Object(k.b)(I(...t));if(!n){if("string"!=typeof t[0])throw new Error("[SX] $__let: Invalid argument(s): invalid name.");n={symbol:t[0]}}return Object(S.c)("$__let",{},n.symbol),Object(w.k)(e,n,!1)[n.symbol]=t[1],t[1]}),G=(e,t)=>(...e)=>{Object(S.a)("$boolean",e,1,1);const t=I(...e);return(!Array.isArray(t)||0!==t.length)&&Boolean(t)},Y=G(),Z=(e,t)=>(...e)=>(Object(S.a)("$not",e,1,1),!Y(...e)),H=Z(),ee=(e,t)=>(...t)=>{Object(S.a)("$__and",t,1);let n=null;for(let r=0;r<t.length;r++){const o=Object(w.b)(e,t[r]);if(!Y(o))return o;n=o}return n},te=(ee(null),(e,t)=>(...t)=>{Object(S.a)("$__or",t,1);let n=null;for(let r=0;r<t.length;r++){const o=Object(w.b)(e,t[r]);if(Y(o))return o;n=o}return n}),ne=(te(null),(e,t)=>(...e)=>{Object(S.a)("$ambiguousEq",e,2,2);let{car:t,cdr:n}=X(...e);return Array.isArray(t)&&0===t.length&&(t=null),Array.isArray(n)&&0===n.length&&(n=null),void 0===t&&(t=null),void 0===n&&(n=null),t==n}),re=ne(),oe=(e,t)=>(...e)=>!re(...e),ae=(oe(),(e,t)=>(...e)=>{Object(S.a)("$lt",e,2,2);const{car:t,cdr:n}=X(...e);return Object(w.l)(t)<Object(w.l)(n)}),se=(ae(),(e,t)=>(...e)=>{Object(S.a)("$le",e,2,2);const{car:t,cdr:n}=X(...e);return Object(w.l)(t)<=Object(w.l)(n)}),ie=(se(),(e,t)=>(...e)=>{Object(S.a)("$gt",e,2,2);const{car:t,cdr:n}=X(...e);return Object(w.l)(t)>Object(w.l)(n)}),ce=(ie(),(e,t)=>(...e)=>{Object(S.a)("$ge",e,2,2);const{car:t,cdr:n}=X(...e);return Object(w.l)(t)>=Object(w.l)(n)}),le=(ce(),(e,t)=>(...e)=>{Object(S.a)("$typeof",e,1,1);const t=I(...e);if(null===t)return"null";const n=typeof t;switch(n){case"object":return Array.isArray(t)?"list":"object";case"symbol":return"js-symbol";default:return n}}),ue=(le(),(e,t)=>(...e)=>{if(Object(S.a)("$symbol",e,1,1),"string"==typeof e[0])return{symbol:e[0]};throw new Error("[SX] $symbol: Invalid argument(s): item(s) of args[0] is not string.")}),me=(ue(),(e,t)=>(...e)=>{if(Object(S.a)("$isSymbol",e,1,2),1===e.length)return!!Object(k.b)(e[0]);if("string"==typeof e[1])return!!Object(k.b)(e[0],e[1]);throw new Error("[SX] $isSymbol: Invalid argument(s): item(s) of args[1] is not string.")}),fe=(me(),(e,t)=>(...e)=>(Object(S.a)("$isNull",e,1,1),null===I(...e))),pe=(fe(),(e,t)=>(...e)=>{Object(S.a)("$isNil",e,1,1);const t=I(...e);return Array.isArray(t)&&0===t.length}),de=(pe(),(e,t)=>(...e)=>(Object(S.a)("$isUndefined",e,1,1),void 0===I(...e))),be=(de(),(e,t)=>(...e)=>(Object(S.a)("$isList",e,1,1),Array.isArray(I(...e)))),ye=(be(),(e,t)=>(...e)=>(Object(S.a)("$isString",e,1,1),"string"==typeof I(...e))),ge=(ye(),(e,t)=>(...e)=>(Object(S.a)("$isNumber",e,1,1),"number"==typeof I(...e))),he=(ge(),(e,t)=>(...e)=>(Object(S.a)("$isNaN",e,1,1),Number.isNaN(I(...e)))),$e=(he(),(e,t)=>(...e)=>(Object(S.a)("$isFinite",e,1,1),Number.isFinite(I(...e)))),_e=($e(),(e,t)=>(...e)=>(Object(S.a)("$isInteger",e,1,1),Number.isInteger(I(...e)))),ve=(_e(),(e,t)=>(...e)=>(Object(S.a)("$toString",e,1,1),String(I(...e)))),je=(ve(),(e,t)=>(...e)=>(Object(S.a)("$toNumber",e,1,1),Object(w.l)(I(...e)))),Oe=(je(),[O.a,Object.__proto__,{}.__proto__,Function.__proto__]),ke=(e,t)=>(...e)=>{if(Object(S.a)("$objectAssign",e,1),Oe.includes(e[0]))throw new Error("[SX] $objectAssign: Invalid argument: args[0] is blacklisted object.");return Object.assign(e[0],...e.slice(1))},we=(ke(),(e,t)=>(...e)=>(Object(S.a)("$jsonStringify",e,1,1),JSON.stringify(I(...e)))),xe=(we(),(e,t)=>(...e)=>{Object(S.a)("$jsonParse",e,1,1);const t=I(...e);if("string"!=typeof t)throw new Error("[SX] $jsonParse: Invalid argument(s): args[0] is not string.");return JSON.parse(t)}),Se=(xe(),(e,t)=>(...e)=>Date.now()),Ne=(Se(),(e,t)=>(...e)=>{Object(S.a)("$datetimeFromIso",e,1,1);const t=I(...e);if("string"!=typeof t)throw new Error("[SX] $datetimeFromIso: Invalid argument(s): args[0] is not string.");if(!/^(?:(?:-[0-9]{6,})|[0-9]{4,})-(?:[0-1][0-9])-(?:[0-3][0-9])(?:T(?:[0-2][0-9])(?:[:](?:[0-6][0-9])(?:[:](?:[0-6][0-9])(?:.[0-9]{1,})?)?)?(?:Z|[-+][0-9]{2}(?:[:]?[0-6][0-9])?)?)?$/.test(t))throw new Error(`[SX] $datetimeFromIso: Invalid datetime (pattern unmatched): ${t}.`);const n=new Date(t).getTime();if(Number.isNaN(n))throw new Error(`[SX] $datetimeFromIso: Invalid datetime: ${t}.`);return n}),Te=(Ne(),(e,t)=>(...e)=>{Object(S.a)("$datetime",e,3,7);let t="";const n=Number(e[0]);t+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),t+="-"+String(Number(e[1])).padStart(2,"0"),t+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4&&(t+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?t+=":"+String(Number(e[4])).padStart(2,"0"):t+=":00",e.length>=6&&(t+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(t+="."+String(Number(e[6])).padStart(3,"0").slice(0,3)),t+="Z");const r=new Date(t).getTime();if(Number.isNaN(r))throw new Error(`[SX] $datetime: Invalid datetime: ${t}.`);return r}),Ae=(Te(),(e,t)=>(...e)=>{Object(S.a)("$datetimeLc",e,3,7);let t="";const n=Number(e[0]);t+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),t+="-"+String(Number(e[1])).padStart(2,"0"),t+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4?(t+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?t+=":"+String(Number(e[4])).padStart(2,"0"):t+=":00",e.length>=6&&(t+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(t+="."+String(Number(e[6])).padStart(3,"0").slice(0,3))):t+="T00:00:00.000";const r=new Date(t).getTime();if(Number.isNaN(r))throw new Error(`[SX] $datetimeLc: Invalid datetime: ${t}.`);return r}),Ee=(Ae(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToIsoString",e,1,1);const t=I(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToIsoString: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToIsoString: Invalid datetime: ${t}.`);return n.toISOString()}),Ie=(Ee(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToComponents",e,1,1);const t=I(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToComponents: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponents: Invalid datetime: ${t}.`);return[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds(),0,n.getUTCDay()]}),Pe=(Ie(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToComponentsLc",e,1,1);const t=I(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToComponentsLc: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponentsLc: Invalid datetime: ${t}.`);return[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds(),-n.getTimezoneOffset(),n.getDay()]}),Ce=(Pe(),(e,t)=>(...t)=>{if(Object(S.a)("$match",t,2,3),!e.config.enableRegExpMatchOperators)throw new Error("[SX] $match: Operator is disabled by configuration.");if(2===t.length){return new RegExp(t[0]).exec(t[1])}return new RegExp(t[0],t[1]).exec(t[2])}),Ue=(Ce(null),(e,t)=>(...e)=>(console.log(...e),null)),Le=(Ue(),(e,t)=>(...e)=>(console.error(...e),null)),Ve=(Le(),(e,t)=>(...e)=>(console.trace(...e),null)),Xe=(Ve(),(e,t)=>(...e)=>(console.time(...e),null)),Me=(Xe(),(e,t)=>(...e)=>(console.timeEnd(...e),null)),qe=(Me(),(e,t)=>(...e)=>(console.timeLog(...e),null)),De=(qe(),[{name:"$car",fn:N},{name:"$cdr",fn:T},{name:"$cons",fn:A},{name:"$first",fn:E},{name:"$second",fn:P},{name:"$last",fn:U},{name:"$progn",fn:U},{name:"$rest",fn:L},{name:"$first-and-second",fn:V},{name:"$atom",fn:M},{name:"$eq",fn:q},{name:"===",fn:q},{name:"$not-eq",fn:D},{name:"!==",fn:D},{name:"$list",fn:R},{name:"$__scope",fn:F},{name:"$__global",fn:(e,t)=>(...t)=>{Object(S.a)("$__globalScope",t,1);const n=I(...t),r=C(...t);let o=null;Object(w.f)(e,Object(w.d)(e).scope,!0);try{if(2<t.length)if(n){o=[];for(const n of t.slice(1))o.push(Object(w.b)(e,n))}else for(const n of t.slice(1))o=Object(w.b)(e,n);else o=Object(w.b)(e,r)}finally{Object(w.m)(e)}return o}},{name:"$__capture",fn:(e,t)=>(...t)=>{Object(S.a)("$__capture",t,1);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let r=null;const o=Object(w.a)(e,n);Object(w.f)(e,{},!0,o);try{for(const n of t.slice(1))r=Object(w.b)(e,n)}finally{Object(w.m)(e)}return r}},{name:"$__lambda",fn:B},{name:"$__defun",fn:(e,t)=>(...t)=>{Object(S.a)("$__defun",t,3);const n=I(...t),r=B(e)(...t.slice(1));return Object(S.c)("$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}},{name:"$__refun",fn:(e,t)=>(...t)=>{Object(S.a)("$__refun",t,1,1);const n=I(...t);Object(S.c)("$__refun",e.funcMap,n.symbol);const r=e.funcMap.get(n.symbol);if(!r)throw new Error(`[SX] $__refun: function ${n.symbol} is not defined.`);return r.fn(e,n.symbol)}},{name:"$__defmacro",fn:(e,t)=>(...t)=>{Object(S.a)("$__defmacro",t,3);const n=I(...t),r=t[1];if(!Array.isArray(r))throw new Error("[SX] $__defmacro: Invalid argument(s): args[1] is not array.");let o=!1;for(let t=0;t<r.length;t++){const n=r[t];if(t===r.length-1&&e.config.enableSpread&&Array.isArray(n)&&Object(k.b)(n[0],e.config.reservedNames.spread)){if(!Object(k.b)(n[1]))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);r[t]=n[1],o=!0}else if(!Object(k.b)(n))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}const a=t.slice(2),s=Object(w.c)(e),i=t=>(...n)=>F(e,0,s)(!1,!1,[[e.config.reservedNames.self,i],...t.map((r,a)=>[r.symbol,Object(k.c)(e,o&&a===t.length-1?n.slice(a):n[a])])],...a),c={name:n.symbol,fn:(e,t,n)=>e=>i(n)(...e.slice(1)),formalArgs:r,lastIsSpread:o};if(Object(S.c)("$__defmacro",e.macroMap,n.symbol),e.macroMap.has(n.symbol)){let t=e.macroMap.get(n.symbol);if(t.next=c,t&&t.formalArgs)if(t.formalArgs.length<r.length)e.macroMap.set(n.symbol,c),c.next=t;else{let e=t;for(t=t.next;t;){if(t.formalArgs&&t.formalArgs.length<r.length){e.next=c,c.next=t;break}e=t,t=t.next}}}else e.macroMap.set(n.symbol,c);return i}},{name:"$apply",fn:z},{name:"$__call",fn:(e,t)=>(...t)=>{Object(S.a)("$__call",t,2);const{car:n,cdr:r}=X(...t),o=Object(k.b)(r),a=o?o.symbol:Object(w.b)(e,r);return Object(S.c)("$__call",n,a),Function.prototype.apply.call(n[a],n,t.slice(2))}},{name:"$__try",fn:(e,t)=>(...t)=>{Object(S.a)("$__try",t,1,2);let n=[];try{n=Object(w.b)(e,t[0])}catch(r){if(r instanceof j.a)throw r;n=1<t.length?F(e)(!0,!1,[["$error",Object(k.c)(e,r)],["$parent",Object(k.c)(e,Object(w.e)(e))]],t[1]):null}return n}},{name:"$raise",fn:K},{name:"$__if",fn:(e,t)=>(...t)=>{Object(S.a)("$__if",t,2,3);const n=I(...t);let r=[];return r=Y(n)?Object(w.b)(e,t[1]):2<t.length?Object(w.b)(e,t[2]):null,r}},{name:"$__if-null",fn:(e,t)=>(...t)=>{Object(S.a)("$__ifNull",t,2,2);const{car:n,cdr:r}=X(...t);let o=[];return o=re(n,null)?Object(w.b)(e,r):n,o}},{name:"$__cond",fn:(e,t)=>(...t)=>{Object(S.a)("$__cond",t,1);for(let n=0;n<t.length-1;n+=2){const r=t[n],o=t[n+1];if(Y(Object(w.b)(e,r)))return Object(w.b)(e,o)}return null}},{name:"$__while",fn:(e,t)=>(...t)=>{Object(S.a)("$__while",t,1);const n=I(...t),r=t.slice(1);let o=null;for(;Y(Object(w.b)(e,n));)for(const t of r)o=Object(w.b)(e,t);return o}},{name:"$__do-while",fn:(e,t)=>(...t)=>{Object(S.a)("$__doWhile",t,1);const n=I(...t),r=t.slice(1);let o=null;do{for(const t of r)o=Object(w.b)(e,t)}while(Y(Object(w.b)(e,n)));return o}},{name:"$__until",fn:(e,t)=>(...t)=>{Object(S.a)("$__until",t,1);const n=I(...t),r=t.slice(1);let o=null;for(;H(Object(w.b)(e,n));)for(const t of r)o=Object(w.b)(e,t);return o}},{name:"$__do-until",fn:(e,t)=>(...t)=>{Object(S.a)("$__doUntil",t,1);const n=I(...t),r=t.slice(1);let o=null;do{for(const t of r)o=Object(w.b)(e,t)}while(H(Object(w.b)(e,n)));return o}},{name:"$__repeat",fn:(e,t)=>(...t)=>{Object(S.a)("$__repeat",t,2);const n=Object(k.b)(I(...t));if(!n)throw new Error("[SX] $__repeat: Invalid argument(s): item(s) of args[0] is not symbol.");Object(S.c)("$__repeat",{},n.symbol);const r=Object(w.k)(e,n,!1),o=Object(w.l)(C(...t)),a=t.slice(2);let s=null;for(let t=0;t<o;t++){r[n.symbol]=t;for(const t of a)s=Object(w.b)(e,t)}return s}},{name:"$__for",fn:(e,t)=>(...t)=>{Object(S.a)("$__for",t,2);const n=Object(k.b)(I(...t));if(!n)throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[0] is not symbol.");Object(S.c)("$__for",{},n.symbol);const r=Object(w.k)(e,n,!1),o=C(...t);if(!Array.isArray(o))throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[1] is not array.");const a=t.slice(2);let s=null;for(const t of o){r[n.symbol]=t;for(const t of a)s=Object(w.b)(e,t)}return s}},{name:"$pipe",fn:Q},{name:"$__get",fn:(e,t)=>(...t)=>{Object(S.a)("$__get",t,1);let n=null,r=Object(k.b)(t[0]);if(!r)switch(typeof t[0]){case"string":case"number":r={symbol:String(t[0])};break;default:n=Object(w.b)(e,t[0])}if(r){const t=Object(w.k)(e,r,!0);if(!t)throw new Error(`[SX] $__get: Invalid argument(s): args[0]: symbol "${r.symbol}" is not defined.`);n=t[r.symbol]}for(let o=1;o<t.length;o++){let a=t[o],s=!0;for(;s;)switch(typeof a){case"function":n=a(n),s=!1;break;case"object":if(Array.isArray(a))a=Object(w.b)(e,a);else if(r=Object(k.b)(a),r)a=r.symbol;else{if(!Object.prototype.hasOwnProperty.call(a,"value"))throw new Error("[SX] $__get: Invalid argument(s): invalid name path.");a=Object(w.b)(e,a)}break;case"number":a<0&&(a=n.length+a);case"string":Object(S.c)("$__get",n,a),n=n[a],s=!1;break;default:throw new Error("[SX] $__get: Invalid argument(s): invalid name path.")}}return n}},{name:"$__let",fn:J},{name:"$__set",fn:(e,t)=>(...t)=>{Object(S.a)("$__set",t,2,2);let n=[];Array.isArray(t[0])?n=t[0]:n.push(t[0]);let r=Object(k.b)(n[0]);if(!r){if("string"!=typeof n[0])throw new Error("[SX] $__set: Invalid argument(s): invalid name.");Object(S.c)("$__set",{},n[0]),r={symbol:n[0]}}let o=Object(w.k)(e,r,!0);if(null===o)throw new Error(`[SX] $__set: Unresolved symbol: ${r.symbol}.`);let a=!1;for(let s=0;s<n.length;s++){let i=n[s],c=!0;const l=s===n.length-1;for(;c;)switch(typeof i){case"function":o=i(o),c=!1;break;case"object":if(Array.isArray(i))i=Object(w.b)(e,i);else if(r=Object(k.b)(i),r)i=r.symbol;else{if(!Object.prototype.hasOwnProperty.call(i,"value"))throw new Error("[SX] $__set: Invalid argument(s): invalid name.");i=Object(w.b)(e,i)}break;case"number":i<0&&(i=o.length+i);case"string":Object(S.c)("$__set",o,i),l?(o[i]=t[1],a=!0):o=o[i],c=!1;break;default:throw new Error("[SX] $__set: Invalid argument(s): invalid name.")}}if(!a)throw new Error("[SX] $__set: Invalid argument(s): last path is not lvalue.");return t[1]}},{name:"$boolean",fn:G},{name:"$not",fn:Z},{name:"$__and",fn:ee},{name:"$__or",fn:te},{name:"==",fn:ne},{name:"!=",fn:oe},{name:"<",fn:ae},{name:"<=",fn:se},{name:">",fn:ie},{name:">=",fn:ce},{name:"$typeof",fn:le},{name:"$symbol",fn:ue},{name:"$__gensym",fn:(e,t)=>(...t)=>{Object(S.a)("$__gensym",t,0,1);const n={symbol:`${`$__tempvar__$$ec${e.evalCount++}$$_`}_$gensym`};if(1===t.length){const r=Object(k.b)(t[0]);if(r)J(e)(r,n);else{if("string"!=typeof t[0])throw new Error("[SX] $__gensym: Invalid argument(s): item(s) of args[0] is not symbol.");J(e)({symbol:t[0]},n)}}return n}},{name:"$is-symbol",fn:me},{name:"$is-null",fn:fe},{name:"$is-nil",fn:pe},{name:"$is-undefined",fn:de},{name:"$is-list",fn:be},{name:"$is-string",fn:ye},{name:"$is-number",fn:ge},{name:"$is-NaN",fn:he},{name:"$is-finite",fn:$e},{name:"$is-integer",fn:_e},{name:"$to-string",fn:ve},{name:"$to-number",fn:je},{name:"$__#",fn:(e,t)=>(...t)=>{const n={};for(const r of t){if(!(Array.isArray(r)&&0<r.length))throw new Error("[SX] $__toObject: Invalid argument(s): args[?] is not array.");{const t=Object(k.b)(r[0]),o=t?t.symbol:String(Object(w.b)(e,r[0]));Object(S.c)("$__#",n,o),1===r.length?n[o]=!0:2===r.length?n[o]=Object(w.b)(e,r[1]):n[o]=Object(w.b)(e,[{symbol:e.config.reservedNames.list}].concat(r.slice(1)))}}return n}},{name:"$object-assign",fn:ke},{name:"$json-stringify",fn:we},{name:"$now",fn:Se},{name:"$datetime-from-iso",fn:Ne},{name:"$datetime",fn:Te},{name:"$datetime-lc",fn:Ae},{name:"$datetime-to-iso-string",fn:Ee},{name:"$datetime-to-components",fn:Ie},{name:"$datetime-to-components-lc",fn:Pe},{name:"$json-parse",fn:xe},{name:"$match",fn:Ce},{name:"$console-log",fn:Ue},{name:"$console-error",fn:Le},{name:"$console-trace",fn:Ve},{name:"$console-time",fn:Xe},{name:"$console-time-end",fn:Me},{name:"$console-time-log",fn:qe}]),Re=[{name:"$$__lambda",fn:W},{name:"$$__defun",fn:(e,t)=>(...t)=>{Object(S.a)("$$__defun",t,3);const n=I(...t),r=W(e)(...t.slice(1));return Object(S.c)("$$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}}];[].concat(De,Re);const Fe=[{name:"$scope",fn:(e,t)=>t=>[{symbol:"$__scope"},t[1],t[2],...t.slice(3).map(t=>Object(k.c)(e,t))]},{name:"$local",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$global",fn:(e,t)=>t=>[{symbol:"$__global"},!1,...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$clisp-let",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$capture",fn:(e,t)=>t=>[{symbol:"$__capture"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$closure",fn:(e,t)=>t=>{if(!Object(k.b)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(k.c)(e,t[3]),Object(k.c)(e,[{symbol:"$__lambda"},Object(k.c)(e,t[1]),...t.slice(4).map(t=>Object(k.c)(e,t))])]}},{name:"|->",fn:(e,t)=>e=>[{symbol:"$closure"},...e.slice(1)]},{name:"$lambda",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"->",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$defun",fn:(e,t)=>t=>[{symbol:"$__defun"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$refun",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"<-",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$defmacro",fn:(e,t)=>t=>[{symbol:"$__defmacro"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$call",fn:(e,t)=>t=>(Object(S.a)("$call",t,3),[{symbol:"$__call"},t[1],Object(k.c)(e,t[2]),...t.slice(3)])},{name:"$try",fn:(e,t)=>t=>[{symbol:"$__try"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$if",fn:(e,t)=>t=>[{symbol:"$__if"},t[1],...t.slice(2).map(t=>Object(k.c)(e,t))]},{name:"$if-null",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(k.c)(e,t))]},{name:"??",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(k.c)(e,t))]},{name:"$cond",fn:(e,t)=>t=>[{symbol:"$__cond"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$while",fn:(e,t)=>t=>[{symbol:"$__while"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$do-while",fn:(e,t)=>t=>[{symbol:"$__do-while"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$until",fn:(e,t)=>t=>[{symbol:"$__until"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$do-until",fn:(e,t)=>t=>[{symbol:"$__do-until"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$repeat",fn:(e,t)=>t=>{if(!Object(k.b)(t[2],"of"))throw new Error("[SX] $repeat: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__repeat"},Object(k.c)(e,t[1]),t[3],...t.slice(4).map(t=>Object(k.c)(e,t))]}},{name:"$for",fn:(e,t)=>t=>{if(!Object(k.b)(t[2],"of"))throw new Error("[SX] $for: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__for"},Object(k.c)(e,t[1]),t[3],...t.slice(4).map(t=>Object(k.c)(e,t))]}},{name:"$get",fn:(e,t)=>t=>[{symbol:"$__get"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$let",fn:(e,t)=>t=>(Object(S.a)("$let",t,3,3),[{symbol:"$__let"},Object(k.c)(e,t[1]),t[2]])},{name:"$clisp-defvar",fn:(e,t)=>t=>(Object(S.a)("$clisp-defvar",t,3,3),[{symbol:"$global"},[{symbol:"$__let"},Object(k.c)(e,t[1]),t[2]]])},{name:"$set",fn:(e,t)=>t=>(Object(S.a)("$set",t,3,3),[{symbol:"$__set"},Object(k.c)(e,t[1]),t[2]])},{name:"$clisp-setq",fn:(e,t)=>t=>(Object(S.a)("$clisp-setq",t,3,3),[{symbol:"$__set"},Object(k.c)(e,t[1]),t[2]])},{name:"$and",fn:(e,t)=>t=>[{symbol:"$__and"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$or",fn:(e,t)=>t=>[{symbol:"$__or"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$gensym",fn:(e,t)=>t=>[{symbol:"$__gensym"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"#",fn:(e,t)=>t=>[{symbol:"$__#"},...t.slice(1).map(t=>Object(k.c)(e,t))]}],Be=[{name:"$$closure",fn:(e,t)=>t=>{if(!Object(k.b)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(k.c)(e,t[3]),Object(k.c)(e,[{symbol:"$$__lambda"},Object(k.c)(e,t[1]),...t.slice(4).map(t=>Object(k.c)(e,t))])]}},{name:"|=>",fn:(e,t)=>e=>[{symbol:"$$closure"},...e.slice(1)]},{name:"$$lambda",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"=>",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(k.c)(e,t))]},{name:"$$defun",fn:(e,t)=>t=>[{symbol:"$$__defun"},...t.slice(1).map(t=>Object(k.c)(e,t))]}];[].concat(Fe,Be);var We=[{name:"nil",fn:(e,t)=>[]},{name:"null",fn:(e,t)=>null},{name:"undefined",fn:(e,t)=>{}},{name:"true",fn:(e,t)=>!0},{name:"#true",fn:(e,t)=>!0},{name:"#t",fn:(e,t)=>!0},{name:"false",fn:(e,t)=>!1},{name:"#false",fn:(e,t)=>!1},{name:"#f",fn:(e,t)=>!1},{name:"#Number:Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"+Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"-Infinity",fn:(e,t)=>Number.NEGATIVE_INFINITY},{name:"#Number:Epsilon",fn:(e,t)=>Number.EPSILON},{name:"#Number:MaxValue",fn:(e,t)=>Number.MAX_VALUE},{name:"#Number:MinValue",fn:(e,t)=>Number.MIN_VALUE},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MAX_SAFE_INTEGER},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MIN_SAFE_INTEGER},{name:"NaN",fn:(e,t)=>Number.NaN}];function ze(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"eof")}function Ke(e){return"string"==typeof e&&0===e.trim().length}function Qe(e){return"string"==typeof e&&/^[0-9\+\-]$/.test(e)}function Je(e){return"string"==typeof e&&/^[0-9]$/.test(e)}function Ge(e){return"string"==typeof e&&!Ke(e)&&!Qe(e)}function Ye(e){return`line: ${e.line} / strings: ${e.index} / pos: ${e.pos} :${e.strings.length>e.index?e.strings[e.index].slice(e.pos,e.pos+20):""}`}function Ze(e,t,n){if(e.strings.length<=e.index)return{eof:!0};if(e.strings[e.index].length<=e.pos){if(!e.values||e.values.length<=e.index)return e.pos=0,e.index++,Ze(e);{const t={value:e.values[e.index]};return e.pos=0,e.index++,t}}if(t)for(const n of t){const t=e.strings[e.index].slice(e.pos,e.pos+n.length);if(t===n)return e.pos+=n.length,e.line+=t.split("\n").length-1,{eof:!1,eofSeq:n}}{let t=e.strings[e.index].slice(e.pos,e.pos+1);if(e.pos++,"\n"===t&&e.line++,!n&&"\\"===t){if(e.strings[e.index].length<=e.pos)throw new Error(`[SX] getChar: Invalid syntax at: ${Ye(e)}.`);switch(t=e.strings[e.index].slice(e.pos,e.pos+1),e.pos++,t){case"b":t="\b";break;case"t":t="\t";break;case"n":t="\n";break;case"v":t="\v";break;case"f":t="\f";break;case"r":t="\r";break;case"U":case"u":if("{"===e.strings[e.index].slice(e.pos,e.pos+1)){let n="";for(let t=0;t<6;t++){const r=e.strings[e.index].slice(e.pos+t,e.pos+1+t);if("}"===r){if(0===t)throw new Error(`[SX] getChar: Invalid syntax at: ${Ye(e)}.`);e.pos+=t;break}if(!/^[0-9A-Fa-f]{1}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${Ye(e)}.`);n+=r}if("}"!==e.strings[e.index].slice(e.pos,e.pos+1))throw new Error(`[SX] getChar: Invalid syntax at: ${Ye(e)}.`);e.pos++,t=String.fromCodePoint(Number.parseInt(n,16))}else{const n=e.strings[e.index].slice(e.pos,e.pos+4);if(!/^[0-9A-Fa-f]{4}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${Ye(e)}.`);e.pos+=4,t=String.fromCodePoint(Number.parseInt(n,16))}}}return t}}function He(e,t,n,r){const o=e.index,a=e.pos,s=e.line,i=[];try{for(let o=0;o<t;o++)i.push(Ze(e,n,r))}finally{e.index=o,e.pos=a,e.line=s}return i}function et(e,t,n){const r=e.index,o=e.pos,a=e.line;let s;try{s=Ze(e,t,n)}finally{e.index=r,e.pos=o,e.line=a}return s}function tt(e){let t=et(e);for(;!ze(t)&&Ke(t);)Ze(e),t=et(e)}function nt(e,t){let n="",r=et(e,t);for(;!ze(r)&&"string"==typeof r;){if(/^0[XxOoBb][0-9]*$/.test(n+r))Ze(e,t),n+=r;else{if(!/^[0-9\+\-\.EeInfinityNaN]+$/.test(n+r))break;Ze(e,t),n+=r}r=et(e,t)}if(!/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)|(0[XxOoBb][0-9]+)|([\+\-]Infinity)|(NaN)$/.test(n))throw new Error(`[SX] parseNumber: Invalid syntax at: ${Ye(e)}.`);return Number(n)}function rt(e,t){let n="",r=et(e,t);for(;!ze(r);){if("string"==typeof r){if(Ke(r))break;if("#"===r&&"|"===He(e,2,t)[1])break;if(!/^[^.;()"]+$/.test(n+r))break;Ze(e,t),n+=r}else{if("object"!=typeof r||!Object.prototype.hasOwnProperty.call(r,"value"))throw new Error(`[SX] parseSymbol: Invalid syntax at: ${Ye(e)}.`);Ze(e,t);r.value;n+=String(r)}r=et(e,t)}if(e.config.enableShorthands){let t=null;if(t=n.match(/^:((?:\:[^=:]+?)+?)=$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.set},n]]}if(t=n.match(/^:((?:\:[^@:]+?)+?)@([^@:]+?)$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.call},[{symbol:e.config.reservedNames.get},...n],{symbol:t[2]}]]}if(t=n.match(/^:((?:\:[^:]+?)+?)$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.get},...n]}}return{symbol:n}}function ot(e,t,n,r,o,a){const s=n?[...t,n]:t,i=[],c=[];for(;;){let t="",l=et(e,s,o);for(;!ze(l);){if("string"==typeof l)Ze(e,s,o),t+=l;else{if("object"!=typeof l||!Object.prototype.hasOwnProperty.call(l,"value"))throw new Error(`[SX] parseStringOrComment: Invalid syntax at: ${Ye(e)}.`);Ze(e,s,o);l.value;t+=String(l)}l=et(e,s,o)}if(Ze(e,s,o),!0===l.eof&&!a)throw new j.c("parseStringOrComment");if(i.push(t),l.eofSeq!==n)break;c.push(ut(e,r,[]))}return{strings:i,values:c}}function at(e,t){return ot(e,['"'],null,")",t,!1).strings[0]}function st(e,t,n){const r=[t];n&&r.push(n);const o=ot(e,['"""'],"%%%(",")",!1,!1);for(let e=0;e<o.strings.length;e++)r.push(o.strings[e]),e<o.values.length&&r.push(o.values[e]);return r}function it(e){return{comment:ot(e,["\r","\n"],null,")",!1,!0).strings[0]}}function ct(e){return{comment:ot(e,["|#"],null,")",!1,!1).strings[0]}}function lt(e){tt(e);let t=et(e);for(;!ze(t);){switch(t){case")":throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`);case"(":return Ze(e),ut(e,")",[]);case"'":case"`":case",":{Ze(e);const n=et(e);let r=!1;","===t&&"@"===n&&(Ze(e),r=!0),tt(e);const o=("'"===t?k.c:"`"===t?k.a:k.f)(e,lt(e));return r?Object(k.d)(e,o):o}case".":{Ze(e);const t=He(e,2);return e.config.enableSpread&&"."===t[0]&&"."===t[1]?(Ze(e),Ze(e),tt(e),Object(k.e)(e,lt(e))):(tt(e),{dotted:lt(e)})}case";":return Ze(e),it(e);case"#":return"|"===He(e,2)[1]?(Ze(e),Ze(e),ct(e)):rt(e);case'"':{Ze(e);const t=He(e,4);if(e.config.enableHereDoc&&'"'===t[0]&&'"'===t[1]){let n=!0;ze(t[2])||Ke(t[2])||(Qe(t[2])?"+"!==t[2]&&"-"!==t[2]||Je(t[3])||(n=!1):Ge(t[2])&&(n=!1)),Ze(e),Ze(e);let r=null,o=null;if(n)r={symbol:e.config.reservedNames.Template};else{if(r=rt(e,["@"]),null===r)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`);if("number"==typeof r)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`);const t=He(e,2);if("@"===t[0]){if("{"!==t[1])throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`);Ze(e),Ze(e);const n=ut(e,"}",[{symbol:"@"}]);Array.isArray(n)&&(o=n)}}return st(e,r,o)}return at(e,!1)}case"@":if(e.config.enableVerbatimStringLiteral){if('"'===He(e,2)[1])return Ze(e),Ze(e),at(e,!0)}default:if("string"!=typeof t){if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"value"))return Ze(e),e.config.wrapExternalValue?t:t.value;throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`)}if(Ke(t))break;if(Qe(t)){if("+"===t||"-"===t){if(!Je(He(e,2)[1]))return rt(e)}return nt(e)}if(Ge(t))return rt(e);throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Ye(e)}.`)}tt(e),t=et(e)}throw new j.c("parseOneToken")}function ut(e,t,n){const r=n.slice(0);let o=!1;tt(e);let a=et(e);for(;!ze(a);){switch(a){case t:return Ze(e),o?r[0]:r;default:{const t=lt(e);if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"dotted")){if(1!==r.length)throw new Error(`[SX] parseList: Invalid syntax at: ${Ye(e)}.`);o=!0,Array.isArray(t)?(t.unshift(r.pop()),r.push(t)):r.push({car:r.pop(),cdr:t.dotted})}else if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"comment"))e.config.stripComments||r.push(t);else{if(o)throw new Error(`[SX] parseList: Invalid syntax at: ${Ye(e)}.`);r.push(t)}}}tt(e),a=et(e)}throw new j.c("parseList")}function mt(e){const t=[];tt(e);let n=et(e);for(;!ze(n);){switch(n){case"(":Ze(e),t.push(ut(e,")",[]));break;case"'":case"`":for(Ze(e),tt(e);;){const r=lt(e);if("object"!=typeof r||!Object.prototype.hasOwnProperty.call(r,"comment")){t.push(("'"===n?k.c:k.a)(e,r));break}e.config.stripComments||t.push(r)}break;case";":Ze(e),e.config.stripComments?it(e):t.push(it(e));break;case"#":"|"===He(e,2)[1]?(Ze(e),Ze(e),e.config.stripComments?ct(e):t.push(ct(e))):(Ze(e),e.config.stripComments?it(e):t.push(it(e)));break;case'"':{const n=He(e,3);if('"'===n[1]&&'"'===n[2]){t.push(lt(e));break}}default:throw new Error(`[SX] parseInitialState: Invalid syntax at: ${Ye(e)}.`)}tt(e),n=et(e)}return t}const ft={raiseOnUnresolvedSymbol:!1,enableEvaluate:!0,enableHereDoc:!0,enableSpread:!0,enableSplice:!0,enableShorthands:!0,enableVerbatimStringLiteral:!0,enableTailCallOptimization:!0,enableRegExpMatchOperators:!0,enableCompilationOperators:!0,stripComments:!1,wrapExternalValue:!0,returnMultipleRoot:!1,maxEvalCount:0,reservedNames:{eval:"$eval",quote:"$quote",backquote:"$backquote",unquote:"$unquote",spread:"$spread",splice:"$splice",car:"$car",cdr:"$cdr",cons:"$cons",atom:"$atom",eq:"$eq",list:"$list",let:"$clisp-let",lambda:"$lambda",self:"$self",defun:"$defun",thiz:"$this",if:"$if",cond:"$cond",while:"$while",doWhile:"$do-while",until:"$until",doUntil:"$do-until",get:"$get",defvar:"$clisp-defvar",setq:"$clisp-setq",set:"$set",call:"$call",not:"$not",and:"$and",or:"$or",isSymbol:"$is-symbol",gensym:"$gensym",raise:"$raise",catch:"$catch",Template:"Template"},symbols:[],macros:[],funcs:[]};function pt(e,t,n,r){return{strings:"string"==typeof n?[n]:n,values:r||[],index:0,pos:0,line:0,evalCount:0,scopes:[{isBlockLocal:!1,scope:t}],macroMap:new Map(e.macros.map(e=>[e.name,e])),funcMap:new Map(e.funcs.map(e=>[e.name,e])),symbolMap:new Map(e.symbols.map(e=>[e.name,e])),config:e}}function dt(e,t,n){return e.strings="string"==typeof t?[t]:t,e.values=n||[],e.index=0,e.pos=0,e.line=0,e.evalCount=0,e}var bt=n(4),yt=n(9),gt=n(7);const ht=function(e){const t=(n=e.rawToToken,e=>t=>t.src.slice(t.start,t.end).startsWith(e)?{succeeded:!0,next:{src:t.src,start:t.start+e.length,end:t.end,context:t.context},tokens:[n(e)]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,`operator "charSequence(${e})"`)});var n;const r=function(e){return(...t)=>n=>{const r=n.src.slice(n.start,n.end);let o=-1;return t.some((e,t)=>{if(r.startsWith(e))return o=t,!0})?{succeeded:!0,next:{src:n.src,start:n.start+t[o].length,end:n.end,context:n.context},tokens:[e(t[o])]}:{succeeded:!1,error:!1,src:n.src,pos:n.start,message:i(n,`operator "charClass(${t.join(",")})"`)}}}(e.rawToToken),o=function(e){return(...t)=>n=>{const r=n.src.slice(n.start,n.end);for(const e of t){if(r.startsWith(e))return{succeeded:!1,error:!1,src:n.src,pos:n.start,message:i(n,`operator "charClassNot(${t.join(",")})"`)}}const o=n.src.codePointAt(n.start);if(void 0===o)return{succeeded:!1,error:!1,src:n.src,pos:n.start,message:i(n,`operator "charClassNot(${t.join(",")})"`)};const a=String.fromCodePoint(o);return{succeeded:!0,next:{src:n.src,start:n.start+a.length,end:n.end,context:n.context},tokens:[e(a)]}}}(e.rawToToken),a=function(e){return t=>n=>{const r=n.src.slice(n.start,n.end),o=t(r);return o>=0?{succeeded:!0,next:{src:n.src,start:n.start+o,end:n.end,context:n.context},tokens:[e(r.substring(0,o))]}:{succeeded:!1,error:!1,src:n.src,pos:n.start,message:i(n,'operator "charClassByNeedleFn"')}}}(e.rawToToken),s=b(e.concatTokens),$=f(1,1),_=f(),v=(e,t)=>f(e,t),j=b(),O=b(e=>[]),k=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"||"a"<=n&&n<="z"?n.length:-1}),w=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"?n.length:-1}),x=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"a"<=n&&n<="z"?n.length:-1}),S=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="9"?n.length:-1}),N=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"1"<=n&&n<="9"?n.length:-1}),T=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="1"?n.length:-1}),A=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="7"?n.length:-1}),E=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="F"||"a"<=n&&n<="f"||"0"<=n&&n<="9"?n.length:-1}),I=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"||"a"<=n&&n<="z"||"0"<=n&&n<="9"?n.length:-1}),P=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\n\r\t\v\u2028\u2029\ufeff".includes(n)?n.length:-1}),C=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\t\v\u2028\u2029\ufeff".includes(n)?n.length:-1}),U=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return 0<=t&&t<=31||127<=t&&t<=159?n.length:-1}),L=a(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\n\r\t\v\u2028\u2029\ufeff".includes(n)||0<=t&&t<=31||127<=t&&t<=159?-1:n.length}),V=r("\r\n","\n","\r"),X=a(e=>{const t=e.codePointAt(0);return void 0===t?-1:String.fromCodePoint(t).length}),M=p(T,r("_")),q=p(A,r("_")),D=p(E,r("_")),R=j(s(v(0,1)(r("+","-")),p(j($(N),_(p(S,r("_")))),t("0")))),F=j(s(R,O(t("n")))),B=j(s(v(0,1)(r("+","-")),p(j($(N),_(p(S,r("_")))),t("0")),v(0,1)(j(t("."),v(1)(p(S,r("_"))))),v(0,1)(j(r("E","e"),v(0,1)(r("+","-")),p(j($(N),_(S)),t("0"))))));return{seq:t,cls:r,notCls:o,clsFn:a,classes:{alpha:k,upper:w,lower:x,num:S,nonzero:N,bin:T,oct:A,hex:E,alnum:I,space:P,spaceWithinSingleLine:C,ctrl:U,newline:V,word:L,any:X},numbers:{bin:(...e)=>j(O(p(...e)),s($(T),_(M))),oct:(...e)=>j(O(p(...e)),s($(A),_(q))),hex:(...e)=>j(O(p(...e)),s($(E),_(D))),int:R,bigint:F,float:B},cat:s,once:$,repeat:_,qty:v,zeroWidth:e=>c(e),err:e=>l(e),beginning:e=>u(e),end:e=>m(e),first:(...e)=>p(...e),or:(...e)=>d(...e),combine:j,erase:O,trans:e=>b(e),ahead:(...e)=>y(...e),behind:(e,t)=>g(e,t),rules:e=>h(e)}}({rawToToken:e=>e,concatTokens:e=>e.length?[e.reduce((e,t)=>String(e)+t)]:[]}),$t=function(e){const t=(n=e.rawToToken,e.comparator,e=>t=>Math.max(0,t.end-t.start)>0&&e(t.src[t.start])?{succeeded:!0,next:{src:t.src,start:t.start+1,end:t.end,context:t.context},tokens:[n(t.src[t.start])]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:i(t,'operator "objClassByNeedleFn"')});var n;const r=t(e=>!0);return{seq:$(e.rawToToken,e.comparator),cls:_(e.rawToToken,e.comparator),notCls:v(e.rawToToken,e.comparator),clsFn:t,classes:{any:r},cat:b(e.concatTokens),once:f(1,1),repeat:f(),qty:(e,t)=>f(e,t),zeroWidth:e=>c(e),err:e=>l(e),beginning:e=>u(e),end:e=>m(e),first:(...e)=>p(...e),or:(...e)=>d(...e),combine:b(),erase:b(e=>[]),trans:e=>b(e),ahead:(...e)=>y(...e),behind:(e,t)=>g(e,t),rules:e=>h(e)}}({rawToToken:e=>e,concatTokens:e=>e.length?[e.reduce((e,t)=>String(e)+t)]:[],comparator:(e,t)=>e===t}),{seq:_t,cls:vt,notCls:jt,clsFn:Ot,classes:kt,numbers:wt,cat:xt,once:St,repeat:Nt,qty:Tt,zeroWidth:At,err:Et,beginning:It,end:Pt,first:Ct,or:Ut,combine:Lt,erase:Vt,trans:Xt,ahead:Mt,rules:qt}=ht,Dt=Xt(e=>[[{symbol:"directive"},...e]])(Vt(Tt(2)(vt("/"))),Vt(Nt(kt.space)),xt(_t("@tynder-"),Nt(kt.alnum)),Vt(Nt(kt.space)),xt(Nt(jt("\r\n","\n","\r"))),Vt(kt.newline)),Rt=Lt(Vt(Tt(2)(vt("/"))),Mt(Nt(kt.space),jt("@tynder-")),Nt(jt("\r\n","\n","\r")),kt.newline),Ft=Lt(_t("#"),Nt(jt("\r\n","\n","\r")),kt.newline),Bt=Lt(_t("/**"),Nt(kt.space),e=>{const t=xt(Nt(jt("*/")))(e);if(t.succeeded){const e=Object.assign({},t.next.context);e.docComment=t.tokens[0].trim(),t.next.context=e}return t},_t("*/")),Wt=Lt(_t("/*"),Nt(jt("*/")),_t("*/")),zt=Ct(kt.space,Rt,Ft,Bt,Wt),Kt=Xt(e=>[!0])(_t("true")),Qt=Xt(e=>[!1])(_t("false")),Jt=Xt(e=>[null])(_t("null")),Gt=Xt(e=>[void 0])(_t("undefined")),Yt=Xt(e=>[Number.POSITIVE_INFINITY])(Tt(0,1)(_t("+")),_t("Infinity")),Zt=Xt(e=>[Number.NEGATIVE_INFINITY])(_t("-Infinity")),Ht=Xt(e=>[Number.NaN])(_t("NaN")),en=Xt(e=>[Number.parseInt(e[0].replace(/_/g,""),2)])(wt.bin(_t("0b"))),tn=Xt(e=>[Number.parseInt(e[0].replace(/_/g,""),8)])(wt.oct(_t("0o"),_t("0"))),nn=Xt(e=>[Number.parseInt(e[0].replace(/_/g,""),16)])(wt.hex(_t("0x"),_t("0X"))),rn=Xt(e=>[Number.parseInt(e[0].replace(/_/g,""),10)])(wt.int),on=Xt(e=>[BigInt(e[0].replace(/_/g,""))])(wt.bigint),an=Xt(e=>[Number.parseFloat(e[0].replace(/_/g,""))])(wt.float),sn=Ct(tn,nn,en,on,an,rn,Yt,Zt,Ht),cn=Ct(Xt(e=>["'"])(_t("\\'")),Xt(e=>['"'])(_t('\\"')),Xt(e=>["`"])(_t("\\`")),Xt(e=>["/"])(_t("\\/")),Xt(e=>["\\"])(_t("\\\\")),Xt(e=>[""])(_t("\\\r\n")),Xt(e=>[""])(_t("\\\r")),Xt(e=>[""])(_t("\\\n")),Xt(e=>["\n"])(_t("\\n")),Xt(e=>["\r"])(_t("\\r")),Xt(e=>["\v"])(_t("\\v")),Xt(e=>["\t"])(_t("\\t")),Xt(e=>["\b"])(_t("\\b")),Xt(e=>["\f"])(_t("\\f")),Xt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(xt(Vt(_t("\\u")),Tt(4,4)(kt.hex))),Xt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(xt(Vt(_t("\\u{")),Tt(1,6)(kt.hex),Vt(_t("}")))),Xt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(xt(Vt(_t("\\x")),Tt(2,2)(kt.hex))),Xt(e=>[String.fromCodePoint(Number.parseInt(e[0],8))])(xt(Vt(_t("\\")),Tt(3,3)(kt.oct)))),ln=Xt(e=>[e[0]])(Vt(_t("'")),xt(Nt(Ct(cn,Lt(vt("\r","\n"),Et("Line breaks within strings are not allowed.")),jt("'")))),Vt(_t("'"))),un=Xt(e=>[e[0]])(Vt(_t('"')),xt(Nt(Ct(cn,Lt(vt("\r","\n"),Et("Line breaks within strings are not allowed.")),jt('"')))),Vt(_t('"'))),mn=Xt(e=>[e[0]])(Vt(_t("`")),xt(Nt(Ct(cn,jt("`")))),Vt(_t("`"))),fn=Ct(ln,un,mn),pn=Xt(e=>[{value:e[1]?new RegExp(e[0],e[1]):new RegExp(e[0])}])(Vt(_t("/")),xt(Nt(Ct(cn,jt("/")))),Vt(_t("/")),xt(Tt(0)(vt("g","i","m","s","u","y")))),dn=Xt(e=>e)(xt(Lt(kt.alpha,Nt(kt.alnum)))),bn=Xt(e=>[{symbol:e[0]}])(xt(Lt(_t("@"),kt.alpha,Nt(kt.alnum)))),yn=Ct(Kt,Qt,Jt,Gt,sn,fn),gn=Ct(fn,dn),hn=Ct(Xt(e=>[[]])(Vt(_t("["),Nt(zt),_t("]"))),Xt(e=>{const t=[{symbol:"$list"}];for(const n of e)t.push(n);return[t]})(Vt(_t("[")),Lt(Vt(Nt(zt)),Ct(e=>hn(e),e=>_n(e),yn),Vt(Nt(zt))),Nt(Lt(Vt(Nt(zt),_t(","),Nt(zt)),Ct(e=>hn(e),e=>_n(e),yn),Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Ct(Mt(_t("]")),Et("listValue: Unexpected token has appeared.")),Vt(_t("]")))),$n=Lt(gn,Vt(Nt(zt),Ct(_t(":"),Et('":" is needed.')),Nt(zt)),Ct(e=>hn(e),e=>_n(e),yn,Et("object value is needed."))),_n=Ct(Xt(e=>[[{symbol:"#"}]])(Vt(_t("{"),Nt(zt),_t("}"))),Xt(e=>{const t=[{symbol:"#"}];for(let n=0;n<e.length;n+=2){if(Object(gt.b)(gt.a,e[n]))throw new Error(`Unsafe symbol name is appeared in object literal: ${e[n]}`);t.push([e[n],e[n+1]])}return[t]})(Vt(_t("{")),Lt(Vt(Nt(zt)),$n,Vt(Nt(zt))),Nt(Lt(Vt(_t(","),Nt(zt)),$n,Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Ct(Mt(_t("}")),Et("objectValue: Unexpected token has appeared.")),Vt(_t("}")))),vn=Ct(yn,hn,_n),jn=Xt(e=>[[{symbol:"primitiveValue"},e[0]]])(Ct(Kt,Qt,sn,fn)),On=Xt(e=>[[{symbol:"primitive"},e[0]]])(Ct(_t("number?"),_t("integer?"),_t("bigint?"),_t("string?"),_t("boolean?"),_t("number"),_t("integer"),_t("bigint"),_t("string"),_t("boolean"))),kn=Ct(_t("number"),_t("string")),wn=Xt(e=>[[{symbol:"primitive"},e[0]]])(Ct(_t("null"),_t("undefined"),_t("any"),_t("unknown"),_t("never"))),xn=Ct(On,wn,Xt(e=>[[{symbol:"ref"},e[0]]])(Mt(jt("Array","Partial","Pick","Omit")),dn)),Sn=Xt(e=>[[{symbol:"sequenceOf"},...e]])(Lt(Vt(_t("[")),Lt(Vt(Nt(zt)),e=>Bn(Ct(_t(","),_t("]")))(e),Vt(Nt(zt))),Nt(Lt(Vt(_t(","),Nt(zt)),e=>Bn(Ct(_t(","),_t("]")))(e),Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Ct(Mt(_t("]")),Et("sequenceType: Unexpected token has appeared.")),Vt(_t("]")))),Nn=Ct(Xt(e=>[[{symbol:"#"},["max",e[0]]]])(Vt(_t("..")),Vt(Nt(zt)),rn),Xt(e=>[[{symbol:"#"},["min",e[0]],["max",e[1]]]])(rn,Vt(Nt(zt)),Vt(_t("..")),Vt(Nt(zt)),rn),Xt(e=>[[{symbol:"#"},["min",e[0]]]])(rn,Vt(Nt(zt)),Vt(_t(".."))),Xt(e=>[[{symbol:"#"},["max",e[0]]]])(rn)),Tn=Xt(e=>e.length>0?e:[[{symbol:"#"}]])(Vt(_t("[")),Vt(Nt(zt)),Tt(0,1)(Nn),Vt(Nt(zt)),Vt(_t("]"))),An=Xt(e=>[[{symbol:"repeated"},e[0],e[1]]])(Vt(_t("Array")),Vt(Nt(zt)),Vt(_t("<")),Vt(Nt(zt)),Ct(e=>Fn(Ct(_t(","),_t(">")))(e),Et("type is expected in Array type.")),Vt(Nt(zt)),Tt(0,1)(Lt(Vt(_t(",")),Vt(Nt(zt)),Nn,Vt(Nt(zt)))),Ct(Mt(_t(">")),Et("'>' is expected in Array type.")),Vt(_t(">"))),En=Xt(e=>[[{symbol:"partial"},e[0],e[1]]])(Vt(_t("Partial")),Vt(Nt(zt)),Vt(_t("<")),Vt(Nt(zt)),Ct(e=>Fn(Ct(_t(","),_t(">")))(e),Et("type is expected in Partial type.")),Vt(Nt(zt)),Ct(Mt(_t(">")),Et("'>' is expected in Partial type.")),Vt(_t(">"))),In=Xt(e=>[[{symbol:"Pick"===e[0]?"picked":"omit"},e[1],...e.slice(2)]])(Ct(_t("Pick"),_t("Omit")),Vt(Nt(zt)),Vt(_t("<")),Vt(Nt(zt)),Ct(e=>Fn(Ct(_t(","),_t(">")))(e),Et("type is expected in Partial type.")),Vt(Nt(zt)),Lt(Vt(_t(",")),Vt(Nt(zt)),fn,Tt(0)(Lt(Vt(Nt(zt)),Vt(_t("|")),Vt(Nt(zt)),fn)),Vt(Nt(zt))),Ct(Mt(_t(">")),Et("'>' is expected in Pick|Omit type.")),Vt(_t(">"))),Pn=Xt(e=>[e[0]])(xn,Vt(Nt(zt)),Tt(0,1)(Lt(Vt(_t("<")),Lt(Vt(Nt(zt)),Ct(e=>Fn(Ct(_t(","),_t(">")))(e),Et("type is expected in generic type.")),Vt(Nt(zt))),Nt(Lt(Vt(_t(","),Nt(zt)),Ct(e=>Fn(Ct(_t(","),_t(">")))(e),Et("type is expected in generic type.")),Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Ct(Mt(_t(">")),Et("genericType: Unexpected token has appeared.")),Vt(_t(">"))))),Cn=Xt(e=>[[{symbol:"spread"},e[0],e[1]]])(Vt(_t("...")),Vt(Nt(zt)),Vt(_t("<")),Vt(Nt(zt)),e=>Fn(Ct(_t(","),_t(">")))(e),Vt(Nt(zt)),Tt(0,1)(Lt(Vt(_t(",")),Vt(Nt(zt)),Nn,Vt(Nt(zt)))),Vt(_t(">"))),Un=Xt(e=>[e])(bn,Tt(0,1)(Ct(Lt(Vt(_t("("),Nt(zt),_t(")"))),Lt(Vt(_t("(")),Lt(Vt(Nt(zt)),Ct(pn,vn),Vt(Nt(zt))),Nt(Lt(Vt(Nt(zt)),Vt(_t(",")),Vt(Nt(zt)),Ct(pn,vn),Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Vt(_t(")")))))),Ln=Xt(e=>e)(Nt(Lt(Un,Vt(Nt(zt))))),Vn=e=>Xt(e=>{let t=[{symbol:"$pipe"},e[1],...e[0]];if(null!==e[2])for(const n of e[2])t=[{symbol:"repeated"},t,n];return[[t,...e[3]?[e[3]]:[],...e.slice(4)]]})(Xt(e=>[e])(Tt(0,1)(Ln)),Ct(e=>Ct(jn,Pn,En,In,An,Sn,e=>Jn(_t(","))(e))(e),Lt(Vt(_t("(")),Vt(Nt(zt)),t=>Fn(e)(t),Vt(Nt(zt)),Vt(_t(")")))),Lt(Xt(e=>null!==e[0]?[e]:[null])(Ct(Tt(1)(Lt(Vt(Nt(zt)),Tn)),At(()=>null))),Lt(Ct(Xt(e=>[e[0],...e[1]])(Tt(1)(Lt(Vt(Nt(zt)),Xt(e=>[{op:e[0]}])(Ut(_t("&"),_t("|"),_t("-"))),Vt(Nt(zt)),t=>Vn(e)(t)))),Xt(e=>[])())))),Xn=(e,t,n)=>[{symbol:e},t,n],Mn=(e,t)=>"object"==typeof e&&e.op===t,qn=$t.trans(e=>[Xn("intersect",e[0],e[2])])($t.clsFn(e=>!0),$t.clsFn(e=>Mn(e,"&")),$t.clsFn(e=>!0)),Dn=$t.trans(e=>[Xn("oneOf",e[0],e[2])])($t.clsFn(e=>!0),$t.clsFn(e=>Mn(e,"|")),$t.clsFn(e=>!0)),Rn=$t.trans(e=>[Xn("subtract",e[0],e[2])])($t.clsFn(e=>!0),$t.clsFn(e=>Mn(e,"-")),$t.clsFn(e=>!0)),Fn=e=>qt({rules:[qn,Dn,Rn],check:$t.combine($t.classes.any,$t.end())})(Xt(e=>e[0])(Vn(e))),Bn=e=>Ct(Cn,Fn(e)),Wn=Xt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},e[2],e[0]]]])(Vt(_t("type")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Vt(Nt(zt)),dn,Vt(Nt(zt)),Vt(_t("=")),Vt(Nt(zt)),e=>Fn(Ct(_t(","),_t(";")))(e),Vt(Nt(zt)),Vt(_t(";"))),zn=Xt(e=>[[{symbol:"$list"},...e.map(e=>[{symbol:"ref"},e])]])(Vt(_t("extends")),Vt(Nt(zt)),dn,Nt(Lt(Vt(Nt(zt)),Vt(_t(",")),Vt(Nt(zt)),dn))),Kn=Ct(Xt(e=>[[{symbol:"$list"},...e]])(Vt(_t("[")),Vt(Nt(zt),gn,Nt(zt),_t(":"),Nt(zt)),Nt(Lt(Ct(pn,kn),Vt(Nt(zt),_t("|"),Nt(zt)))),Ct(pn,kn),Vt(Nt(zt)),Vt(_t("]"))),gn),Qn=e=>Xt(e=>[[{symbol:"$list"},e[2],[{symbol:"$pipe"},"?"===e[3]?[{symbol:"optional"},e[4]]:e[4],...e[0]],e[1]]])(Xt(e=>[e])(Ct(Ln,At(()=>[]))),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Kn,Ct(Lt(Vt(Nt(zt)),_t("?"),Vt(Nt(zt))),At(()=>[""])),Vt(Nt(zt),Ct(_t(":"),Et('":" is needed.')),Nt(zt)),Ct(t=>Fn(Ct(e,_t("}")))(t),Et("interface member type is needed."))),Jn=e=>Xt(e=>[[{symbol:"objectType"},...e]])(Ct(Lt(Vt(_t("{"),Nt(zt),_t("}"))),Lt(Vt(_t("{")),Lt(Vt(Nt(zt)),Qn(e),Vt(Nt(zt))),Nt(Lt(Vt(e,Nt(zt)),Qn(e),Vt(Nt(zt)))),Tt(0,1)(Vt(e,Nt(zt))),Ct(Mt(_t("}")),Et("interfaceDefInner: Unexpected token has appeared.")),Vt(_t("}"))))),Gn=Xt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},[{symbol:"derived"},e[3],[{symbol:"$spread"},e[2]]],e[0]]]])(Vt(_t("interface")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Vt(Nt(zt)),dn,Vt(Nt(zt)),Ct(zn,At(()=>[])),Vt(Nt(zt)),e=>Jn(_t(";"))(e)),Yn=Xt(e=>[[{symbol:"$list"},e[1],e[2],e[0]]])(e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},dn,Vt(Nt(zt)),Ct(Lt(Vt(_t("=")),Vt(Nt(zt)),Ct(rn,fn),Vt(Nt(zt))),At(()=>null))),Zn=Xt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},[{symbol:"enumType"},...e.slice(2)],e[0]]]])(Vt(_t("enum")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Vt(Nt(zt)),dn,Vt(Nt(zt)),Ct(Lt(Vt(_t("{"),Nt(zt),_t("}"))),Lt(Vt(_t("{")),Lt(Vt(Nt(zt)),Yn,Vt(Nt(zt))),Nt(Lt(Vt(_t(","),Nt(zt)),Yn,Vt(Nt(zt)))),Tt(0,1)(Vt(_t(","),Nt(zt))),Ct(Mt(_t("}")),Et("enumDef: Unexpected token has appeared.")),Vt(_t("}"))))),Hn=Ct(Wn,Gn,Zn),er=Xt(e=>[[{symbol:"export"},e[0]]])(Vt(_t("export"),Nt(zt)),Hn),tr=Xt(e=>[[{symbol:"$local"},[[{symbol:"_ty"},e[1]]],[{symbol:"redef"},{symbol:"_ty"},[{symbol:"$pipe"},{symbol:"_ty"},...e[0]]]]])(Xt(e=>[e])(Ct(Ln,At(()=>[]))),Ct(er,Hn)),nr=Xt(e=>[[{symbol:"external"},...e]])(Vt(_t("external")),Vt(Nt(zt)),dn,Nt(Lt(Vt(Nt(zt)),Vt(vt(",")),Vt(Nt(zt)),dn,Vt(Nt(zt)))),Vt(Nt(zt)),Vt(vt(";"))),rr=Xt(e=>[[{symbol:"passthru"},e[0]]])(xt(_t("import"),Nt(zt),xt(Nt(jt(";"))),vt(";"))),or=Ct(Dt,tr,nr,rr),ar=Lt(Vt(Nt(zt)),Nt(Lt(or,Vt(Nt(zt)))),Pt());function sr(e){const t=ar(a(e,{}));if(!t.succeeded)throw new Error(t.message);return t.tokens}const ir=(()=>{let e=Object.assign({},ft);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=function(e){return e.funcs=(e.funcs||[]).concat(De).concat(e.enableCompilationOperators?Re:[]),e.macros=(e.macros||[]).concat(Fe).concat(e.enableCompilationOperators?Be:[]),e.symbols=(e.symbols||[]).concat(We),e}(e),e.stripComments=!0,function(e){let t=e||Object.assign({},ft),n={},r=[];const o=(e,n)=>{if(t.enableEvaluate)for(let t=0;t<n.length;t++)n[t]=Object(w.b)(e,n[t]);return t.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]},a=(e,...a)=>{const s=pt(t,Object.assign({},n),e,a);return o(s,r.concat(mt(s)))};return a.evaluateAST=e=>{const a=pt(t,Object.assign({},n),"");return o(a,r.concat(e))},a.repl=()=>{const e=pt(t,Object.assign({},n),"");o(e,r.slice(0));const a=(t,...n)=>(dt(e,t,n),o(e,mt(e)));return a.sync=a,a},a.setGlobals=e=>(n=Object.assign({},e||{}),a),a.appendGlobals=e=>(n=Object.assign({},n,e||{}),a),a.setStartup=(e,...o)=>{const s=pt(t,Object.assign({},n),e,o);return r=mt(s),a},a.setStartupAST=e=>(r=e,a),a.appendStartup=(e,...o)=>{const s=pt(t,Object.assign({},n),e,o);return r=r.concat(mt(s)),a},a.appendStartupAST=e=>(r=r.concat(e),a),a.install=e=>(t=e(t),a),a}(e)})();function cr(e){const t=new Map,n=new Map;let r=0;const o=(e,r)=>{let o=r;const a="string"==typeof e?e:e.symbol;if(Object(gt.b)(gt.a,a))throw new Error(`Unsafe symbol name is appeared: ${a}`);if(!t.has(o)){const e=o.typeName;o=bt.B(bt.E(e?bt.C(o,e):o,a),a)}const s=t.has(o)?t.get(o):{ty:o,exported:!1,resolved:!1};return n.set(a,s),t.has(o)||t.set(o,s),o},a=(...e)=>{for(const t of e){o(t,bt.j("any")).noOutput=!0}};ir.setGlobals({picked:bt.i,omit:bt.e,partial:bt.h,intersect:bt.c,oneOf:bt.f,subtract:bt.p,primitive:bt.j,primitiveValue:bt.k,optional:bt.g,repeated:bt.m,sequenceOf:bt.n,spread:bt.o,enumType:bt.b,objectType:bt.d,derived:bt.a,def:o,ref:e=>{const t="string"==typeof e?e:e.symbol;if(Object(gt.b)(gt.a,t))throw new Error(`Unsafe symbol name is appeared: ${t}`);if(!n.has(t))return{kind:"symlink",symlinkTargetName:t,name:t,typeName:t};let r=n.get(t).ty;return r.noOutput&&(r=Object.assign({},r),delete r.noOutput),r},export:e=>((t.has(e)?t.get(e):{ty:e,exported:!1,resolved:!1}).exported=!0,e),redef:(e,r)=>{if(e===r)return r;const o=t.has(e)?t.get(e):{ty:e,exported:!1,resolved:!1};return o.ty=r,t.set(o.ty,o),r.name&&n.set(r.name,o),o.ty},external:a,passthru:e=>{const t={kind:"never",passThruCodeBlock:e};return n.set(`__$$$gensym_${r++}$$$__`,{ty:t,exported:!1,resolved:!1}),t},directive:(e,t)=>{switch(e){case"@tynder-external":a(...t.split(",").map(e=>e.trim()));break;default:throw new Error(`Unknown directive is appeared: ${e}`)}return[]},docComment:bt.r,"@range":(e,t)=>n=>bt.D(e,t)(n),"@minValue":e=>t=>bt.y(e)(t),"@maxValue":e=>t=>bt.w(e)(t),"@greaterThan":e=>t=>bt.s(e)(t),"@lessThan":e=>t=>bt.t(e)(t),"@minLength":e=>t=>bt.x(e)(t),"@maxLength":e=>t=>bt.v(e)(t),"@match":e=>t=>bt.u(e)(t),"@msg":e=>t=>bt.z(e)(t),"@msgId":e=>t=>bt.A(e)(t)});const s=sr(e);return ir.evaluateAST(s),Object(yt.a)(n)}var lr=n(6);function ur(e,t){let n="";const r="    ".repeat(t),o="string"==typeof e?e:e.docComment;return o&&(0<=o.indexOf("\n")?n+=`${r}/**\n${r}  ${o.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${o} */\n`),n}function mr(e,t,n){switch(e.kind){case"never":return"never";case"any":return"any";case"unknown":return"unknown";case"primitive":return function(e,t){switch(e.primitiveName){case"integer":return"number";default:return e.primitiveName}}(e);case"primitive-value":return function(e,t){if(null===e.value)return"null";if(void 0===e.value)return"undefined";switch(typeof e.value){case"string":return`'${Object(lr.a)(e.value)}'`;case"bigint":return`${e.value.toString()}n`;default:return e.value.toString()}}(e);case"repeated":return function(e,t){return"primitive"===e.repeated.kind||"never"===e.repeated.kind||"any"===e.repeated.kind||"unknown"===e.repeated.kind||"object"===e.repeated.kind||"symlink"===e.repeated.kind||"one-of"===e.repeated.kind&&e.repeated.typeName?`${e.repeated.typeName?e.repeated.typeName:mr(e.repeated,!1,t)}[]`:`Array<${e.repeated.typeName?e.repeated.typeName:mr(e.repeated,!1,t)}>`}(e,n);case"spread":return"";case"sequence":return function(e,t){return`[${e.sequence.filter(e=>"spread"!==e.kind).map(e=>e.typeName?e.typeName:mr(e,!1,Object.assign(Object.assign({},t),{nestLevel:t.nestLevel+1}))).join(", ")}]`}(e,n);case"one-of":return function(e,t){return`(${e.oneOf.map(e=>e.typeName?e.typeName:mr(e,!1,t)).join(" | ")})`}(e,n);case"optional":return function(e,t){return mr(e.optional,!1,t)}(e,n);case"enum":return function(e,t){return`(${e.values.map(e=>`${e[1]}`).join(" | ")})`}(e);case"object":return function(e,t,n){var r;if(0===e.members.filter(e=>!e[2]).length)return"{}";const o=t?";\n":",\n",a=e.members.filter(e=>!e[2]).map(e=>`${ur(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${e[0]}${"optional"===e[1].kind?"?":""}: ${e[1].typeName?e[1].typeName:mr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))}`),s=(null===(r=e.additionalProps)||void 0===r?void 0:r.filter(e=>!e[2]).map((e,t)=>`${ur(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${function(e,t){return`[propName${t}: ${e.map(e=>"string"==typeof e?e:"string").join(" | ")}]`}(e[0],t)}${"optional"===e[1].kind?"?":""}: ${e[1].typeName?e[1].typeName:mr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))}`))||[];return`{\n${a.concat(s).join(o)}${o}${"    ".repeat(n.nestLevel)}}`}(e,t,n);case"symlink":return e.symlinkTargetName;case"operator":throw new Error(`Unexpected type assertion: ${e.kind}`);default:throw new Error(`Unknown type assertion: ${e.kind}`)}}function fr(e){let t="";const n={nestLevel:0};for(const r of e.entries())if(!r[1].ty.noOutput)if(t+=ur(r[1].ty,n.nestLevel),r[1].exported&&(t+="export "),"object"===r[1].ty.kind)t+=`interface ${r[0]}${r[1].ty.baseTypes&&r[1].ty.baseTypes.length?` extends ${r[1].ty.baseTypes.filter(e=>e.typeName).map(e=>e.typeName).join(", ")}`:""} ${mr(r[1].ty,!0,n)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),o="    ".repeat(n.nestLevel+1);let a=0;t+=`enum ${r[0]} {\n${r[1].ty.values.map(e=>`${ur(e[2]||"",n.nestLevel+1)}${o}${null!==a&&e[1]===a?(a++,`${e[0]}`):"number"==typeof e[1]?(a=e[1]+1,`${e[0]} = ${e[1]}`):`${e[0]} = '${Object(lr.a)(e[1])}'`},\n`).join("")}${e}}\n\n`}else"never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock?t+=`${r[1].ty.passThruCodeBlock}\n\n`:t+=`type ${r[0]} = ${r[1].ty.originalTypeName||mr(r[1].ty,!1,n)};\n\n`;return t}function pr(e,t){const n=Object.assign({},e);let r=!1;switch(t.docComment&&(n.description=t.docComment),t.kind){case"repeated":"number"==typeof t.min&&(n.minItems=t.min,r=!0),"number"==typeof t.max&&(n.maxItems=t.max,r=!0);break;case"primitive":"number"==typeof t.minValue&&(n.minimum=t.minValue,r=!0),"number"==typeof t.maxValue&&(n.maximum=t.maxValue,r=!0),"number"==typeof t.greaterThanValue&&(n.exclusiveMinimum=t.greaterThanValue,r=!0),"number"==typeof t.lessThanValue&&(n.exclusiveMaximum=t.lessThanValue,r=!0),"number"==typeof t.minLength&&(n.minLength=t.minLength,r=!0),"number"==typeof t.maxLength&&(n.maxLength=t.maxLength,r=!0),t.pattern&&(n.pattern=t.pattern.source,r=!0)}return r?n:e}function dr(e,t,n){var r;if(0<n&&t.typeName){const n={$ref:`#/definitions/${t.typeName}`};return n!==pr(n,t)?dr(e,t,0):n}switch(t.kind){case"symlink":{const n={$ref:`#/definitions/${t.symlinkTargetName}`};if(n!==pr(n,t)){const o=null===(r=e.get(t.symlinkTargetName))||void 0===r?void 0:r.ty;return o?dr(e,o,0):n}return n}case"repeated":{const r={type:"array",items:dr(e,t.repeated,n+1)};return"number"==typeof t.min&&(r.minItems=t.min),"number"==typeof t.max&&(r.maxItems=t.max),pr(r,t)}case"sequence":return pr({type:"array",items:{anyOf:t.sequence.map(t=>dr(e,t,n+1))}},t);case"spread":return dr(e,t.spread,n+1);case"one-of":return pr({anyOf:t.oneOf.map(t=>dr(e,t,n+1))},t);case"optional":return pr({oneOf:[dr(e,t.optional,n+1),{type:"null"}]},t);case"enum":return pr({type:["string","number"],enum:t.values.map(e=>e[1])},t);case"object":{const r={},o={};let a=0;const s=[];for(const o of t.members){const t=dr(e,"optional"===o[1].kind?o[1].optional:o[1],n+1);o[3]?t.description=o[3]:delete t.description,r[o[0]]=t,"optional"!==o[1].kind&&s.push(o[0])}for(const r of t.additionalProps||[]){const t=dr(e,r[1],n+1);r[3]?t.description=r[3]:delete t.description;for(const e of r[0])switch(a++,e){case"number":o["^[0-9]+$"]=t;break;case"string":o["^.+$"]=t;break;default:o[e.source]=t}}return pr(Object.assign(Object.assign(Object.assign({type:"object",properties:r},0<a?{patternProperties:o}:{}),0<s.length?{required:s}:{}),{additionalProperties:!1}),t)}case"primitive":switch(t.primitiveName){case"null":case"undefined":return pr({type:"null"},t);case"number":case"bigint":return pr({type:"number"},t);case"integer":return pr({type:"integer"},t);case"string":return pr({type:"string"},t);case"boolean":return pr({type:"boolean"},t)}case"primitive-value":switch(typeof t.value){case"number":return pr({type:"number",enum:[t.value]},t);case"bigint":return pr({type:"number",enum:[t.value.toString()]},t);case"string":return pr({type:"string",enum:[t.value]},t);case"boolean":return pr({type:"boolean",enum:[t.value]},t);default:throw new Error(`Unknown primitive-value assertion: ${typeof t.value}`)}case"never":return pr({type:"null"},t);case"any":case"unknown":return pr({type:["null","integer","number","string","boolean","array","object"]},t);case"operator":throw new Error(`Unexpected type assertion: ${t.kind}`);default:throw new Error(`Unknown type assertion: ${t.kind}`)}}function br(e){const t={$schema:"http://json-schema.org/draft-06/schema#",definitions:{}};for(const n of e.entries())n[1].ty.noOutput||(t.definitions[n[0]]=dr(e,n[1].ty,0));return t}function yr(e,t){const n=br(e);return t?"\n// tslint:disable: object-literal-key-quotes\n"+`const schema = ${JSON.stringify(n,null,2)};\nexport default schema;`+"\n// tslint:enable: object-literal-key-quotes\n":JSON.stringify(n,null,2)}function gr(e,t){let n="";const r="    ".repeat(t),o="string"==typeof e?e:e.docComment;return o&&(0<=o.indexOf("\n")?n+=`${r}/**\n${r}  ${o.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${o} */\n`),n}function hr(e,t,n){switch(e.kind){case"never":case"any":case"unknown":return"google.protobuf.Any";case"primitive":return function(e,t){switch(e.primitiveName){case"number":return"double";case"integer":return"int32";case"bigint":case"string":return"string";case"boolean":return"bool";case"undefined":case"null":default:return"google.protobuf.Any"}}(e);case"primitive-value":return function(e,t){if(null===e.value)return"google.protobuf.Any";if(void 0===e.value)return"google.protobuf.Any";switch(typeof e.value){case"number":return"double";case"bigint":case"string":return"string";case"boolean":return"bool";default:return"google.protobuf.Any"}}(e);case"repeated":return function(e,t){return`repeated ${e.repeated.typeName?e.repeated.typeName:hr(e.repeated,!1,t)}`}(e,n);case"spread":return"";case"sequence":case"one-of":return"google.protobuf.Any";case"optional":return function(e,t){switch(hr(e.optional,!1,t)){case"double":return"google.protobuf.DoubleValue";case"int64":return"google.protobuf.Int64Value";case"int32":return"google.protobuf.Int32Value";case"string":return"google.protobuf.StringValue";case"bool":return"google.protobuf.BoolValue";default:return"google.protobuf.Any"}}(e,n);case"enum":return function(e,t){return`(${e.values.map(e=>`${e[1]}`).join(" | ")})`}(e);case"object":return function(e,t,n){if(0===e.members.length)return"{}";const r=t?";\n":",\n";let o=1;return`{\n${e.members.map(e=>`${gr(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${e[1].typeName?e[1].typeName:hr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))} ${e[0]} = ${o++}`).join(r)}${r}${"    ".repeat(n.nestLevel)}}`}(e,t,n);case"symlink":return e.symlinkTargetName;case"operator":throw new Error(`Unexpected type assertion: ${e.kind}`);default:throw new Error(`Unknown type assertion: ${e.kind}`)}}function $r(e){let t='\nsyntax = "proto3";\nimport "google/protobuf/wrappers.proto";\nimport "google/protobuf/any.proto";\n\n';const n={nestLevel:0};for(const r of e.entries())if(r[1].ty.noOutput){const e="    ".repeat(n.nestLevel),o="    ".repeat(n.nestLevel+1);t+=`message ${r[0]} {\n${o}google.protobuf.Any value = 1;\n${e}}\n\n`}else if(t+=gr(r[1].ty,n.nestLevel),"object"===r[1].ty.kind)t+=`message ${r[0]} ${hr(r[1].ty,!0,n)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),o="    ".repeat(n.nestLevel+1);0<r[1].ty.values.filter(e=>"number"!=typeof e[1]).length?t+=`message ${r[0]} {\n${o}google.protobuf.Any value = 1;\n${e}}\n\n`:t+=`enum ${r[0]} {\n${r[1].ty.values.map(e=>`${gr(e[2]||"",n.nestLevel+1)}${o}${"number"==typeof e[1]?`${e[0]} = ${e[1]}`:`${e[0]} = '${Object(lr.a)(e[1])}'`};\n`).join("")}${e}}\n\n`}else if("never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock);else{const e="    ".repeat(n.nestLevel),o="    ".repeat(n.nestLevel+1);t+=`message ${r[0]} {\n${o}${hr(r[1].ty,!1,n)} value = 1;\n${e}}\n\n`}return t}function _r(e,t){let n="";const r="    ".repeat(t),o="string"==typeof e?e:e.docComment;return o&&(0<=o.indexOf("\n")?n+=`${r}/**\n${r}  ${o.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${o} */\n`),n}function vr(e,t,n){let r="";switch(e.kind){case"optional":return vr(e.optional,t,n);case"one-of":return function(e,t){return`${e.oneOf.map(e=>e.typeName?e.typeName:vr(e,!1,t)).join(" | ")}`}(e,n);case"spread":return"";case"sequence":return"Any";case"never":case"any":case"unknown":r="Any";break;case"primitive":r=function(e,t){switch(e.primitiveName){case"number":return"Float";case"integer":return"Int";case"bigint":case"string":return"String";case"boolean":return"Boolean";case"undefined":case"null":default:return"Any"}}(e);break;case"primitive-value":r=function(e,t){if(null===e.value)return"Any";if(void 0===e.value)return"Any";switch(typeof e.value){case"number":return"Float";case"bigint":case"string":return"String";case"boolean":return"Boolean";default:return"Any"}}(e);break;case"repeated":r=function(e,t){return`[${e.repeated.typeName?e.repeated.typeName:vr(e.repeated,!1,t)}${"optional"===e.repeated.kind?"":"!"}]`}(e,n);break;case"enum":r=function(e,t){return`${e.values.map(e=>`${e[1]}`).join(" | ")}`}(e);break;case"object":r=function(e,t,n){return 0===e.members.length?"{}":`{\n${e.members.map(e=>`${_r(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${e[0]}: ${e[1].typeName?`${e[1].typeName}`:vr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))}${"optional"===e[1].kind?"":"!"}`).join("\n")}\n${"    ".repeat(n.nestLevel)}}`}(e,0,n);break;case"symlink":r=e.symlinkTargetName;break;case"operator":throw new Error(`Unexpected type assertion: ${e.kind}`);default:throw new Error(`Unknown type assertion: ${e.kind}`)}return r+""}function jr(e){let t="\nscalar Any\n\n";const n={nestLevel:0};for(const r of e.entries())if(r[1].ty.noOutput)t+=`scalar ${r[0]}\n\n`;else if(t+=_r(r[1].ty,n.nestLevel),"object"===r[1].ty.kind)t+=`type ${r[0]} ${vr(r[1].ty,!0,n)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),o="    ".repeat(n.nestLevel+1);t+=`enum ${r[0]} {\n${r[1].ty.values.map(e=>`${_r(e[2]||"",n.nestLevel+1)}${o}${e[0]}\n`).join("")}${e}}\n\n`}else"never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock||(t+=`union ${r[0]} = ${vr(r[1].ty,!1,n)}\n\n`);return t}function Or(e,t){if(0<t&&e.typeName)return{kind:"symlink",symlinkTargetName:e.typeName};const n=Object.assign({},e);switch(n.kind){case"never":case"any":case"unknown":case"symlink":case"operator":break;case"primitive-value":"bigint"==typeof n.value&&(n.value=String(n.value),n.primitiveName="bigint");break;case"primitive":n.pattern&&(n.pattern=`/${n.pattern.source}/${n.pattern.flags}`);break;case"repeated":n.repeated=Or(n.repeated,t+1);break;case"spread":n.spread=Or(n.spread,t+1);break;case"sequence":n.sequence=n.sequence.map(e=>Or(e,t+1));break;case"one-of":n.oneOf=n.oneOf.map(e=>Or(e,t+1));break;case"optional":n.optional=Or(n.optional,t+1);break;case"enum":n.values=n.values.slice().map(e=>null===e[2]||void 0===e[2]?e.slice(0,2):e);break;case"object":n.members=n.members.map(e=>[e[0],Or(e[1],t+1),...e.slice(2)]),n.baseTypes&&(n.baseTypes=n.baseTypes.map(e=>Or(e,t+1)));break;default:throw new Error(`Unknown type assertion: ${n.kind}`)}return delete n.passThruCodeBlock,n}function kr(e){const t={version:"tynder/1.0",ns:{}},n={};for(const t of e.entries())n[t[0]]=Or(t[1].ty,0);return t.ns["."]=n,t}function wr(e,t){const n=kr(e);return t?"\n// tslint:disable: object-literal-key-quotes\n"+`const schema = ${JSON.stringify(n,null,2)};\nexport default schema;`+"\n// tslint:enable: object-literal-key-quotes\n":JSON.stringify(n,null,2)}function xr(e){const t=Object.assign({},e);switch(t.kind){case"never":case"any":case"unknown":case"enum":case"symlink":case"operator":break;case"primitive-value":"bigint"===t.primitiveName&&(delete t.primitiveName,t.value=BigInt(t.value));break;case"primitive":if(t.pattern){const e=/^\/(.*)\/([gimsuy]*)$/s.exec(t.pattern);if(!e)throw new Error(`Unknown pattern match assertion: ${t.pattern}`);t.pattern=new RegExp(e[1],e[2])}break;case"repeated":t.repeated=xr(t.repeated);break;case"spread":t.spread=xr(t.spread);break;case"sequence":t.sequence=t.sequence.map(e=>xr(e));break;case"one-of":t.oneOf=t.oneOf.map(e=>xr(e));break;case"optional":t.optional=xr(t.optional);break;case"object":t.members=t.members.map(e=>[e[0],xr(e[1]),e.slice(2)]);break;default:throw new Error(`Unknown type assertion: ${t.kind}`)}return t}function Sr(e){if("tynder/1.0"!==e.version)throw new Error(`Unknown schema version: ${e.version}`);const t=new Map,n=e.ns["."];for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.set(e,{ty:xr(n[e]),exported:!1,resolved:!1});return Object(yt.a)(t)}function Nr(e){return Sr(JSON.parse(e))}var Tr=n(10),Ar=n(12);n.d(t,"ErrorTypes",(function(){return r.a})),n.d(t,"parse",(function(){return sr})),n.d(t,"compile",(function(){return cr})),n.d(t,"picked",(function(){return bt.i})),n.d(t,"omit",(function(){return bt.e})),n.d(t,"partial",(function(){return bt.h})),n.d(t,"intersect",(function(){return bt.c})),n.d(t,"oneOf",(function(){return bt.f})),n.d(t,"subtract",(function(){return bt.p})),n.d(t,"primitive",(function(){return bt.j})),n.d(t,"regexpPatternStringType",(function(){return bt.l})),n.d(t,"primitiveValue",(function(){return bt.k})),n.d(t,"optional",(function(){return bt.g})),n.d(t,"repeated",(function(){return bt.m})),n.d(t,"sequenceOf",(function(){return bt.n})),n.d(t,"spread",(function(){return bt.o})),n.d(t,"enumType",(function(){return bt.b})),n.d(t,"objectType",(function(){return bt.d})),n.d(t,"derived",(function(){return bt.a})),n.d(t,"symlinkType",(function(){return bt.q})),n.d(t,"withName",(function(){return bt.B})),n.d(t,"withTypeName",(function(){return bt.E})),n.d(t,"withOriginalTypeName",(function(){return bt.C})),n.d(t,"withDocComment",(function(){return bt.r})),n.d(t,"withRange",(function(){return bt.D})),n.d(t,"withMinValue",(function(){return bt.y})),n.d(t,"withMaxValue",(function(){return bt.w})),n.d(t,"withGreaterThan",(function(){return bt.s})),n.d(t,"withLessThan",(function(){return bt.t})),n.d(t,"withMinLength",(function(){return bt.x})),n.d(t,"withMaxLength",(function(){return bt.v})),n.d(t,"withMatch",(function(){return bt.u})),n.d(t,"withMsg",(function(){return bt.z})),n.d(t,"withMsgId",(function(){return bt.A})),n.d(t,"generateTypeScriptCode",(function(){return fr})),n.d(t,"generateJsonSchemaObject",(function(){return br})),n.d(t,"generateJsonSchema",(function(){return yr})),n.d(t,"generateProto3Code",(function(){return $r})),n.d(t,"generateGraphQlCode",(function(){return jr})),n.d(t,"TynderSchemaVersion",(function(){return"tynder/1.0"})),n.d(t,"serializeToObject",(function(){return kr})),n.d(t,"serialize",(function(){return wr})),n.d(t,"deserializeFromObject",(function(){return Sr})),n.d(t,"deserialize",(function(){return Nr})),n.d(t,"validateRoot",(function(){return Tr.c})),n.d(t,"validate",(function(){return Tr.b})),n.d(t,"getType",(function(){return Tr.a})),n.d(t,"pickRoot",(function(){return Ar.c})),n.d(t,"pick",(function(){return Ar.b})),n.d(t,"patch",(function(){return Ar.a}))}])}));
//# sourceMappingURL=tynder.min.js.map